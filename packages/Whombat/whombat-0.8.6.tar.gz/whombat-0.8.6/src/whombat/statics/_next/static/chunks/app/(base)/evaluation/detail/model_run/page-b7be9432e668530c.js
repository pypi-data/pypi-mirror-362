(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6578],{69697:function(e,t,n){Promise.resolve().then(n.bind(n,93849))},99376:function(e,t,n){"use strict";var r=n(35475);n.o(r,"notFound")&&n.d(t,{notFound:function(){return r.notFound}}),n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(t,{useSearchParams:function(){return r.useSearchParams}}),n.o(r,"useSelectedLayoutSegment")&&n.d(t,{useSelectedLayoutSegment:function(){return r.useSelectedLayoutSegment}})},66100:function(e,t,n){"use strict";let r=(0,n(2265).createContext)({name:"",description:"",tags:[],uuid:"",created_on:new Date,task:"Sound Event Detection"});t.Z=r},93849:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ed}});var r=n(57437),a=n(99376),s=n(2265),l=n(69064),o=n(23857),i=n(58435);function d(e){let{uuid:t,modelRun:n,enabled:r=!0,onUpdate:a,onDelete:s,onEvaluate:l,onError:d}=e;if(void 0!==n&&n.uuid!==t)throw Error("Model Run uuid does not match");let{query:c,useMutation:u,useQuery:x,useDestruction:m}=(0,i.ZP)({id:t,initialData:n,name:"model_run",enabled:r,queryFn:o.Z.modelRuns.get,onError:d}),h=u({mutationFn:o.Z.modelRuns.update,onSuccess:a}),v=u({mutationFn:o.Z.modelRuns.evaluate,onSuccess:l,withUpdate:!1}),f=m({mutationFn:o.Z.modelRuns.delete,onSuccess:s});return{...c,update:h,delete:f,evaluate:v,useQuery:x}}var c=n(31476),u=n(70452),x=n(80207);function m(e){let{modelRun:t,onDeleteModelRun:n}=e;return(0,r.jsx)("div",{className:"flex flex-row gap-2 justify-center",children:(0,r.jsx)(h,{onDelete:n,modelRun:t})})}function h(e){let{modelRun:t,onDelete:n}=e;return(0,r.jsx)(u.Z,{title:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.aN,{className:"inline-block mr-2 w-8 h-8 text-red-500"}),"Are you sure you want to delete this model run?"]}),button:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.pJ,{className:"inline-block mr-2 w-5 h-5"}),"Delete"]}),mode:"text",variant:"danger",children:e=>{let{close:a}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("p",{children:"This action cannot be undone. This will permanently delete the model run with all its predictions and evaluations."}),(0,r.jsx)("h2",{className:"p-4 font-extrabold text-center",children:t.name}),(0,r.jsx)("p",{children:"Do you want to proceed?"})]}),(0,r.jsxs)("div",{className:"flex flex-row gap-2 justify-end mt-4",children:[(0,r.jsxs)(x.Z,{tabIndex:0,mode:"text",variant:"danger",onClick:n,children:[(0,r.jsx)(c.pJ,{className:"inline-block mr-2 w-5 h-5"}),"Delete"]}),(0,r.jsxs)(x.Z,{tabIndex:1,mode:"outline",variant:"primary",onClick:a,children:[(0,r.jsx)(c.Tw,{className:"inline-block mr-2 w-5 h-5"}),"Cancel"]})]})]})}})}function v(e){let{modelRun:t,onDeleteModelRun:n}=e,{data:a=t,delete:{mutateAsync:o}}=d({uuid:t.uuid,modelRun:t,onDelete:n}),i=(0,s.useCallback)(async()=>{l.ZP.promise(o(),{loading:"Deleting model run...",success:"Model run deleted",error:"Failed to delete model"})},[o]);return(0,r.jsx)(m,{modelRun:a,onDeleteModelRun:i})}var f=n(11713),p=n(39241);function g(e){var t;return(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsxs)("div",{className:"flex flex-row justify-between items-center gap-8",children:[(0,r.jsx)(p.Z,{icon:(0,r.jsx)(c.Vr,{className:"h-5 w-5 inline-block text-stone-500 mr-1 align-middle"}),title:"Overall Score",value:(100*e.evaluation.score).toFixed(2)}),(0,r.jsxs)("div",{className:"flex grow flex-col gap-2 items-end",children:[(0,r.jsx)("span",{className:"text-md font-bold text-stone-500",children:"Metrics"}),(0,r.jsx)("div",{className:"flex flex-row flex-wrap gap-8",children:null===(t=e.evaluation.metrics)||void 0===t?void 0:t.map(e=>(0,r.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,r.jsx)("span",{className:"text-sm text-stone-500",children:e.name}),(0,r.jsx)("span",{className:"text-lg",children:(100*e.value).toFixed(2)})]},e.name))})]})]}),(0,r.jsx)("div",{className:"flex flex-row justify-end",children:(0,r.jsxs)("span",{className:"text-sm text-stone-500 ",children:["Evaluated on ",e.evaluation.created_on.toLocaleString()]})})]})}var j=n(27432),b=n(65903),w=n(35535),N=n(55047);function y(e){return(0,r.jsxs)(j.Z,{children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(w.H4,{children:"Evaluation"}),(0,r.jsx)("span",{className:"text-sm text-stone-500",children:"Here you can see the evaluation for this model predictions when compared against the evaluation set."})]}),(0,r.jsx)("div",{className:"flex items-center",children:e.isLoading?(0,r.jsx)(x.Z,{mode:"text",variant:"secondary",onClick:e.onEvaluate,disabled:!0,children:"Evaluate"}):null==e.evaluation?(0,r.jsx)(x.Z,{mode:"text",onClick:e.onEvaluate,children:"Evaluate"}):(0,r.jsx)(x.Z,{mode:"text",onClick:e.onEvaluate,children:"Update"})})]}),(0,r.jsx)("div",{className:"mt-4",children:e.isLoading?(0,r.jsx)(N.Z,{}):null==e.evaluation?(0,r.jsx)(k,{}):(0,r.jsx)(g,{evaluation:e.evaluation})})]})}function k(){return(0,r.jsx)(b.Z,{children:(0,r.jsxs)("p",{children:["This model run has not been evaluated yet! Evaluate this model run by clicking the",(0,r.jsx)("span",{className:"text-emerald-500",children:" Evaluate "}),"button above."]})})}function Z(e){let{modelRun:t,evaluationSet:n,onEvaluate:a}=e,{data:s=t,isLoading:i,evaluate:c}=d({uuid:t.uuid,modelRun:t,onEvaluate:a}),{data:u,isLoading:x}=(0,f.a)({queryKey:["evaluation","model_run",s,"evaluation_set",n],retry:!1,queryFn:()=>o.Z.modelRuns.getEvaluation(s,n)});return(0,r.jsx)(y,{modelRun:s,evaluationSet:n,evaluation:u||void 0,isLoading:i||x,onEvaluate:()=>l.ZP.promise(c.mutateAsync(n),{loading:"Evaluating model run...",success:"Model run evaluated",error:"Failed to evaluate model run"})})}var C=n(81537),E=n(24764),S=n(47463),P=n(18647),T=n(5174),F=n(1593),R=n(62630),M=n(75398),_=n(26512),q=n(38351),A=n(42802),D=n(7041);function H(e){let t=e.clipEvaluation.clip_annotation.clip,n=t.recording,a=(0,A.Z)(),s=(0,R.Z)(),l=(0,M.Z)(),o=(0,D.Z)({clip:t,spectrogramSettings:l.settings}),i=(0,q.Z)({viewport:o,recording:n,audioSettings:s.settings}),{withControls:d=!0,withViewportBar:c=!0,withHotKeys:u=!0}=e;return(0,F.Z)({spectrogramState:a,audio:i,viewport:o,enabled:u}),(0,r.jsx)(_.Z,{ViewportToolbar:d?(0,r.jsx)(T.Z,{state:a,viewport:o}):void 0,Player:d?(0,r.jsx)(C.Z,{audio:i,samplerate:n.samplerate,onChangeSpeed:e=>s.dispatch({type:"setSpeed",speed:e})}):void 0,SettingsMenu:d?(0,r.jsx)(S.Z,{samplerate:n.samplerate,audioSettings:s,spectrogramSettings:l}):void 0,ViewportBar:c?(0,r.jsx)(P.Z,{viewport:o}):void 0,Canvas:(0,r.jsx)(E.Z,{audioSettings:s.settings,spectrogramSettings:l.settings,state:a,recording:n,audio:i,viewport:o,height:e.height})})}var z=n(45906),L=n(26596);let V={},B=[];var I=n(33857),K=n(65781);function U(e){var t;let{threshold:n=.5,tagColorFn:a=K.vm}=e,l=(0,s.useMemo)(()=>{var t;return new Map(null===(t=e.predictedTags)||void 0===t?void 0:t.filter(e=>e.score>=n).map(e=>[(0,K.ix)(e.tag),e.score]))},[e.predictedTags,n]),o=(0,s.useMemo)(()=>{var t;return new Set(null===(t=e.tags)||void 0===t?void 0:t.map(K.ix))},[e.tags]),i=(0,s.useMemo)(()=>{var t;return null===(t=e.tags)||void 0===t?void 0:t.map(e=>{var t;let r=(0,K.ix)(e),a=null!==(t=l.get(r))&&void 0!==t?t:0;return{key:r,tag:e,correct:a>=n,score:a}}).sort((e,t)=>t.score-e.score)},[e.tags,l,n]),d=(0,s.useMemo)(()=>{var t;return null===(t=e.predictedTags)||void 0===t?void 0:t.filter(e=>e.score>n).map(e=>{let t=(0,K.ix)(e.tag),n=e.score,r=o.has(t);return{key:t,predictedTag:e,correct:r,score:n}}).sort((e,t)=>t.score-e.score)},[e.predictedTags,o,n]);return(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("h5",{className:"font-bold text-stone-500",children:"Predicted"}),null==d?void 0:d.map(t=>{let{predictedTag:n,key:s,score:l,correct:o}=t;return(0,r.jsxs)("div",{className:"inline-flex gap-4 items-center",children:[(0,r.jsx)(O,{score:l,correct:o}),(0,r.jsx)(I.ZP,{tag:n.tag,onClick:()=>{var t;return null===(t=e.onClickPredictedTag)||void 0===t?void 0:t.call(e,n)},...a(n.tag)})]},s)}),(null==d?void 0:d.length)===0&&(0,r.jsx)(b.Z,{outerClassName:"p-0",children:"No predicted tags."})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("h5",{className:"font-bold text-stone-500",children:"True"}),null==i?void 0:i.map(t=>{let{key:n,tag:a,score:s,correct:l}=t;return(0,r.jsxs)("div",{className:"inline-flex gap-4 items-center",children:[(0,r.jsx)(O,{score:s,correct:l,inverted:0==s}),(0,r.jsx)(I.ZP,{tag:a,onClick:()=>{var t;return null===(t=e.onClickTrueTag)||void 0===t?void 0:t.call(e,a)},...(0,K.vm)(a)})]},n)}),(null===(t=e.tags)||void 0===t?void 0:t.length)===0&&(0,r.jsx)(b.Z,{outerClassName:"p-0",children:"No tags."})]})]})}function O(e){let{score:t,correct:n,inverted:a=!1}=e,s=function(e){let{score:t,correct:n,inverted:r=!1}=e,a=function(e){switch(!0){case e>=.8:return"high";case e>=.6:return"medium";case e>=.4:return"low";case e>=.2:return"very-low";default:return"none"}}(r?1-t:t);return Q[n?"correct":"incorrect"][a]}({score:t,correct:n,inverted:a});return(0,r.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[(0,r.jsx)("div",{className:"inline-block w-3 h-3 rounded-full ".concat(s.bullet)}),null!=t&&(0,r.jsx)("span",{className:s.text,children:t.toFixed(2)})]})}let Q={correct:{high:{text:"text-emerald-500 font-bold",bullet:"bg-emerald-500"},medium:{text:"text-emerald-400 dark:text-emerald-600",bullet:"bg-emerald-400 dark:bg-emerald-600"},low:{text:"text-emerald-300 dark:text-emerald-700",bullet:"bg-emerald-300 dark:bg-emerald-700"},"very-low":{text:"text-emerald-200 dark:text-emerald-800",bullet:"bg-emerald-200 dark:bg-emerald-800"},none:{text:"text-emerald-100 dark:text-emerald-900 font-thin",bullet:"bg-emerald-100 dark:bg-emerald-900"}},incorrect:{high:{text:"text-rose-500 font-bold",bullet:"bg-rose-500"},medium:{text:"text-rose-400 dark:text-rose-600",bullet:"bg-rose-400 dark:bg-rose-600"},low:{text:"text-rose-300 dark:text-rose-700",bullet:"bg-rose-300 dark:bg-rose-700"},"very-low":{text:"text-rose-200 dark:text-rose-800",bullet:"bg-rose-200 dark:bg-rose-800"},none:{text:"text-rose-100 dark:text-rose-900 font-thin",bullet:"bg-rose-100 dark:bg-rose-900"}}};function Y(e){var t,n;let{clipEvaluation:a,threshold:s}=e;return(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-8",children:[(0,r.jsx)("div",{className:"col-span-1",children:null!=e.ClipEvaluationSpectrogram&&(0,r.jsx)(e.ClipEvaluationSpectrogram,{clipEvaluation:a,threshold:s,showAnnotations:e.showAnnotations,showPredictions:e.showPredictions})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex flex-row gap-4 p-4",children:[(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("span",{className:"font-bold text-md text-stone-500",children:"Clip Score"}),(0,r.jsx)("span",{className:"text-lg",children:(100*a.score).toFixed(2)})]}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("span",{className:"font-bold text-md text-stone-500",children:"Metrics"}),(0,r.jsxs)("span",{className:"inline-flex flex-wrap gap-4",children:[null===(t=a.metrics)||void 0===t?void 0:t.map(e=>(0,r.jsxs)("div",{className:"flex flex-row gap-2 items-center",children:[(0,r.jsx)("span",{className:"text-sm text-stone-500",children:e.name}),(0,r.jsx)("span",{className:"text-lg",children:(100*e.value).toFixed(2)})]},e.name)),(null===(n=a.metrics)||void 0===n?void 0:n.length)===0&&"-"]})]})]}),(0,r.jsx)(U,{tags:a.clip_annotation.tags||void 0,predictedTags:a.clip_prediction.tags||void 0,threshold:s})]})]})}var J=n(12984),G=n(60002),W=n(35351);function X(e){return(0,r.jsxs)(W.Zb,{className:"flex flex-col gap-2 w-full",children:[(0,r.jsx)(W.H4,{className:"text-lg font-bold text-stone-500",children:"Clip Explorer"}),(0,r.jsx)("p",{className:"text-sm text-stone-500",children:"Explore each of the evaluated clips."}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsxs)("div",{className:"flex flex-row gap-2 justify-between items-center",children:[e.NavigationControls,e.FilterControls]}),(0,r.jsx)("div",{className:"flex flex-row gap-2 items-center",children:e.FilterBar})]}),e.isLoading?(0,r.jsx)(W.gb,{}):e.isEmpty?(0,r.jsx)(W.HY,{children:(0,r.jsx)("p",{children:"No clip predictions found"})}):e.ClipEvaluation]})}function $(e){return(0,r.jsxs)("div",{className:"inline-flex gap-4 items-center",children:[e.FilterMenu,(0,r.jsxs)("div",{className:"inline-flex gap-1 items-center",children:[(0,r.jsx)("span",{className:"inline-block text-sm text-stone-500",children:"Show Annotations:"}),(0,r.jsx)(G.Z,{label:"annotations",isSelected:e.showAnnotations,onChange:e.onToggleAnnotations})]}),(0,r.jsxs)("div",{className:"inline-flex gap-1 items-center",children:[(0,r.jsx)("span",{className:"inline-block text-sm text-stone-500",children:"Show Predictions:"}),(0,r.jsx)(G.Z,{label:"predictions",isSelected:e.showPredictions,onChange:e.onTogglePredictions})]}),(0,r.jsxs)("div",{className:"inline-flex gap-1 items-center",children:[(0,r.jsx)("span",{className:"inline-block text-sm text-stone-500",children:"Threshold:"}),(0,r.jsx)("div",{className:"inline-flex items-center w-40",children:(0,r.jsx)(J.Z,{label:"threshold",minValue:0,maxValue:1,step:.05,formatter:e=>e.toFixed(2),value:e.threshold,onChange:t=>{var n;return null===(n=e.onThresholdChange)||void 0===n?void 0:n.call(e,t)}})})]})]})}function ee(e){return(0,r.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[(0,r.jsx)(W.zx,{mode:"text",variant:e.hasPrev?"primary":"secondary",onClick:e.onPrev,disabled:!e.hasPrev,children:(0,r.jsx)(c.jJ,{className:"w-6 h-6"})}),(0,r.jsx)(W.zx,{mode:"text",variant:e.hasNext||e.hasPrev?"primary":"secondary",onClick:e.onRandom,disabled:!e.hasPrev&&!e.hasNext,children:(0,r.jsx)(c.Dj,{className:"w-6 h-6"})}),(0,r.jsx)(W.zx,{mode:"text",variant:e.hasNext?"primary":"secondary",onClick:e.onNext,disabled:!e.hasNext,children:(0,r.jsx)(c.Ne,{className:"w-6 h-6"})}),null==e.index?(0,r.jsx)("span",{className:"inline-flex gap-1 items-center text-stone-500",children:"No item selected"}):(0,r.jsxs)("span",{className:"inline-flex gap-1 items-center text-stone-500",children:["Viewing item"," ",(0,r.jsx)("span",{className:"font-bold text-blue-500",children:e.index})," of"," ",(0,r.jsx)("span",{className:"font-bold",children:e.total})]})]})}function et(e){let{modelRun:t,evaluationSet:n}=e,{data:a,isLoading:s,isError:l}=(0,f.a)({queryKey:["evaluation","model_run",t,"evaluation_set",n],retry:!1,queryFn:()=>o.Z.modelRuns.getEvaluation(t,n)});return s?(0,r.jsx)(W.gb,{}):l||null==a?(0,r.jsx)(W.HY,{children:"No evaluation"}):(0,r.jsx)(en,{evaluation:a})}function en(e){let{evaluation:t}=e,{items:n,total:a,isLoading:l,pagination:i}=function(){let{filter:e=V,fixed:t=B,pageSize:n=10,enabled:r=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,z.Z)({defaults:e,fixed:t}),{query:s,pagination:l,items:i,total:d}=(0,L.Z)({name:"clip_evaluations",queryFn:o.Z.clipEvaluations.getMany,pageSize:n,filter:a.filter,enabled:r});return null!=s.error&&console.error(s.error),{...s,filter:a,pagination:l,items:i,total:d}}({pageSize:10,filter:(0,s.useMemo)(()=>({evaluation:t}),[t]),fixed:["evaluation"]}),d=function(e){let{initial:t,items:n,total:r,pagination:a}=e,[l,o]=(0,s.useState)(t||null),{page:i,pageSize:d,setPage:c}=a,u=(0,s.useMemo)(()=>null==l?null:l+i*d,[l,i,d]),x=(0,s.useMemo)(()=>null==u?r>0:u<r-1,[u,r]),m=(0,s.useMemo)(()=>null==u?r>0:u>0,[u,r]),h=(0,s.useCallback)(e=>{let t=Math.floor(e/d),n=e%d;c(t),o(n)},[d,c]),v=(0,s.useCallback)(()=>{if(x){if(null==u)return h(0);h(u+1)}},[x,u,h]),f=(0,s.useCallback)(()=>{if(m){if(null==u)return h(0);h(u-1)}},[m,u,h]),p=(0,s.useCallback)(()=>{0!==r&&h(Math.floor(Math.random()*r))},[r,h]);return{current:(0,s.useMemo)(()=>null==l?null:n[l],[l,n]),index:u,hasNext:x,hasPrev:m,next:v,prev:f,goTo:h,random:p}}({items:n,total:a,pagination:i}),c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,n]=(0,s.useState)(e.threshold||.5),[r,a]=(0,s.useState)(void 0===e.showAnnotations||e.showAnnotations),[l,o]=(0,s.useState)(void 0===e.showPredictions||e.showPredictions);return{showPredictions:l,showAnnotations:r,threshold:t,toggleAnnotations:(0,s.useCallback)(()=>{a(e=>!e)},[]),togglePredictions:(0,s.useCallback)(()=>{o(e=>!e)},[]),setThreshold:n}}();return(0,r.jsx)(X,{NavigationControls:(0,r.jsx)(ee,{index:d.index,total:a,hasNext:d.hasNext,hasPrev:d.hasPrev,onNext:d.next,onPrev:d.prev,onRandom:d.random}),FilterControls:(0,r.jsx)($,{threshold:c.threshold,onThresholdChange:c.setThreshold,showPredictions:c.showPredictions,onToggleAnnotations:c.toggleAnnotations,showAnnotations:c.showAnnotations,onTogglePredictions:c.togglePredictions}),ClipEvaluation:null==d.current?void 0:(0,r.jsx)(Y,{clipEvaluation:d.current,threshold:c.threshold,ClipEvaluationSpectrogram:er}),isLoading:l,isEmpty:0===a})}function er(e){return(0,r.jsx)(H,{clipEvaluation:e.clipEvaluation,height:400,withViewportBar:!1})}var ea=n(45147);function es(e){var t;return(0,r.jsxs)(j.Z,{children:[(0,r.jsxs)("div",{className:"px-4 sm:px-0",children:[(0,r.jsx)("h3",{className:"text-base font-semibold leading-7 text-stone-900 dark:text-stone-200",children:e.modelRun.name}),(0,r.jsx)("p",{className:"text-xs text-stone-500",children:e.modelRun.version})]}),(0,r.jsx)("div",{className:"mt-6 border-t border-stone-300 dark:border-stone-700",children:(0,r.jsxs)("dl",{className:"divide-y divide-stone-500",children:[(0,r.jsx)("div",{className:"py-6 px-4 sm:px-0",children:(0,r.jsx)(ea.ZP,{name:"Description",value:null!==(t=e.modelRun.description)&&void 0!==t?t:"",onChange:t=>{var n;return null===(n=e.onUpdate)||void 0===n?void 0:n.call(e,{description:t})},type:"textarea",editable:!0})}),(0,r.jsx)("div",{className:"py-6 px-4 sm:px-0",children:(0,r.jsx)(ea.ZP,{name:"Imported On",value:e.modelRun.created_on,type:"date"})})]})})]})}function el(e){let{data:t=e.modelRun,update:n}=d({uuid:e.modelRun.uuid,modelRun:e.modelRun,onUpdate:t=>{var n;l.ZP.success("Model run updated"),null===(n=e.onUpdate)||void 0===n||n.call(e,t)}});return(0,r.jsx)(es,{modelRun:t,onUpdate:n.mutate})}var eo=n(15947),ei=n(66100);function ed(){let e=(0,a.useRouter)(),t=(0,a.useSearchParams)(),n=t.get("model_run_uuid"),o=t.get("evaluation_set_uuid"),i=(0,s.useContext)(ei.Z),c=(0,s.useCallback)(()=>{null==o&&e.push("/evaluation/"),e.push("/evaluation/detail/model_runs/?evaluation_set_uuid=".concat(o))},[e,o]),u=(0,s.useCallback)(e=>{var t;(null===(t=e.response)||void 0===t?void 0:t.status)===404&&(l.ZP.error("Model run not found"),c())},[c]),x=(0,s.useCallback)(()=>{e.refresh()},[e]),m=d({uuid:null!=n?n:"",onError:u,enabled:null!=n});return m.isLoading?(0,r.jsx)(N.Z,{}):m.isError||null==m.data?u(m.error):(0,r.jsx)(eo.Z,{SideBar:(0,r.jsx)(el,{modelRun:m.data}),Actions:(0,r.jsx)(v,{modelRun:m.data,onDeleteModelRun:c}),MainContent:(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsx)(Z,{modelRun:m.data,evaluationSet:i,onEvaluate:x}),(0,r.jsx)(et,{modelRun:m.data,evaluationSet:i})]})})}},24764:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(57437),a=n(2265),s=n(17047),l=n(8717),o=n(27490),i=n(63294),d=n(2676),c=n(43289);function u(e){let{viewport:t,recording:n,audioSettings:u,spectrogramSettings:x,audio:m,state:h,height:v=600}=e,[f,p]=(0,a.useState)({time:0,freq:0}),{drawFn:g}=(0,l.Z)({recording:n,audioSettings:u,spectrogramSettings:x}),{drawFn:j,...b}=(0,o.Z)({viewport:t,audio:m,state:h.mode,onZoom:h.enablePanning}),w=(0,a.useCallback)((e,t)=>{g(e,t);let n=(0,c.f5)(m.currentTime,t,e.canvas.width);(0,d.Z)(e,n),j(e,t),(0,i.r)(e,f,t)},[m.currentTime,g,j,f]);return(0,r.jsx)(s.Z,{viewport:t.viewport,height:v,drawFn:w,onHover:e=>{let{position:t}=e;return p(t)},...b})}},1593:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(44481);function a(e){let{audio:t,spectrogramState:n,viewport:a,enabled:s=!0}=e;(0,r.y1)("space",t.togglePlay,{preventDefault:!0,description:"Toggle playing",enabled:s}),(0,r.y1)("z",n.enableZooming,{description:"Enable spectrogram zooming",enabled:s}),(0,r.y1)("x",n.enablePanning,{description:"Enable spectrogram panning",enabled:s}),(0,r.y1)("b",a.back,{description:"Go back to previous view",enabled:s})}},15947:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(57437);function a(e){let{MainContent:t,SideBar:n,Actions:a}=e;return(0,r.jsxs)("div",{className:"flex flex-row flex-wrap gap-8 justify-between md:flex-nowrap w-100",children:[(0,r.jsx)("div",{className:"grow",children:t}),(0,r.jsxs)("div",{className:"flex flex-col flex-none gap-4 max-w-sm",children:[a,(0,r.jsx)("div",{className:"sticky top-8 w-full",children:n})]})]})}},26512:function(e,t,n){"use strict";var r=n(57437),a=n(2265),s=n(27432);let l=(0,a.memo)(function(e){return(0,r.jsxs)(s.Z,{children:[(0,r.jsxs)("div",{className:"flex flex-row gap-4",children:[e.ViewportToolbar,e.Player,e.SettingsMenu]}),e.Canvas,e.ViewportBar]})});t.Z=l},45510:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(57437);function a(e){let{children:t}=e;return(0,r.jsx)("header",{className:"shadow bg-stone-50 dark:bg-stone-800",children:(0,r.jsx)("div",{className:"py-3 px-2 max-w-7xl sm:px-3 lg:px-6",children:t})})}},5887:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(57437),a=n(45510),s=n(35535);function l(e){let{text:t}=e;return(0,r.jsx)(a.Z,{children:(0,r.jsx)(s.H1,{children:t})})}},81114:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(57437),a=n(36760),s=n.n(a);function l(e){let{title:t,className:n,children:a}=e;return(0,r.jsxs)("div",{className:s()(n,"flex items-center p-3 text-sm text-blue-800 border border-blue-300 rounded-lg bg-blue-50 dark:bg-gray-800 dark:text-blue-400 dark:border-blue-800"),role:"alert",children:[(0,r.jsx)("svg",{className:"inline flex-shrink-0 mr-3 w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})}),(0,r.jsx)("span",{className:"sr-only",children:"Info"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:null==t?"Info!":t})," ",a]})]})}},14556:function(e,t,n){"use strict";n.d(t,{default:function(){return l}});var r=n(57437),a=n(33044),s=n(69064);function l(){return(0,r.jsx)(s.x7,{position:"top-right",children:e=>(0,r.jsxs)(a.u,{appear:!0,show:e.visible,className:"transform p-4 flex rounded items-center divide-x divide-stone-300 space-x-4 space-x border dark:divide-stone-500 shadow-lg bg-stone-50 border-stone-200 dark:bg-stone-700 dark:border-stone-800",enter:"transition-all duration-150",enterFrom:"opacity-0 scale-50",enterTo:"opacity-100 scale-100",leave:"transition-all duration-150",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-75",children:[(0,r.jsx)(s.Ih,{toast:e}),(0,r.jsx)("div",{className:"pl-4 max-w-lg font-normal",children:(0,r.jsx)("p",{className:"px-2 whitespace-pre-line",children:(0,s.GK)(e.message,e)})})]})})}},99125:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(57437),a=n(36760),s=n.n(a);function l(e){let{children:t,active:n=!1,className:a,...l}=e;return(0,r.jsx)("button",{...l,className:s()("whitespace-nowrap rounded-lg bg-stone-50 p-2 text-center text-sm font-medium dark:bg-stone-800 focus:outline-none focus:ring-4 focus:ring-emerald-500/50 flex gap-1 items-center",n?"text-emerald-500":"text-stone-700 hover:bg-stone-200 hover:text-stone-900 dark:text-stone-400 dark:hover:bg-stone-700 dark:hover:text-stone-300",a),children:t})}},35351:function(e,t,n){"use strict";n.d(t,{zx:function(){return r.Z},Zb:function(){return a.Z},dk:function(){return w.ZP},Vq:function(){return f.Z},HY:function(){return j.Z},H2:function(){return b.H2},H3:function(){return b.H3},H4:function(){return b.H4},kI:function(){return p.Z},gb:function(){return g.Z}}),n(70452);var r=n(80207),a=n(27432),s=n(57437),l=n(2265);n(14957),n(47219);var o=n(36760),i=n.n(o),d=n(70935),c=n(682),u=n(33631),x=n(26073);function m(e){var t;let n=(0,l.useRef)(null),r=(0,x.n)(e),{listBoxRef:a=n,listState:o=r}=e,{listBoxProps:i}=(0,d.c)(e,o,a);return(0,s.jsxs)("ul",{...i,className:"overflow-y-auto py-1 max-w-sm text-base rounded-md divide-y ring-1 ring-opacity-5 shadow-lg sm:text-sm focus:outline-none text-stone-800 divide-stone-200 bg-stone-50 ring-stone-300 dark:text-stone-200 dark:divide-stone-600 dark:bg-stone-700 dark:ring-stone-600",ref:a,children:[Array.from(o.collection,e=>"section"===e.type?(0,s.jsx)(v,{section:e,state:o},e.key):(0,s.jsx)(h,{item:e,state:o},e.key)),0===o.collection.size?null===(t=e.renderEmptyState)||void 0===t?void 0:t.call(e):null]})}function h(e){let{item:t,state:n}=e,r=(0,l.useRef)(null),{optionProps:a,isSelected:o,isFocused:d,isDisabled:u}=(0,c.F)({key:t.key},n,r);return(0,s.jsx)("li",{...a,ref:r,className:i()("cursor-pointer text-stone-800 dark:text-stone-200 py-2 pl-4 pr-2 outline-none",{"outline-2 outline-emerald-500 outline-offset-0":d,"bg-stone-300 dark:bg-stone-800 text-stone-500 dark:text-stone-500":u,"bg-emerald-600":o,"bg-stone-200 dark:bg-stone-600 text-stone-900 dark:text-stone-100":d&&!o}),children:t.rendered})}function v(e){var t,n,r;let{section:a,state:l}=e,{itemProps:o,headingProps:i,groupProps:d}=(0,u.T)({heading:a.rendered,"aria-label":a["aria-label"]});return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("li",{...o,className:"py-2",children:[a.rendered&&(0,s.jsx)("span",{...i,className:"py-4 px-1 text-base font-bold",children:a.rendered}),(0,s.jsx)("ul",{...d,className:"p-0 list-none",children:Array.from(null!==(r=null===(t=(n=l.collection).getChildren)||void 0===t?void 0:t.call(n,a.key))&&void 0!==r?r:[],e=>(0,s.jsx)(h,{item:e,state:l},e.key))})]})})}m.Option=h,m.Section=v,n(41332);var f=n(17571);n(45510),n(5887);var p=n(81114);n(14556),n(60912),n(8990),n(83470),n(53609),n(39241);var g=n(55047);n(99125),n(29379),n(71021),n(90730);var j=n(65903),b=n(35535),w=n(45147)},63294:function(e,t,n){"use strict";n.d(t,{r:function(){return s}});var r=n(50639),a=n(43289);function s(e,t,n){let{buffer:s=5}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=(0,a.NY)(t.freq,n,e.canvas.height),o=(0,a.f5)(t.time,n,e.canvas.width);(0,r.F6)(e,{borderColor:"black",borderWidth:1,borderDash:[10,5]}),e.beginPath(),e.moveTo(0,l),e.lineTo(e.canvas.width,l),e.stroke(),e.beginPath(),e.moveTo(o,0),e.lineTo(o,e.canvas.height),e.stroke(),(0,r.j_)(e,{fontColor:"black",textBaseline:"bottom",fontSize:14}),e.fillText("".concat(t.freq.toFixed(2)," Hz"),o+s,l-s);let i=e.measureText("".concat(t.freq.toFixed(2)," Hz")).emHeightAscent;e.fillText("".concat(t.time.toFixed(5)," s"),o+s,l-s-i)}},58435:function(e,t,n){"use strict";n.d(t,{ZP:function(){return o}});var r=n(21770),a=n(11713),s=n(29827),l=n(2265);function o(e){let{id:t,name:n,enabled:o=!0,queryFn:i,onError:d,staleTime:c=1/0,...u}=e,x=(0,s.NL)(),m=(0,a.a)({queryKey:[n,t],queryFn:()=>i(t),enabled:o,staleTime:c,...u}),h=(0,l.useCallback)(e=>{x.setQueryData([n,t],e)},[x,t,n]),{data:v,status:f,error:p,isError:g}=m;return(0,l.useEffect)(()=>{g&&(null==d||d(p))},[p,g,d]),{query:m,client:x,setData:h,useMutation:e=>{let{mutationFn:a,withUpdate:s=!0,...o}=e;return function(e){let{id:t,data:n,name:a,status:s,client:o,withUpdate:i=!0,mutationFn:d,onSuccess:c,...u}=e,x=(0,l.useCallback)(async e=>{if("pending"===s)throw Error("No data for object of type ".concat(a," (id=").concat(t,"). ")+"Either the query is not enabled or the query is still loading.");if("error"===s)throw Error("Error while loading object of type ".concat(a," (id=").concat(t,"),")+" cannot mutate");if(null==n)throw Error("No data for object of type ".concat(a," (id=").concat(t,"). ")+"The object is null, cannot mutate");return await d(n,e)},[s,n,d,a,t]);return(0,r.D)({...u,mutationFn:x,onSuccess:(e,n,r)=>{i&&o.setQueryData([a,t],e),null==c||c(e,n,r)}})}({id:t,data:v,status:f,client:x,mutationFn:a,name:n,withUpdate:s,...o})},useQuery:e=>{let{queryFn:r,secondaryName:s,enabled:o=!1,...i}=e;return function(e){let{id:t,query:n,name:r,secondaryName:s,enabled:o=!1,queryFn:i,...d}=e,{status:c,data:u}=n,x=(0,l.useCallback)(async()=>{if("pending"===c)throw Error("No data for object of type ".concat(r," (id=").concat(t,"). ")+"Either the query is not enabled or the query is still loading.");if("error"===c)throw Error("Error while loading object of type ".concat(r," (id=").concat(t,"), cannot mutate"));return await i(u)},[c,u,i,r,t]);return(0,a.a)({...d,queryFn:x,queryKey:[r,t,s],enabled:"pending"!==c&&"error"!==c&&o})}({id:t,query:m,queryFn:r,secondaryName:s,name:n,enabled:o,...i})},useDestruction:e=>{let{mutationFn:a,...s}=e;return function(e){let{id:t,query:n,client:a,name:s,mutationFn:o,onSuccess:i,...d}=e,{status:c,data:u}=n,x=(0,l.useCallback)(async()=>{if("pending"===c)throw Error("No data for object of type ".concat(s," (id=").concat(t,"). ")+"Either the query is not enabled or the query is still loading.");if("error"===c)throw Error("Error while loading object of type ".concat(s," (id=").concat(t,"), cannot mutate"));return await o(u)},[c,u,o,s,t]);return(0,r.D)({...d,mutationFn:x,onSuccess:(e,n,r)=>{a.removeQueries({queryKey:[s,t]}),null==i||i(e,n,r)}})}({id:t,query:m,client:x,mutationFn:a,name:n,...s})}}}},7041:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(2265),a=n(75326),s=n(78705),l=n(12227);function o(e){let{clip:t,spectrogramSettings:n=s.Ek}=e,o=(0,r.useMemo)(()=>({time:{min:t.start_time,max:t.end_time},freq:{min:0,max:t.recording.samplerate/2}}),[t.recording.samplerate,t.start_time,t.end_time]),i=(0,r.useMemo)(()=>(0,l.AX)({startTime:o.time.min,endTime:o.time.max,samplerate:t.recording.samplerate,windowSize:n.window_size,overlap:n.overlap}),[o,t.recording.samplerate,n.window_size,n.overlap]),d=(0,a.Z)({initial:i,bounds:o}),{set:c}=d;return(0,r.useEffect)(()=>{c(i)},[t.uuid,c]),d}},41332:function(){},33631:function(e,t,n){"use strict";n.d(t,{T:function(){return a}});var r=n(40641);function a(e){let{heading:t,"aria-label":n}=e,a=(0,r.Me)();return{itemProps:{role:"presentation"},headingProps:t?{id:a,role:"presentation"}:{},groupProps:{role:"group","aria-label":n,"aria-labelledby":t?a:void 0}}}}},function(e){e.O(0,[6229,5501,6523,7928,7119,3464,9763,9064,3044,1713,2906,3633,5109,237,5883,9091,4588,3566,3857,2758,6063,2974,5036,2971,2117,1744],function(){return e(e.s=69697)}),_N_E=e.O()}]);