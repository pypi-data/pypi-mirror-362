(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7710],{59022:function(t,e,s){Promise.resolve().then(s.bind(s,47409))},47409:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return j}});var n=s(57437),i=s(2265),r=s(27142),a=s(27432),o=s(5887),u=s(10547),l=s(31476),c=s(45147),d=s(17571),h=s(13590),m=s(29501),x=s(67119),f=s(75004);let p=x.Ry({password:x.Z_(),password2:x.Z_()}).refine(t=>t.password===t.password2,{message:"Passwords do not match",path:["password2"]});function v(t){var e,s;let{register:i,handleSubmit:r,formState:{errors:a}}=(0,m.cI)({mode:"onChange",resolver:(0,h.F)(p)}),{update:{mutate:o}}=(0,u.Z)({user:t.user});return(0,n.jsxs)("form",{onSubmit:r(t=>{o({password:t.password})}),children:[(0,n.jsx)("div",{className:"mb-3",children:(0,n.jsx)(f.ZA,{label:"Password",name:"password",error:null===(e=a.password)||void 0===e?void 0:e.message,children:(0,n.jsx)(f.II,{type:"password",...i("password")})})}),(0,n.jsx)("div",{className:"mb-3",children:(0,n.jsx)(f.ZA,{label:"Confirm Password",name:"password2",error:null===(s=a.password2)||void 0===s?void 0:s.message,children:(0,n.jsx)(f.II,{type:"password",...i("password2")})})}),(0,n.jsx)("div",{children:(0,n.jsx)(f.II,{type:"submit",value:"Change"})})]})}function y(t){var e;let{user:s}=t,{update:{mutate:i}}=(0,u.Z)();return(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsxs)("div",{className:"inline-flex items-end px-4 sm:px-0",children:[(0,n.jsx)(l.tB,{className:"w-12 h-12 text-stone-500"}),(0,n.jsx)("h3",{className:"text-base font-semibold leading-7 text-stone-900 dark:text-stone-200",children:"Your Profile"})]}),(0,n.jsx)("p",{className:"text-stone-500",children:"Manage your public profile information here. Please note that this information is visible to other users. Your username is used for authentication, so ensure it's memorable."}),(0,n.jsxs)("div",{className:"mt-6 border-t border-stone-300 dark:border-stone-700",children:[(0,n.jsxs)("dl",{className:"divide-y divide-stone-500",children:[(0,n.jsx)("div",{className:"py-6 px-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:(0,n.jsx)(c.ZP,{name:"Username",value:s.username,onChange:t=>i({username:t}),type:"text",editable:!0})}),(0,n.jsx)("div",{className:"py-6 px-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:(0,n.jsx)(c.ZP,{name:"Name",value:null!==(e=s.name)&&void 0!==e?e:"",onChange:t=>i({name:t}),type:"text",editable:!0})}),(0,n.jsx)("div",{className:"py-6 px-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:(0,n.jsx)(c.ZP,{name:"Email",value:s.email,onChange:t=>i({email:t}),type:"text",editable:!0})})]}),(0,n.jsx)(d.Z,{mode:"text",title:"Change Password",label:"Change password",children:()=>(0,n.jsx)(v,{user:s})})]})]})}var b=s(89454);function j(){let t=(0,i.useContext)(b.Z);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.Z,{text:"Profile"}),(0,n.jsx)(r.Z,{children:(0,n.jsx)(a.Z,{className:"max-w-prose",children:(0,n.jsx)(y,{user:t})})})]})}},89454:function(t,e,s){"use strict";let n=(0,s(2265).createContext)({id:"",username:"",email:""});e.Z=n},10547:function(t,e,s){"use strict";s.d(e,{Z:function(){return o}});var n=s(29827),i=s(11713),r=s(21770),a=s(23857);function o(){let{user:t,onUpdate:e,onLogout:s,enabled:o=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=(0,n.NL)(),l=(0,i.a)({queryKey:["me"],queryFn:a.Z.user.me,initialData:t,staleTime:3e4,retry:!1,enabled:o,refetchOnWindowFocus:!1,refetchOnReconnect:!0,refetchOnMount:!0,refetchIntervalInBackground:!1}),c=(0,r.D)({mutationFn:a.Z.user.update,onSuccess:t=>{l.refetch(),null==e||e(t)}}),d=(0,r.D)({mutationFn:a.Z.auth.logout,onSuccess:()=>{u.removeQueries({queryKey:["me"]}),null==s||s()}});return{...l,update:c,logout:d}}},27142:function(t,e,s){"use strict";s.d(e,{Z:function(){return i}});var n=s(57437);function i(t){let{children:e}=t;return(0,n.jsx)("div",{className:"flex flex-col justify-center items-center px-16 py-8 w-full",children:e})}},27432:function(t,e,s){"use strict";s.d(e,{Z:function(){return a}});var n=s(57437),i=s(36760),r=s.n(i);function a(t){let{children:e,className:s,...i}=t;return(0,n.jsx)("div",{className:r()("border flex flex-col gap-3 p-4 rounded-md border-stone-200 dark:border-stone-800 text-stone-700 dark:text-stone-300",s),...i,children:e})}},45147:function(t,e,s){"use strict";s.d(e,{ZP:function(){return h},iV:function(){return c},pj:function(){return l}});var n=s(57437),i=s(36760),r=s.n(i),a=s(2265),o=s(31476),u=s(75004);function l(t){let{children:e,className:s,...i}=t;return(0,n.jsx)("dd",{className:r()("mt-1 w-full text-sm leading-6 text-stone-700 dark:text-stone-400 sm:col-span-2 sm:mt-0",s),...i,children:e})}function c(t){let{children:e,className:s,...i}=t;return(0,n.jsx)("dt",{className:r()("text-sm w-full font-medium leading-6 text-stone-900 dark:text-stone-300",s),...i,children:e})}function d(t){let{type:e,value:s,onChange:i}=t,[r,c]=(0,a.useState)(!1),[d,h]=(0,a.useState)(null!=s?s:null);if(!r){var m;return(0,n.jsxs)(l,{className:"flex flex-row justify-between",children:[(0,n.jsx)("p",{className:"whitespace-pre-wrap",children:null!==(m=null==s?void 0:s.toLocaleString())&&void 0!==m?m:""}),(0,n.jsx)("button",{onClick:()=>c(!0),className:"ml-2 text-sm underline text-stone-500",children:(0,n.jsx)(o.dY,{className:"inline-block w-5 h-5 text-blue-500"})})]})}let x=t=>{"Enter"!==t.key||t.shiftKey||(c(!1),null!=d&&(null==i||i(d))),"Escape"===t.key&&(c(!1),null!=s&&h(s))},f=()=>{c(!1),void 0!==s&&h(s)},p=t=>{h(t.target.value)};switch(e){case"email":case"text":return(0,n.jsx)(l,{className:"flex flex-row justify-between",children:(0,n.jsx)(u.II,{type:e,value:d,onKeyDown:x,onBlur:f,onChange:p,autoFocus:!0})});case"textarea":return(0,n.jsx)(l,{className:"flex flex-row justify-between",children:(0,n.jsx)(u.Kx,{value:d,onKeyDown:x,onBlur:f,onChange:p,autoFocus:!0})});case"number":return(0,n.jsx)(l,{className:"flex flex-row justify-between",children:(0,n.jsx)(u.II,{type:"number",value:d,onKeyDown:x,onBlur:f,onChange:p,autoFocus:!0})});case"date":return(0,n.jsx)(l,{className:"flex flex-row justify-between",children:(0,n.jsx)(u.II,{type:"date",value:d?d.toISOString().split("T")[0]:"",onKeyDown:x,onBlur:f,onChange:p,autoFocus:!0})});default:return null}}function h(t){let{name:e,value:s,editable:i=!1,type:r="text",onChange:a}=t;if(!i){var o;return(0,n.jsxs)("div",{className:"flex flex-col w-full",children:[(0,n.jsx)(c,{children:e}),(0,n.jsx)(l,{children:null!==(o=null==s?void 0:s.toLocaleString())&&void 0!==o?o:""})]})}return(0,n.jsxs)("div",{className:"flex flex-col w-full",children:[(0,n.jsx)(c,{children:e}),(0,n.jsx)(d,{value:s,type:r,onChange:a})]})}h.Term=c,h.Data=l},17571:function(t,e,s){"use strict";s.d(e,{Z:function(){return l},t:function(){return c}});var n=s(57437),i=s(33044),r=s(85109),a=s(2265),o=s(31476),u=s(80207);function l(t){let{title:e,children:s,label:i,open:r=!1,width:o="max-w-lg",...l}=t,[d,h]=(0,a.useState)(r);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.Z,{type:"button",onClick:()=>h(!0),...l,children:i}),(0,n.jsx)(c,{title:(0,n.jsx)("div",{children:e}),isOpen:d,onClose:()=>h(!1),children:t=>{let{close:e}=t;return(0,n.jsx)("div",{className:o,children:s({close:e})})}})]})}function c(t){let{title:e,children:s,onClose:l,isOpen:c=!0}=t;return(0,n.jsx)(i.u,{appear:!0,show:c,as:a.Fragment,children:(0,n.jsxs)(r.V,{as:"div",className:"relative z-50",onClose:()=>null==l?void 0:l(),children:[(0,n.jsx)(i.u.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,n.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),(0,n.jsx)("div",{className:"overflow-y-auto fixed inset-0",children:(0,n.jsx)("div",{className:"flex justify-center items-center p-4 min-h-full text-center",children:(0,n.jsx)(i.u.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,n.jsxs)(r.V.Panel,{className:"overflow-hidden p-6 w-full text-left align-middle rounded-2xl shadow-xl transition-all transform max-w-fit bg-stone-50 text-stone-700 z-[99999] dark:bg-stone-700 dark:text-stone-300",children:[(0,n.jsxs)(r.V.Title,{as:"div",className:"flex flex-row gap-4 justify-between items-center mb-4",children:[null!=e&&(0,n.jsx)("h3",{className:"text-lg font-medium leading-6 text-stone-900 dark:text-stone-100",children:e}),(0,n.jsx)(u.Z,{onClick:()=>null==l?void 0:l(),variant:"secondary",mode:"text",children:(0,n.jsx)(o.Tw,{className:"w-5 h-5"})})]}),(0,n.jsx)("div",{className:"mt-2",children:s({close:()=>null==l?void 0:l()})})]})})})})]})})}},45510:function(t,e,s){"use strict";s.d(e,{Z:function(){return i}});var n=s(57437);function i(t){let{children:e}=t;return(0,n.jsx)("header",{className:"shadow bg-stone-50 dark:bg-stone-800",children:(0,n.jsx)("div",{className:"py-3 px-2 max-w-7xl sm:px-3 lg:px-6",children:e})})}},35535:function(t,e,s){"use strict";s.d(e,{H1:function(){return a},H2:function(){return o},H3:function(){return u},H4:function(){return l}});var n=s(57437),i=s(36760),r=s.n(i);function a(t){let{children:e,className:s,...i}=t;return(0,n.jsx)("h1",{className:r()("text-2xl font-bold text-stone-800 dark:text-stone-300",s),...i,children:e})}function o(t){let{children:e,className:s,...i}=t;return(0,n.jsx)("h2",{className:r()("text-xl font-bold text-stone-800 dark:text-stone-300",s),...i,children:e})}function u(t){let{children:e,className:s,...i}=t;return(0,n.jsx)("h3",{className:r()("text-lg font-semibold leading-7 items-center text-stone-800 dark:text-stone-300",s),...i,children:e})}function l(t){let{children:e,className:s,...i}=t;return(0,n.jsx)("h4",{className:r()(s,"text-md font-semibold leading-6 text-stone-800 dark:text-stone-300"),...i,children:e})}},5887:function(t,e,s){"use strict";s.d(e,{Z:function(){return a}});var n=s(57437),i=s(45510),r=s(35535);function a(t){let{text:e}=t;return(0,n.jsx)(i.Z,{children:(0,n.jsx)(r.H1,{children:e})})}},2894:function(t,e,s){"use strict";s.d(e,{R:function(){return o},m:function(){return a}});var n=s(18238),i=s(7989),r=s(11255),a=class extends i.F{#t;#e;#s;constructor(t){super(),this.mutationId=t.mutationId,this.#e=t.mutationCache,this.#t=[],this.state=t.state||o(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#e.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(e=>e!==t),this.scheduleGc(),this.#e.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||("pending"===this.state.status?this.scheduleGc():this.#e.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(t){let e=()=>{this.#n({type:"continue"})};this.#s=(0,r.Mz)({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(Error("No mutationFn found")),onFail:(t,e)=>{this.#n({type:"failed",failureCount:t,error:e})},onPause:()=>{this.#n({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#e.canRun(this)});let s="pending"===this.state.status,n=!this.#s.canStart();try{if(s)e();else{this.#n({type:"pending",variables:t,isPaused:n}),await this.#e.config.onMutate?.(t,this);let e=await this.options.onMutate?.(t);e!==this.state.context&&this.#n({type:"pending",context:e,variables:t,isPaused:n})}let i=await this.#s.start();return await this.#e.config.onSuccess?.(i,t,this.state.context,this),await this.options.onSuccess?.(i,t,this.state.context),await this.#e.config.onSettled?.(i,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(i,null,t,this.state.context),this.#n({type:"success",data:i}),i}catch(e){try{throw await this.#e.config.onError?.(e,t,this.state.context,this),await this.options.onError?.(e,t,this.state.context),await this.#e.config.onSettled?.(void 0,e,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,e,t,this.state.context),e}finally{this.#n({type:"error",error:e})}}finally{this.#e.runNext(this)}}#n(t){this.state=(e=>{switch(t.type){case"failed":return{...e,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...e,isPaused:!0};case"continue":return{...e,isPaused:!1};case"pending":return{...e,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...e,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...e,data:void 0,error:t.error,failureCount:e.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}})(this.state),n.Vr.batch(()=>{this.#t.forEach(e=>{e.onMutationUpdate(t)}),this.#e.notify({mutation:this,type:"updated",action:t})})}};function o(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}},21770:function(t,e,s){"use strict";s.d(e,{D:function(){return c}});var n=s(2265),i=s(2894),r=s(18238),a=s(24112),o=s(45345),u=class extends a.l{#i;#r=void 0;#a;#o;constructor(t,e){super(),this.#i=t,this.setOptions(e),this.bindMethods(),this.#u()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){let e=this.options;this.options=this.#i.defaultMutationOptions(t),(0,o.VS)(this.options,e)||this.#i.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#a,observer:this}),e?.mutationKey&&this.options.mutationKey&&(0,o.Ym)(e.mutationKey)!==(0,o.Ym)(this.options.mutationKey)?this.reset():this.#a?.state.status==="pending"&&this.#a.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#a?.removeObserver(this)}onMutationUpdate(t){this.#u(),this.#l(t)}getCurrentResult(){return this.#r}reset(){this.#a?.removeObserver(this),this.#a=void 0,this.#u(),this.#l()}mutate(t,e){return this.#o=e,this.#a?.removeObserver(this),this.#a=this.#i.getMutationCache().build(this.#i,this.options),this.#a.addObserver(this),this.#a.execute(t)}#u(){let t=this.#a?.state??(0,i.R)();this.#r={...t,isPending:"pending"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset}}#l(t){r.Vr.batch(()=>{if(this.#o&&this.hasListeners()){let e=this.#r.variables,s=this.#r.context;t?.type==="success"?(this.#o.onSuccess?.(t.data,e,s),this.#o.onSettled?.(t.data,null,e,s)):t?.type==="error"&&(this.#o.onError?.(t.error,e,s),this.#o.onSettled?.(void 0,t.error,e,s))}this.listeners.forEach(t=>{t(this.#r)})})}},l=s(29827);function c(t,e){let s=(0,l.NL)(e),[i]=n.useState(()=>new u(s,t));n.useEffect(()=>{i.setOptions(t)},[i,t]);let a=n.useSyncExternalStore(n.useCallback(t=>i.subscribe(r.Vr.batchCalls(t)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),c=n.useCallback((t,e)=>{i.mutate(t,e).catch(o.ZT)},[i]);if(a.error&&(0,o.L3)(i.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:c,mutateAsync:a.mutate}}}},function(t){t.O(0,[5501,6523,7928,7119,3464,9763,3044,1713,2906,3633,5109,3857,2758,2971,2117,1744],function(){return t(t.s=59022)}),_N_E=t.O()}]);