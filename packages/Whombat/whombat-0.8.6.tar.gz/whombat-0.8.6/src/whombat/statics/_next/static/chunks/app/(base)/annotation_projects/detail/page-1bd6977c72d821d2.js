(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2095],{87282:function(e,n,t){Promise.resolve().then(t.bind(t,6397))},6397:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return ei}});var o=t(57437),s=t(99376),a=t(2265),i=t(15947);function l(e){return(0,o.jsx)(i.Z,{MainContent:(0,o.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,o.jsx)("div",{className:"col-span-1 lg:col-span-2",children:e.AnnotationProjectProgress}),e.AnnotationProjectTagsSummary,e.AnnotationProjectNotesSummary]}),Actions:e.AnnotationProjectActions,SideBar:e.AnnotationProjectUpdate})}var r=t(69064),c=t(2185),d=t(31476),u=t(70452),x=t(80207);function j(e){let{annotationProject:n,onDeleteAnnotationProject:t,onDownloadAnnotationProject:s}=e;return(0,o.jsxs)("div",{className:"flex flex-row gap-2 justify-center",children:[(0,o.jsxs)(x.Z,{mode:"text",variant:"primary",onClick:s,children:[(0,o.jsx)(d._8,{className:"inline-block mr-2 w-5 h-5"})," Download"]}),(0,o.jsx)(m,{annotationProject:n,onDelete:t})]})}function m(e){let{annotationProject:n,onDelete:t}=e;return(0,o.jsx)(u.Z,{title:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(d.aN,{className:"inline-block mr-2 w-8 h-8 text-red-500"}),"Are you sure you want to delete this project?"]}),button:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(d.pJ,{className:"inline-block mr-2 w-5 h-5"}),"Delete Project"]}),mode:"text",variant:"danger",children:e=>{let{close:s}=e;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h2",{className:"p-4 font-extrabold text-center",children:n.name}),(0,o.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,o.jsx)("p",{children:"This action cannot be undone. All annotations and recordings associated with this project will be deleted."}),(0,o.jsx)("p",{children:"Do you want to proceed?"})]}),(0,o.jsxs)("div",{className:"flex flex-row gap-2 justify-end mt-4",children:[(0,o.jsxs)(x.Z,{mode:"outline",variant:"primary",onClick:s,children:[(0,o.jsx)(d.Tw,{className:"inline-block mr-2 w-5 h-5"}),"Cancel"]}),(0,o.jsxs)(x.Z,{mode:"text",variant:"danger",onClick:t,children:[(0,o.jsx)(d.pJ,{className:"inline-block mr-2 w-5 h-5"}),"Delete"]})]})]})}})}function p(e){let{annotationProject:n,onDeleteAnnotationProject:t}=e,{delete:s,download:a}=(0,c.Z)({uuid:n.uuid,annotationProject:n,onDelete:t});return(0,o.jsx)(j,{annotationProject:n,onDeleteAnnotationProject:()=>r.ZP.promise(s.mutateAsync(n),{loading:"Deleting project...",success:"Project deleted",error:"Failed to delete project"}),onDownloadAnnotationProject:a})}var h=t(23857),g=t(58435),v=t(8025);function f(e){let{note:n,onDeleteNote:t,onResolveNote:s,...a}=e,{data:i,update:l,delete:c}=function(e){let{uuid:n,note:t,onUpdate:o,onDelete:s,enabled:a=!0}=e;if(void 0!==t&&t.uuid!==n)throw Error("Note uuid does not match");let{query:i,useMutation:l,useDestruction:r}=(0,g.ZP)({id:n,initialData:t,name:"note",enabled:a,queryFn:h.Z.notes.get}),c=l({mutationFn:h.Z.notes.update,onSuccess:o}),d=r({mutationFn:h.Z.notes.delete,onSuccess:s});return{...i,update:c,delete:d}}({uuid:n.uuid,note:n,onDelete:t,onUpdate:s});return(0,o.jsx)(v.Z,{note:i||n,onDeleteNote:c.mutate,onResolveNote:()=>l.mutate({is_issue:!1},{onSuccess:()=>r.ZP.success("Issue resolved")}),...a})}var N=t(27432),k=t(65903),b=t(35535),C=t(55047);function w(e){let{isLoading:n=!1,...t}=e;return(0,o.jsxs)(N.Z,{children:[(0,o.jsxs)(b.H3,{children:[(0,o.jsx)(d.N$,{className:"inline-block mr-2 w-5 h-5"}),"Project Issues"]}),n?(0,o.jsx)(C.Z,{}):(0,o.jsx)(y,{...t})]})}function y(e){let{clipNotes:n=P,soundEventNotes:t=_,SoundEventAnnotationNote:s,ClipAnnotationNote:a}=e;return 0===t.length&&0===n.length?(0,o.jsx)(Z,{}):(0,o.jsxs)("div",{className:"flex flex-col gap-4",children:[0===n.length?null:(0,o.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,o.jsx)("span",{className:"font-thin",children:"Latest Clip Issues"}),(0,o.jsx)("ul",{className:"flex flex-col gap-2 p-2 pl-4 rounded-md border divide-y divide-dashed divide-stone-300 dark:border-stone-800 dark:divide-stone-800",children:n.map(e=>(0,o.jsx)(a,{clipAnnotationNote:e},e.note.uuid))})]}),0===t.length?null:(0,o.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,o.jsx)("span",{className:"font-thin",children:"Latest Sound Event Issues"}),(0,o.jsx)("ul",{className:"flex flex-col gap-2 p-2 pl-4 rounded-md border divide-y divide-dashed divide-stone-300 dark:border-stone-800 dark:divide-stone-800",children:t.map(e=>(0,o.jsx)(s,{soundEventAnnotationNote:e},e.note.uuid))})]})]})}function Z(){return(0,o.jsxs)(k.Z,{children:[(0,o.jsx)(d.nQ,{className:"w-8 h-8 text-emerald-500"}),"Currently, there are no issues in this project."]})}let P=[],_=[];var A=t(26596);function S(e){let{annotationProject:n}=e,t=(0,a.useMemo)(()=>({annotation_project:n,issues:{eq:!0}}),[n]),{query:{isLoading:s},items:i}=(0,A.Z)({name:"clip_annotation_notes",queryFn:h.Z.notes.getClipAnnotationNotes,filter:t,pageSize:10}),{query:{isLoading:l},items:r}=(0,A.Z)({name:"sound_event_annotation_notes",queryFn:h.Z.notes.getSoundEventAnnotationNotes,filter:t,pageSize:10});return(0,o.jsx)(w,{isLoading:s||l,clipNotes:i,soundEventNotes:r,SoundEventAnnotationNote:E,ClipAnnotationNote:T})}function E(e){let{soundEventAnnotationNote:n}=e,t=(0,s.useRouter)(),i=(0,s.useSearchParams)(),l=(0,a.useCallback)(async()=>{let e=await h.Z.soundEventAnnotations.getAnnotationTask(n.sound_event_annotation_uuid);t.push("/annotation_projects/detail/annotation/?annotation_task_uuid=".concat(e.uuid,"&").concat(i.toString()))},[t,i,n.sound_event_annotation_uuid]);return(0,o.jsx)(f,{noteType:"Sound Event Note",note:n.note,canDelete:!1,canResolve:!1,onClickNote:l})}function T(e){let{clipAnnotationNote:n}=e,t=(0,s.useRouter)(),i=(0,s.useSearchParams)(),l=(0,a.useCallback)(async()=>{let e=await h.Z.clipAnnotations.getAnnotationTask(n.clip_annotation_uuid);t.push("/annotation_projects/detail/annotation/?annotation_task_uuid=".concat(e.uuid,"&").concat(i.toString()))},[t,i,n.clip_annotation_uuid]);return(0,o.jsx)(f,{noteType:"Clip Note",note:n.note,canDelete:!1,canResolve:!1,onClickNote:l})}var F=t(75761),D=t(39241),q=t(53609),L=t(78341);let M=[];function R(e){let{annotationTasks:n=M,isLoading:t=!1,onAddTasks:s,onClickPending:i,onClickReview:l,onClickCompleted:r,onClickVerified:c}=e,{missing:u,needReview:j,completed:m,verified:p}=(0,a.useMemo)(()=>t||null==n?{missing:0,needReview:0,completed:0,verified:0}:(0,L.q)(n),[n,t]);return(0,o.jsxs)(N.Z,{children:[(0,o.jsxs)("div",{className:"flex flex-row justify-between items-center",children:[(0,o.jsx)(b.H3,{children:"Annotation Progress"}),(0,o.jsxs)(x.Z,{mode:"text",variant:"primary",onClick:s,children:[(0,o.jsx)(d.dt,{className:"inline-block mr-2 w-5 h-5"})," Add tasks"]})]}),t?(0,o.jsx)(C.Z,{}):0===n.length?(0,o.jsx)(B,{}):(0,o.jsx)(I,{annotationTasks:n,isLoading:t,missing:u,needReview:j,completed:m,verified:p,onClickReview:l,onClickCompleted:r,onClickPending:i,onClickVerified:c})]})}function B(){return(0,o.jsx)(k.Z,{children:(0,o.jsxs)("p",{children:["No annotation tasks have been created for this project. To begin annotating, click the"," ",(0,o.jsx)("span",{className:"inline text-emerald-500",children:"Add tasks"})," button above."]})})}function I(e){let{annotationTasks:n,isLoading:t,missing:s,needReview:a,completed:i,verified:l,onClickPending:r,onClickReview:c,onClickCompleted:u,onClickVerified:x}=e;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex flex-row gap-2 justify-around",children:[(0,o.jsx)(D.Z,{icon:(0,o.jsx)(d.dY,{className:"inline-block w-8 h-8 text-blue-500"}),title:"Remaining",value:s,isLoading:t,onClick:r}),(0,o.jsx)(D.Z,{icon:(0,o.jsx)(d.wv,{className:"inline-block w-8 h-8 text-red-500"}),title:"Need Review",value:a,isLoading:t,onClick:c}),(0,o.jsx)(D.Z,{icon:(0,o.jsx)(d.cV,{className:"inline-block w-8 h-8 text-emerald-500"}),title:"Completed",value:i,isLoading:t,onClick:u}),(0,o.jsx)(D.Z,{icon:(0,o.jsx)(d.SA,{className:"inline-block w-8 h-8 text-amber-500"}),title:"Verified",value:l,isLoading:t,onClick:x})]}),(0,o.jsxs)("div",{className:"mt-4",children:[(0,o.jsxs)("div",{className:"mb-2 text-stone-500",children:["Total tasks: ",n.length]}),(0,o.jsx)(q.Z,{total:n.length,complete:i,verified:l,error:a})]})]})}function Y(e){let{annotationProject:n}=e,t=(0,s.useRouter)(),i=(0,a.useMemo)(()=>({annotation_project:n}),[n]),{items:l,isLoading:r}=(0,F.Z)({filter:i,pageSize:-1}),c=(0,a.useCallback)(()=>{t.push("/annotation_projects/detail/tasks/?annotation_project_uuid=".concat(n.uuid))},[t,n.uuid]);return(0,o.jsx)(R,{isLoading:r,annotationTasks:l,onAddTasks:c})}var z=t(14759),H=t(77145),O=t(33857),U=t(71021),J=t(85754),V=t(65781);let Q=[];function K(e){let{annotationProject:n,isLoading:t=!1,clipTags:s=Q,soundEventTags:i=Q,onAddTags:l,...r}=e,c=(0,a.useMemo)(()=>n.tags||[],[n.tags]),u=(0,a.useMemo)(()=>(function(e){let{projectTags:n,clipTags:t,soundEventTags:o}=e,s=new Map;for(let e of n){let n=(0,V.ix)(e);s.has(n)||s.set(n,{tag:e,clipCount:0,soundEventCount:0})}for(let e of t){let n=(0,V.ix)(e.tag),t=s.get(n);void 0===t&&(t={tag:e.tag,clipCount:0,soundEventCount:0},s.set(n,t)),t.clipCount+=e.count}for(let e of o){let n=(0,V.ix)(e.tag),t=s.get(n);void 0===t&&(t={tag:e.tag,clipCount:0,soundEventCount:0},s.set(n,t)),t.soundEventCount+=e.count}return Array.from(s.values())})({projectTags:c,clipTags:s,soundEventTags:i}),[s,i,c]);return(0,o.jsxs)(N.Z,{children:[(0,o.jsxs)("div",{className:"flex flex-row justify-between items-center",children:[(0,o.jsxs)(b.H4,{className:"inline-flex items-center",children:[(0,o.jsx)(d.Dg,{className:"inline-block mr-2 w-5 h-5"}),"Project Tags",(0,o.jsx)(U.Z,{children:'Here you can see the tags used in the project and their respective frequencies. "Clip Count" represent the number of clips tagged with the tag, and "Sound Event Count" represent the number of sound events tagged with the tag. Click on a tag to see more details.'})]}),(0,o.jsxs)(x.Z,{mode:"text",variant:"primary",onClick:l,children:[(0,o.jsx)(d.dt,{className:"inline-block mr-2 w-5 h-5"})," Add Tags"]})]}),t?(0,o.jsx)(C.Z,{}):0===c.length?(0,o.jsx)($,{}):(0,o.jsx)(G,{counts:u,...r})]})}function $(){return(0,o.jsx)(k.Z,{children:"No tags registered for this project. Add some tags to start annotating."})}function G(e){let{counts:n,sortBy:t="clip",showMax:s=10,onClickTag:i,tagColorFn:l=V.vm}=e,[r,c]=(0,a.useState)(t),d=(0,a.useMemo)(()=>{switch(r){case"clip":return(e,n)=>e.clipCount<n.clipCount?1:-1;case"soundEvent":return(e,n)=>e.soundEventCount<n.soundEventCount?1:-1;case"-clip":return(e,n)=>e.clipCount>n.clipCount?1:-1;case"-soundEvent":return(e,n)=>e.soundEventCount>n.soundEventCount?1:-1;case"tag":return(e,n)=>e.tag.value<n.tag.value?1:-1;case"-tag":return(e,n)=>e.tag.value>n.tag.value?1:-1;default:return(e,n)=>e.tag.value>n.tag.value?1:-1}},[r]),u=(0,a.useMemo)(()=>n.sort(d),[n,d]),{items:x,setSearch:j,setLimit:m,limit:p}=(0,J.Z)({options:u,fields:["tag.key","tag.value"],limit:s,shouldSort:!1,threshold:.3});return 0===n.length?(0,o.jsx)(W,{}):(0,o.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,o.jsxs)("div",{children:["There are"," ",(0,o.jsx)("span",{className:"font-bold text-blue-500",children:n.length})," tags registered for this project."]}),(0,o.jsx)(H.Z,{limit:p,onChangeLimit:m,onChangeSearch:j}),(0,o.jsx)(X,{items:x,sortBy:r,onClickTag:i,tagColorFn:l,onSortByTag:()=>c(e=>"tag"===e?"-tag":"tag"),onSortByClip:()=>{c(e=>"clip"===e?"-clip":"clip")},onSortBySoundEvent:()=>{c(e=>"soundEvent"===e?"-soundEvent":"soundEvent")}}),n.length>p&&(0,o.jsxs)("div",{className:"text-stone-500",children:["Showing ",p," of ",n.length," tags. Adjust the search or limit to see more."]})]})}function W(){return(0,o.jsx)("div",{className:"text-stone-500",children:"There are no tags in any of the annotations in this project. Consider creating more annotations, or adding tags to existing annotations."})}function X(e){let{items:n,sortBy:t,onSortByTag:s,onSortBySoundEvent:a,onSortByClip:i,onClickTag:l,tagColorFn:r=V.vm}=e;return(0,o.jsxs)("table",{className:"min-w-full text-left table-fixed",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{scope:"col",className:"py-2",children:(0,o.jsxs)(x.Z,{padding:"p-0",mode:"text",onClick:s,children:["Tag","tag"==t?(0,o.jsx)(d.Yx,{className:"inline-block ml-2 w-5 h-5"}):"-tag"==t?(0,o.jsx)(d.yF,{className:"inline-block ml-2 w-5 h-5"}):null]})}),(0,o.jsx)("th",{scope:"col",className:"py-2 w-20",children:(0,o.jsxs)(x.Z,{padding:"p-0",mode:"text",onClick:i,children:["Clips","clip"==t?(0,o.jsx)(d.Yx,{className:"inline-block ml-2 w-5 h-5"}):"-clip"==t?(0,o.jsx)(d.yF,{className:"inline-block ml-2 w-5 h-5"}):(0,o.jsx)(d.Yx,{className:"inline-block invisible ml-2 w-5 h-5"})]})}),(0,o.jsx)("th",{scope:"col",className:"py-2 w-20",children:(0,o.jsxs)(x.Z,{padding:"p-0",mode:"text",onClick:a,children:["Sound Events","soundEvent"==t?(0,o.jsx)(d.Yx,{className:"inline-block ml-2 w-5 h-5"}):"-soundEvent"==t?(0,o.jsx)(d.yF,{className:"inline-block ml-2 w-5 h-5"}):(0,o.jsx)(d.Yx,{className:"inline-block invisible ml-2 w-5 h-5"})]})})]})}),(0,o.jsx)("tbody",{children:n.map(e=>{let{tag:n,clipCount:t,soundEventCount:s}=e;return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{className:"py-2 whitespace-nowrap",children:(0,o.jsx)(O.ZP,{tag:n,onClick:()=>null==l?void 0:l(n),...r(n)})}),(0,o.jsx)("td",{className:"py-2 whitespace-nowrap",children:t}),(0,o.jsx)("td",{className:"py-2 whitespace-nowrap",children:s})]},(0,V.ix)(n))})})]})}function ee(e){let{annotationProject:n}=e,t=(0,s.useRouter)(),i=(0,z.Z)(e=>e.getTagColor),l=(0,a.useCallback)(()=>{t.push("/annotation_projects/detail/tags/?annotation_project_uuid=".concat(n.uuid))},[t,n.uuid]),r=(0,a.useMemo)(()=>({annotation_project:n}),[n]),{items:c,query:{isLoading:d}}=(0,A.Z)({name:"clip_annotation_tags",queryFn:h.Z.tags.getClipAnnotationCounts,pageSize:-1,filter:r}),{items:u,query:{isLoading:x}}=(0,A.Z)({name:"sound_event_annotation_tags",queryFn:h.Z.tags.getSoundEventAnnotationCounts,pageSize:-1,filter:r});return(0,o.jsx)(K,{annotationProject:n,tagColorFn:i,onAddTags:l,clipTags:c,soundEventTags:u,isLoading:d||x})}var en=t(45147);function et(e){var n;let{annotationProject:t,isLoading:s=!1,onChangeAnnotationProject:a}=e;return(0,o.jsxs)(N.Z,{children:[(0,o.jsx)("div",{className:"px-4 sm:px-0",children:(0,o.jsx)(b.H3,{children:"Project Details"})}),(0,o.jsx)("div",{className:"mt-6 border-t border-stone-300 dark:border-stone-700",children:s?(0,o.jsx)(C.Z,{}):(0,o.jsxs)("dl",{className:"divide-y divide-stone-500",children:[(0,o.jsx)("div",{className:"py-6 px-4 sm:px-0",children:(0,o.jsx)(en.ZP,{name:"Name",value:t.name,onChange:e=>null==a?void 0:a({name:e}),type:"text",editable:!0})}),(0,o.jsx)("div",{className:"py-6 px-4 sm:px-0",children:(0,o.jsx)(en.ZP,{name:"Description",value:t.description,onChange:e=>null==a?void 0:a({description:e}),type:"textarea",editable:!0})}),(0,o.jsx)("div",{className:"py-6 px-4 sm:px-0",children:(0,o.jsx)(en.ZP,{name:"Annotation Instructions",value:null!==(n=t.annotation_instructions)&&void 0!==n?n:"",onChange:e=>null==a?void 0:a({annotation_instructions:e}),type:"textarea",editable:!0})}),(0,o.jsx)("div",{className:"py-6 px-4 sm:px-0",children:(0,o.jsx)(en.ZP,{name:"Created On",value:t.created_on,type:"text"})})]})})]})}function eo(e){let{annotationProject:n}=e,{data:t,update:s,isLoading:a}=(0,c.Z)({uuid:n.uuid,annotationProject:n});return(0,o.jsx)(et,{annotationProject:t||n,isLoading:a,onChangeAnnotationProject:s.mutate})}function es(e){let{annotationProject:n,onDeleteAnnotationProject:t}=e;return(0,o.jsx)(l,{AnnotationProjectActions:(0,o.jsx)(p,{annotationProject:n,onDeleteAnnotationProject:t}),AnnotationProjectNotesSummary:(0,o.jsx)(S,{annotationProject:n}),AnnotationProjectTagsSummary:(0,o.jsx)(ee,{annotationProject:n}),AnnotationProjectUpdate:(0,o.jsx)(eo,{annotationProject:n}),AnnotationProjectProgress:(0,o.jsx)(Y,{annotationProject:n})})}var ea=t(65198);function ei(){let e=(0,a.useContext)(ea.Z),n=(0,s.useRouter)(),t=(0,a.useCallback)(()=>n.push("/annotation_projects"),[n]);return(0,o.jsx)(es,{annotationProject:e,onDeleteAnnotationProject:t})}},65198:function(e,n,t){"use strict";let o=(0,t(2265).createContext)({name:"",description:"",tags:[],created_on:new Date,uuid:""});n.Z=o},2185:function(e,n,t){"use strict";t.d(n,{Z:function(){return u}});var o=t(57437),s=t(21770),a=t(2265),i=t(69064),l=t(23857),r=t(80207);function c(e){var n;let{error:t,message:s}=e,l=null===(n=t.response)||void 0===n?void 0:n.data,c=null==l?void 0:l.exception,d=null==l?void 0:l.traceback,u=c&&d,x=u?"Please copy the error below and report the issue to the developers (see guide on reporting errors).":"Oops, an unexpected error occurred. Please try running whombat on debug mode (consult guide) and try again to see the full error message.",j="\nUser Message: ".concat(s,"\n\n").concat(x,"\n\n").concat(u?"Exception:\n".concat(c,"\n\nTraceback:\n").concat(d,"\n\n"):"","Full Error Details (for debugging):\n").concat(JSON.stringify(t.response,null,2),"\n  ").trim(),m=(0,a.useCallback)(()=>i.ZP.promise(navigator.clipboard.writeText(j),{loading:"Copying...",success:"Copied to clipboard",error:"Failed to copy"}),[j]);return(0,o.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,o.jsx)("p",{className:"font-bold text-red-500",children:s}),(0,o.jsx)("p",{className:"mt-2 text-sm",children:x}),(0,o.jsx)("div",{className:"flex flex-row gap-2 items-center",children:(0,o.jsx)(r.Z,{mode:"text",onClick:m,children:"Copy Error Details"})}),u&&(0,o.jsxs)("details",{className:"p-2 text-xs rounded",children:[(0,o.jsx)("summary",{className:"cursor-pointer",children:"Show Error Information"}),(0,o.jsxs)("pre",{className:"overflow-y-auto mt-4 max-h-48 whitespace-pre-wrap break-all text-stone-500",children:[(0,o.jsx)("strong",{children:"Exception:"}),(0,o.jsx)("br",{}),c,(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),(0,o.jsx)("strong",{children:"Traceback:"}),(0,o.jsx)("br",{}),d]})]})]})}var d=t(58435);function u(e){let{uuid:n,annotationProject:t,onUpdate:r,onDelete:u,onAddTag:x,onRemoveTag:j,onAddAnnotationTasks:m,onError:p,enabled:h=!0}=e,{query:g,useMutation:v,client:f}=(0,d.ZP)({id:n,initialData:t,name:"annotation_project",enabled:h,queryFn:l.Z.annotationProjects.get,onError:p}),N=v({mutationFn:l.Z.annotationProjects.update,onSuccess:e=>{i.ZP.success("Annotation project updated"),null==r||r(e)}}),k=v({mutationFn:l.Z.annotationProjects.addTag,onSuccess:x}),b=v({mutationFn:l.Z.annotationProjects.removeTag,onSuccess:j}),C=v({mutationFn:l.Z.annotationProjects.delete,onSuccess:u}),{data:w}=g,y=(0,a.useCallback)(async e=>{if(null==w)return;let n=await l.Z.clips.createMany(e);return await l.Z.annotationTasks.createMany(w,n)},[w]),Z=(0,s.D)({mutationFn:y,onSuccess:e=>{null!=e&&(null==m||m(e),f.invalidateQueries({queryKey:["annotation_project",n]}))}}),P=(0,a.useCallback)(async()=>{await i.ZP.promise(l.Z.annotationProjects.download(n),{loading:"Downloading...",success:"Download complete",error:e=>(0,o.jsx)(c,{error:e,message:"Failed to download dataset"})})},[n]);return{...g,update:N,addTag:k,addAnnotationTasks:Z,removeTag:b,delete:C,download:P}}},75761:function(e,n,t){"use strict";t.d(n,{Z:function(){return r}});var o=t(23857),s=t(45906),a=t(26596);let i={},l=[];function r(){let{filter:e=i,fixed:n=l,pageSize:t=10,enabled:r=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=(0,s.Z)({defaults:e,fixed:n}),{query:d,pagination:u,items:x,total:j,queryKey:m}=(0,a.Z)({name:"annotation_tasks",queryFn:o.Z.annotationTasks.getMany,pageSize:t,filter:c.filter,enabled:r});return{...d,items:x,filter:c,pagination:u,total:j,queryKey:m}}},78341:function(e,n,t){"use strict";function o(e){let n=0,t=0,o=0,s=0;for(let i of e){var a;let e=!1,l=!1,r=!1;null===(a=i.status_badges)||void 0===a||a.forEach(n=>{let{state:t}=n;switch(t){case"verified":e=!0;break;case"rejected":r=!0;break;case"completed":l=!0}}),e&&!r&&(s+=1),l&&!r&&(o+=1),l||(n+=1),r&&(t+=1)}return{missing:n,needReview:t,completed:o,verified:s,total:e.length}}t.d(n,{q:function(){return o}})}},function(e){e.O(0,[5501,6523,7928,7119,3464,9763,9064,3044,1713,2906,3633,5109,237,5335,5883,3916,4656,3857,2758,6063,5036,5768,2971,2117,1744],function(){return e(e.s=87282)}),_N_E=e.O()}]);