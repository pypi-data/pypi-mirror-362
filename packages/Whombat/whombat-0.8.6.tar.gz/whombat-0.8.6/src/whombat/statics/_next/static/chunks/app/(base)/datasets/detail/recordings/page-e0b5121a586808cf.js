(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7507],{56065:function(e,t,n){Promise.resolve().then(n.bind(n,25796))},1053:function(e,t,n){"use strict";let a=(0,n(2265).createContext)(null);t.Z=a},25796:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return U}});var a=n(57437),l=n(99376),r=n(2265),s=n(34657),i=n(77585),o=n(66287),c=n(14759),d=n(78155),u=n(47973),x=n(26399),g=n(21255),m=n(31773),f=n(31476),h=n(4987),p=n(80207),v=n(60912);function j(e){let{numSelected:t,onDeleteSelected:n,onTagSelected:l,TagSearchBar:r=h.Z,canCreateTag:s=!0,...i}=e;return 0===t?null:(0,a.jsxs)("ul",{className:"flex flex-row items-center space-x-2",children:[(0,a.jsxs)("li",{className:"px-2",children:[(0,a.jsx)("span",{className:"mr-1 font-bold text-blue-500",children:t}),"selected"]}),(0,a.jsx)("li",{children:(0,a.jsxs)(p.Z,{mode:"text",variant:"danger",onClick:n,children:[(0,a.jsx)(f.pJ,{className:"inline-block mr-1 w-5 h-5 align-middle"}),"delete selected"]})}),(0,a.jsx)("li",{children:(0,a.jsx)(v.Z,{placement:"bottom-end",button:(0,a.jsxs)(p.Z,{mode:"text",variant:"primary",children:[(0,a.jsx)(f.lO,{className:"inline-block mr-1 w-5 h-5 align-middle"}),"tag selected"]}),children:()=>(0,a.jsx)(r,{canCreate:s,onSelectTag:l,placement:"bottom-end",...i})})})]})}var b=n(12337),y=n(71594),w=n(24525),k=n(56651),N=n(56802),Z=n(8182);function C(e){let{value:t,onChange:n,...l}=e,s=(0,r.useRef)(null),[i,o]=(0,r.useState)(t),[c,d]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{o(t)},[t]),(0,r.useEffect)(()=>{if(c){var e;null===(e=s.current)||void 0===e||e.focus()}},[c]),c)?(0,a.jsx)("input",{ref:s,className:"block w-full border-transparent bg-inherit px-2 outline-transparent focus:border-gray-500 focus:ring-0 hover:dark:bg-stone-700",value:i,placeholder:t,onChange:e=>o(e.target.value),onKeyDown:e=>{var a,l,r,c;"Escape"===e.key?(d(!1),o(t),null===(l=s.current)||void 0===l||null===(a=l.parentElement)||void 0===a||a.focus()):"Enter"===e.key&&(d(!1),null==n||n(i),null===(c=s.current)||void 0===c||null===(r=c.parentElement)||void 0===r||r.focus())},onBlur:()=>d(!1),...l}):(0,a.jsx)(N.Z,{editable:!0,onFocus:()=>{d(!0)},onClick:()=>d(!0),children:i})}var S=n(97051),F=n(62756),T=n(72465);function P(e){let{value:t,onChange:n}=e;return(0,a.jsx)(F.J,{className:"flex relative flex-row w-100",children:(0,a.jsxs)(S.bv,{enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",placement:"bottom",offset:4,portal:!0,children:[(0,a.jsxs)(F.J.Button,{className:"flex flex-row gap-2 justify-between items-center px-1 text-center grow",children:[(0,a.jsx)("span",{children:(0,T.T)(t)}),(0,a.jsx)(f.dY,{className:"inline-block flex-none w-5 h-5 text-stone-500"})]}),(0,a.jsx)(F.J.Panel,{unmount:!0,className:"absolute left-1/2 z-40 px-4 mt-3 transform -translate-x-1/2 sm:px-0 lg:max-w-3xl",children:(0,a.jsx)("div",{className:"p-2 w-80 rounded-md border bg-stone-200 border-stone-300 border-1 dark:bg-stone-800 dark:border-stone-700",children:(0,a.jsx)(T.Z,{value:t,onChange:n})})})]})})}var z=n(54259),D=n(33857),R=n(65781);let E=[],M=(0,r.memo)(function(e){let{tags:t=E,onDeleteTag:n,onClickTag:l,tagColorFn:r=R.vm,TagSearchBar:s=h.Z,...i}=e;return(0,a.jsxs)("div",{className:"flex overflow-auto flex-row flex-wrap gap-2 items-center px-1 m-0 w-full max-h-40",children:[t.map(e=>(0,a.jsx)(D.ZP,{tag:e,...r(e),onClick:()=>null==l?void 0:l(e),onClose:()=>null==n?void 0:n(e)},"".concat(e.key,":").concat(e.value))),(0,a.jsx)(z.Z,{variant:"primary",TagSearchBar:s,...i})]})}),_=e=>e;function q(e){let{recordings:t,filter:n,numRecordings:l,fixedFilterFields:s,pathFormatter:i,onClickRecording:o,onSearchChange:c,onSetFilterField:v,onClearFilterField:S,onCellKeyDown:F,onUpdateRecording:T,onAddRecordingTag:z,onDeleteRecordingTag:D,onDeleteRecording:R,onClickTag:E,tagColorFn:q,canCreateTag:I=!0,TagSearchBar:V=h.Z,...K}=e,J=function(e){let{data:t,canCreateTag:n=!0,pathFormatter:l=_,TagSearchBar:s=h.Z,onClickRecording:i,onCreateTag:o,onUpdateRecording:c,onAddRecordingTag:d,onDeleteRecordingTag:u,onClickTag:x,tagColorFn:g}=e,[m,v]=(0,r.useState)({}),j=(0,r.useMemo)(()=>({id:"tags",enableResizing:!0,header:()=>(0,a.jsxs)(Z.Z,{children:[(0,a.jsx)(f.lO,{className:"inline-block mr-2 w-5 h-5 align-middle text-stone-500"}),"Tags"]}),accessorFn:e=>e.tags,cell:e=>{let{row:t}=e,l=t.getValue("tags");return(0,a.jsx)(M,{tags:l,canCreate:n,tagColorFn:g,TagSearchBar:s,onClickTag:x,onCreateTag:o,onSelectTag:e=>null==d?void 0:d({recording:t.original,tag:e,index:t.index}),onDeleteTag:e=>null==u?void 0:u({recording:t.original,tag:e,index:t.index})})}}),[g,s,n,d,x,o,u]),b=(0,r.useMemo)(()=>({id:"select",maxSize:33,enableResizing:!1,header:e=>{let{table:t}=e;return(0,a.jsx)(k.Z,{checked:t.getIsAllRowsSelected(),indeterminate:t.getIsSomeRowsSelected(),onChange:t.getToggleAllRowsSelectedHandler()})},cell:e=>{let{row:t}=e;return(0,a.jsx)("div",{className:"flex justify-center px-1",children:(0,a.jsx)(k.Z,{checked:t.getIsSelected(),disabled:!t.getCanSelect(),indeterminate:t.getIsSomeSelected(),onChange:t.getToggleSelectedHandler()})})}}),[]),S=(0,r.useMemo)(()=>({accessorFn:e=>e.path,id:"path",header:()=>(0,a.jsx)(Z.Z,{children:"Path"}),size:200,enableResizing:!0,footer:e=>e.column.id,cell:e=>{let{row:t}=e,n=t.getValue("path");return(0,a.jsx)(N.Z,{children:(0,a.jsx)(p.Z,{mode:"text",align:"text-left",onClick:()=>null==i?void 0:i(t.original),children:l(n)})})}}),[i,l]),F=(0,r.useMemo)(()=>({id:"duration",header:()=>(0,a.jsx)(Z.Z,{children:"Duration"}),enableResizing:!0,size:100,accessorFn:e=>e.duration.toFixed(2),cell:e=>{let{row:t}=e,n=t.getValue("duration");return(0,a.jsx)(N.Z,{children:n})}}),[]),T=(0,r.useMemo)(()=>({id:"samplerate",accessorKey:"samplerate",header:()=>(0,a.jsx)(Z.Z,{children:"Sample Rate"}),enableResizing:!0,size:120,footer:e=>e.column.id,cell:e=>{let{row:t}=e,n=t.getValue("samplerate");return(0,a.jsx)(N.Z,{children:n})}}),[]),z=(0,r.useMemo)(()=>({id:"time_expansion",accessorKey:"time_expansion",header:()=>(0,a.jsx)(Z.Z,{children:"Time Expansion"}),enableResizing:!0,size:120,footer:e=>e.column.id,cell:e=>{let{row:t}=e,n=t.getValue("time_expansion");return(0,a.jsx)(C,{onChange:e=>{null!==e&&(null==c||c({recording:t.original,data:{time_expansion:parseFloat(e)},index:t.index}))},type:"number",value:n})}}),[c]),D=(0,r.useMemo)(()=>({id:"date",enableResizing:!0,size:140,header:()=>(0,a.jsxs)(Z.Z,{children:[(0,a.jsx)(f.IH,{className:"inline-block mr-2 w-5 h-5 align-middle text-stone-500"}),"Date"]}),cell:e=>{let{row:t}=e,n=t.getValue("date");return(0,a.jsx)(C,{onChange:e=>{null!==e&&(null==c||c({recording:t.original,data:{date:new Date(e)},index:t.index}))},type:"date",value:n})},accessorFn:e=>{var t;return null===(t=e.date)||void 0===t?void 0:t.toLocaleDateString("en-CA")}}),[c]),R=(0,r.useMemo)(()=>({id:"time",enableResizing:!0,size:120,header:()=>(0,a.jsxs)(Z.Z,{children:[(0,a.jsx)(f.wZ,{className:"inline-block mr-2 w-5 h-5 align-middle text-stone-500"}),"Time"]}),cell:e=>{let{row:t}=e,n=t.getValue("time");return(0,a.jsx)(C,{onChange:e=>{null!==e&&(null==c||c({recording:t.original,data:{time:e},index:t.index}))},type:"time",value:n,step:"1"})},accessorFn:e=>e.time}),[c]),E=(0,r.useMemo)(()=>({id:"location",enableResizing:!0,header:()=>(0,a.jsxs)(Z.Z,{children:[(0,a.jsx)(f._t,{className:"inline-block mr-2 w-5 h-5 align-middle text-stone-500"}),"Location"]}),accessorFn:e=>({latitude:e.latitude,longitude:e.longitude}),cell:e=>{let{row:t}=e,n=t.getValue("location");return(0,a.jsx)(P,{onChange:e=>{null!==e&&(null==c||c({recording:t.original,data:e,index:t.index}))},value:n})}}),[c]),q=(0,r.useMemo)(()=>({id:"notes",enableResizing:!0,header:()=>(0,a.jsxs)(Z.Z,{children:[(0,a.jsx)(f.uH,{className:"inline-block mr-2 w-5 h-5 align-middle text-stone-500"}),"Notes"]}),accessorFn:e=>e.notes,cell:e=>{let{row:t}=e,n=t.getValue("notes");return 0==(n||[]).length?null:(0,a.jsxs)("span",{className:"ms-2",children:[(0,a.jsx)(f.NW,{className:"inline-block mr-2 w-5 h-5 text-blue-500 align-middle"}),n.length," notes"]})}}),[]),I=(0,r.useMemo)(()=>[b,S,F,T,z,D,R,E,j,q],[b,S,F,T,z,D,R,E,j,q]);return(0,y.b7)({data:t,columns:I,state:{rowSelection:m},enableRowSelection:!0,onRowSelectionChange:v,columnResizeMode:"onChange",getCoreRowModel:(0,w.sC)()})}({data:t,pathFormatter:i,onCreateTag:K.onCreateTag,onClickRecording:o,onUpdateRecording:T,onAddRecordingTag:z,onDeleteRecordingTag:D,onClickTag:E,tagColorFn:q,TagSearchBar:V}),O=J.getState().rowSelection,H=(0,r.useCallback)(e=>{Object.values(O).forEach((n,a)=>{if(!n)return;let l=t[a];null==z||z({recording:l,tag:e,index:a})})},[O,z,t]),B=(0,r.useCallback)(()=>{Object.values(O).forEach((e,n)=>{if(!e)return;let a=t[n];null==R||R({recording:a,index:n})})},[O,R,t]);return(0,a.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-row justify-between space-x-4",children:[(0,a.jsxs)("div",{className:"flex flex-row space-x-3 basis-1/2",children:[(0,a.jsx)("div",{className:"grow",children:(0,a.jsx)(g.Z,{label:"Search",placeholder:"Search recordings...",onChange:c})}),(0,a.jsx)(u.Z,{onSetFilterField:v,filterDef:x.Z})]}),(0,a.jsx)(j,{numSelected:Object.keys(O).length,canCreateTag:I,onCreateTag:K.onCreateTag,onSelectTag:H,onDeleteSelected:B,TagSearchBar:V,...K})]}),(0,a.jsx)(d.Z,{filter:n,total:l,fixedFilterFields:s,filterDef:x.Z,onClearFilterField:S}),(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)("div",{className:"overflow-x-auto overflow-y-auto w-full max-h-screen rounded-md outline outline-1 outline-stone-200 dark:outline-stone-800",children:(0,a.jsx)(b.Z,{table:J,onCellKeyDown:F})})}),(0,a.jsx)(m.Z,{page:K.page,numPages:K.numPages,onNextPage:K.onNextPage,hasNextPage:K.hasNextPage,hasPrevPage:K.hasPrevPage,onPrevPage:K.onPrevPage,onSetPage:K.onSetPage,pageSize:K.pageSize,onSetPageSize:K.onSetPageSize})]})}let I=["date","time","location","tags"];function V(e){let{dataset:t}=e,n=(0,l.useRouter)(),d=(0,c.Z)(e=>e.getTagColor),u=(0,r.useCallback)(e=>{let n=t.audio_dir;return null==n?e:e.startsWith(n)?e.slice(n.length):e},[t.audio_dir]),x=(0,r.useCallback)(e=>{let a="detail/?recording_uuid=".concat(e.uuid);n.push("".concat(a,"&dataset_uuid=").concat(t.uuid))},[t.uuid,n]),g=(0,r.useMemo)(()=>({dataset:t}),[t]),m=(0,i.Z)({filter:g,fixed:["dataset"]}),f=function(e){let{onUpdate:t,onAddTag:n,onRemoveTag:a}=e,l=(0,c.Z)(e=>e.clipboard),s=(0,c.Z)(e=>e.copy);return(0,r.useMemo)(()=>{let e=(e,t)=>{s({context:"recordings_table",column:e,value:t})},r=e=>{let{recording:a,column:l,value:r,row:s}=e;if("location"===l){let{position:e,isComplete:n}=function(e){let t={lat:0,lng:0};if(null==e)return{position:t,isComplete:!1};let n=e.split(",");if(2!==n.length)return{position:t,isComplete:!1};let a=parseFloat(n[0].trim()),l=parseFloat(n[1].trim());return{position:{lat:a,lng:l},isComplete:!isNaN(a)&&!isNaN(l)}}(r);if(!n)return;t({recording:a,data:{latitude:e.lat,longitude:e.lng},index:s});return}if("tags"===l)try{r.forEach(e=>{n({recording:a,tag:e,index:s})})}catch(e){return}t({recording:a,data:{[l]:r},index:s})},i=e=>{let{recording:n,column:l,row:r}=e;if("location"===l){t({recording:n,data:{latitude:null,longitude:null},index:r});return}if("time_expansion"===l){t({recording:n,data:{time_expansion:1},index:r});return}"tags"===l&&(n.tags||[]).forEach(e=>{a({recording:n,tag:e,index:r})}),t({recording:n,data:{[l]:null},index:r})};return t=>{let{event:n,data:a,value:s,column:o,row:c}=t;if(I.includes(o)){if("c"===n.key&&n.ctrlKey&&(e(o,s),navigator.clipboard.writeText(s)),"v"===n.key&&n.ctrlKey){if(null==l||"object"!=typeof l||"recordings_table"!==l.context||l.column!==o)return;r({recording:a,column:o,value:l.value,row:c})}("Delete"===n.key||"Backspace"===n.key)&&i({recording:a,column:o,row:c})}}},[l,t,n,a,s])}({onUpdate:m.updateRecording.mutate,onAddTag:m.addTag.mutate,onRemoveTag:m.removeTag.mutate}),h=(0,r.useCallback)(e=>{m.filter.set("tag",e)},[m.filter]),p=(0,r.useCallback)(e=>m.filter.set("search",e),[m.filter]),v=(0,r.useCallback)((e,t)=>m.filter.set(e,t),[m.filter]),j=(0,r.useCallback)(e=>m.filter.clear(e),[m.filter]),b=(0,r.useCallback)(e=>m.removeTag.mutate(e),[m.removeTag]),y=(0,r.useCallback)(e=>m.addTag.mutate(e),[m.addTag]),w=(0,r.useCallback)(e=>m.updateRecording.mutate(e),[m.updateRecording]),k=(0,r.useCallback)(e=>m.deleteRecording.mutate(e),[m.deleteRecording]);return m.isLoading||null==m.data?(0,a.jsx)(o.Z,{}):(0,a.jsx)(q,{recordings:m.items,filter:m.filter.filter,numRecordings:m.total,fixedFilterFields:m.filter.fixed,pathFormatter:u,onSearchChange:p,onSetFilterField:v,onClearFilterField:j,onCellKeyDown:f,onClickRecording:x,tagColorFn:d,onDeleteRecordingTag:b,onAddRecordingTag:y,onUpdateRecording:w,onDeleteRecording:k,onClickTag:h,TagSearchBar:s.Z,page:m.pagination.page,numPages:m.pagination.numPages,pageSize:m.pagination.pageSize,hasNextPage:m.pagination.hasNextPage,hasPrevPage:m.pagination.hasPrevPage,onSetPageSize:m.pagination.setPageSize,onSetPage:m.pagination.setPage,onPrevPage:m.pagination.prevPage,onNextPage:m.pagination.nextPage})}var K=n(74881),J=n(27432);function O(e){let{onDownloadDataset:t}=e;return(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsx)("p",{className:"text-stone-700 dark:text-stone-300",children:"Download the metadata of the recordings in this dataset. Please choose the format for downloading the metadata:"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)(J.Z,{className:"h-full",children:[(0,a.jsx)(p.Z,{onClick:()=>null==t?void 0:t("csv"),className:"block mt-2 text-center",children:"Download CSV"}),(0,a.jsx)("p",{className:"text-sm text-stone-600 dark:text-stone-400",children:"Download recording metadata in CSV format. Convenient for editing in tabular software."})]}),(0,a.jsxs)(J.Z,{className:"h-full",children:[(0,a.jsx)(p.Z,{onClick:()=>null==t?void 0:t("json"),className:"block mt-2 text-center",children:"Download JSON"}),(0,a.jsx)("p",{className:"text-sm text-stone-600 dark:text-stone-400",children:"Download recording metadata in JSON format. Data is structured in AEOF format; refer to our website for more details."})]})]})]})}function H(e){let{title:t,icon:n,buttons:l=[]}=e;return(0,a.jsxs)("div",{className:"flex flex-row justify-between items-center mb-3 space-x-4",children:[(0,a.jsxs)("div",{children:[n,(0,a.jsx)("span",{className:"font-thin",children:t})]}),(0,a.jsx)("ul",{className:"flex flex-row space-x-3",children:l.map((e,t)=>(0,a.jsx)("li",{children:e},t))})]})}var B=n(17571);function L(e){let{dataset:t,...n}=e;return(0,a.jsx)(H,{title:"Recordings",icon:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.se,{className:"inline-block mr-1 w-5 h-5 align-middle text-stone-500"}),(0,a.jsx)("span",{className:"mr-1 font-semibold text-stone-500",children:null==t?void 0:t.recording_count})]}),buttons:[(0,a.jsx)(B.Z,{title:"Export Recording Metadata",mode:"text",variant:"secondary",label:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f._8,{className:"inline-block mr-1 w-5 h-5 text-emerald-500 align-middle"}),"export"]}),children:()=>(0,a.jsx)(O,{...n})},"export")]})}function A(e){let{dataset:t}=e,{data:n,download:l}=(0,K.Z)({uuid:t.uuid,dataset:t});return(0,a.jsx)(L,{dataset:n||t,onDownloadDataset:l})}var Q=n(1053);function U(){let e=(0,r.useContext)(Q.Z);return null==e?(0,l.notFound)():(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)(A,{dataset:e}),(0,a.jsx)(V,{dataset:e})]})}},34657:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var a=n(57437),l=n(2265),r=n(21770),s=n(23857),i=n(45906),o=n(26596);let c={},d=[];var u=n(14759),x=n(4987);function g(e){let{onCreateTag:t,filter:n,fixed:g,pageSize:m,enabled:f,...h}=e,p=(0,u.Z)(e=>e.getTagColor),{items:v,create:j,filter:b}=function(){let{filter:e=c,fixed:t=d,pageSize:n=10,enabled:a=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=(0,i.Z)({defaults:e,fixed:t,debounce:50}),{items:u,total:x,query:g,pagination:m}=(0,o.Z)({name:"tags",queryFn:s.Z.tags.get,pageSize:n,filter:l.filter,enabled:a}),f=(0,r.D)({mutationFn:s.Z.tags.create,onSuccess:()=>{g.refetch()}});return{...g,items:u,total:x,pagination:m,filter:l,create:f}}({filter:n,fixed:g,pageSize:m,enabled:f}),y=(0,l.useCallback)(e=>{j.mutate(e,{onSuccess:e=>{null==t||t(e)}})},[t,j]);return(0,a.jsx)(x.Z,{tags:v,tagColorFn:p,onCreateTag:y,onChangeQuery:e=>{null==e.key||null==e.value?b.update({search:e.q,key:void 0,value:void 0}):b.update({search:void 0,key:e.key,value:{has:e.value}})},...h})}},74881:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var a=n(11713),l=n(2265),r=n(23857),s=n(58435);function i(e){let{uuid:t,dataset:n,enabled:i=!0,withState:o=!1,onUpdateDataset:c,onDeleteDataset:d,onError:u}=e;if(void 0!==n&&n.uuid!==t)throw Error("Dataset uuid does not match");let{query:x,useMutation:g}=(0,s.ZP)({id:t,initialData:n,name:"dataset",enabled:i,queryFn:r.Z.datasets.get,onError:u}),m=g({mutationFn:r.Z.datasets.update,onSuccess:e=>{null==c||c(e)}}),f=g({mutationFn:r.Z.datasets.delete,onSuccess:e=>{null==d||d(e)}}),h=(0,a.a)({queryKey:["dataset",t,"state"],queryFn:async()=>await r.Z.datasets.getState(t),enabled:o}),p=(0,l.useCallback)(async e=>await r.Z.datasets.download(t,e),[t]);return{...x,update:m,delete:f,state:h,download:p}}},77585:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var a=n(29827),l=n(21770),r=n(2265),s=n(23857),i=n(45906),o=n(26596);let c={},d=[];function u(){let{filter:e=c,fixed:t=d,pageSize:n=20,enabled:u=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},x=(0,a.NL)(),g=(0,i.Z)({defaults:e,fixed:t}),{items:m,total:f,pagination:h,query:p,queryKey:v}=(0,o.Z)({name:"dataset_recordings",queryFn:s.Z.recordings.getMany,pageSize:n,filter:g.filter,enabled:u}),j=(0,r.useCallback)((e,t)=>{let{index:n}=t;x.setQueryData(v,t=>({...t,items:t.items.map((t,a)=>a!==n?t:e)}))},[x,v]),b=(0,r.useCallback)((e,t)=>{let{index:n}=t;x.setQueryData(v,e=>({...e,items:e.items.filter((e,t)=>t!==n)}))},[x,v]),y=(0,l.D)({mutationFn:async e=>{let{recording:t,data:n}=e;return await s.Z.recordings.update(t,n)},onSuccess:j}),w=(0,l.D)({mutationFn:async e=>{let{recording:t,tag:n}=e;return await s.Z.recordings.addTag(t,n)},onSuccess:j}),k=(0,l.D)({mutationFn:async e=>{let{recording:t,tag:n}=e;return await s.Z.recordings.removeTag(t,n)},onSuccess:j}),N=(0,l.D)({mutationFn:async e=>{let{recording:t}=e;return await s.Z.recordings.delete(t)},onSuccess:b});return{...p,items:m,total:f,pagination:h,filter:g,queryKey:v,updateRecording:y,addTag:w,removeTag:k,deleteRecording:N}}},66287:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var a=n(57437),l=n(83470);function r(){return(0,a.jsx)("div",{className:"w-full h-full flex flex-row justify-center items-center",children:(0,a.jsx)(l.Z,{})})}},14759:function(e,t,n){"use strict";n.d(t,{Z:function(){return x}}),n(2265);var a=n(59625),l=n(89134),r=n(78705);let s=e=>({audioSettings:r.sf,setAudioSettings:t=>{e(e=>({...e,audioSettings:t}))}}),i=e=>({clipboard:"",copy:t=>e({clipboard:t})});var o=n(65781);let c=(e,t)=>({colors:{tags:{}},setTagColor:(t,n)=>{e(e=>({colors:{tags:{...e.colors.tags,[(0,o.ix)(t)]:n}}}))},getTagColor:n=>{let{tags:a}=t().colors,l=(0,o.ix)(n);if(a[l])return a[l];{let t=(0,o.mr)();return e(e=>({colors:{tags:{...e.colors.tags,[l]:t}}})),t}},clearTagColors:()=>{e(()=>({colors:{tags:{}}}))}}),d=e=>({user:null,login:t=>e({user:t}),logout:()=>e({user:null})}),u=e=>({spectrogramSettings:r.Ek,setSpectrogramSettings:t=>{e(e=>({...e,spectrogramSettings:t}))}});var x=(0,a.Ue)()((0,l.tJ)(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return{...d(...t),...i(...t),...c(...t),...u(...t),...s(...t)}},{name:"whombat-storage",storage:(0,l.FL)(()=>localStorage)}))},31773:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var a=n(57437),l=n(31476),r=n(60852),s=n(75004),i=n(80207);let o=[1,5,10,25,50,100];function c(e){let{page:t=0,numPages:n=1,pageSize:r=10,hasNextPage:c=!1,hasPrevPage:u=!1,onNextPage:x,onPrevPage:g,onSetPage:m,onSetPageSize:f,pageSizeOptions:h=o}=e;return(0,a.jsxs)("div",{className:"flex flex-row space-x-2",children:[(0,a.jsx)(i.Z,{disabled:0===t,onClick:()=>null==m?void 0:m(0),variant:"secondary",mode:"text",children:(0,a.jsx)(l.Op,{className:"w-5 h-5 fill-transparent stroke-inherit"})}),(0,a.jsx)(i.Z,{onClick:g,disabled:!u,variant:"secondary",mode:"text",children:(0,a.jsx)(l.jJ,{className:"w-5 h-5 fill-transparent stroke-inherit"})}),(0,a.jsx)("div",{className:"w-14",children:(0,a.jsx)(s.II,{disabled:1===n,type:"number",className:"remove-arrow",value:t+1,onChange:e=>null==m?void 0:m(parseInt(e.target.value)-1)})}),(0,a.jsxs)(i.Z,{disabled:!0,variant:"secondary",mode:"text",children:["/ ",n]}),(0,a.jsx)(i.Z,{onClick:x,disabled:!c,variant:"secondary",mode:"text",children:(0,a.jsx)(l.Ne,{className:"w-5 h-5 fill-transparent stroke-inherit"})}),(0,a.jsx)(i.Z,{disabled:t===n-1,onClick:()=>null==m?void 0:m(n-1),variant:"secondary",mode:"text",children:(0,a.jsx)(l.OZ,{className:"w-5 h-5 fill-transparent stroke-inherit"})}),(0,a.jsx)(d,{pageSize:r,onSetPageSize:f,pageSizeOptions:h})]})}function d(e){let{pageSize:t=10,onSetPageSize:n,pageSizeOptions:l=o}=e;return(0,a.jsx)(r.Z,{label:"Page Size:",selected:{label:t.toString(),value:t,id:t},onChange:e=>null==n?void 0:n(e),options:l.map(e=>({label:e.toString(),value:e,id:e}))})}},12337:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var a=n(57437),l=n(15278),r=n(71594);function s(e){let{table:t,onCellKeyDown:n}=e,{listeners:{onKeyUp:s,onKeyDown:i}}=(0,l.T)();return(0,a.jsxs)("table",{className:"relative min-w-full rounded-lg border border-collapse table-fixed border-stone-300 text-stone-700 dark:border-stone-700 dark:text-stone-300",onKeyUp:e=>{e.target instanceof HTMLInputElement||s()},onKeyDown:e=>{e.target instanceof HTMLInputElement||i(e)},style:{width:t.getCenterTotalSize()},children:[(0,a.jsx)("thead",{className:"sticky top-0 z-10",children:t.getHeaderGroups().map(e=>(0,a.jsx)("tr",{className:"bg-stone-200 text-stone-700 dark:bg-stone-700 dark:text-stone-300",children:e.headers.map(e=>(0,a.jsxs)("th",{className:"overflow-x-auto relative py-1 px-2 whitespace-nowrap border border-stone-400 dark:border-stone-500",colSpan:e.colSpan,style:{width:e.getSize()},children:[e.isPlaceholder?null:(0,r.ie)(e.column.columnDef.header,e.getContext()),(0,a.jsx)("div",{onMouseDown:e.getResizeHandler(),onTouchStart:e.getResizeHandler(),className:"resizer ".concat(e.column.getIsResizing()?"isResizing":"")})]},e.id))},e.id))}),(0,a.jsx)("tbody",{className:"z-0 text-sm text-stone-800 dark:text-stone-300",children:t.getRowModel().rows.map(e=>(0,a.jsx)("tr",{className:"max-h-40 h-min hover:dark:bg-stone-800 hover:bg-stone-200",children:e.getVisibleCells().map(t=>(0,a.jsx)("td",{role:"gridcell",className:"max-h-40 border outline-none focus:ring-1 focus:ring-emerald-500 focus:ring-offset-1 focus:ring-offset-transparent border-stone-300 dark:border-stone-600",tabIndex:-1,onKeyDown:a=>{a.target instanceof HTMLInputElement||null==n||n({data:e.original,row:e.index,column:t.column.id,value:e.getValue(t.column.id),event:a})},style:{width:t.column.getSize()},children:(0,r.ie)(t.column.columnDef.cell,t.getContext())},t.id))},e.id))})]})}n(67506)},56802:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var a=n(57437),l=n(36760),r=n.n(l),s=n(31476);function i(e){let{children:t,editable:n=!1,className:l,...i}=e;return"tabIndex"in i||!n||(i.tabIndex=0),(0,a.jsxs)("div",{...i,className:r()("m-0 flex w-full flex-row items-center justify-between gap-2 px-1",l),children:[(0,a.jsx)("span",{className:"overflow-x-auto grow",children:t}),n?(0,a.jsx)(s.dY,{className:"inline-block w-5 h-5 text-stone-500"}):null]})}},8182:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var a=n(57437);function l(e){let{children:t}=e;return(0,a.jsx)("span",{className:"inline-block whitespace-nowrap align-middle w-full overflow-x-auto",children:t})}},54259:function(e,t,n){"use strict";var a=n(57437),l=n(97051),r=n(62756),s=n(2265),i=n(31476),o=n(4987),c=n(80207);let d=(0,s.memo)(function(e){let{text:t="add",variant:n="secondary",placement:s="bottom-start",onKeyDown:d,TagSearchBar:u=o.Z,...x}=e;return(0,a.jsx)(r.J,{as:"div",className:"inline-block text-left",children:(0,a.jsxs)(l.bv,{zIndex:20,placement:s,offset:4,enter:"transition duration-200 ease-out",enterFrom:"scale-95 opacity-0",enterTo:"scale-100 opacity-100",leave:"transition duration-150 ease-in",leaveFrom:"scale-100 opacity-100",leaveTo:"scale-95 opacity-0",portal:!0,children:[(0,a.jsx)(r.J.Button,{as:"div",children:(0,a.jsxs)(c.Z,{mode:"text",variant:n,padding:"py-1",children:[(0,a.jsx)(i.dt,{className:"inline-block w-5 h-5 align-middle"}),t]})}),(0,a.jsx)(r.J.Panel,{className:"w-72",focus:!0,children:e=>{let{close:t}=e;return(0,a.jsx)(u,{onKeyDown:e=>{if("Escape"===e.key){t();return}null==d||d(e)},...x})}})]})})});t.Z=d},27432:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var a=n(57437),l=n(36760),r=n.n(l);function s(e){let{children:t,className:n,...l}=e;return(0,a.jsx)("div",{className:r()("border flex flex-col gap-3 p-4 rounded-md border-stone-200 dark:border-stone-800 text-stone-700 dark:text-stone-300",n),...l,children:t})}},17571:function(e,t,n){"use strict";n.d(t,{Z:function(){return c},t:function(){return d}});var a=n(57437),l=n(33044),r=n(85109),s=n(2265),i=n(31476),o=n(80207);function c(e){let{title:t,children:n,label:l,open:r=!1,width:i="max-w-lg",...c}=e,[u,x]=(0,s.useState)(r);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Z,{type:"button",onClick:()=>x(!0),...c,children:l}),(0,a.jsx)(d,{title:(0,a.jsx)("div",{children:t}),isOpen:u,onClose:()=>x(!1),children:e=>{let{close:t}=e;return(0,a.jsx)("div",{className:i,children:n({close:t})})}})]})}function d(e){let{title:t,children:n,onClose:c,isOpen:d=!0}=e;return(0,a.jsx)(l.u,{appear:!0,show:d,as:s.Fragment,children:(0,a.jsxs)(r.V,{as:"div",className:"relative z-50",onClose:()=>null==c?void 0:c(),children:[(0,a.jsx)(l.u.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),(0,a.jsx)("div",{className:"overflow-y-auto fixed inset-0",children:(0,a.jsx)("div",{className:"flex justify-center items-center p-4 min-h-full text-center",children:(0,a.jsx)(l.u.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,a.jsxs)(r.V.Panel,{className:"overflow-hidden p-6 w-full text-left align-middle rounded-2xl shadow-xl transition-all transform max-w-fit bg-stone-50 text-stone-700 z-[99999] dark:bg-stone-700 dark:text-stone-300",children:[(0,a.jsxs)(r.V.Title,{as:"div",className:"flex flex-row gap-4 justify-between items-center mb-4",children:[null!=t&&(0,a.jsx)("h3",{className:"text-lg font-medium leading-6 text-stone-900 dark:text-stone-100",children:t}),(0,a.jsx)(o.Z,{onClick:()=>null==c?void 0:c(),variant:"secondary",mode:"text",children:(0,a.jsx)(i.Tw,{className:"w-5 h-5"})})]}),(0,a.jsx)("div",{className:"mt-2",children:n({close:()=>null==c?void 0:c()})})]})})})})]})})}},29379:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var a=n(57437);function l(e){let{children:t}=e;return(0,a.jsx)("kbd",{className:"inline-block px-1 font-mono rounded border bg-stone-900 border-stone-800 text-stone-300 dark:bg-stone-300 dark:border-stone-400 dark:text-stone-900",children:t})}function r(e){let{keys:t=[],...n}=e;for(let e in n)n[e]&&(t=[e,...t]);return 0===t.length?null:1===t.length?(0,a.jsx)(l,{children:t[0]}):(0,a.jsx)("kbd",{className:"inline-flex gap-1 items-center text-stone-300 dark:test-stone-900",children:null==t?void 0:t.map(e=>(0,a.jsx)(l,{children:e},e)).reduce((e,t)=>[e,"+",t])})}},55047:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var a=n(57437),l=n(83470);function r(){let{text:e=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.jsxs)("div",{className:"flex flex-row justify-center items-center w-full h-full",children:[(0,a.jsx)(l.Z,{})," ",e]})}},60912:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var a=n(57437),l=n(97051),r=n(62756);function s(e){let{button:t,children:n,placement:s="bottom",offset:i=4,autoPlacement:o=!1}=e;return(0,a.jsx)(r.J,{as:"div",className:"inline-block text-left",children:(0,a.jsxs)(l.bv,{zIndex:10,placement:s,offset:i,enter:"transition duration-200 ease-out",enterFrom:"scale-95 opacity-0",enterTo:"scale-100 opacity-100",leave:"transition duration-150 ease-in",leaveFrom:"scale-100 opacity-100",leaveTo:"scale-95 opacity-0",portal:!0,autoPlacement:o,children:[(0,a.jsx)(r.J.Button,{as:"div",children:t}),(0,a.jsx)(r.J.Panel,{className:"w-72",focus:!0,unmount:!0,children:e=>{let{close:t}=e;return n({close:t})}})]})})}},58435:function(e,t,n){"use strict";n.d(t,{ZP:function(){return i}});var a=n(21770),l=n(11713),r=n(29827),s=n(2265);function i(e){let{id:t,name:n,enabled:i=!0,queryFn:o,onError:c,staleTime:d=1/0,...u}=e,x=(0,r.NL)(),g=(0,l.a)({queryKey:[n,t],queryFn:()=>o(t),enabled:i,staleTime:d,...u}),m=(0,s.useCallback)(e=>{x.setQueryData([n,t],e)},[x,t,n]),{data:f,status:h,error:p,isError:v}=g;return(0,s.useEffect)(()=>{v&&(null==c||c(p))},[p,v,c]),{query:g,client:x,setData:m,useMutation:e=>{let{mutationFn:l,withUpdate:r=!0,...i}=e;return function(e){let{id:t,data:n,name:l,status:r,client:i,withUpdate:o=!0,mutationFn:c,onSuccess:d,...u}=e,x=(0,s.useCallback)(async e=>{if("pending"===r)throw Error("No data for object of type ".concat(l," (id=").concat(t,"). ")+"Either the query is not enabled or the query is still loading.");if("error"===r)throw Error("Error while loading object of type ".concat(l," (id=").concat(t,"),")+" cannot mutate");if(null==n)throw Error("No data for object of type ".concat(l," (id=").concat(t,"). ")+"The object is null, cannot mutate");return await c(n,e)},[r,n,c,l,t]);return(0,a.D)({...u,mutationFn:x,onSuccess:(e,n,a)=>{o&&i.setQueryData([l,t],e),null==d||d(e,n,a)}})}({id:t,data:f,status:h,client:x,mutationFn:l,name:n,withUpdate:r,...i})},useQuery:e=>{let{queryFn:a,secondaryName:r,enabled:i=!1,...o}=e;return function(e){let{id:t,query:n,name:a,secondaryName:r,enabled:i=!1,queryFn:o,...c}=e,{status:d,data:u}=n,x=(0,s.useCallback)(async()=>{if("pending"===d)throw Error("No data for object of type ".concat(a," (id=").concat(t,"). ")+"Either the query is not enabled or the query is still loading.");if("error"===d)throw Error("Error while loading object of type ".concat(a," (id=").concat(t,"), cannot mutate"));return await o(u)},[d,u,o,a,t]);return(0,l.a)({...c,queryFn:x,queryKey:[a,t,r],enabled:"pending"!==d&&"error"!==d&&i})}({id:t,query:g,queryFn:a,secondaryName:r,name:n,enabled:i,...o})},useDestruction:e=>{let{mutationFn:l,...r}=e;return function(e){let{id:t,query:n,client:l,name:r,mutationFn:i,onSuccess:o,...c}=e,{status:d,data:u}=n,x=(0,s.useCallback)(async()=>{if("pending"===d)throw Error("No data for object of type ".concat(r," (id=").concat(t,"). ")+"Either the query is not enabled or the query is still loading.");if("error"===d)throw Error("Error while loading object of type ".concat(r," (id=").concat(t,"), cannot mutate"));return await i(u)},[d,u,i,r,t]);return(0,a.D)({...c,mutationFn:x,onSuccess:(e,n,a)=>{l.removeQueries({queryKey:[r,t]}),null==o||o(e,n,a)}})}({id:t,query:g,client:x,mutationFn:l,name:n,...r})}}}},67506:function(){}},function(e){e.O(0,[2731,5501,6523,7928,7119,3464,9763,9064,3044,1713,2906,3633,5109,237,5335,5883,5097,4588,3916,118,8242,3857,2758,6063,8531,2971,2117,1744],function(){return e(e.s=56065)}),_N_E=e.O()}]);