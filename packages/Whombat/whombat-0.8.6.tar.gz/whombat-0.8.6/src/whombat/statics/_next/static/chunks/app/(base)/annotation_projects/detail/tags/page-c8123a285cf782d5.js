(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7415],{19401:function(e,t,n){Promise.resolve().then(n.bind(n,41771))},99376:function(e,t,n){"use strict";var r=n(35475);n.o(r,"notFound")&&n.d(t,{notFound:function(){return r.notFound}}),n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(t,{useSearchParams:function(){return r.useSearchParams}}),n.o(r,"useSelectedLayoutSegment")&&n.d(t,{useSelectedLayoutSegment:function(){return r.useSelectedLayoutSegment}})},41771:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var r=n(57437),a=n(99376),s=n(2265),o=n(34657),l=n(2185),u=n(14759),c=n(31476),i=n(23403),d=n(35535),f=n(81114);function h(e){var t,n;let{annotationProject:a,onDeleteTag:s,TagSearchBar:o,tagColorFn:l}=e;return(0,r.jsxs)("div",{className:"flex flex-col gap-4 p-4",children:[(0,r.jsxs)(d.H2,{children:[(0,r.jsx)(c.Dg,{className:"inline-block mr-2 w-8 h-8 align-middle"}),"Project Tags"]}),(0,r.jsxs)("p",{className:"text-stone-500",children:[(0,r.jsx)("span",{className:"font-bold text-emerald-500",children:"Tags"})," provide meaning to annotations. View available tags for this project or add more as needed."]}),(0,r.jsx)(f.Z,{className:"mt-4",children:"You can always come back and add more tags in the future."}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-y-4 gap-x-14",children:[(0,r.jsxs)("div",{className:"col-span-2 md:col-span-1",children:[(0,r.jsx)(d.H3,{children:"Add Tags"}),(0,r.jsx)("small",{className:"text-stone-500",children:"Use the search bar below to find tags for the project. Select a tag to add."}),(0,r.jsx)("div",{className:"py-2",children:o}),(0,r.jsx)("small",{className:"text-stone-500",children:"Create new tags if needed, but avoid duplicating meanings."})]}),(0,r.jsxs)("div",{className:"flex flex-col col-span-2 gap-2 md:col-span-1",children:[(0,r.jsx)(d.H3,{children:"Selected tags"}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"font-bold text-blue-500",children:(null!==(t=a.tags)&&void 0!==t?t:[]).length.toLocaleString()})," ","tags selected. These are available for annotators."]}),(0,r.jsx)("small",{className:"text-stone-500",children:"Use the search bar to find registered tags. Click a tag to remove it."}),(0,r.jsx)("div",{children:(0,r.jsx)(i.Z,{tags:null!==(n=a.tags)&&void 0!==n?n:[],onClick:s,tagColorFn:l})})]})]})]})}function m(e){let{annotationProject:t,onAddTag:n,onRemoveTag:a}=e,s=(0,u.Z)(e=>e.getTagColor),{data:c,removeTag:i,addTag:d}=(0,l.Z)({uuid:t.uuid,annotationProject:t,onAddTag:n,onRemoveTag:a});return(0,r.jsx)(h,{annotationProject:c||t,onDeleteTag:i.mutate,TagSearchBar:(0,r.jsx)(o.Z,{onSelectTag:d.mutate}),tagColorFn:s})}var x=n(27142),g=n(65198);function p(){let e=(0,s.useContext)(g.Z);return null==e?(0,a.notFound)():(0,r.jsx)(x.Z,{children:(0,r.jsx)(m,{annotationProject:e})})}},65198:function(e,t,n){"use strict";let r=(0,n(2265).createContext)({name:"",description:"",tags:[],created_on:new Date,uuid:""});t.Z=r},2185:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(57437),a=n(21770),s=n(2265),o=n(69064),l=n(23857),u=n(80207);function c(e){var t;let{error:n,message:a}=e,l=null===(t=n.response)||void 0===t?void 0:t.data,c=null==l?void 0:l.exception,i=null==l?void 0:l.traceback,d=c&&i,f=d?"Please copy the error below and report the issue to the developers (see guide on reporting errors).":"Oops, an unexpected error occurred. Please try running whombat on debug mode (consult guide) and try again to see the full error message.",h="\nUser Message: ".concat(a,"\n\n").concat(f,"\n\n").concat(d?"Exception:\n".concat(c,"\n\nTraceback:\n").concat(i,"\n\n"):"","Full Error Details (for debugging):\n").concat(JSON.stringify(n.response,null,2),"\n  ").trim(),m=(0,s.useCallback)(()=>o.ZP.promise(navigator.clipboard.writeText(h),{loading:"Copying...",success:"Copied to clipboard",error:"Failed to copy"}),[h]);return(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("p",{className:"font-bold text-red-500",children:a}),(0,r.jsx)("p",{className:"mt-2 text-sm",children:f}),(0,r.jsx)("div",{className:"flex flex-row gap-2 items-center",children:(0,r.jsx)(u.Z,{mode:"text",onClick:m,children:"Copy Error Details"})}),d&&(0,r.jsxs)("details",{className:"p-2 text-xs rounded",children:[(0,r.jsx)("summary",{className:"cursor-pointer",children:"Show Error Information"}),(0,r.jsxs)("pre",{className:"overflow-y-auto mt-4 max-h-48 whitespace-pre-wrap break-all text-stone-500",children:[(0,r.jsx)("strong",{children:"Exception:"}),(0,r.jsx)("br",{}),c,(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)("strong",{children:"Traceback:"}),(0,r.jsx)("br",{}),i]})]})]})}var i=n(58435);function d(e){let{uuid:t,annotationProject:n,onUpdate:u,onDelete:d,onAddTag:f,onRemoveTag:h,onAddAnnotationTasks:m,onError:x,enabled:g=!0}=e,{query:p,useMutation:v,client:j}=(0,i.ZP)({id:t,initialData:n,name:"annotation_project",enabled:g,queryFn:l.Z.annotationProjects.get,onError:x}),C=v({mutationFn:l.Z.annotationProjects.update,onSuccess:e=>{o.ZP.success("Annotation project updated"),null==u||u(e)}}),b=v({mutationFn:l.Z.annotationProjects.addTag,onSuccess:f}),w=v({mutationFn:l.Z.annotationProjects.removeTag,onSuccess:h}),y=v({mutationFn:l.Z.annotationProjects.delete,onSuccess:d}),{data:k}=p,N=(0,s.useCallback)(async e=>{if(null==k)return;let t=await l.Z.clips.createMany(e);return await l.Z.annotationTasks.createMany(k,t)},[k]),E=(0,a.D)({mutationFn:N,onSuccess:e=>{null!=e&&(null==m||m(e),j.invalidateQueries({queryKey:["annotation_project",t]}))}}),Z=(0,s.useCallback)(async()=>{await o.ZP.promise(l.Z.annotationProjects.download(t),{loading:"Downloading...",success:"Download complete",error:e=>(0,r.jsx)(c,{error:e,message:"Failed to download dataset"})})},[t]);return{...p,update:C,addTag:b,addAnnotationTasks:E,removeTag:w,delete:y,download:Z}}},14759:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}}),n(2265);var r=n(59625),a=n(89134),s=n(78705);let o=e=>({audioSettings:s.sf,setAudioSettings:t=>{e(e=>({...e,audioSettings:t}))}}),l=e=>({clipboard:"",copy:t=>e({clipboard:t})});var u=n(65781);let c=(e,t)=>({colors:{tags:{}},setTagColor:(t,n)=>{e(e=>({colors:{tags:{...e.colors.tags,[(0,u.ix)(t)]:n}}}))},getTagColor:n=>{let{tags:r}=t().colors,a=(0,u.ix)(n);if(r[a])return r[a];{let t=(0,u.mr)();return e(e=>({colors:{tags:{...e.colors.tags,[a]:t}}})),t}},clearTagColors:()=>{e(()=>({colors:{tags:{}}}))}}),i=e=>({user:null,login:t=>e({user:t}),logout:()=>e({user:null})}),d=e=>({spectrogramSettings:s.Ek,setSpectrogramSettings:t=>{e(e=>({...e,spectrogramSettings:t}))}});var f=(0,r.Ue)()((0,a.tJ)(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return{...i(...t),...l(...t),...c(...t),...d(...t),...o(...t)}},{name:"whombat-storage",storage:(0,a.FL)(()=>localStorage)}))},21255:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(57437),a=n(2265),s=n(45652),o=n(63937),l=n(63685),u=n(31476),c=n(80207),i=n(55047),d=n(14957);function f(e){let{label:t="Search",placeholder:n="Search...",isLoading:f=!1,icon:h,...m}=e,x=(0,l.c)({label:t,...m}),g=(0,a.useRef)(null),{labelProps:p,inputProps:v,clearButtonProps:j}=(0,s.t)({label:t,...m},x,g);return(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(o.T,{children:(0,r.jsx)("label",{...p,children:t})}),(0,r.jsxs)("div",{className:"relative w-full",children:[(0,r.jsx)("div",{className:"flex absolute inset-y-0 left-0 items-center pl-3 w-8 pointer-events-none",children:f?(0,r.jsx)(i.Z,{}):h||(0,r.jsx)(u.W1,{})}),(0,r.jsx)(d.Z,{className:"pl-10 text-sm 5",ref:g,...v}),""!==x.value&&(0,r.jsxs)(c.Z,{variant:"primary",mode:"text",className:"flex absolute inset-y-0 right-0 items-center ml-2",onClick:j.onPress,children:[(0,r.jsx)(u.Tw,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"sr-only",children:t})]})]})]})}},27142:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(57437);function a(e){let{children:t}=e;return(0,r.jsx)("div",{className:"flex flex-col justify-center items-center px-16 py-8 w-full",children:t})}},23403:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(57437),a=n(21255),s=n(33857),o=n(80207),l=n(85754),u=n(65781);function c(e){let{tags:t,onClick:n,onRemove:c,showMax:i=10,tagColorFn:d=u.vm}=e,{items:f,setSearch:h,setLimit:m,hasMore:x}=(0,l.Z)({options:t,fields:["key","value"],limit:i});return(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsx)(a.Z,{onChange:e=>h(e)}),(0,r.jsxs)("div",{className:"flex overflow-hidden flex-col gap-2 w-full",children:[0===t.length&&(0,r.jsx)("p",{className:"text-stone-500",children:"No tags"}),0===f.length&&t.length>0&&(0,r.jsx)("p",{className:"text-stone-500",children:"No tags found"}),f.map(e=>(0,r.jsx)(s.ZP,{tag:e,...d(e),onClick:n&&(()=>n(e)),onClose:c&&(()=>c(e))},"".concat(e.key,"-").concat(e.value))),x&&(0,r.jsx)(o.Z,{mode:"text",variant:"primary",className:"w-full",onClick:()=>m(e=>e+10),children:"Show more"})]})]})}},35535:function(e,t,n){"use strict";n.d(t,{H1:function(){return o},H2:function(){return l},H3:function(){return u},H4:function(){return c}});var r=n(57437),a=n(36760),s=n.n(a);function o(e){let{children:t,className:n,...a}=e;return(0,r.jsx)("h1",{className:s()("text-2xl font-bold text-stone-800 dark:text-stone-300",n),...a,children:t})}function l(e){let{children:t,className:n,...a}=e;return(0,r.jsx)("h2",{className:s()("text-xl font-bold text-stone-800 dark:text-stone-300",n),...a,children:t})}function u(e){let{children:t,className:n,...a}=e;return(0,r.jsx)("h3",{className:s()("text-lg font-semibold leading-7 items-center text-stone-800 dark:text-stone-300",n),...a,children:t})}function c(e){let{children:t,className:n,...a}=e;return(0,r.jsx)("h4",{className:s()(n,"text-md font-semibold leading-6 text-stone-800 dark:text-stone-300"),...a,children:t})}},81114:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(57437),a=n(36760),s=n.n(a);function o(e){let{title:t,className:n,children:a}=e;return(0,r.jsxs)("div",{className:s()(n,"flex items-center p-3 text-sm text-blue-800 border border-blue-300 rounded-lg bg-blue-50 dark:bg-gray-800 dark:text-blue-400 dark:border-blue-800"),role:"alert",children:[(0,r.jsx)("svg",{className:"inline flex-shrink-0 mr-3 w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})}),(0,r.jsx)("span",{className:"sr-only",children:"Info"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:null==t?"Info!":t})," ",a]})]})}},29379:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(57437);function a(e){let{children:t}=e;return(0,r.jsx)("kbd",{className:"inline-block px-1 font-mono rounded border bg-stone-900 border-stone-800 text-stone-300 dark:bg-stone-300 dark:border-stone-400 dark:text-stone-900",children:t})}function s(e){let{keys:t=[],...n}=e;for(let e in n)n[e]&&(t=[e,...t]);return 0===t.length?null:1===t.length?(0,r.jsx)(a,{children:t[0]}):(0,r.jsx)("kbd",{className:"inline-flex gap-1 items-center text-stone-300 dark:test-stone-900",children:null==t?void 0:t.map(e=>(0,r.jsx)(a,{children:e},e)).reduce((e,t)=>[e,"+",t])})}},55047:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(57437),a=n(83470);function s(){let{text:e=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.jsxs)("div",{className:"flex flex-row justify-center items-center w-full h-full",children:[(0,r.jsx)(a.Z,{})," ",e]})}},85754:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(53916),a=n(2265);function s(e){let{options:t,fields:n,limit:s=20,...o}=e,[l,u]=(0,a.useState)(s),[c,i]=(0,a.useState)(""),d=(0,a.useMemo)(()=>new r.Z(t,{keys:n,threshold:.3,includeMatches:!1,includeScore:!1,...o}),[t,n,o]);return{items:(0,a.useMemo)(()=>""===c?t.slice(0,l):d.search(c,{limit:l}).map(e=>e.item),[c,d,t,l]),limit:l,search:c,setSearch:i,setLimit:u,hasMore:l<t.length}}},21281:function(e,t,n){"use strict";n.d(t,{q:function(){return s}});var r=n(2265),a=n(13323);function s(e,t){let n=(0,r.useRef)([]),s=(0,a.z)(e);(0,r.useEffect)(()=>{let e=[...n.current];for(let[r,a]of t.entries())if(n.current[r]!==a){let r=s(t,e);return n.current=t,r}},[s,...t])}},29422:function(e,t,n){"use strict";n.d(t,{m:function(){return r}});let r=[];!function(e){function t(){"loading"!==document.readyState&&(e(),document.removeEventListener("DOMContentLoaded",t))}"undefined"!=typeof window&&"undefined"!=typeof document&&(document.addEventListener("DOMContentLoaded",t),t())}(()=>{function e(e){e.target instanceof HTMLElement&&e.target!==document.body&&r[0]!==e.target&&(r.unshift(e.target),(r=r.filter(e=>null!=e&&e.isConnected)).splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})})},39124:function(e,t,n){"use strict";var r=n(2265);let a=r.forwardRef(function(e,t){let{title:n,titleId:a,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,r.createElement("path",{fillRule:"evenodd",d:"M10.53 3.47a.75.75 0 0 0-1.06 0L6.22 6.72a.75.75 0 0 0 1.06 1.06L10 5.06l2.72 2.72a.75.75 0 1 0 1.06-1.06l-3.25-3.25Zm-4.31 9.81 3.25 3.25a.75.75 0 0 0 1.06 0l3.25-3.25a.75.75 0 1 0-1.06-1.06L10 14.94l-2.72-2.72a.75.75 0 0 0-1.06 1.06Z",clipRule:"evenodd"}))});t.Z=a},45652:function(e,t,n){"use strict";n.d(t,{t:function(){return l}});var r={};r={"ar-AE":{"Clear search":`\u{645}\u{633}\u{62D} \u{627}\u{644}\u{628}\u{62D}\u{62B}`},"bg-BG":{"Clear search":`\u{418}\u{437}\u{447}\u{438}\u{441}\u{442}\u{432}\u{430}\u{43D}\u{435} \u{43D}\u{430} \u{442}\u{44A}\u{440}\u{441}\u{435}\u{43D}\u{435}`},"cs-CZ":{"Clear search":`Vymazat hled\xe1n\xed`},"da-DK":{"Clear search":`Ryd s\xf8gning`},"de-DE":{"Clear search":`Suche zur\xfccksetzen`},"el-GR":{"Clear search":`\u{391}\u{3C0}\u{3B1}\u{3BB}\u{3BF}\u{3B9}\u{3C6}\u{3AE} \u{3B1}\u{3BD}\u{3B1}\u{3B6}\u{3AE}\u{3C4}\u{3B7}\u{3C3}\u{3B7}\u{3C2}`},"en-US":{"Clear search":"Clear search"},"es-ES":{"Clear search":`Borrar b\xfasqueda`},"et-EE":{"Clear search":`T\xfchjenda otsing`},"fi-FI":{"Clear search":`Tyhjenn\xe4 haku`},"fr-FR":{"Clear search":"Effacer la recherche"},"he-IL":{"Clear search":`\u{5E0}\u{5E7}\u{5D4} \u{5D7}\u{5D9}\u{5E4}\u{5D5}\u{5E9}`},"hr-HR":{"Clear search":`Obri\u{161}i pretragu`},"hu-HU":{"Clear search":`Keres\xe9s t\xf6rl\xe9se`},"it-IT":{"Clear search":"Cancella ricerca"},"ja-JP":{"Clear search":`\u{691C}\u{7D22}\u{3092}\u{30AF}\u{30EA}\u{30A2}`},"ko-KR":{"Clear search":`\u{AC80}\u{C0C9} \u{C9C0}\u{C6B0}\u{AE30}`},"lt-LT":{"Clear search":`I\u{161}valyti ie\u{161}k\u{105}`},"lv-LV":{"Clear search":`Not\u{12B}r\u{12B}t mekl\u{113}\u{161}anu`},"nb-NO":{"Clear search":`T\xf8m s\xf8k`},"nl-NL":{"Clear search":"Zoekactie wissen"},"pl-PL":{"Clear search":`Wyczy\u{15B}\u{107} zawarto\u{15B}\u{107} wyszukiwania`},"pt-BR":{"Clear search":"Limpar pesquisa"},"pt-PT":{"Clear search":"Limpar pesquisa"},"ro-RO":{"Clear search":`\u{15E}terge\u{163}i c\u{103}utarea`},"ru-RU":{"Clear search":`\u{41E}\u{447}\u{438}\u{441}\u{442}\u{438}\u{442}\u{44C} \u{43F}\u{43E}\u{438}\u{441}\u{43A}`},"sk-SK":{"Clear search":`Vymaza\u{165} vyh\u{13E}ad\xe1vanie`},"sl-SI":{"Clear search":`Po\u{10D}isti iskanje`},"sr-SP":{"Clear search":`Obri\u{161}i pretragu`},"sv-SE":{"Clear search":`Rensa s\xf6kning`},"tr-TR":{"Clear search":`Aramay\u{131} temizle`},"uk-UA":{"Clear search":`\u{41E}\u{447}\u{438}\u{441}\u{442}\u{438}\u{442}\u{438} \u{43F}\u{43E}\u{448}\u{443}\u{43A}`},"zh-CN":{"Clear search":`\u{6E05}\u{9664}\u{641C}\u{7D22}`},"zh-TW":{"Clear search":`\u{6E05}\u{9664}\u{641C}\u{5C0B}\u{689D}\u{4EF6}`}};var a=n(62319),s=n(73106),o=n(87826);function l(e,t,n){var l;let u=(0,s.q)((l=r)&&l.__esModule?l.default:l,"@react-aria/searchfield"),{isDisabled:c,isReadOnly:i,onSubmit:d,onClear:f,type:h="search"}=e,{labelProps:m,inputProps:x,descriptionProps:g,errorMessageProps:p,...v}=(0,o.h)({...e,value:t.value,onChange:t.setValue,onKeyDown:i?e.onKeyDown:(0,a.t)(e=>{let r=e.key;"Enter"===r&&(c||i)&&e.preventDefault(),c||i||("Enter"===r&&d&&(e.preventDefault(),d(t.value)),"Escape"===r&&(""!==t.value||n.current&&""!==n.current.value?(e.preventDefault(),t.setValue(""),f&&f()):e.continuePropagation()))},e.onKeyDown),type:h},n);return{labelProps:m,inputProps:{...x,defaultValue:void 0},clearButtonProps:{"aria-label":u.format("Clear search"),excludeFromTabOrder:!0,preventFocusOnPress:!0,isDisabled:c||i,onPress:()=>{t.setValue(""),f&&f()},onPressStart:()=>{var e;null===(e=n.current)||void 0===e||e.focus()}},descriptionProps:g,errorMessageProps:p,...v}}},63685:function(e,t,n){"use strict";n.d(t,{c:function(){return a}});var r=n(45614);function a(e){let[t,n]=(0,r.z)(s(e.value),s(e.defaultValue)||"",e.onChange);return{value:t,setValue:n}}function s(e){if(null!=e)return e.toString()}}},function(e){e.O(0,[5501,6523,7928,7119,3464,9763,9064,3044,1713,2906,3633,237,5335,5883,5097,3916,3857,2758,6063,9715,2971,2117,1744],function(){return e(e.s=19401)}),_N_E=e.O()}]);