(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[613],{50298:function(e,n,t){Promise.resolve().then(t.bind(t,75319))},66100:function(e,n,t){"use strict";let a=(0,t(2265).createContext)({name:"",description:"",tags:[],uuid:"",created_on:new Date,task:"Sound Event Detection"});n.Z=a},75319:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return B}});var a=t(57437),s=t(99376),i=t(2265),l=t(69064),o=t(2799),r=t(23857),u=t(31476),c=t(70452),d=t(80207);function x(e){let{evaluationSet:n,onDelete:t,onDownload:s}=e;return(0,a.jsxs)("div",{className:"flex flex-row gap-2 justify-center",children:[(0,a.jsxs)(d.Z,{mode:"text",variant:"primary",onClick:s,children:[(0,a.jsx)(u._8,{className:"inline-block mr-2 w-5 h-5"})," Download"]}),(0,a.jsx)(m,{onDelete:t,evaluationSet:n})]})}function m(e){let{onDelete:n,evaluationSet:t}=e;return(0,a.jsx)(c.Z,{title:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.aN,{className:"inline-block mr-2 w-8 h-8 text-red-500"}),"Are you sure you want to delete this evaluation set?"]}),button:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.pJ,{className:"inline-block mr-2 w-5 h-5"}),"Delete Set"]}),mode:"text",variant:"danger",children:e=>{let{close:s}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("h2",{className:"p-4 font-extrabold text-center",children:t.name}),(0,a.jsx)("p",{children:"This action cannot be undone. All evaluations stored in this set will be deleted."}),(0,a.jsx)("p",{children:"Do you want to proceed?"})]}),(0,a.jsxs)("div",{className:"flex flex-row gap-2 justify-end mt-4",children:[(0,a.jsxs)(d.Z,{mode:"outline",variant:"primary",onClick:s,children:[(0,a.jsx)(u.Tw,{className:"inline-block mr-2 w-5 h-5"}),"Cancel"]}),(0,a.jsxs)(d.Z,{mode:"text",variant:"danger",onClick:n,children:[(0,a.jsx)(u.pJ,{className:"inline-block mr-2 w-5 h-5"}),"Delete"]})]})]})}})}function v(e){let{evaluationSet:n,onDelete:t,onDownload:s}=e,{data:u,delete:c}=(0,o.Z)({uuid:n.uuid,evaluationSet:n,onDelete:t}),d=(0,i.useCallback)(async()=>{await l.ZP.promise(r.Z.evaluationSets.download(n.uuid),{loading:"Preparing download, please wait...",success:"Downloaded!",error:"Failed to download"}),null==s||s()},[s,n.uuid]),m=(0,i.useCallback)(async()=>{await l.ZP.promise(c.mutateAsync(),{loading:"Deleting evaluation set, please wait...",success:"Deleted!",error:"Failed to delete"}),null==t||t()},[t,c]);return(0,a.jsx)(x,{evaluationSet:u||n,onDelete:m,onDownload:d})}t(10060),t(38034),t(2206);var h=t(79116),f=t(35639),j=t(45906),g=t(26596);let p={},b=[];function w(){let{filter:e=p,fixed:n=b,pageSize:t=10,enabled:a=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=(0,j.Z)({defaults:e,fixed:n}),{query:i,pagination:l,items:o,total:u}=(0,g.Z)({name:"user_runs",queryFn:r.Z.userRuns.getMany,pageSize:t,filter:s.filter,enabled:a});return{...i,filter:s,pagination:l,items:o,total:u}}var N=t(27432),y=t(65903),k=t(35535),Z=t(39241);function S(e){var n,t;let{evaluationSet:s,isLoading:i=!1,numExamples:l=0,numModelRuns:o=0,numTrainingSessions:r=0,...c}=e,x=null!==(t=null===(n=s.tags)||void 0===n?void 0:n.length)&&void 0!==t?t:0;return(0,a.jsxs)(N.Z,{children:[(0,a.jsxs)("div",{className:"flex flex-row justify-between items-center",children:[(0,a.jsx)(k.H3,{children:"Overview"}),(0,a.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,a.jsxs)(d.Z,{mode:"text",variant:"primary",onClick:c.onClickAddTags,children:[(0,a.jsx)(u.dt,{className:"inline-block mr-2 w-5 h-5"}),(0,a.jsx)(u.Dg,{className:"inline-block mr-2 w-5 h-5"}),"Add Evaluation Tags"]}),(0,a.jsxs)(d.Z,{mode:"text",variant:"primary",onClick:c.onClickAddExamples,children:[(0,a.jsx)(u.dt,{className:"inline-block mr-2 w-5 h-5"}),(0,a.jsx)(u.Fl,{className:"inline-block mr-2 w-5 h-5"}),"Add Evaluation Examples"]})]})]}),(0,a.jsxs)("div",{className:"flex flex-row gap-2 justify-around",children:[(0,a.jsx)(Z.Z,{icon:(0,a.jsx)(u.wL,{className:"inline-block w-8 h-8 text-blue-500"}),title:"Prediction Type",value:s.task}),(0,a.jsx)(Z.Z,{icon:(0,a.jsx)(u.Fl,{className:"inline-block w-8 h-8 text-blue-500"}),title:"Num Examples",value:l,isLoading:i,onClick:c.onClickExamplesBadge}),(0,a.jsx)(Z.Z,{icon:(0,a.jsx)(u.Dg,{className:"inline-block w-8 h-8 text-blue-500"}),title:"Num Classes",value:x,onClick:c.onClickClassesBadge}),(0,a.jsx)(Z.Z,{icon:(0,a.jsx)(u.ZA,{className:"inline-block w-8 h-8 text-blue-500"}),title:"Model Runs",isLoading:i,value:o,onClick:c.onClickModelRunsBadge}),(0,a.jsx)(Z.Z,{icon:(0,a.jsx)(u.tB,{className:"inline-block w-8 h-8 text-blue-500"}),title:"User Training Sessions",value:r,isLoading:i,onClick:c.onClickTrainingSessionsBadge})]}),0===l&&!i&&(0,a.jsx)(C,{}),0===x&&(0,a.jsx)(E,{})]})}function C(){return(0,a.jsxs)(y.Z,{outerClassName:"p-2",children:[(0,a.jsxs)("div",{className:"inline-flex gap-4 text-amber-500",children:[(0,a.jsx)(u.Fl,{className:"w-8 h-8 text-amber-500"}),"Missing Evaluation Examples"]}),(0,a.jsxs)("div",{className:"text-center",children:["No examples are currently assigned to this evaluation set! Please add some evaluation examples to get started, by clicking",(0,a.jsx)("span",{className:"text-emerald-500",children:" Add Evaluation Examples"})," ","button above."]})]})}function E(){return(0,a.jsxs)(y.Z,{outerClassName:"p-2",children:[(0,a.jsxs)("div",{className:"inline-flex gap-4 text-amber-500",children:[(0,a.jsx)(u.Dg,{className:"w-8 h-8 text-amber-500"}),"Missing Evaluation Tags"]}),(0,a.jsxs)("div",{className:"text-center",children:["No tags are currently assigned to this evaluation set. Please add some evaluation tags to get started by clicking",(0,a.jsx)("span",{className:"text-emerald-500",children:" Add Evaluation Tags "})," button above."]})]})}function _(e){let{evaluationSet:n}=e,t=(0,s.useSearchParams)(),l=(0,s.useRouter)(),o=(0,i.useMemo)(()=>({evaluation_set:n}),[n]),r=(0,h.Z)({filter:o,pageSize:0}),u=(0,f.Z)({filter:o,pageSize:0}),c=w({filter:o,pageSize:0}),d=(0,i.useCallback)(()=>{l.push("/evaluation/detail/tags/?evaluation_set_uuid=".concat(n.uuid,"&").concat(t.toString()))},[n.uuid,t,l]),x=(0,i.useCallback)(()=>{l.push("/evaluation/detail/tasks/?evaluation_set_uuid=".concat(n.uuid,"&").concat(t.toString()))},[n.uuid,t,l]);return(0,a.jsx)(S,{evaluationSet:n,isLoading:r.isLoading||u.isLoading||c.isLoading,numModelRuns:u.total,numExamples:r.total,numTrainingSessions:c.total,onClickAddTags:d,onClickAddExamples:x})}var D=t(35351);function F(e){var n,t;let{evaluationSet:s,onChange:i}=e;return(0,a.jsxs)(D.Zb,{children:[(0,a.jsx)("div",{className:"px-4 sm:px-0",children:(0,a.jsx)(D.H3,{className:"text-center",children:"Details"})}),(0,a.jsx)("div",{className:"mt-4 border-t border-stone-300 dark:border-stone-700",children:(0,a.jsxs)("dl",{className:"divide-y divide-stone-500",children:[(0,a.jsx)("div",{className:"py-6 px-4 sm:px-0",children:(0,a.jsx)(D.dk,{name:"Name",value:null!==(n=null==s?void 0:s.name)&&void 0!==n?n:"",onChange:e=>null==i?void 0:i({name:e}),type:"text",editable:!0})}),(0,a.jsx)("div",{className:"py-6 px-4 sm:px-0",children:(0,a.jsx)(D.dk,{name:"Description",value:null!==(t=null==s?void 0:s.description)&&void 0!==t?t:"",onChange:e=>null==i?void 0:i({description:e}),type:"textarea",editable:!0})}),(0,a.jsx)("div",{className:"py-6 px-4 sm:px-0",children:(0,a.jsx)(D.dk,{name:"Created On",value:null==s?void 0:s.created_on,type:"date"})})]})})]})}function R(e){let{evaluationSet:n,onChange:t}=e,{data:s,update:{mutate:i}}=(0,o.Z)({uuid:n.uuid,evaluationSet:n,onUpdate:t});return(0,a.jsx)(F,{evaluationSet:s||n,onChange:i})}function M(e){let{modelRun:n,onClick:t}=e;return(0,a.jsxs)("li",{children:[(0,a.jsxs)("div",{className:"inline-flex gap-2 items-baseline",children:[(0,a.jsx)(D.zx,{mode:"text",padding:"p-0",onClick:t,children:n.name}),(0,a.jsx)("span",{className:"text-sm text-stone-500",children:n.version})]}),(0,a.jsx)("div",{className:"text-xs text-stone-500",children:n.created_on.toLocaleString()})]},n.uuid)}function A(e){let{modelRuns:n,isLoading:t=!1,onAddModelRuns:s,onClickModelRun:i}=e;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex flex-row justify-between items-center",children:[(0,a.jsxs)(D.H4,{children:[(0,a.jsx)(u.ZA,{className:"inline-block mr-2 w-5 h-5"}),"Model Runs"]}),(0,a.jsxs)(D.zx,{mode:"text",variant:"primary",onClick:s,children:[(0,a.jsx)(u.dt,{className:"inline-block mr-2 w-5 h-5"})," Add Model Run"]})]}),t?(0,a.jsx)(D.gb,{}):n.length>0?(0,a.jsx)("ul",{className:"flex flex-col gap-4 list-disc list-inside",children:n.map(e=>(0,a.jsx)(M,{modelRun:e,onClick:()=>null==i?void 0:i(e)},e.uuid))}):(0,a.jsx)(D.HY,{children:"No model evaluations found"})]})}function T(e){let{evaluationSet:n,showMax:t=5,...l}=e,o=(0,s.useRouter)(),r=(0,i.useMemo)(()=>({evaluation_set:n}),[n]),{items:u,isLoading:c}=(0,f.Z)({filter:r,pageSize:t}),d=(0,i.useCallback)(()=>{o.push("/evaluation/detail/model_runs/?evaluation_set_uuid=".concat(n.uuid,"&import=true"))},[o,n.uuid]),x=(0,i.useCallback)(e=>{o.push("/evaluation/detail/model_run/?evaluation_set_uuid=".concat(n.uuid,"&model_run_uuid=").concat(e.uuid))},[n,o]);return(0,a.jsx)(A,{isLoading:c,modelRuns:u,onAddModelRuns:d,onClickModelRun:x,...l})}function q(e){return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex flex-row justify-between items-center",children:[(0,a.jsxs)(D.H4,{className:"whitespace-nowrap",children:[(0,a.jsx)(u.tB,{className:"inline-block mr-2 w-5 h-5"}),"User Training Sessions"]}),(0,a.jsxs)(D.zx,{mode:"text",variant:"primary",onClick:e.onAddUserRun,children:[(0,a.jsx)(u.RJ,{className:"inline-block mr-2 w-5 h-5"})," Start New"]})]}),e.isLoading?(0,a.jsx)(D.gb,{}):e.userRuns.length>0?(0,a.jsx)("div",{className:"flex flex-col gap-2",children:e.userRuns.map(e=>(0,a.jsxs)("div",{children:[e.user.username," - ",e.created_on.toLocaleString()]},e.uuid))}):(0,a.jsx)(D.HY,{children:"No training sessions"})]})}function L(e){let{evaluationSet:n,showMax:t=5,...s}=e,{items:l,isLoading:o}=w({filter:(0,i.useMemo)(()=>({evaluation_set:n}),[n]),pageSize:t});return(0,a.jsx)(q,{userRuns:l,isLoading:o,...s})}t(27142),t(37336);var z=t(15947);t(9568),t(93059);var P=t(66100);function B(){let e=(0,s.useRouter)(),n=(0,i.useContext)(P.Z),t=(0,i.useCallback)(()=>{e.push("/evaluation/")},[e]);return(0,a.jsx)(z.Z,{Actions:(0,a.jsx)(v,{evaluationSet:n,onDelete:t}),SideBar:(0,a.jsx)(R,{evaluationSet:n,onChange:()=>l.ZP.success("Evaluation Set updated successfully.")}),MainContent:(0,a.jsxs)("div",{className:"flex flex-col gap-4 grow",children:[(0,a.jsx)(_,{evaluationSet:n}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(D.Zb,{children:(0,a.jsx)(T,{evaluationSet:n})}),(0,a.jsx)(D.Zb,{children:(0,a.jsx)(L,{evaluationSet:n})})]})]})})}},79116:function(e,n,t){"use strict";t.d(n,{Z:function(){return r}});var a=t(23857),s=t(45906),i=t(26596);let l={},o=[];function r(){let{filter:e=l,fixed:n=o,pageSize:t=10,enabled:r=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=(0,s.Z)({defaults:e,fixed:n}),{query:c,pagination:d,items:x,total:m}=(0,i.Z)({name:"clip_annotations",queryFn:a.Z.clipAnnotations.getMany,pageSize:t,filter:u.filter,enabled:r});return{...c,filter:u,pagination:d,items:x,total:m}}},2799:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var a=t(2265),s=t(23857),i=t(58435);function l(e){let{uuid:n,evaluationSet:t,enabled:l=!0,onAddModelRun:o,onAddUserRun:r,onUpdate:u,onDelete:c,onAddTag:d,onRemoveTag:x,onAddTasks:m,onError:v}=e,{query:h,useMutation:f,useDestruction:j}=(0,i.ZP)({id:n,initialData:t,name:"evaluation_set",enabled:l,queryFn:s.Z.evaluationSets.get,onError:v}),g=f({mutationFn:s.Z.evaluationSets.update,onSuccess:u}),p=f({mutationFn:s.Z.evaluationSets.addTag,onSuccess:d}),b=f({mutationFn:s.Z.evaluationSets.removeTag,onSuccess:x}),w=f({mutationFn:s.Z.evaluationSets.addEvaluationTasks,onSuccess:m}),N=f({mutationFn:s.Z.evaluationSets.addModelRun,onSuccess:o}),y=f({mutationFn:s.Z.evaluationSets.addUserRun,onSuccess:r}),k=j({mutationFn:s.Z.evaluationSets.delete,onSuccess:c}),Z=(0,a.useMemo)(()=>h.data?s.Z.evaluationSets.getDownloadUrl(h.data):"",[h.data]);return{...h,update:g,addTag:p,removeTag:b,addEvaluationTasks:w,addModelRun:N,addUserRun:y,delete:k,downloadUrl:Z}}},35639:function(e,n,t){"use strict";t.d(n,{Z:function(){return r}});var a=t(23857),s=t(45906),i=t(26596);let l={},o=[];function r(){let{filter:e=l,fixed:n=o,pageSize:t=10,enabled:r=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=(0,s.Z)({defaults:e,fixed:n}),{query:c,pagination:d,items:x,total:m}=(0,i.Z)({name:"model_runs",queryFn:a.Z.modelRuns.getMany,pageSize:t,filter:u.filter,enabled:r});return{...c,filter:u,pagination:d,items:x,total:m}}},27142:function(e,n,t){"use strict";t.d(n,{Z:function(){return s}});var a=t(57437);function s(e){let{children:n}=e;return(0,a.jsx)("div",{className:"flex flex-col justify-center items-center px-16 py-8 w-full",children:n})}},15947:function(e,n,t){"use strict";t.d(n,{Z:function(){return s}});var a=t(57437);function s(e){let{MainContent:n,SideBar:t,Actions:s}=e;return(0,a.jsxs)("div",{className:"flex flex-row flex-wrap gap-8 justify-between md:flex-nowrap w-100",children:[(0,a.jsx)("div",{className:"grow",children:n}),(0,a.jsxs)("div",{className:"flex flex-col flex-none gap-4 max-w-sm",children:[s,(0,a.jsx)("div",{className:"sticky top-8 w-full",children:t})]})]})}},93059:function(e,n,t){"use strict";t.d(n,{E:function(){return s}});var a=t(57437);function s(){return(0,a.jsx)("hr",{className:"mx-1 h-px border-t-0 bg-stone-400 dark:bg-stone-600"})}},58435:function(e,n,t){"use strict";t.d(n,{ZP:function(){return o}});var a=t(21770),s=t(11713),i=t(29827),l=t(2265);function o(e){let{id:n,name:t,enabled:o=!0,queryFn:r,onError:u,staleTime:c=1/0,...d}=e,x=(0,i.NL)(),m=(0,s.a)({queryKey:[t,n],queryFn:()=>r(n),enabled:o,staleTime:c,...d}),v=(0,l.useCallback)(e=>{x.setQueryData([t,n],e)},[x,n,t]),{data:h,status:f,error:j,isError:g}=m;return(0,l.useEffect)(()=>{g&&(null==u||u(j))},[j,g,u]),{query:m,client:x,setData:v,useMutation:e=>{let{mutationFn:s,withUpdate:i=!0,...o}=e;return function(e){let{id:n,data:t,name:s,status:i,client:o,withUpdate:r=!0,mutationFn:u,onSuccess:c,...d}=e,x=(0,l.useCallback)(async e=>{if("pending"===i)throw Error("No data for object of type ".concat(s," (id=").concat(n,"). ")+"Either the query is not enabled or the query is still loading.");if("error"===i)throw Error("Error while loading object of type ".concat(s," (id=").concat(n,"),")+" cannot mutate");if(null==t)throw Error("No data for object of type ".concat(s," (id=").concat(n,"). ")+"The object is null, cannot mutate");return await u(t,e)},[i,t,u,s,n]);return(0,a.D)({...d,mutationFn:x,onSuccess:(e,t,a)=>{r&&o.setQueryData([s,n],e),null==c||c(e,t,a)}})}({id:n,data:h,status:f,client:x,mutationFn:s,name:t,withUpdate:i,...o})},useQuery:e=>{let{queryFn:a,secondaryName:i,enabled:o=!1,...r}=e;return function(e){let{id:n,query:t,name:a,secondaryName:i,enabled:o=!1,queryFn:r,...u}=e,{status:c,data:d}=t,x=(0,l.useCallback)(async()=>{if("pending"===c)throw Error("No data for object of type ".concat(a," (id=").concat(n,"). ")+"Either the query is not enabled or the query is still loading.");if("error"===c)throw Error("Error while loading object of type ".concat(a," (id=").concat(n,"), cannot mutate"));return await r(d)},[c,d,r,a,n]);return(0,s.a)({...u,queryFn:x,queryKey:[a,n,i],enabled:"pending"!==c&&"error"!==c&&o})}({id:n,query:m,queryFn:a,secondaryName:i,name:t,enabled:o,...r})},useDestruction:e=>{let{mutationFn:s,...i}=e;return function(e){let{id:n,query:t,client:s,name:i,mutationFn:o,onSuccess:r,...u}=e,{status:c,data:d}=t,x=(0,l.useCallback)(async()=>{if("pending"===c)throw Error("No data for object of type ".concat(i," (id=").concat(n,"). ")+"Either the query is not enabled or the query is still loading.");if("error"===c)throw Error("Error while loading object of type ".concat(i," (id=").concat(n,"), cannot mutate"));return await o(d)},[c,d,o,i,n]);return(0,a.D)({...u,mutationFn:x,onSuccess:(e,t,a)=>{s.removeQueries({queryKey:[i,n]}),null==r||r(e,t,a)}})}({id:n,query:m,client:x,mutationFn:s,name:t,...i})}}}}},function(e){e.O(0,[6229,5501,6523,7928,7119,3464,9763,9064,3044,1713,2906,3633,5109,237,5335,9091,4588,3857,2758,6063,5036,944,6506,2971,2117,1744],function(){return e(e.s=50298)}),_N_E=e.O()}]);