"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2269],{50294:function(e,t,n){n.d(t,{Z:function(){return h}});var l=n(57437),o=n(11164),r=n(14759),a=n(45147),s=n(35535);function i(e){var t;let{soundEventAnnotation:n}=e;return(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)(s.H4,{className:"text-center",children:"Sound Event Details"}),(0,l.jsxs)("div",{className:"flex flex-row flex-wrap gap-4",children:[(0,l.jsxs)("div",{className:"flex flex-col mr-4",children:[(0,l.jsx)(a.iV,{children:"Geometry Type"}),(0,l.jsx)(a.pj,{children:n.sound_event.geometry_type})]}),null===(t=n.sound_event.features)||void 0===t?void 0:t.map(e=>(0,l.jsxs)("div",{children:[(0,l.jsx)(a.iV,{children:e.name}),(0,l.jsx)(a.pj,{children:e.value.toLocaleString()})]},e.name))]})]})}var u=n(2265),c=n(34097);function d(e){let{soundEventAnnotation:t,...n}=e,o=(0,u.useMemo)(()=>t.notes||[],[t]);return(0,l.jsx)(c.Z,{title:"Sound Event Notes",notes:o,...n})}var f=n(63119);function m(e){let{soundEventAnnotation:t,...n}=e,o=(0,u.useMemo)(()=>t.tags||[],[t]);return(0,l.jsx)(f.Z,{title:"Sound Event Tags",tags:o,...n})}var x=n(27432);function p(e){let{soundEventAnnotation:t,onAddSoundEventAnnotationTag:n,onDeleteSoundEventAnnotationTag:o,onCreateSoundEventAnnotationNote:r,onUpdateSoundEventAnnotationNote:a,onDeleteSoundEventAnnotationNote:s,onCreateTag:u,...c}=e;return(0,l.jsxs)("div",{className:"flex flex-row gap-8 py-4 w-full",children:[(0,l.jsx)(x.Z,{className:"grow",children:(0,l.jsx)(i,{soundEventAnnotation:t})}),(0,l.jsx)(x.Z,{className:"grow",children:(0,l.jsx)(m,{soundEventAnnotation:t,onAddTag:n,onRemoveTag:o,onCreateTag:u,...c})}),(0,l.jsx)(d,{soundEventAnnotation:t,onCreateNote:r,onDeleteNote:s,onUpdateNote:a})]})}var v=n(79239);function h(e){let{soundEventAnnotation:t}=e,n=(0,r.Z)(e=>e.getTagColor),{data:a,addTag:s,removeTag:i,addNote:u,updateNote:c,removeNote:d}=(0,o.Z)({uuid:t.uuid,soundEventAnnotation:t});return(0,l.jsx)(p,{soundEventAnnotation:a||t,onAddSoundEventAnnotationTag:s.mutate,onDeleteSoundEventAnnotationTag:i.mutate,TagSearchBar:v.Z,tagColorFn:n,onCreateSoundEventAnnotationNote:u.mutate,onUpdateSoundEventAnnotationNote:(e,t)=>c.mutate({note:e,data:t}),onDeleteSoundEventAnnotationNote:d.mutate})}},45893:function(e,t,n){n.d(t,{Z:function(){return J}});var l,o,r=n(57437),a=n(2265),s=n(30498),i=n(2588),u=n(93675),c=n(17047),d=n(18133),f=n(28372),m=n(43289);function x(e){let{viewport:t,dimensions:n,enabled:l=!0,onClick:o,onDoubleClick:r,onMoveStart:i,onMove:u,onMoveEnd:c}=e,[d,x]=(0,a.useState)(null),p=(0,a.useMemo)(()=>{let e=e=>{if(!l)return;let a={x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY},s=(0,m._l)(a,t,n);x(s),null==o||o({position:s,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,altKey:e.altKey,metaKey:e.metaKey}),2===e.detail&&(null==r||r({position:s,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,altKey:e.altKey,metaKey:e.metaKey}))};return{onMouseDown:e,onPointerDown:e,onClick:e}},[l,t,n,o,r]),{moveProps:v,isDragging:h}=function(e){let{viewport:t,dimensions:n,onMoveStart:l,onMove:o,onMoveEnd:r}=e,[s,i]=(0,a.useState)(!1),[u,c]=(0,a.useState)({x:0,y:0}),d=(0,a.useCallback)(e=>{let{deltaX:l,deltaY:r,shiftKey:a,altKey:s,ctrlKey:i,metaKey:d}=e;c(e=>{let{x:t,y:n}=e;return{x:t+l,y:n+r}});let f=(0,m._l)({x:u.x+l,y:u.y+r},t,n,!0);null==o||o({shift:f,shiftKey:a,altKey:s,ctrlKey:i,metaKey:d})},[n,u,t,o]),x=(0,a.useCallback)(e=>{let{shiftKey:t,altKey:n,ctrlKey:o,metaKey:r}=e;c({x:0,y:0}),i(!0),null==l||l({shiftKey:t,altKey:n,ctrlKey:o,metaKey:r})},[l]),p=(0,a.useCallback)(e=>{let{shiftKey:t,altKey:n,ctrlKey:l,metaKey:o}=e;c({x:0,y:0}),null==r||r({shiftKey:t,altKey:n,ctrlKey:l,metaKey:o})},[r]),{moveProps:v}=(0,f.r)({onMoveStart:x,onMove:d,onMoveEnd:p});return{moveProps:v,isDragging:s,shift:u}}({viewport:t,dimensions:n,onMoveStart:(0,a.useCallback)(function(){let{shiftKey:e,ctrlKey:t,altKey:n,metaKey:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l&&(null==i||i({shiftKey:e,ctrlKey:t,altKey:n,metaKey:o}))},[l,i]),onMove:(0,a.useCallback)(e=>{let{shift:t,shiftKey:n,ctrlKey:o,altKey:r,metaKey:a}=e;l&&null!=d&&(null==u||u({initial:d,shift:t,shiftKey:n,ctrlKey:o,altKey:r,metaKey:a}))},[d,l,u]),onMoveEnd:(0,a.useCallback)(function(){let{shiftKey:e,ctrlKey:t,altKey:n,metaKey:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l&&(x(null),null==c||c({shiftKey:e,ctrlKey:t,altKey:n,metaKey:o}))},[l,c])});return{props:(0,s.d)(v,p),isDragging:h}}var p=n(99730),v=n(4523),h=n(42437),y=n(76168),g=n(2676);let b="rgb(16 185 129)",w={borderColor:b,fillColor:b,borderWidth:2,borderDash:[5,5],fillAlpha:.2},j=()=>{};var C=n(58363);function k(e){let{viewport:t,dimensions:n,annotations:l,enabled:o=!0}=e,[r,s]=(0,a.useState)(null),i=(0,a.useMemo)(()=>{if(!o)return[];let{min:e,max:n}=t.time,{min:r,max:a}=t.freq;return l.filter(t=>{let{geometry:l}=t.sound_event;if(null==l)return!1;switch(l.type){case"Point":let[o,s]=l.coordinates;return o>=e&&o<=n&&s>=r&&s<=a;case"TimeStamp":let i=l.coordinates;return i>=e&&i<=n;case"TimeInterval":let[u,c]=l.coordinates;return c>=e&&u<=n;case"BoundingBox":let[d,f,m,x]=l.coordinates;return m>=e&&d<=n&&x>=r&&f<=a}return!0})},[o,l,t]),u=(0,a.useMemo)(()=>o?i.map(e=>{let{sound_event:{geometry:l}}=e;return(0,m.w9)(n,l,t)}):[],[o,i,t,n]),c=(0,a.useCallback)(e=>{if(!o)return;let{time:l,freq:r}=e,[a,c]=(0,m.f8)(n,[l,r],t),d=u.findIndex(e=>(0,m.MR)([a,c],e));if(d<0){s(null);return}let f=i[d];s(null!=f?f:null)},[u,i,t,n,o]);return(0,a.useEffect)(()=>{o||null==r||s(null)},[o,r]),{props:function(e){let{viewport:t,dimensions:n,enabled:l=!0,onHover:o}=e,r=(0,a.useMemo)(()=>({onMouseMove:e=>{if(!l)return;let r={x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY},a=(0,m._l)(r,t,n);null==o||o(a)}}),[t,n,l,o]);return l?r:{}}({enabled:o,viewport:t,dimensions:n,onHover:c}),hoveredAnnotation:r,clear:(0,a.useCallback)(()=>s(null),[])}}var N=n(50639);let S={borderColor:N.hM,fillColor:N.hM,borderWidth:3,fillAlpha:.2},E=()=>{};var Z=n(64063);let M={borderColor:N.Ej,borderWidth:1,size:7};function T(e,t){let{size:n=6,...l}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:M,[o,r]=t;(0,N.F6)(e,l),e.strokeRect(o-n/2,r-n/2,n,n)}var A=n(25200);let K=N.ZA,_=N.ZA,D="rgb(16 185 129)",B={borderColor:D,fillColor:D,borderWidth:2,borderDash:[6,6],fillAlpha:.2};function P(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{length:n}=e.coordinates;return[...e.coordinates.map((e,t)=>({id:"vertex-".concat(t),type:"Keypoint",coords:e,drag:(e,n,l)=>{let o=[...e.coordinates],r=l.x-n.x,a=l.y-n.y,s=o[t];return o[t]=[s[0]+r,s[1]+a],{type:"LineString",coordinates:o}}})),...e.coordinates.slice(t?0:1).map((l,o)=>{let r=e.coordinates[t?(n+o-1)%n:o];return{id:"edge-".concat(o),type:"Edge",coords:[r,l],drag:(e,l,r)=>{let a=t?(n+o-1)%n:o,s=t?o:o+1,i=[...e.coordinates],u=r.x-l.x,c=r.y-l.y,d=i[a];i[a]=[d[0]+u,d[1]+c];let f=i[s];return i[s]=[f[0]+u,f[1]+c],{type:"LineString",coordinates:i}}}})]}function F(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[];return e.coordinates.forEach((e,l)=>{n.push(...P({type:"LineString",coordinates:e},t).map(e=>(function(e,t){let{drag:n,id:l}=e;return{...e,id:"".concat(l,"-").concat(t),drag:(e,l,o)=>{let r=[...e.coordinates],a=n({type:"LineString",coordinates:r[t]},l,o).coordinates;return r[t]=a,{type:"MultiLineString",coordinates:r}}}})(e,l)))}),n}function I(e){let{drag:t}=e;return{...e,drag:(e,n,l)=>({type:"Polygon",coordinates:t({type:"MultiLineString",coordinates:e.coordinates},n,l).coordinates})}}function L(e){let t=F({type:"MultiLineString",coordinates:e.coordinates},!0).map(I),n={id:"area",type:"Area",coords:e.coordinates,drag:(e,t,n)=>(0,m.zM)(e,[t.x,t.y],[n.x,n.y])};return t.push(n),t}let q=(l=function(e,t){let{type:n}=e;switch(n){case"TimeStamp":return function(e,t){let{height:n}=t,l=e.coordinates;return[{id:"onset",type:"Edge",coords:[[l,0],[l,n]],drag:(e,t,n)=>{let l=n.x-t.x;return{type:"TimeStamp",coordinates:e.coordinates+l}}}]}(e,t);case"TimeInterval":return function(e,t){let{height:n}=t,[l,o]=e.coordinates;return[{id:"left",type:"Edge",coords:[[l,0],[l,n]],drag:(e,t,n)=>{let l=n.x-t.x,[o,r]=e.coordinates;return{type:"TimeInterval",coordinates:[o+l,r]}}},{id:"right",type:"Edge",coords:[[o,0],[o,n]],drag:(e,t,n)=>{let l=n.x-t.x,[o,r]=e.coordinates;return{type:"TimeInterval",coordinates:[o,r+l]}}},{id:"area",type:"Area",coords:[[[l,n],[l,0],[o,0],[o,n]]],drag:(e,t,n)=>{let l=n.x-t.x,[o,r]=e.coordinates;return{type:"TimeInterval",coordinates:[o+l,r+l]}}}]}(e,t);case"BoundingBox":return function(e){let[t,n,l,o]=e.coordinates;return[{id:"top-left",type:"Keypoint",coords:[t,n],drag:(e,t,n)=>{let l=n.x-t.x,o=n.y-t.y,[r,a,s,i]=e.coordinates;return{type:"BoundingBox",coordinates:[r+l,a+o,s,i]}}},{id:"bottom-left",type:"Keypoint",coords:[t,o],drag:(e,t,n)=>{let l=n.x-t.x,o=n.y-t.y,[r,a,s,i]=e.coordinates;return{type:"BoundingBox",coordinates:[r+l,a,s,i+o]}}},{id:"bottom-right",type:"Keypoint",coords:[l,n],drag:(e,t,n)=>{let l=n.x-t.x,o=n.y-t.y,[r,a,s,i]=e.coordinates;return{type:"BoundingBox",coordinates:[r,a+o,s+l,i]}}},{id:"top-right",type:"Keypoint",coords:[l,o],drag:(e,t,n)=>{let l=n.x-t.x,o=n.y-t.y,[r,a,s,i]=e.coordinates;return{type:"BoundingBox",coordinates:[r,a,s+l,i+o]}}},{id:"left",type:"Edge",coords:[[t,n],[t,o]],drag:(e,t,n)=>{let l=n.x-t.x,[o,r,a,s]=e.coordinates;return{type:"BoundingBox",coordinates:[o+l,r,a,s]}}},{id:"bottom",type:"Edge",coords:[[t,o],[l,o]],drag:(e,t,n)=>{let l=n.y-t.y,[o,r,a,s]=e.coordinates;return{type:"BoundingBox",coordinates:[o,r,a,s+l]}}},{id:"right",type:"Edge",coords:[[l,o],[l,n]],drag:(e,t,n)=>{let l=n.x-t.x,[o,r,a,s]=e.coordinates;return{type:"BoundingBox",coordinates:[o,r,a+l,s]}}},{id:"top",type:"Edge",coords:[[l,n],[t,n]],drag:(e,t,n)=>{let l=n.y-t.y,[o,r,a,s]=e.coordinates;return{type:"BoundingBox",coordinates:[o,r+l,a,s]}}},{id:"area",type:"Area",coords:[[[t,n],[t,o],[l,o],[l,n]]],drag:(e,t,n)=>{let l=n.x-t.x,o=n.y-t.y,[r,a,s,i]=e.coordinates;return{type:"BoundingBox",coordinates:[r+l,a+o,s+l,i+o]}}}]}(e);case"Point":return[{id:"point",type:"Keypoint",coords:e.coordinates,drag:(e,t,n)=>{let l=n.x-t.x,o=n.y-t.y,[r,a]=e.coordinates;return{type:"Point",coordinates:[r+l,a+o]}}}];case"MultiPoint":return e.coordinates.map((e,t)=>({id:"point-".concat(t),type:"Keypoint",coords:e,drag:(e,n,l)=>{let o=[...e.coordinates],r=l.x-n.x,a=l.y-n.y,[s,i]=e.coordinates[t];return o[t]=[s+r,i+a],{type:"MultiPoint",coordinates:o}}}));case"LineString":return P(e);case"MultiLineString":return F(e);case"Polygon":return L(e);case"MultiPolygon":return function(e){let t=[];return e.coordinates.forEach((e,n)=>{t.push(...L({type:"Polygon",coordinates:e}).map(e=>(function(e,t){let{drag:n,id:l}=e;return{...e,id:"".concat(l,"-").concat(t),drag:(e,l,o)=>{let r=[...e.coordinates],a=n({type:"Polygon",coordinates:r[t]},l,o).coordinates;return r[t]=a,{type:"MultiPolygon",coordinates:r}}}})(e,n)))}),t}(e);default:throw Error}},o=function(e,t,n){return(0,m.vZ)(e,[t.x,t.y],[n.x,n.y])},function(e){let{dimensions:t,object:n,enabled:r,style:i=B,onChange:u,onDrop:c,onDeselect:d}=e,[x,p]=(0,a.useState)(null),[v,h]=(0,a.useState)({shiftKey:!1,ctrlKey:!1}),{hovered:g,hoverProps:b}=function(e){let{elements:t,enabled:n=!0}=e,[l,o]=(0,a.useState)(null);return{hovered:l,hoverProps:function(e){let{enabled:t=!0,onHover:n}=e,l=(0,a.useMemo)(()=>({onMouseMove:e=>{n({position:{x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY},shift:e.shiftKey,ctrl:e.ctrlKey})}}),[n]);return t?l:{}}({onHover:(0,a.useCallback)(e=>{let{position:n}=e,l=t.find(e=>{let t=function(e){let{type:t}=e;switch(t){case"Keypoint":return{type:"Point",coordinates:e.coords};case"Edge":return{type:"LineString",coordinates:e.coords};case"Area":return{type:"Polygon",coordinates:e.coords};default:throw Error()}}(e);return(0,m.MR)([n.x,n.y],t)});if(!l){o(null);return}o(l)},[t]),enabled:n})}}({elements:(0,a.useMemo)(()=>null==n?[]:l(n,t),[n,t]),enabled:r}),{props:w,isDragging:j}=function(e){let{enabled:t=!0,onClick:n,onMoveStart:l,onMove:o,onMoveEnd:r}=e,[i,u]=(0,a.useState)(!1),[c,d]=(0,a.useState)({x:0,y:0}),[m,x]=(0,a.useState)(null),p=(0,a.useMemo)(()=>{if(!t)return{};let e=e=>{if(!t)return;let l={x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY};x(l),null==n||n({position:l,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey})};return{onMouseDown:e,onPointerDown:e,onClick:e}},[t,n]),v=(0,a.useCallback)(function(){let{shiftKey:e,ctrlKey:n,altKey:o,metaKey:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t&&(d({x:0,y:0}),u(!0),null==l||l({shiftKey:e,ctrlKey:n,altKey:o,metaKey:r}))},[t,l]),h=(0,a.useCallback)(e=>{let{deltaX:n,deltaY:l,shiftKey:r,ctrlKey:a,altKey:s,metaKey:i}=e;t&&null!=m&&(d(e=>{let{x:t,y:o}=e;return{x:t+n,y:o+l}}),null==o||o({initial:m,current:{x:m.x+c.x+n,y:m.y+c.y+l},shiftKey:r,ctrlKey:a,altKey:s,metaKey:i}))},[t,m,c,o]),y=(0,a.useCallback)(function(){let{shiftKey:e,ctrlKey:n,altKey:l,metaKey:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t&&(x(null),u(!1),d({x:0,y:0}),null==r||r({shiftKey:e,ctrlKey:n,altKey:l,metaKey:o}))},[t,r]),{moveProps:g}=(0,f.r)({onMoveStart:v,onMove:h,onMoveEnd:y});return{props:t?(0,s.d)(g,p):{},isDragging:i}}({onMoveStart:(0,a.useCallback)(()=>{r&&(h({shiftKey:!1,ctrlKey:!1}),p(n))},[r,n]),onMoveEnd:(0,a.useCallback)(function(){let{ctrlKey:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r&&(p(null),null!=x&&x!==n&&(e?null==c||c(x):null==u||u(x)),h({shiftKey:!1,ctrlKey:!1}))},[r,n,x,u,c]),onMove:(0,a.useCallback)(e=>{let{initial:t,current:l,shiftKey:a=!1,ctrlKey:s=!1}=e;r&&null!=g&&null!=n&&(h({shiftKey:a,ctrlKey:s}),a?p(o(n,t,l)):p(g.drag(n,t,l)))},[g,n,r]),enabled:r}),k=(0,a.useCallback)(()=>{r&&null==g&&!j&&(null==d||d())},[r,g,j,d]),{pressProps:S}=(0,C.r)({onPress:k}),E=(0,a.useCallback)(e=>{r&&null!=n&&(e.canvas.style.cursor="default",null!=g&&(e.canvas.style.cursor="pointer"),null!=x&&(e.canvas.style.cursor="grabbing",v.ctrlKey&&(e.canvas.style.cursor="copy")),l(null!=x?x:n,{width:e.canvas.width,height:e.canvas.height}).forEach(t=>(function(e,t,n,l){let{type:o}=t;switch(o){case"Keypoint":!function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];T(e,t.coords,{size:n?10:5,borderColor:n?_:K,borderWidth:n?3:1})}(e,t,l);break;case"Edge":!function(e,t,n){let{borderColor:l,borderWidth:o,borderAlpha:r,borderDash:a}=n,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],[i,u]=t.coords,c=[(i[0]+u[0])/2,(i[1]+u[1])/2];(0,y.s6)(e,{type:"LineString",coordinates:[i,u]},{borderColor:s?N.ZA:l,borderWidth:s?3:o,borderAlpha:r,borderDash:a}),T(e,c,{size:s?10:5,borderColor:s?_:K,borderWidth:s?3:1})}(e,t,n,l);break;case"Area":!function(e,t,n){let{fillAlpha:l,fillColor:o,borderColor:r}=n,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,A.is)(e,{type:"Polygon",coordinates:t.coords},{fillAlpha:a?.3:l,fillColor:a?N.ZA:null!=o?o:r,borderWidth:0,borderAlpha:0})}(e,t,n,l)}})(e,t,i,t.id===(null==g?void 0:g.id))))},[r,n,i,g,x,v.ctrlKey]);return{props:r?(0,s.d)(w,S,b):{},object:n,tmpObject:x,isEditing:null!=x,active:r,hovered:g,draw:E}}),z="rgb(16 185 129)",W={borderColor:z,fillColor:z,borderWidth:2,borderDash:[6,6],fillAlpha:.2},H={borderColor:N.ud,fillColor:N.ud,borderWidth:2,fillAlpha:.2},R=()=>{};var U=n(8717),Y=n(27490),X=n(44317),V=n(63294);let G=[];function J(e){let{clipAnnotation:t,viewport:n,recording:l,audioSettings:o,spectrogramSettings:f,audio:b,spectrogramState:N,annotationState:M,defaultTags:T=G,height:A=400,withAnnotations:K=!0,enabled:_=!0}=e,{size:D,ref:B}=(0,X.Z)(),[P,F]=(0,a.useState)({time:0,freq:0}),{data:I=t,addSoundEvent:L,removeSoundEvent:z,updateSoundEvent:J}=(0,u.Z)({uuid:t.uuid,clipAnnotation:t}),{setSelectedAnnotation:O,selectedAnnotation:Q}=M,$=(0,a.useCallback)(e=>{L.mutate({geometry:e,tags:T},{onSuccess:e=>{O(e)}})},[T,L,O]),{setMode:ee}=N,et=(0,a.useCallback)(e=>{z.mutate(e),ee("panning")},[z,ee]),en=(0,a.useCallback)(e=>{null!=Q&&J.mutate({soundEventAnnotation:Q,geometry:e},{onSuccess:e=>{O(e)}})},[Q,J,O]),el=(0,a.useCallback)((e,t)=>{L.mutate({geometry:t,tags:e.tags||[]},{onSuccess:e=>{O(e)}})},[L,O]),{props:eo,draw:er}=function(e){let{viewport:t,dimensions:n,enabled:l=!0,geometryType:o="TimeStamp",onCreate:r}=e,{props:s,draw:i}=function(e){let{viewport:t,dimensions:n,enabled:l,style:o=p.y,onCreate:r}=e,[s,i]=(0,a.useState)(null),{props:u,isDragging:c}=x({enabled:l,viewport:t,dimensions:n,onMoveStart:(0,a.useCallback)(()=>{i(null)},[]),onMove:(0,a.useCallback)(e=>{let{initial:t,shift:n}=e;i({type:"BoundingBox",coordinates:[Math.min(t.time,t.time+n.time),Math.min(t.freq,t.freq-n.freq),Math.max(t.time,t.time+n.time),Math.max(t.freq,t.freq-n.freq)]})},[]),onMoveEnd:(0,a.useCallback)(()=>{null!=s&&(null==r||r(s),i(null))},[s,r])});return(0,a.useEffect)(()=>{l||null==s||i(null)},[l,s]),{props:u,draw:(0,a.useCallback)(e=>{if(!l||null==s)return;let r=(0,m.w9)(n,s,t);(0,v.Z)(e,r,o)},[l,s,o,t,n]),isDragging:c}}({viewport:t,dimensions:n,onCreate:r,style:w,enabled:l&&"BoundingBox"===o}),{props:u,draw:c}=function(e){let{viewport:t,dimensions:n,enabled:l=!0,style:o=h.X,onCreate:r}=e,[s,i]=(0,a.useState)(null),{props:u,isDragging:c}=x({enabled:l,viewport:t,dimensions:n,onMoveStart:(0,a.useCallback)(()=>{i(null)},[]),onMove:(0,a.useCallback)(e=>{let{initial:t,shift:n}=e;i({type:"TimeInterval",coordinates:[Math.min(t.time,t.time+n.time),Math.max(t.time,t.time+n.time)]})},[]),onMoveEnd:(0,a.useCallback)(()=>{null!=s&&(null==r||r(s))},[s,r])});return(0,a.useEffect)(()=>{l||null==s||i(null)},[l,s]),{props:u,draw:(0,a.useCallback)(e=>{if(!l||!c||null==s)return;let r=(0,m.w9)(n,s,t);(0,v.Z)(e,r,o)},[l,s,o,c,n,t]),isDragging:c}}({viewport:t,dimensions:n,onCreate:r,style:w,enabled:l&&"TimeInterval"===o}),{props:d,draw:f}=function(e){let{viewport:t,dimensions:n,enabled:l=!0,style:o=g.n,onCreate:r}=e,[s,i]=(0,a.useState)(null),{props:u,isDragging:c}=x({enabled:l,viewport:t,dimensions:n,onMoveStart:(0,a.useCallback)(()=>{i(null)},[]),onMove:(0,a.useCallback)(e=>{let{initial:t,shift:n}=e;i({type:"TimeStamp",coordinates:t.time+n.time})},[]),onMoveEnd:(0,a.useCallback)(()=>{null!=s&&(null==r||r(s))},[s,r])});return(0,a.useEffect)(()=>{l||null==s||i(null)},[l,s]),{props:u,draw:(0,a.useCallback)(e=>{if(!l||null==s)return;let r=(0,m.w9)(n,s,t);(0,v.Z)(e,r,o)},[l,s,o,n,t]),isDragging:c}}({viewport:t,dimensions:n,onCreate:r,style:w,enabled:l&&"TimeStamp"===o}),{props:b,draw:C}=function(e){let{viewport:t,dimensions:n,enabled:l=!0,style:o=y.nK,onCreate:r}=e,[s,i]=(0,a.useState)(null),[u,c]=(0,a.useState)(null),d=(0,a.useCallback)(()=>{i(e=>{var t;return null!==(t=null==e?void 0:e.slice(0,-1))&&void 0!==t?t:null}),c(null)},[]),f=(0,a.useCallback)(e=>{let{initial:t,shift:n}=e;c({time:t.time+n.time,freq:t.freq-n.freq})},[]),p=(0,a.useCallback)(e=>{let{point:t,shiftKey:n=!1,ctrlKey:l=!1}=e;if(l)return;if(null==s||s.length<2||!n){i(e=>null==e?[[t.time,t.freq]]:[...e,[t.time,t.freq]]);return}let o=null==s?[[t.time,t.freq]]:[...s,[t.time,t.freq]];null==r||r({type:"LineString",coordinates:o}),i(null)},[s,r]),{props:h,isDragging:g}=x({enabled:l,viewport:t,dimensions:n,onClick:(0,a.useCallback)(e=>{let{position:t,shiftKey:n=!1,ctrlKey:l=!1}=e;p({point:t,shiftKey:n,ctrlKey:l})},[p]),onMoveStart:d,onMove:f,onMoveEnd:(0,a.useCallback)(function(){let{ctrlKey:e=!1,shiftKey:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};null!=u&&(p({point:u,ctrlKey:e,shiftKey:t}),c(null))},[u,p])}),b=(0,a.useCallback)(e=>{if(l){if(null!=s){let l=(0,m.w9)(n,{type:"LineString",coordinates:s},t);(0,v.Z)(e,l,o)}if(null!=u){let l=(0,m.w9)(n,{type:"Point",coordinates:[u.time,u.freq]},t);(0,v.Z)(e,l,o)}if(null!=s&&null!=u&&s.length>0){let l={type:"LineString",coordinates:[s[s.length-1],[u.time,u.freq]]},r=(0,m.w9)(n,l,t);(0,v.Z)(e,r,o)}}},[l,s,o,t,n,u]);return(0,a.useEffect)(()=>{l||null==s||i(null)},[l,s]),{props:h,isDragging:g,draw:b,clear:(0,a.useCallback)(()=>{i(null),c(null)},[])}}({viewport:t,dimensions:n,onCreate:r,style:w,enabled:l&&"LineString"===o});if(!l)return{props:{},draw:j};switch(o){case"BoundingBox":return{props:s,draw:i};case"TimeInterval":return{props:u,draw:c};case"TimeStamp":return{props:d,draw:f};case"LineString":return{props:b,draw:C};default:throw Error("Invalid geometry type: ".concat(o))}}({viewport:n.viewport,dimensions:D,geometryType:M.geometryType,enabled:"draw"===M.mode,onCreate:$}),{props:ea,draw:es}=function(e){let{annotations:t,viewport:n,dimensions:l,enabled:o=!0,onSelect:r,onDeselect:i}=e,{props:u,hoveredAnnotation:c}=k({viewport:n,dimensions:l,annotations:t,enabled:o}),d=(0,a.useCallback)(()=>{o&&(null==c?null==i||i():null==r||r(c))},[c,o,r,i]),{pressProps:f}=(0,C.r)({onPress:d,isDisabled:!o}),x=(0,a.useCallback)(e=>{if(!o||null==c)return;e.canvas.style.cursor="pointer";let t=(0,m.w9)({width:e.canvas.width,height:e.canvas.height},c.sound_event.geometry,n);(0,v.Z)(e,t,H)},[n,c,o]),p=(0,s.d)(f,u);return o?{props:p,draw:x}:{props:{},draw:R}}({viewport:n.viewport,dimensions:D,annotations:I.sound_events||[],onSelect:O,onDeselect:()=>O(null),enabled:"select"===M.mode}),{props:ei,draw:eu}=function(e){let{annotations:t,viewport:n,dimensions:l,enabled:o=!0,onDelete:r,onDeselect:i}=e,{props:u,hoveredAnnotation:c,clear:d}=k({viewport:n,dimensions:l,annotations:t,enabled:o}),f=(0,a.useCallback)(()=>{o&&(null==c?null==i||i():(null==r||r(c),d()))},[c,o,r,i,d]),{pressProps:x}=(0,C.r)({onPress:f,isDisabled:!o}),p=(0,a.useCallback)(e=>{if(!o||null==c)return;e.canvas.style.cursor="pointer";let t=(0,m.w9)({width:e.canvas.width,height:e.canvas.height},c.sound_event.geometry,n);(0,v.Z)(e,t,S)},[n,c,o]),h=(0,s.d)(x,u);return o?{props:h,draw:p}:{props:{},draw:E}}({viewport:n.viewport,dimensions:D,annotations:I.sound_events||[],onDelete:et,onDeselect:()=>O(null),enabled:"delete"===M.mode}),{props:ec,draw:ed}=function(e){let{viewport:t,dimensions:n,annotation:l,enabled:o=!0,onEdit:r,onCopy:s,onDeselect:i}=e,u=(0,a.useCallback)(e=>{null!==l&&(null==s||s(l,e))},[l,s]),{draw:c,props:d}=function(e){var t;let{viewport:n,dimensions:l,soundEventAnnotation:o,enabled:r=!0,onChange:s,onCopy:i,onDeselect:u,style:c}=e,{geometry:d}=null!==(t=null==o?void 0:o.sound_event)&&void 0!==t?t:{},f=(0,a.useMemo)(()=>null==d?null:(0,m.w9)(l,d,n),[d,n,l]),x=(0,a.useCallback)(e=>{if(null==e)return;let t=(0,m.WC)(l,e,n);null==s||s(t)},[s,n,l]),p=(0,a.useCallback)(e=>{if(null==e)return;let t=(0,m.WC)(l,e,n);null==i||i(t)},[i,n,l]),v=q({dimensions:l,object:f,enabled:r,style:c,onDrop:p,onChange:x,onDeselect:u}),h=(0,a.useMemo)(()=>null===v.object?null:(0,m.WC)(l,v.object,n),[l,n,v.object]);return{...v,geometry:h}}({viewport:t,dimensions:n,soundEventAnnotation:l,enabled:o,onChange:r,onCopy:u,onDeselect:i,style:W});return{draw:c,props:d}}({viewport:n.viewport,dimensions:D,annotation:Q,onDeselect:()=>O(null),onEdit:en,onCopy:el,enabled:"edit"===M.mode}),{drawFn:ef,...em}=(0,Y.Z)({viewport:n,audio:b,state:N.mode,onZoom:N.enablePanning}),{drawFn:ex}=(0,U.Z)({recording:l,audioSettings:o,spectrogramSettings:f}),ep=(0,a.useMemo)(()=>K&&I.sound_events||[],[I.sound_events,K]),ev=(0,Z.Z)({viewport:n.viewport,soundEvents:ep}),eh=(0,a.useCallback)((e,t)=>{ex(e,t);let n=(0,m.f5)(b.currentTime,t,e.canvas.width);(0,g.Z)(e,n),ef(e,t),ev(e),er(e),es(e),eu(e),ed(e),(0,V.r)(e,P,t)},[b.currentTime,ex,ef,ev,er,es,ed,eu,P]),ey=(0,s.d)(ea,ei,eo,ec,em);return(0,r.jsx)(d.ZP,{soundEvents:I.sound_events||[],viewport:n.viewport,SoundEventTags:i.Z,enabled:_,children:(0,r.jsx)(c.Z,{viewport:n.viewport,height:A,drawFn:eh,canvasRef:B,onHover:e=>{let{position:t}=e;return F(t)},...ey})})}},93675:function(e,t,n){n.d(t,{Z:function(){return a}});var l=n(21770),o=n(23857),r=n(58435);function a(e){let{uuid:t,clipAnnotation:n,onError:a,onDeleteClipAnnotation:s,onAddClipAnnotationTag:i,onRemoveClipAnnotationTag:u,onAddClipAnnotationNote:c,onUpdateClipAnnotationNote:d,onRemoveClipAnnotationNote:f,onAddSoundEventAnnotation:m,onDeleteSoundEventAnnotation:x,onUpdateSoundEventAnnotation:p,onAddTagToSoundEventAnnotation:v,onRemoveTagFromSoundEventAnnotation:h,enabled:y=!0}=e;if(null!=n&&n.uuid!==t)throw Error("Clip annotation UUID does not match the provided UUID.");let{query:g,useMutation:b,useDestruction:w,setData:j,client:C}=(0,r.ZP)({name:"clip_annotation",id:t,initialData:n,enabled:y,queryFn:o.Z.clipAnnotations.get,onError:a}),k=w({mutationFn:o.Z.clipAnnotations.delete,onSuccess:s}),N=b({mutationFn:o.Z.clipAnnotations.addTag,onSuccess:i}),S=b({mutationFn:o.Z.clipAnnotations.removeTag,onSuccess:u}),E=b({mutationFn:o.Z.clipAnnotations.addNote,onSuccess:c}),Z=(0,l.D)({mutationFn:e=>{let{note:t,data:n}=e;return o.Z.notes.update(t,n)},onSuccess:e=>{g.refetch(),null==d||d(g.data,e)}}),M=b({mutationFn:o.Z.clipAnnotations.removeNote,onSuccess:f}),T=(0,l.D)({mutationFn:e=>{let{geometry:t,tags:n}=e;if(null==g.data)throw Error("No clip annotation to add to.");return o.Z.soundEventAnnotations.create(g.data,{geometry:t,tags:n})},onSuccess:e=>{null==m||m(e),j(t=>{if(null==t)throw Error("No clip annotation to add to.");return{...t,sound_events:[...t.sound_events||[],e]}})}}),A=(0,l.D)({mutationFn:e=>{let{soundEventAnnotation:t,geometry:n}=e;return o.Z.soundEventAnnotations.update(t,{geometry:n})},onSuccess:e=>{C.setQueryData(["sound_event_annotation",e.uuid],e),null==p||p(e),j(t=>{if(null==t)throw Error("No clip annotation to add to.");return{...t,sound_events:(t.sound_events||[]).map(t=>t.uuid===e.uuid?e:t)}})}}),K=(0,l.D)({mutationFn:e=>o.Z.soundEventAnnotations.delete(e),onSuccess:e=>{null==x||x(e),j(t=>{if(null==t)throw Error("No clip annotation to add to.");return{...t,sound_events:(t.sound_events||[]).filter(t=>t.uuid!==e.uuid)}})}}),_=(0,l.D)({mutationFn:e=>{let{soundEventAnnotation:t,tag:n}=e;return o.Z.soundEventAnnotations.addTag(t,n)},onSuccess:e=>{null==v||v(e),j(t=>{if(null==t)throw Error("No clip annotation to add to.");return{...t,sound_events:(t.sound_events||[]).map(t=>t.uuid===e.uuid?e:t)}})}}),D=(0,l.D)({mutationFn:e=>{let{soundEventAnnotation:t,tag:n}=e;return o.Z.soundEventAnnotations.removeTag(t,n)},onSuccess:e=>{null==h||h(e),j(t=>{if(null==t)throw Error("No clip annotation to add to.");return{...t,sound_events:(t.sound_events||[]).map(t=>t.uuid===e.uuid?e:t)}})}});return{...g,deleteClipAnnotation:k,addClipAnnotationTag:N,removeClipAnnotationTag:S,addClipAnnotationNote:E,updateClipAnnotationNote:Z,removeClipAnnotationNote:M,addSoundEvent:T,updateSoundEvent:A,removeSoundEvent:K,addSoundEventTag:_,removeSoundEventTag:D}}},46439:function(e,t,n){n.d(t,{Z:function(){return o}});var l=n(44481);function o(e){let{annotationState:t,audio:n,spectrogramState:o,viewport:r,enabled:a=!0}=e;(0,l.y1)("a",t.enableDrawing,{preventDefault:!0,description:"Enable annotation drawing",enabled:a}),(0,l.y1)("d",t.enableDeleting,{preventDefault:!0,description:"Enable annotation deleting",enabled:a}),(0,l.y1)("s",t.enableSelecting,{preventDefault:!0,description:"Enable annotation selecting",enabled:a}),(0,l.y1)("space",n.togglePlay,{preventDefault:!0,description:"Toggle playing",enabled:a}),(0,l.y1)("z",o.enableZooming,{description:"Enable spectrogram zooming",enabled:a}),(0,l.y1)("x",o.enablePanning,{description:"Enable spectrogram panning",enabled:a}),(0,l.y1)("b",r.back,{description:"Go back to previous view",enabled:a})}},19344:function(e,t,n){n.d(t,{Z:function(){return c}});var l=n(57437),o=n(31476),r=n(60852),a=n(80207),s=n(29379),i=n(90730);let u={TimeStamp:{id:"TimeStamp",label:(0,l.jsx)(o.VE,{className:"w-5 h-5"}),value:"TimeStamp"},TimeInterval:{id:"TimeInterval",label:(0,l.jsx)(o.jE,{className:"w-5 h-5"}),value:"TimeInterval"},BoundingBox:{id:"BoundingBox",label:(0,l.jsx)(o.Iz,{className:"w-5 h-5"}),value:"BoundingBox"},LineString:{id:"LineString",label:(0,l.jsx)(o.yb,{className:"w-5 h-5"}),value:"LineString"}};function c(e){let{geometryType:t,mode:n="select",onDraw:c,onDelete:d,onSelect:f,onSelectGeometryType:m}=e;return(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsx)(i.Z,{tooltip:(0,l.jsxs)("div",{className:"inline-flex gap-1",children:["Create",(0,l.jsx)("span",{className:"text-xs",children:(0,l.jsx)(s.Z,{keys:["a"]})})]}),placement:"bottom",autoPlacement:!1,children:(0,l.jsx)(a.Z,{variant:"draw"===n?"primary":"secondary",onClick:c,children:(0,l.jsx)(o.O4,{className:"w-5 h-5"})})}),"edit"!==n?(0,l.jsx)(i.Z,{tooltip:(0,l.jsxs)("div",{className:"inline-flex gap-1",children:["Select",(0,l.jsx)("span",{className:"text-xs",children:(0,l.jsx)(s.Z,{keys:["s"]})})]}),placement:"bottom",autoPlacement:!1,children:(0,l.jsx)(a.Z,{variant:"select"==n?"primary":"secondary",onClick:f,children:(0,l.jsx)(o.GV,{className:"w-5 h-5"})})}):(0,l.jsx)(a.Z,{variant:"warning",onClick:f,children:(0,l.jsx)(o.dY,{className:"w-5 h-5"})}),(0,l.jsx)(i.Z,{tooltip:(0,l.jsxs)("div",{className:"inline-flex gap-1",children:["Delete",(0,l.jsx)("span",{className:"text-xs",children:(0,l.jsx)(s.Z,{keys:["d"]})})]}),placement:"bottom",autoPlacement:!1,children:(0,l.jsx)(a.Z,{variant:"delete"===n?"danger":"secondary",onClick:d,children:(0,l.jsx)(o.pJ,{className:"w-5 h-5"})})}),(0,l.jsx)(r.Z,{placement:"bottom",options:Object.values(u),selected:u[t],onChange:e=>null==m?void 0:m(e)})]})}},8025:function(e,t,n){n.d(t,{Z:function(){return a}});var l=n(57437),o=n(31476),r=n(80207);function a(e){var t;let{note:n,canDelete:a=!1,canResolve:s=!0,noteType:i="",onClickNote:u,onResolveNote:c,onDeleteNote:d}=e;return(0,l.jsx)("li",{role:"article",className:"relative p-2 pl-6",children:(0,l.jsxs)("div",{className:"flex flex-col flex-1 gap-2",children:[(0,l.jsx)("div",{className:"flex absolute -left-3 z-10 flex-row justify-center items-center w-6 h-6 rounded-full bg-stone-100 dark:bg-stone-900",children:n.is_issue?(0,l.jsx)(o.uN,{className:"inline-block w-5 h-5 text-red-500"}):(0,l.jsx)(o.Zi,{className:"inline-block w-5 h-5 text-ston-500"})}),(0,l.jsxs)("h4",{className:"flex flex-col items-start text-base font-medium leading-6 md:flex-row lg:items-center text-stone-700 dark:text-stone-300 gap-2",children:[(0,l.jsx)("span",{className:"flex-1",children:(null===(t=n.created_by)||void 0===t?void 0:t.username)||"anonymous"}),null!=i?(0,l.jsx)("span",{className:"font-thin",children:i}):null,(0,l.jsxs)("span",{className:"text-xs font-normal text-stone-400",children:[" ",n.created_on.toLocaleString()]})]}),(0,l.jsx)("p",{className:"text-sm text-stone-500",children:n.message}),(0,l.jsxs)("div",{className:"flex flex-row gap-4 justify-end",children:[null==u?null:(0,l.jsxs)(r.Z,{mode:"text",onClick:u,children:[(0,l.jsx)(o.A5,{className:"inline-block mr-1 w-4 h-4 text-emerald-500"})," ","See"]}),n.is_issue&&s&&(0,l.jsxs)(r.Z,{mode:"text",variant:"warning",className:"text-xs",onClick:c,children:[(0,l.jsx)(o.uN,{className:"inline-block mr-1 w-4 h-4"}),"Resolve"]}),a?(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(r.Z,{mode:"text",variant:"danger",className:"text-xs",onClick:d,children:[(0,l.jsx)(o.pJ,{className:"inline-block mr-1 w-4 h-4"}),"Remove"]})}):null]})]})})}},34097:function(e,t,n){n.d(t,{Z:function(){return m}});var l=n(57437),o=n(31476),r=n(2265),a=n(75004),s=n(80207);function i(e){let{onCreateNote:t}=e,[n,i]=(0,r.useState)("");return(0,l.jsxs)("div",{className:"flex flex-col p-4 w-full",children:[(0,l.jsx)(a.ZA,{label:"Add a note",name:"message",help:"Write the note message and click on the type of note you want to create.",children:(0,l.jsx)(a.Kx,{name:"message",value:n,placeholder:"Type your note here...",onChange:e=>i(e.target.value)})}),(0,l.jsxs)("div",{className:"flex flex-row gap-4 justify-end",children:[(0,l.jsxs)(s.Z,{variant:"danger",mode:"text",onClick:()=>{null==t||t({message:n,is_issue:!0}),i("")},children:[(0,l.jsx)(o.uN,{className:"inline-block mr-1 w-5 h-5"}),"Add Issue"]}),(0,l.jsxs)(s.Z,{variant:"primary",mode:"text",onClick:()=>{null==t||t({message:n,is_issue:!1}),i("")},children:[(0,l.jsx)(o.uH,{className:"inline-block mr-1 w-5 h-5"}),"Add Note"]})]})]})}var u=n(8025);function c(e){let{notes:t,currentUser:n,onUpdate:o,onDelete:r}=e;return(0,l.jsx)("ul",{"aria-label":"feed",role:"feed",className:"flex relative flex-col gap-12 py-12 pl-6 before:absolute before:top-0 before:left-6 before:h-full before:-translate-x-1/2 before:border before:border-dashed before:border-stone-200 before:dark:border-stone-700 after:absolute after:top-6 after:left-6 after:bottom-6 after:-translate-x-1/2 after:border after:border-stone-200 after:dark:border-stone-700",children:t.map(e=>{var t;return(0,l.jsx)(u.Z,{note:e,canDelete:(null==n?void 0:n.id)===(null===(t=e.created_by)||void 0===t?void 0:t.id),onResolveNote:()=>null==o?void 0:o(e,{is_issue:!1}),onDeleteNote:()=>null==r?void 0:r(e)},e.uuid)})})}var d=n(27432),f=n(35535);function m(e){let{notes:t,title:n="Notes",currentUser:r,onCreateNote:a,onUpdateNote:s,onDeleteNote:u,EmptyNotes:m=(0,l.jsx)(x,{})}=e;return(0,l.jsxs)(d.Z,{children:[(0,l.jsxs)(f.H3,{children:[(0,l.jsx)(o.uH,{className:"inline-block mr-1 w-5 h-5"}),n]}),0===t.length?m:(0,l.jsx)(c,{notes:t,currentUser:r,onUpdate:s,onDelete:u}),(0,l.jsx)(i,{onCreateNote:a})]})}function x(){return(0,l.jsx)("div",{className:"p-4 w-full",children:(0,l.jsxs)("div",{className:"flex flex-col justify-center items-center p-8 w-full rounded-lg border border-dashed border-stone-500 bg-stone-300 dark:bg-stone-800",children:[(0,l.jsxs)("span",{className:"text-stone-700 dark:text-stone-300",children:[(0,l.jsx)(o.uH,{className:"inline-block mr-1 w-5 h-5"})," No notes"]}),(0,l.jsx)("span",{className:"text-sm text-stone-500",children:"Create a note above to start a conversation."})]})})}},63119:function(e,t,n){n.d(t,{Z:function(){return m}});var l=n(57437),o=n(31476),r=n(54259),a=n(33857),s=n(4987),i=n(80207),u=n(65903),c=n(35535),d=n(65781);let f=[];function m(e){let{tags:t=f,title:n="Tags",onAddTag:u,onRemoveTag:m,onClickTag:p,onCreateTag:v,onClearTags:h,tagColorFn:y=d.vm,TagSearchBar:g=s.Z,EmptyTags:b=(0,l.jsx)(x,{})}=e;return(0,l.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,l.jsxs)(c.H4,{className:"text-center",children:[(0,l.jsx)(o.Dg,{className:"inline-block mr-1 w-5 h-5"}),n]}),(0,l.jsxs)("div",{className:"flex flex-row flex-wrap gap-1 items-center",children:[t.map(e=>(0,l.jsx)(a.ZP,{tag:e,...y(e),onClick:()=>null==p?void 0:p(e),onClose:()=>null==m?void 0:m(e)},"".concat(e.key,"-").concat(e.value))),0===t.length&&b]}),(0,l.jsxs)("div",{className:"flex flex-row gap-4 justify-end items-center",children:[null!=h&&(0,l.jsxs)(i.Z,{className:"flex flex-row items-center",onClick:h,mode:"text",variant:"danger",children:["Clear tags ",(0,l.jsx)(o.pJ,{className:"w-5 h-5 ms-2"})]}),(0,l.jsx)(r.Z,{variant:"primary",placement:"bottom-end",onSelectTag:u,onCreateTag:v,TagSearchBar:g})]})]})}function x(){return(0,l.jsx)(u.Z,{outerClassName:"p-2",children:"No tags"})}},45147:function(e,t,n){n.d(t,{ZP:function(){return f},iV:function(){return c},pj:function(){return u}});var l=n(57437),o=n(36760),r=n.n(o),a=n(2265),s=n(31476),i=n(75004);function u(e){let{children:t,className:n,...o}=e;return(0,l.jsx)("dd",{className:r()("mt-1 w-full text-sm leading-6 text-stone-700 dark:text-stone-400 sm:col-span-2 sm:mt-0",n),...o,children:t})}function c(e){let{children:t,className:n,...o}=e;return(0,l.jsx)("dt",{className:r()("text-sm w-full font-medium leading-6 text-stone-900 dark:text-stone-300",n),...o,children:t})}function d(e){let{type:t,value:n,onChange:o}=e,[r,c]=(0,a.useState)(!1),[d,f]=(0,a.useState)(null!=n?n:null);if(!r){var m;return(0,l.jsxs)(u,{className:"flex flex-row justify-between",children:[(0,l.jsx)("p",{className:"whitespace-pre-wrap",children:null!==(m=null==n?void 0:n.toLocaleString())&&void 0!==m?m:""}),(0,l.jsx)("button",{onClick:()=>c(!0),className:"ml-2 text-sm underline text-stone-500",children:(0,l.jsx)(s.dY,{className:"inline-block w-5 h-5 text-blue-500"})})]})}let x=e=>{"Enter"!==e.key||e.shiftKey||(c(!1),null!=d&&(null==o||o(d))),"Escape"===e.key&&(c(!1),null!=n&&f(n))},p=()=>{c(!1),void 0!==n&&f(n)},v=e=>{f(e.target.value)};switch(t){case"email":case"text":return(0,l.jsx)(u,{className:"flex flex-row justify-between",children:(0,l.jsx)(i.II,{type:t,value:d,onKeyDown:x,onBlur:p,onChange:v,autoFocus:!0})});case"textarea":return(0,l.jsx)(u,{className:"flex flex-row justify-between",children:(0,l.jsx)(i.Kx,{value:d,onKeyDown:x,onBlur:p,onChange:v,autoFocus:!0})});case"number":return(0,l.jsx)(u,{className:"flex flex-row justify-between",children:(0,l.jsx)(i.II,{type:"number",value:d,onKeyDown:x,onBlur:p,onChange:v,autoFocus:!0})});case"date":return(0,l.jsx)(u,{className:"flex flex-row justify-between",children:(0,l.jsx)(i.II,{type:"date",value:d?d.toISOString().split("T")[0]:"",onKeyDown:x,onBlur:p,onChange:v,autoFocus:!0})});default:return null}}function f(e){let{name:t,value:n,editable:o=!1,type:r="text",onChange:a}=e;if(!o){var s;return(0,l.jsxs)("div",{className:"flex flex-col w-full",children:[(0,l.jsx)(c,{children:t}),(0,l.jsx)(u,{children:null!==(s=null==n?void 0:n.toLocaleString())&&void 0!==s?s:""})]})}return(0,l.jsxs)("div",{className:"flex flex-col w-full",children:[(0,l.jsx)(c,{children:t}),(0,l.jsx)(d,{value:n,type:r,onChange:a})]})}f.Term=c,f.Data=u},65903:function(e,t,n){n.d(t,{Z:function(){return a}});var l=n(57437),o=n(36760),r=n.n(o);function a(e){let{children:t,outerClassName:n="p-8",className:o}=e;return(0,l.jsx)("div",{className:"".concat(n," w-full"),children:(0,l.jsx)("div",{className:r()(o,"flex flex-col justify-center items-center p-4 w-full text-center rounded-md border border-dashed border-stone-500 text-stone-500"),children:t})})}},63294:function(e,t,n){n.d(t,{r:function(){return r}});var l=n(50639),o=n(43289);function r(e,t,n){let{buffer:r=5}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(0,o.NY)(t.freq,n,e.canvas.height),s=(0,o.f5)(t.time,n,e.canvas.width);(0,l.F6)(e,{borderColor:"black",borderWidth:1,borderDash:[10,5]}),e.beginPath(),e.moveTo(0,a),e.lineTo(e.canvas.width,a),e.stroke(),e.beginPath(),e.moveTo(s,0),e.lineTo(s,e.canvas.height),e.stroke(),(0,l.j_)(e,{fontColor:"black",textBaseline:"bottom",fontSize:14}),e.fillText("".concat(t.freq.toFixed(2)," Hz"),s+r,a-r);let i=e.measureText("".concat(t.freq.toFixed(2)," Hz")).emHeightAscent;e.fillText("".concat(t.time.toFixed(5)," s"),s+r,a-r-i)}},74589:function(e,t,n){n.d(t,{Z:function(){return o}});var l=n(2265);function o(e){let{spectrogramState:t,soundEventAnnotation:n=null,mode:o="idle",geometryType:r="BoundingBox",onChangeMode:a,onChangeGeometryType:s,onSelectAnnotation:i}=e,[u,c]=(0,l.useState)(o),[d,f]=(0,l.useState)(r),[m,x]=(0,l.useState)(n),p=(0,l.useCallback)(e=>{c(e),null==a||a(e),"idle"!==e&&t.setMode("idle"),"edit"!=e&&(x(null),null==i||i(null)),"idle"===e&&(x(null),null==i||i(null))},[a,i,t]),v=(0,l.useCallback)(e=>{f(e),null==s||s(e)},[s]),h=(0,l.useCallback)(e=>{x(e),null==i||i(e),p("edit")},[i,p]),y=(0,l.useCallback)(()=>{p("draw")},[p]),g=(0,l.useCallback)(()=>{p("select")},[p]),b=(0,l.useCallback)(()=>{p("delete")},[p]);return{mode:(0,l.useMemo)(()=>("edit"!==u||m)&&"idle"===t.mode?u:"idle",[u,m,t.mode]),geometryType:d,selectedAnnotation:m,setMode:p,setSelectedAnnotation:h,setGeometryType:v,enableDrawing:y,enableDeleting:b,enableSelecting:g}}},7041:function(e,t,n){n.d(t,{Z:function(){return s}});var l=n(2265),o=n(75326),r=n(78705),a=n(12227);function s(e){let{clip:t,spectrogramSettings:n=r.Ek}=e,s=(0,l.useMemo)(()=>({time:{min:t.start_time,max:t.end_time},freq:{min:0,max:t.recording.samplerate/2}}),[t.recording.samplerate,t.start_time,t.end_time]),i=(0,l.useMemo)(()=>(0,a.AX)({startTime:s.time.min,endTime:s.time.max,samplerate:t.recording.samplerate,windowSize:n.window_size,overlap:n.overlap}),[s,t.recording.samplerate,n.window_size,n.overlap]),u=(0,o.Z)({initial:i,bounds:s}),{set:c}=u;return(0,l.useEffect)(()=>{c(i)},[t.uuid,c]),u}}}]);