"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9715],{34657:function(e,t,n){n.d(t,{Z:function(){return f}});var a=n(57437),r=n(2265),l=n(21770),o=n(23857),s=n(45906),u=n(26596);let i={},c=[];var d=n(14759),y=n(4987);function f(e){let{onCreateTag:t,filter:n,fixed:f,pageSize:h,enabled:v,...p}=e,g=(0,d.Z)(e=>e.getTagColor),{items:k,create:m,filter:x}=function(){let{filter:e=i,fixed:t=c,pageSize:n=10,enabled:a=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,s.Z)({defaults:e,fixed:t,debounce:50}),{items:d,total:y,query:f,pagination:h}=(0,u.Z)({name:"tags",queryFn:o.Z.tags.get,pageSize:n,filter:r.filter,enabled:a}),v=(0,l.D)({mutationFn:o.Z.tags.create,onSuccess:()=>{f.refetch()}});return{...f,items:d,total:y,pagination:h,filter:r,create:v}}({filter:n,fixed:f,pageSize:h,enabled:v}),b=(0,r.useCallback)(e=>{m.mutate(e,{onSuccess:e=>{null==t||t(e)}})},[t,m]);return(0,a.jsx)(y.Z,{tags:k,tagColorFn:g,onCreateTag:b,onChangeQuery:e=>{null==e.key||null==e.value?x.update({search:e.q,key:void 0,value:void 0}):x.update({search:void 0,key:e.key,value:{has:e.value}})},...p})}},4987:function(e,t,n){var a=n(57437),r=n(97051),l=n(75097),o=n(39124),s=n(2265),u=n(75004),i=n(33857),c=n(80207),d=n(29379),y=n(65781);function f(e){let{children:t}=e;return(0,a.jsx)("div",{className:"py-1 text-stone-700 dark:text-stone-300",role:"none",children:t})}function h(e){let{tag:t,onCreateTag:n}=e;return null==t.key||null==t.value?(0,a.jsx)(f,{children:(0,a.jsxs)("div",{className:"relative py-2 px-4 cursor-default select-none",children:["To create a new tag, type the tag in the format"," ",(0,a.jsx)("code",{className:"text-emerald-500",children:"key:value"})," and press"," ",(0,a.jsx)(d.Z,{keys:["Shift","Enter"]})]})}):(0,a.jsx)(f,{children:(0,a.jsx)("div",{className:"relative py-2 px-4 cursor-default select-none",children:(0,a.jsxs)("span",{children:["Create the tag"," ",(0,a.jsx)(i.ZP,{disabled:!0,tag:{key:t.key,value:t.value},color:"emerald",level:3})," ","by pressing ",(0,a.jsx)(d.Z,{keys:["Shift","Enter"]})," or"," ",(0,a.jsx)(c.Z,{onClick:n,mode:"text",className:"inline-flex",padding:"p-1",children:"click here"})]})})})}function v(){return(0,a.jsx)(f,{children:(0,a.jsxs)("div",{className:"relative py-2 px-4 cursor-default select-none",children:["No tags found."," "]})})}let p=[],g=(0,s.forwardRef)(function(e,t){let{tags:n=p,tagColorFn:c=y.vm,canCreate:d=!0,onSelectTag:g,onChangeQuery:k,onKeyDown:m,onCreateTag:x,placement:b="bottom-start",...j}=e,[w,N]=(0,s.useState)({q:"",key:null,value:null}),E=(0,s.useCallback)(e=>{let t=e.target.value,[n,a]=t.split(":",2),r=null==a?{q:t,key:null,value:null}:{q:t,key:n,value:a};N(r),null==k||k(r)},[k]),C=(0,s.useCallback)(e=>{"Enter"===e.key&&e.shiftKey&&d&&(e.preventDefault(),w.key&&w.value&&(null==x||x({key:w.key,value:w.value}))),null==m||m(e)},[m,d,x,w.key,w.value]);return(0,a.jsx)(l.h,{onChange:e=>null==g?void 0:g(e),children:(0,a.jsxs)(r.bv,{offset:8,enter:"transition duration-200 ease-out",enterFrom:"scale-95 opacity-0",enterTo:"scale-100 opacity-100",leave:"transition duration-150 ease-in",leaveFrom:"scale-100 opacity-100",leaveTo:"scale-95 opacity-0",placement:b,autoPlacement:j.autoPlacement,portal:!0,children:[(0,a.jsxs)("div",{className:"relative w-full text-left cursor-default",children:[(0,a.jsx)(l.h.Input,{as:u.II,ref:t,autoFocus:j.autoFocus,onChange:E,onKeyDown:C,...j}),(0,a.jsx)(l.h.Button,{className:"flex absolute inset-y-0 right-0 items-center pr-2",children:(0,a.jsx)(o.Z,{className:"w-5 h-5","aria-hidden":"true"})})]}),(0,a.jsxs)(l.h.Options,{className:"overflow-y-auto py-1 max-w-sm text-base rounded-md divide-y ring-1 ring-opacity-5 shadow-lg sm:text-sm focus:outline-none divide-stone-200 bg-stone-50 ring-stone-300 dark:divide-stone-600 dark:bg-stone-700 dark:ring-stone-600",children:[0===n.length?(0,a.jsx)(v,{}):(0,a.jsx)(f,{children:n.map(e=>(0,a.jsx)(l.h.Option,{className:e=>{let{active:t}=e;return"cursor-default py-2 pl-4 pr-2 ".concat(t?"bg-stone-200 dark:bg-stone-600":"")},value:e,children:(0,a.jsx)(i.ZP,{disabled:!0,className:"pointer-events-none",tag:e,...c(e)})},"".concat(e.key,":").concat(e.value)))}),d&&(0,a.jsx)(h,{tag:{key:w.key,value:w.value},onCreateTag:()=>{w.key&&w.value&&(null==x||x({key:w.key,value:w.value}))}})]})]})})});t.Z=g},58435:function(e,t,n){n.d(t,{ZP:function(){return s}});var a=n(21770),r=n(11713),l=n(29827),o=n(2265);function s(e){let{id:t,name:n,enabled:s=!0,queryFn:u,onError:i,staleTime:c=1/0,...d}=e,y=(0,l.NL)(),f=(0,r.a)({queryKey:[n,t],queryFn:()=>u(t),enabled:s,staleTime:c,...d}),h=(0,o.useCallback)(e=>{y.setQueryData([n,t],e)},[y,t,n]),{data:v,status:p,error:g,isError:k}=f;return(0,o.useEffect)(()=>{k&&(null==i||i(g))},[g,k,i]),{query:f,client:y,setData:h,useMutation:e=>{let{mutationFn:r,withUpdate:l=!0,...s}=e;return function(e){let{id:t,data:n,name:r,status:l,client:s,withUpdate:u=!0,mutationFn:i,onSuccess:c,...d}=e,y=(0,o.useCallback)(async e=>{if("pending"===l)throw Error("No data for object of type ".concat(r," (id=").concat(t,"). ")+"Either the query is not enabled or the query is still loading.");if("error"===l)throw Error("Error while loading object of type ".concat(r," (id=").concat(t,"),")+" cannot mutate");if(null==n)throw Error("No data for object of type ".concat(r," (id=").concat(t,"). ")+"The object is null, cannot mutate");return await i(n,e)},[l,n,i,r,t]);return(0,a.D)({...d,mutationFn:y,onSuccess:(e,n,a)=>{u&&s.setQueryData([r,t],e),null==c||c(e,n,a)}})}({id:t,data:v,status:p,client:y,mutationFn:r,name:n,withUpdate:l,...s})},useQuery:e=>{let{queryFn:a,secondaryName:l,enabled:s=!1,...u}=e;return function(e){let{id:t,query:n,name:a,secondaryName:l,enabled:s=!1,queryFn:u,...i}=e,{status:c,data:d}=n,y=(0,o.useCallback)(async()=>{if("pending"===c)throw Error("No data for object of type ".concat(a," (id=").concat(t,"). ")+"Either the query is not enabled or the query is still loading.");if("error"===c)throw Error("Error while loading object of type ".concat(a," (id=").concat(t,"), cannot mutate"));return await u(d)},[c,d,u,a,t]);return(0,r.a)({...i,queryFn:y,queryKey:[a,t,l],enabled:"pending"!==c&&"error"!==c&&s})}({id:t,query:f,queryFn:a,secondaryName:l,name:n,enabled:s,...u})},useDestruction:e=>{let{mutationFn:r,...l}=e;return function(e){let{id:t,query:n,client:r,name:l,mutationFn:s,onSuccess:u,...i}=e,{status:c,data:d}=n,y=(0,o.useCallback)(async()=>{if("pending"===c)throw Error("No data for object of type ".concat(l," (id=").concat(t,"). ")+"Either the query is not enabled or the query is still loading.");if("error"===c)throw Error("Error while loading object of type ".concat(l," (id=").concat(t,"), cannot mutate"));return await s(d)},[c,d,s,l,t]);return(0,a.D)({...i,mutationFn:y,onSuccess:(e,n,a)=>{r.removeQueries({queryKey:[l,t]}),null==u||u(e,n,a)}})}({id:t,query:f,client:y,mutationFn:r,name:n,...l})}}}}}]);