{"version":3,"sources":["@@/bokehmol/dist/lib/index.js","@@/bokehmol/dist/lib/models/index.js","@@/bokehmol/dist/lib/models/base_formatter.js","@@/bokehmol/dist/lib/models/combinesvg.js","@@/bokehmol/dist/lib/models/base_hover.js","@@/bokehmol/dist/lib/models/rdkit_formatter.js","@@/bokehmol/dist/lib/models/rdkit_hover.js","@@/bokehmol/dist/lib/models/smilesdrawer_formatter.js","@@/bokehmol/dist/lib/models/smilesdrawer_hover.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"generated.js","sourceRoot":"","sourcesContent":["/* index.js */ function _(require, module, exports, __esModule, __esExport) {\n    __esModule();\n    const tslib_1 = require(\"tslib\");\n    const bokehmol = tslib_1.__importStar(require(\"2fbbcedd89\") /* ./models */);\n    exports.bokehmol = bokehmol;\n    const base_1 = require(\"@bokehjs/base\");\n    (0, base_1.register_models)(bokehmol);\n}\n","/* models/index.js */ function _(require, module, exports, __esModule, __esExport) {\n    __esModule();\n    var base_formatter_1 = require(\"bdbba644e6\") /* ./base_formatter */;\n    __esExport(\"BaseFormatter\", base_formatter_1.BaseFormatter);\n    var base_hover_1 = require(\"b3aabca0fa\") /* ./base_hover */;\n    __esExport(\"BaseHover\", base_hover_1.BaseHover);\n    var rdkit_formatter_1 = require(\"66b72b8836\") /* ./rdkit_formatter */;\n    __esExport(\"RDKitFormatter\", rdkit_formatter_1.RDKitFormatter);\n    var rdkit_hover_1 = require(\"db381e1cc8\") /* ./rdkit_hover */;\n    __esExport(\"RDKitHover\", rdkit_hover_1.RDKitHover);\n    var smilesdrawer_formatter_1 = require(\"be6f45e05e\") /* ./smilesdrawer_formatter */;\n    __esExport(\"SmilesDrawerFormatter\", smilesdrawer_formatter_1.SmilesDrawerFormatter);\n    var smilesdrawer_hover_1 = require(\"6c967671db\") /* ./smilesdrawer_hover */;\n    __esExport(\"SmilesDrawerHover\", smilesdrawer_hover_1.SmilesDrawerHover);\n}\n","/* models/base_formatter.js */ function _(require, module, exports, __esModule, __esExport) {\n    var _a;\n    __esModule();\n    const customjs_hover_1 = require(\"@bokehjs/models/tools/inspectors/customjs_hover\");\n    const combinesvg_1 = require(\"01840ae548\") /* ./combinesvg */;\n    class BaseFormatter extends customjs_hover_1.CustomJSHover {\n        constructor(attrs) {\n            super(attrs);\n        }\n        makeSVGElement() {\n            const svg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n            svg.setAttribute(\"xmlns\", \"http://www.w3.org/2000/svg\");\n            svg.setAttribute(\"xmlns:xlink\", \"http://www.w3.org/1999/xlink\");\n            svg.setAttributeNS(null, \"width\", \"\" + this.width);\n            svg.setAttributeNS(null, \"height\", \"\" + this.height);\n            return svg;\n        }\n        draw_grid(smiles_array) {\n            const images = [];\n            smiles_array.forEach((smiles) => {\n                let svg = this.draw_svg(smiles);\n                images.push(svg);\n            });\n            return (0, combinesvg_1.combineSVGs)(images, this.width, this.height, this.mols_per_row);\n        }\n        // @ts-expect-error\n        draw_svg(smiles) {\n            const el = this.makeSVGElement();\n            const svg = el.outerHTML;\n            el.remove();\n            return svg;\n        }\n        format(value, format, special_vars) {\n            format;\n            special_vars;\n            return Array.isArray(value) ? this.draw_grid(value) : this.draw_svg(value);\n        }\n    }\n    exports.BaseFormatter = BaseFormatter;\n    _a = BaseFormatter;\n    BaseFormatter.__name__ = \"BaseFormatter\";\n    BaseFormatter.__module__ = \"bokehmol.models.base_formatter\";\n    (() => {\n        _a.define(({ Int }) => ({\n            width: [Int, 160],\n            height: [Int, 120],\n            mols_per_row: [Int, 5],\n        }));\n    })();\n}\n","/* models/combinesvg.js */ function _(require, module, exports, __esModule, __esExport) {\n    __esModule();\n    exports.combineSVGs = combineSVGs;\n    function combineSVGs(images, width, height, maxMolsRow) {\n        let grid = [];\n        let maxWidth = width;\n        let maxHeight = height;\n        const parser = new DOMParser();\n        for (let i = 0; i < images.length; i++) {\n            let svg = images[i];\n            let imgWidth = width;\n            let imgHeight = height;\n            // handle RDKit's edge case when width or height is set to -1\n            if ((width < 0) || (height < 0)) {\n                // parse directly from SVG element\n                let el = parser.parseFromString(svg, 'image/svg+xml').firstChild;\n                if (width < 0) {\n                    // @ts-expect-error\n                    imgWidth = el.width.baseVal.value;\n                    if (imgWidth > maxWidth) {\n                        maxWidth = imgWidth;\n                    }\n                    else {\n                        imgWidth = maxWidth;\n                    }\n                }\n                if (height < 0)\n                    // @ts-expect-error\n                    imgHeight = el.height.baseVal.value;\n                if (imgHeight > maxHeight) {\n                    maxHeight = imgHeight;\n                }\n                else {\n                    imgHeight = maxHeight;\n                }\n            }\n            let x = imgWidth * (i % maxMolsRow);\n            let y = imgHeight * Math.floor(i / maxMolsRow);\n            let b64dump = btoa(svg);\n            grid.push(`<image id=\"molecule-${i}\" transform=\"translate(${x},${y})\" href='data:image/svg+xml;base64,${b64dump}'></image>`);\n        }\n        const parentWidth = maxWidth * Math.min(maxMolsRow, images.length);\n        const parentHeight = maxHeight * Math.ceil(images.length / maxMolsRow);\n        return `<svg width=\"${parentWidth}\" height=\"${parentHeight}\">${grid.join(\"\\n\")}</svg>`;\n    }\n}\n","/* models/base_hover.js */ function _(require, module, exports, __esModule, __esExport) {\n    var _a;\n    __esModule();\n    const dom_1 = require(\"@bokehjs/core/dom\");\n    const templating_1 = require(\"@bokehjs/core/util/templating\");\n    const types_1 = require(\"@bokehjs/core/util/types\");\n    const hover_tool_1 = require(\"@bokehjs/models/tools/inspectors/hover_tool\");\n    const icons_css_1 = require(\"@bokehjs/styles/icons.css\");\n    class BaseHoverView extends hover_tool_1.HoverToolView {\n        _render_tooltips(ds, vars) {\n            const { tooltips, smiles_column } = this.model;\n            const i = vars.index;\n            let user_tooltip = tooltips;\n            if (user_tooltip === null) {\n                user_tooltip = \"\";\n            }\n            if (!(0, types_1.isString)(user_tooltip)) {\n                const template = this._template_el ?? (\n                // @ts-ignore\n                this._template_el = this._create_template(user_tooltip));\n                // @ts-ignore\n                user_tooltip = this._render_template(template, user_tooltip, ds, vars).outerHTML;\n            }\n            const mol_tooltip = \"<div>@\" + smiles_column + \"{custom}</div>\" + user_tooltip;\n            const content = (0, templating_1.replace_placeholders)({ html: mol_tooltip }, ds, i, this.model.formatters, vars);\n            return (0, dom_1.div)(content);\n        }\n    }\n    exports.BaseHoverView = BaseHoverView;\n    BaseHoverView.__name__ = \"BaseHoverView\";\n    class BaseHover extends hover_tool_1.HoverTool {\n        get computed_icon() {\n            return \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAAAt1BMVEUAAAAAAAArKyskJCQcHBwrKyscHBwmJiYjIyMhISEgICAfHx8dHR0kJCQiIiIhISEhISEgICAkJCQkJCQjIyMiIiIiIiIhISEkJCQjIyMiIiIiIiIjIyMjIyMkJCQjIyMiIiIkJCQhISEjIyMiIiIiIiIiIiIkJCQjIyMiIiIiIiIiIiIiIiIhISEjIyMjIyMiIiIiIiIjIyMiIiIiIiIhISEiIiIiIiIiIiIiIiIhISEjIyP///9o30WSAAAAPHRSTlMAAQYHCQwSFBYXGBkaKy0uLzAxMjM0NTY5UVJTV1hdYHJyc3V3eHmBk5SVlpeZmpucnaqtrrCytLa7wMBTv07WAAAAAWJLR0Q8p2phzwAAAKRJREFUGBmtwQkagUAAgNF/ZAtZo2yRIrusofvfi+ab0gG8xx85gS8FDjlabJuS/db4WQ1RRksy+p3ZRZpxbZA6t8gYJxRzTc7WQhKPCjnlSJDwXEIdRQ9xPRKeS+eAcurjeiTEo8JhgNTdU44EUm9D9SlIRDV2FkrYZjHhazrHOJLS7xReRSi+CtzqZJYjmiUoNRn7/GixbUr2WyPHCXwpcPifD0UBD3u/QqniAAAAAElFTkSuQmCC\";\n        }\n        constructor(attrs) {\n            super(attrs);\n            this.tool_icon = icons_css_1.tool_icon_hover;\n        }\n    }\n    exports.BaseHover = BaseHover;\n    _a = BaseHover;\n    BaseHover.__name__ = \"BaseHover\";\n    BaseHover.__module__ = \"bokehmol.models.base_hover\";\n    (() => {\n        _a.prototype.default_view = BaseHoverView;\n        _a.define(({ Str, Int }) => ({\n            smiles_column: [Str, \"SMILES\"],\n            width: [Int, 160],\n            height: [Int, 120],\n            mols_per_row: [Int, 3],\n        }));\n        _a.override({\n            tooltips: [],\n        });\n    })();\n}\n","/* models/rdkit_formatter.js */ function _(require, module, exports, __esModule, __esExport) {\n    var _a;\n    __esModule();\n    const base_formatter_1 = require(\"bdbba644e6\") /* ./base_formatter */;\n    class RDKitFormatter extends base_formatter_1.BaseFormatter {\n        constructor(attrs) {\n            super(attrs);\n        }\n        initialize() {\n            super.initialize();\n            this.onRDKitReady(true, false, () => {\n                // @ts-expect-error\n                initRDKitModule().then((RDKitModule) => {\n                    this.RDKitModule = RDKitModule;\n                    console.log(\"RDKit version: \" + RDKitModule.version());\n                });\n            });\n        }\n        onRDKitReady(init, lib, callback) {\n            this.hasLoadedRDKit(init, lib) ? callback() : setTimeout(() => {\n                this.onRDKitReady(init, lib, callback);\n            }, 100);\n        }\n        hasLoadedRDKit(init, lib) {\n            // @ts-expect-error\n            return (init ? typeof initRDKitModule !== \"undefined\" : true)\n                && (lib ? typeof this.RDKitModule !== \"undefined\" : true);\n        }\n        setupRDKitOptions() {\n            this.onRDKitReady(true, true, () => {\n                this.RDKitModule.prefer_coordgen(this.prefer_coordgen);\n            });\n            this.json_mol_opts = JSON.stringify({\n                removeHs: this.remove_hs,\n                sanitize: this.sanitize,\n                kekulize: this.kekulize,\n            });\n            this.json_draw_opts = JSON.stringify({\n                width: this.width,\n                height: this.height,\n                ...this.draw_options,\n            });\n            return this.json_draw_opts;\n        }\n        draw_svg(smiles) {\n            const draw_opts = this.json_draw_opts ?? this.setupRDKitOptions();\n            var mol;\n            this.onRDKitReady(true, true, () => {\n                mol = this.RDKitModule.get_mol(smiles, this.json_mol_opts);\n            });\n            // @ts-expect-error\n            if (typeof mol === \"undefined\") {\n                console.log(\"Attempting to display structures before RDKit has been loaded.\");\n            }\n            else if (mol !== null && mol.is_valid()) {\n                const svg = mol.get_svg_with_highlights(draw_opts);\n                mol.delete();\n                return svg;\n            }\n            return super.draw_svg(smiles);\n        }\n    }\n    exports.RDKitFormatter = RDKitFormatter;\n    _a = RDKitFormatter;\n    RDKitFormatter.__name__ = \"RDKitFormatter\";\n    RDKitFormatter.__module__ = \"bokehmol.models.rdkit_formatter\";\n    (() => {\n        _a.define(({ Bool, Dict, Unknown }) => ({\n            prefer_coordgen: [Bool, true],\n            remove_hs: [Bool, true],\n            sanitize: [Bool, true],\n            kekulize: [Bool, true],\n            draw_options: [Dict(Unknown), {}],\n        }));\n    })();\n}\n","/* models/rdkit_hover.js */ function _(require, module, exports, __esModule, __esExport) {\n    var _a;\n    __esModule();\n    const base_hover_1 = require(\"b3aabca0fa\") /* ./base_hover */;\n    const rdkit_formatter_1 = require(\"66b72b8836\") /* ./rdkit_formatter */;\n    class RDKitHoverView extends base_hover_1.BaseHoverView {\n        initialize() {\n            super.initialize();\n            const { formatters, smiles_column, width, height, mols_per_row, prefer_coordgen, remove_hs, sanitize, kekulize, draw_options } = this.model;\n            // @ts-expect-error\n            formatters[\"@\" + smiles_column] = new rdkit_formatter_1.RDKitFormatter({\n                width: width,\n                height: height,\n                mols_per_row: mols_per_row,\n                prefer_coordgen: prefer_coordgen,\n                remove_hs: remove_hs,\n                sanitize: sanitize,\n                kekulize: kekulize,\n                draw_options: draw_options,\n            });\n        }\n    }\n    exports.RDKitHoverView = RDKitHoverView;\n    RDKitHoverView.__name__ = \"RDKitHoverView\";\n    class RDKitHover extends base_hover_1.BaseHover {\n        get computed_icon() {\n            return \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAFVBMVEXc3NwUFP8UPP9kZP+MjP+0tP////9ZXZotAAAAAXRSTlMAQObYZgAAAAFiS0dEBmFmuH0AAAAHdElNRQfmAwsPGi+MyC9RAAAAQElEQVQI12NgQABGQUEBMENISUkRLKBsbGwEEhIyBgJFsICLC0iIUdnExcUZwnANQWfApKCK4doRBsKtQFgKAQC5Ww1JEHSEkAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMi0wMy0xMVQxNToyNjo0NyswMDowMDzr2J4AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjItMDMtMTFUMTU6MjY6NDcrMDA6MDBNtmAiAAAAAElFTkSuQmCC\";\n        }\n        constructor(attrs) {\n            super(attrs);\n            this.tool_name = \"RDKit Hover\";\n        }\n    }\n    exports.RDKitHover = RDKitHover;\n    _a = RDKitHover;\n    RDKitHover.__name__ = \"RDKitHover\";\n    RDKitHover.__module__ = \"bokehmol.models.rdkit_hover\";\n    (() => {\n        _a.prototype.default_view = RDKitHoverView;\n        _a.define(({ Bool, Dict, Unknown }) => ({\n            prefer_coordgen: [Bool, true],\n            remove_hs: [Bool, true],\n            sanitize: [Bool, true],\n            kekulize: [Bool, true],\n            draw_options: [Dict(Unknown), {}],\n        }));\n        _a.register_alias(\"rdkit_hover\", () => new _a());\n    })();\n}\n","/* models/smilesdrawer_formatter.js */ function _(require, module, exports, __esModule, __esExport) {\n    var _a;\n    __esModule();\n    const base_formatter_1 = require(\"bdbba644e6\") /* ./base_formatter */;\n    class SmilesDrawerFormatter extends base_formatter_1.BaseFormatter {\n        constructor(attrs) {\n            super(attrs);\n        }\n        initialize() {\n            super.initialize();\n            this.onSmiDrawerReady(true, false, () => {\n                // @ts-expect-error\n                this.SmiDrawer = SmiDrawer;\n            });\n        }\n        onSmiDrawerReady(init, lib, callback) {\n            this.hasLoadedSmiDrawer(init, lib) ? callback() : setTimeout(() => {\n                this.onSmiDrawerReady(init, lib, callback);\n            }, 100);\n        }\n        hasLoadedSmiDrawer(init, lib) {\n            // @ts-expect-error\n            return (init ? typeof SmiDrawer !== \"undefined\" : true)\n                && (lib ? typeof this.SmiDrawer !== \"undefined\" : true);\n        }\n        makeSVGElement() {\n            const el = super.makeSVGElement();\n            el.style.backgroundColor = this.background_colour;\n            return el;\n        }\n        setupDrawer() {\n            this.onSmiDrawerReady(true, true, () => {\n                this.drawer = new this.SmiDrawer(this.mol_options, this.reaction_options);\n            });\n            return this.drawer;\n        }\n        draw_svg(smiles) {\n            const el = this.makeSVGElement();\n            this.onSmiDrawerReady(true, true, () => {\n                const sd = this.drawer ?? this.setupDrawer();\n                sd.draw(smiles, el, this.theme);\n            });\n            const svg = el.outerHTML;\n            el.remove();\n            return svg;\n        }\n    }\n    exports.SmilesDrawerFormatter = SmilesDrawerFormatter;\n    _a = SmilesDrawerFormatter;\n    SmilesDrawerFormatter.__name__ = \"SmilesDrawerFormatter\";\n    SmilesDrawerFormatter.__module__ = \"bokehmol.models.smilesdrawer_formatter\";\n    (() => {\n        _a.define(({ Str, Dict, Unknown }) => ({\n            theme: [Str, \"light\"],\n            background_colour: [Str, \"transparent\"],\n            mol_options: [Dict(Unknown), {}],\n            reaction_options: [Dict(Unknown), {}],\n        }));\n    })();\n}\n","/* models/smilesdrawer_hover.js */ function _(require, module, exports, __esModule, __esExport) {\n    var _a;\n    __esModule();\n    const base_hover_1 = require(\"b3aabca0fa\") /* ./base_hover */;\n    const smilesdrawer_formatter_1 = require(\"be6f45e05e\") /* ./smilesdrawer_formatter */;\n    class SmilesDrawerHoverView extends base_hover_1.BaseHoverView {\n        initialize() {\n            super.initialize();\n            const { formatters, smiles_column, width, height, mols_per_row, theme, background_colour, mol_options, reaction_options, } = this.model;\n            // @ts-expect-error\n            formatters[\"@\" + smiles_column] = new smilesdrawer_formatter_1.SmilesDrawerFormatter({\n                width: width,\n                height: height,\n                mols_per_row: mols_per_row,\n                theme: theme,\n                background_colour: background_colour,\n                mol_options: mol_options,\n                reaction_options: reaction_options,\n            });\n        }\n    }\n    exports.SmilesDrawerHoverView = SmilesDrawerHoverView;\n    SmilesDrawerHoverView.__name__ = \"SmilesDrawerHoverView\";\n    class SmilesDrawerHover extends base_hover_1.BaseHover {\n        constructor(attrs) {\n            super(attrs);\n            this.tool_name = \"SmilesDrawer Hover\";\n        }\n    }\n    exports.SmilesDrawerHover = SmilesDrawerHover;\n    _a = SmilesDrawerHover;\n    SmilesDrawerHover.__name__ = \"SmilesDrawerHover\";\n    SmilesDrawerHover.__module__ = \"bokehmol.models.smilesdrawer_hover\";\n    (() => {\n        _a.prototype.default_view = SmilesDrawerHoverView;\n        _a.define(({ Str, Dict, Unknown }) => ({\n            theme: [Str, \"light\"],\n            background_colour: [Str, \"transparent\"],\n            mol_options: [Dict(Unknown), {}],\n            reaction_options: [Dict(Unknown), {}],\n        }));\n        _a.register_alias(\"smiles_hover\", () => new _a());\n    })();\n}\n"]}