# mailru-cloud (Python CLI)

–ù–µ–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π CLI-–∫–ª–∏–µ–Ω—Ç –¥–ª—è Mail.ru Cloud, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –Ω–∞ Python.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
git clone https://github.com/mueqee/mailrucloud.git
cd mailrucloud
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
python main.py
```

## –ö–æ–º–∞–Ω–¥—ã

- `login`: –í–æ–π—Ç–∏ –≤ –æ–±–ª–∞–∫–æ
- `ls [REMOTE_DIR]`: –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤/–ø–∞–ø–æ–∫ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∫–æ—Ä–µ–Ω—å `/`)
- `upload <LOCAL_PATH>`: –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª –≤ –æ–±–ª–∞–∫–æ
- `download`: –°–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª (–ø—Ä–∏–º–µ—Ä –Ω–∏–∂–µ)
- `sync [OPTIONS] <LOCAL_DIR> <REMOTE_DIR>`: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–∞—Ç–∞–ª–æ–≥–æ–≤ (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–µ–∂–∏–º—ã `push`, `pull`, `both`)
- `rm <REMOTE_PATH>`: –£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª/–ø–∞–ø–∫—É
- `mv <SRC> <DST>`: –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å/–ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å —Ñ–∞–π–ª
- `info <REMOTE_PATH>`: –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ñ–∞–π–ª–µ

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ –ø–∞—Ä–æ–ª–∏

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É:

`python main.py login`

CLI –∑–∞–ø—Ä–æ—Å–∏—Ç –≤–∞—à email –∏ –ø–∞—Ä–æ–ª—å –æ—Ç Mail.ru.

> ‚ö†Ô∏è –ï—Å–ª–∏ —É –≤–∞—Å –≤–∫–ª—é—á–µ–Ω–∞ –¥–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (2FA), –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

#### –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –ø–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

   1. –û—Ç–∫—Ä–æ–π—Ç–µ: **https://account.mail.ru/user/2-step-auth/**

   2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª ¬´–ü–∞—Ä–æ–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π¬ª

   3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, MailruCloud CLI)

   4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç –ø–∞—Ä–æ–ª—å –≤–º–µ—Å—Ç–æ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏ –≤—Ö–æ–¥–µ —á–µ—Ä–µ–∑ login

#### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø–æ—á—Ç—ã

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∞–∫–∫–∞—É–Ω—Ç—ã Mail.ru:

   - @mail.ru
   - @inbox.ru
   - @bk.ru
   - @list.ru

    üõë –ê–∫–∫–∞—É–Ω—Ç—ã —Å –¥–æ–º–µ–Ω–æ–º @vk.com –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è, –¥–∞–∂–µ –µ—Å–ª–∏ –≤—ã –º–æ–∂–µ—Ç–µ –≤–æ–π—Ç–∏ –Ω–∞ —Å–∞–π—Ç cloud.mail.ru –≤—Ä—É—á–Ω—É—é.


## –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç WebDAV

```bash
# –°–ø–∏—Å–æ–∫ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
python main.py ls

# –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞
echo "hello" > ~/hello.txt
python main.py upload ~/hello.txt

# –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞
python - <<'PY'
from download import download_file
download_file('/hello.txt', '~/hello_from_cloud.txt')
PY

diff ~/hello.txt ~/hello_from_cloud.txt  # –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—É—Å—Ç–æ
```

–ü—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ `python main.py login` —Å–æ–∑–¥–∞—ë—Ç—Å—è —Ñ–∞–π–ª `~/.mailru_token.json`

## –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–∞—Ç–∞–ª–æ–≥–æ–≤

```bash
# –î–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—è—è (both ‚Äî –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
python main.py sync ~/Documents /backup

# –¢–æ–ª—å–∫–æ –∑–∞–≥—Ä—É–∑–∫–∞ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π ‚Üí –æ–±–ª–∞–∫–æ
python main.py sync ~/Documents /backup --direction push

# –¢–æ–ª—å–∫–æ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏–∑ –æ–±–ª–∞–∫–∞
python main.py sync ~/Documents /backup -d pull
```

–§–∞–π–ª—ã, –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –Ω–∞ –æ–¥–Ω–æ–π –∏–∑ —Å—Ç–æ—Ä–æ–Ω, –±—É–¥—É—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã. –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–∫–∞ –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è.
