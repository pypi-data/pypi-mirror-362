"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[8402],{84818:(e,t,s)=>{s(64622);var n=s(86326),o=s(35623),a=s(85218),i=s(96478);document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector("#session-calendar-link");if(!e)return;const{eventId:t,sessionId:s,sessionContribCount:r}=e.dataset,c=[{key:"session",text:i.Translate.string("Session"),extraParams:{}}];parseInt(r,10)>0&&c.push({key:"contribution",text:i.Translate.string("Detailed timetable"),extraParams:{detail:"contributions"}}),o.render(n.createElement(a.ICSCalendarLink,{endpoint:"sessions.export_ics",params:{event_id:t,session_id:s},renderButton:e=>n.createElement(a.IButton,{icon:"calendar",classes:e,title:i.Translate.string("Export")}),options:c}),e)}));var r=s(89991).Ay;!function(e){function t(){$("#sessions .tablesorter").tablesorter({cssAsc:"header-sort-asc",cssDesc:"header-sort-desc",cssInfoBlock:"avoid-sort",cssChildRow:"session-blocks-row",headerTemplate:"",sortList:[[1,0]]})}function s(){$(".palette-picker-trigger").each((function(){const e=$(this);e.palettepicker({availableColors:e.data("colors"),selectedColor:e.data("color"),onSelect(e,t){$.ajax({url:$(this).data("href"),method:$(this).data("method"),data:JSON.stringify({colors:{text:t,background:e}}),dataType:"json",contentType:"application/json",error:handleAjaxError,complete:IndicoUI.Dialogs.Util.progress()})}})}))}const n={itemHandle:"tr",listItems:"#sessions-wrapper tr.session-row",term:"#search-input",state:"#filtering-state",placeholder:"#filter-placeholder"};e.setupSessionsList=function(e){var o;e=$.extend({createTypeURL:null},e),o=e.createTypeURL,$("#sessions").on("click",".session-type-picker",(function(){$(this).itempicker({filterPlaceholder:$T.gettext("Filter types"),containerClasses:"session-type-container",uncheckedItemIcon:"",footerElements:[{title:$T.gettext("Add new type"),onClick(e){ajaxDialog({title:$T.gettext("Add new type"),url:o,onClose(t){t&&($(".session-type-picker").each((function(){const e=$(this);e.data("indicoItempicker")?e.itempicker("updateItemList",t.types):e.data("items",t.types)})),e.itempicker("selectItem",t.new_type_id))}})}}],onSelect(e){const t=$(this),s={type_id:e?e.id:null};return(n=t.data("href"),o=t.data("method"),a=s,$.ajax({url:n,method:o,data:JSON.stringify(a),dataType:"json",contentType:"application/json",error:handleAjaxError,complete:IndicoUI.Dialogs.Util.progress()})).then((function(){const s=e?e.title:$T.gettext("No type");t.find(".label").text(s)}));var n,o,a}})})),enableIfChecked("#sessions-wrapper",".select-row","#sessions .js-requires-selected-row"),t(),s(),handleRowSelection(!1);const a=setupSearchBox(n);$("#sessions .toolbar").on("click",".disabled",(function(e){e.preventDefault(),e.stopPropagation()})),$("#sessions-wrapper").on("indico:htmlUpdated",(function(){t(),s(),handleRowSelection(!0),r.defer(a)})).on("click",".show-session-blocks",(function(){const e=$(this);ajaxDialog({title:e.data("title"),url:e.data("href")})})).on("attachments:updated",(function(e){const t=$(e.target);reloadManagementAttachmentInfoColumn(t.data("locator"),t.closest("td"))})),$(".js-submit-session-form").on("click",(function(e){e.preventDefault();const t=$(this);t.hasClass("disabled")||$("#sessions-wrapper form").attr("action",t.data("href")).submit()}))}}(window)}},e=>{e.O(0,[4644,4394,2076],(()=>{return t=84818,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=module_events.sessions.aac5b1fb.bundle.js.map