"use strict";(self.webpackChunkjupyterlab_firefox_launcher=self.webpackChunkjupyterlab_firefox_launcher||[]).push([[675],{675:(e,n,o)=>{o.r(n),o.d(n,{default:()=>c});var t=o(654),r=o(805),l=o(256);const s=()=>{document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||console.log("Exited fullscreen mode")},c={id:"jupyterlab-firefox-launcher:plugin",description:"JupyterLab extension to launch Firefox in a tab",autoStart:!0,requires:[t.ILauncher,r.ICommandPalette],activate:async(e,n,o)=>{const t="firefox:open",c="Firefox Browser";e.commands.addCommand(t,{label:c,execute:async()=>{var n,o,t;console.log("[Firefox Launcher] Command executed");let a="http://localhost:6080/vnc.html?autoconnect=true";try{console.log("[Firefox Launcher] Making launch request to backend...");const e=await async function(e="",n={}){const o=`/jupyterlab-firefox-launcher/${e}`;console.log(`[Firefox Launcher] Making API request to: ${o}`),console.log("[Firefox Launcher] Request init:",n);const t=await fetch(o,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},...n});if(console.log(`[Firefox Launcher] Response status: ${t.status}`),console.log("[Firefox Launcher] Response headers:",t.headers),!t.ok){const e=await t.text();throw console.error(`[Firefox Launcher] API request failed with status ${t.status}: ${e}`),new Error(`API request failed with status ${t.status}: ${e}`)}const r=t.json();return console.log("[Firefox Launcher] Response data:",r),r}("launch",{method:"POST"});console.log("[Firefox Launcher] Backend response:",e),e.url?(a=e.url,console.log("[Firefox Launcher] Using backend URL:",a)):console.warn("[Firefox Launcher] No URL in response, using fallback")}catch(e){console.error("[Firefox Launcher] Failed to launch Firefox:",e)}const u=new l.Widget;u.node.style.height="100%",u.node.style.width="100%",u.node.style.overflow="hidden";const i="firefox-iframe";u.node.innerHTML=((e,n)=>`\n    <div style="display:flex; justify-content:end; padding:4px; gap:8px; background:#f5f5f5;">\n      <button id="ff-refresh">üîÑ Refresh</button>\n      <button id="ff-fullscreen">‚õ∂ Fullscreen</button>\n      <button id="ff-close">‚ùå Close</button>\n    </div>\n    <iframe \n      id="${e}"\n      src="${n}" \n      style="width:100%; height:90%; border:none;"\n      allowfullscreen\n    ></iframe>`)(i,a);const d=new r.MainAreaWidget({content:u});d.id="firefox-browser",d.title.label=c,d.title.closable=!0,d.node.style.height="100%",e.shell.add(d,"main"),e.shell.activateById(d.id);const f=u.node.querySelector(`#${i}`);f?(null===(n=u.node.querySelector("#ff-refresh"))||void 0===n||n.addEventListener("click",()=>{f.src=f.src}),null===(o=u.node.querySelector("#ff-close"))||void 0===o||o.addEventListener("click",()=>{d.close()}),null===(t=u.node.querySelector("#ff-fullscreen"))||void 0===t||t.addEventListener("click",()=>{var e;(e=f).requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()}),document.addEventListener("fullscreenchange",s),document.addEventListener("webkitfullscreenchange",s),document.addEventListener("mozfullscreenchange",s),document.addEventListener("MSFullscreenChange",s)):console.error("Firefox iframe not found")}}),n.add({command:t,category:"Other",rank:1}),o.addItem({command:t,category:"Firefox"})}}}}]);