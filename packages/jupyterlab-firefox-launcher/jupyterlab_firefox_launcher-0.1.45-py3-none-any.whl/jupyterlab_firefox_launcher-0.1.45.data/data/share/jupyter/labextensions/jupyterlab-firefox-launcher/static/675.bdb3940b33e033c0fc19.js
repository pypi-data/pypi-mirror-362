"use strict";(self.webpackChunkjupyterlab_firefox_launcher=self.webpackChunkjupyterlab_firefox_launcher||[]).push([[675],{675:(e,n,o)=>{o.r(n),o.d(n,{default:()=>d});var t=o(654),r=o(805),i=o(708),l=o(955),s=o(256);const a=()=>{document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||console.log("Exited fullscreen mode")},d={id:"jupyterlab-firefox-launcher:plugin",description:"JupyterLab extension to launch Firefox in a tab",autoStart:!0,requires:[t.ILauncher,r.ICommandPalette],activate:async(e,n,o)=>{const t="firefox:open",d="Firefox Browser";e.commands.addCommand(t,{label:d,execute:async()=>{var n,o,t;console.log("[Firefox Launcher] Command executed");let c="",u=!1;try{console.log("[Firefox Launcher] Making launch request to backend...");const e=await async function(e="",n={}){const o=l.ServerConnection.makeSettings(),t=i.URLExt.join(o.baseUrl,"jupyterlab-firefox-launcher",e);console.log(`[Firefox Launcher] Making API request to: ${t}`),console.log(`[Firefox Launcher] Base URL: ${o.baseUrl}`),console.log("[Firefox Launcher] Request init:",n);const r=await l.ServerConnection.makeRequest(t,{method:"POST",...n},o);if(console.log(`[Firefox Launcher] Response status: ${r.status}`),console.log("[Firefox Launcher] Response headers:",r.headers),!r.ok){const e=await r.text();throw console.error(`[Firefox Launcher] API request failed with status ${r.status}: ${e}`),new Error(`API request failed with status ${r.status}: ${e}`)}const s=r.json();return console.log("[Firefox Launcher] Response data:",s),s}("launch",{method:"POST"});console.log("[Firefox Launcher] Backend response:",e),e&&e.url?(c=e.url,u=!0,console.log("[Firefox Launcher] ✅ Backend URL received:",c)):console.warn("[Firefox Launcher] ❌ Backend response missing URL:",e)}catch(e){console.error("[Firefox Launcher] ❌ Backend API call failed:",e)}if(!u){console.log("[Firefox Launcher] 🔧 Constructing JupyterHub VNC proxy URL...");const e=window.location.href;if(console.log("[Firefox Launcher] Current URL:",e),e.includes("/user/")){const n=e.match(/(https?:\/\/[^\/]+\/user\/[^\/]+)/);if(n){const e=`${n[1]}/proxy/6080/vnc.html?autoconnect=true&resize=scale`;console.log("[Firefox Launcher] 🎯 Redirecting to VNC URL:",e),window.open(e,"_blank"),c=e}}c||(c="about:blank",console.warn("[Firefox Launcher] ⚠️ Could not construct VNC URL"))}const f=new s.Widget;f.node.style.height="100%",f.node.style.width="100%",f.node.style.overflow="hidden";const p="firefox-iframe";let x="";x=u?"Connected successfully via backend API":"Firefox VNC opened in new tab via JupyterHub proxy",f.node.innerHTML=((e,n,o="")=>o.includes("opened in new tab")?`\n      <div style="display:flex; flex-direction:column; height:100%; background:#f8f9fa; justify-content:center; align-items:center;">\n        <div style="text-align:center; max-width:600px;">\n          <h2 style="color:#28a745;">🎉 Firefox VNC Launched Successfully!</h2>\n          <div style="background:white; border-radius:8px; padding:30px; margin:20px; box-shadow:0 2px 4px rgba(0,0,0,0.1);">\n            <p style="font-size:16px; margin-bottom:20px;"><strong>Firefox VNC has opened in a new browser tab.</strong></p>\n            <p>You should now see the Firefox browser running through VNC in the new tab.</p>\n            <div style="background:#d4edda; padding:15px; border-radius:5px; margin:20px 0;">\n              <p><strong>✅ Status:</strong> ${o}</p>\n              <p><strong>🔗 VNC URL:</strong> <span style="font-family:monospace; font-size:12px;">${n}</span></p>\n            </div>\n            <div style="margin-top:25px;">\n              <button onclick="window.open('${n}', '_blank')" \n                      style="padding:12px 24px; background:#007bff; color:white; border:none; border-radius:5px; cursor:pointer; font-size:14px; margin:5px;">\n                🔄 Open Firefox VNC Again\n              </button>\n              <button onclick="window.close()" \n                      style="padding:12px 24px; background:#6c757d; color:white; border:none; border-radius:5px; cursor:pointer; font-size:14px; margin:5px;">\n                ✖️ Close This Tab\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>`:"about:blank"===n||o.includes("error")?`\n      <div style="display:flex; flex-direction:column; height:100%; background:#f8f9fa;">\n        <div style="padding:20px; text-align:center;">\n          <h2 style="color:#dc3545;">🔧 Firefox Launcher Status</h2>\n          <div style="background:white; border-radius:8px; padding:20px; margin:20px; box-shadow:0 2px 4px rgba(0,0,0,0.1);">\n            <p><strong>Current Status:</strong> ${o||"Attempting to connect to VNC service..."}</p>\n            <p><strong>URL:</strong> ${n}</p>\n            <div style="margin-top:20px;">\n              <button onclick="window.location.reload()" style="padding:10px 20px; background:#007bff; color:white; border:none; border-radius:4px; cursor:pointer;">\n                🔄 Retry Connection\n              </button>\n            </div>\n          </div>\n          <div style="text-align:left; background:#f8f9fa; padding:15px; border-radius:5px; margin:20px;">\n            <h4>Troubleshooting:</h4>\n            <ul style="margin:10px 0;">\n              <li>Check that the Firefox launcher backend is running</li>\n              <li>Verify VNC services are active on the server</li>\n              <li>Ensure proper network connectivity to VNC ports</li>\n              <li>Try refreshing this tab after a few seconds</li>\n            </ul>\n          </div>\n        </div>\n      </div>`:`\n    <div style="display:flex; flex-direction:column; height:100%;">\n      \x3c!-- URL Navigation Bar --\x3e\n      <div style="display:flex; align-items:center; padding:8px; gap:8px; background:#f8f9fa; border-bottom:1px solid #dee2e6;">\n        <button id="ff-back" title="Back">⬅️</button>\n        <button id="ff-forward" title="Forward">➡️</button>\n        <button id="ff-refresh" title="Refresh">🔄</button>\n        <button id="ff-home" title="Home">🏠</button>\n        <input \n          id="ff-url-bar" \n          type="text" \n          placeholder="Enter URL (e.g., https://google.com)" \n          style="flex:1; padding:6px 12px; border:1px solid #ced4da; border-radius:4px; font-size:14px;"\n          value=""\n        />\n        <button id="ff-go" title="Go" style="padding:6px 12px; background:#007bff; color:white; border:none; border-radius:4px; cursor:pointer;">Go</button>\n        <div style="border-left:1px solid #dee2e6; height:24px; margin:0 8px;"></div>\n        <button id="ff-fullscreen" title="Fullscreen">⛶</button>\n        <button id="ff-close" title="Close" style="color:#dc3545;">❌</button>\n      </div>\n      \n      \x3c!-- Status indicator --\x3e\n      <div style="padding:4px 8px; ${o.includes("failed")?"background:#fff3cd; border-bottom:1px solid #ffeaa7;":"background:#d4edda; border-bottom:1px solid #c3e6cb;"} font-size:12px;">\n        ${o.includes("failed")?"🟡":"🟢"} ${o||"Connected to VNC"}: ${n}\n      </div>\n      \n      \x3c!-- Firefox VNC Iframe --\x3e\n      <iframe \n        id="${e}"\n        src="${n}" \n        style="width:100%; flex:1; border:none;"\n        allowfullscreen\n      ></iframe>\n    </div>`)(p,c,x);const b=new r.MainAreaWidget({content:f});b.id="firefox-browser",b.title.label=d,b.title.closable=!0,b.node.style.height="100%",e.shell.add(b,"main"),e.shell.activateById(b.id);const g=f.node.querySelector(`#${p}`);g?(null===(n=f.node.querySelector("#ff-refresh"))||void 0===n||n.addEventListener("click",()=>{g.src=g.src}),null===(o=f.node.querySelector("#ff-close"))||void 0===o||o.addEventListener("click",()=>{b.close()}),null===(t=f.node.querySelector("#ff-fullscreen"))||void 0===t||t.addEventListener("click",()=>{var e;(e=g).requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()}),document.addEventListener("fullscreenchange",a),document.addEventListener("webkitfullscreenchange",a),document.addEventListener("mozfullscreenchange",a),document.addEventListener("MSFullscreenChange",a)):console.error("Firefox iframe not found")}}),n.add({command:t,category:"Other",rank:1}),o.addItem({command:t,category:"Firefox"})}}}}]);