(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8443],{74833:function(e,t,r){var n=r(56127),s=/^\s+/;e.exports=function(e){return e?e.slice(0,n(e)+1).replace(s,""):e}},56127:function(e){var t=/\s/;e.exports=function(e){for(var r=e.length;r--&&t.test(e.charAt(r)););return r}},66726:function(e,t,r){var n=r(11611),s=r(82846),i=r(91936),o=Math.max,a=Math.min;e.exports=function(e,t,r){var l,u,c,d,m,p,f=0,v=!1,g=!1,y=!0;if("function"!=typeof e)throw TypeError("Expected a function");function h(t){var r=l,n=u;return l=u=void 0,f=t,d=e.apply(n,r)}function x(e){var r=e-p,n=e-f;return void 0===p||r>=t||r<0||g&&n>=c}function j(){var e,r,n,i=s();if(x(i))return b(i);m=setTimeout(j,(e=i-p,r=i-f,n=t-e,g?a(n,c-r):n))}function b(e){return(m=void 0,y&&l)?h(e):(l=u=void 0,d)}function _(){var e,r=s(),n=x(r);if(l=arguments,u=this,p=r,n){if(void 0===m)return f=e=p,m=setTimeout(j,t),v?h(e):d;if(g)return clearTimeout(m),m=setTimeout(j,t),h(p)}return void 0===m&&(m=setTimeout(j,t)),d}return t=i(t)||0,n(r)&&(v=!!r.leading,c=(g="maxWait"in r)?o(i(r.maxWait)||0,t):c,y="trailing"in r?!!r.trailing:y),_.cancel=function(){void 0!==m&&clearTimeout(m),f=0,l=p=u=m=void 0},_.flush=function(){return void 0===m?d:b(s())},_}},11611:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},55193:function(e,t,r){var n=r(99736),s=r(92360);e.exports=function(e){return"symbol"==typeof e||s(e)&&"[object Symbol]"==n(e)}},82846:function(e,t,r){var n=r(77400);e.exports=function(){return n.Date.now()}},91936:function(e,t,r){var n=r(74833),s=r(11611),i=r(55193),o=0/0,a=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return o;if(s(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=s(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var r=l.test(e);return r||u.test(e)?c(e.slice(2),r?2:8):a.test(e)?o:+e}},40741:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/data-discovery/action-center",function(){return r(51500)}])},30952:function(e,t,r){"use strict";r.d(t,{f:function(){return l}});var n=r(24246),s=r(66726),i=r.n(s),o=r(27378),a=r(26917);let l=e=>{let{value:t,onChange:r,placeholder:s,...l}=e,[u,c]=(0,o.useState)(t),d=i()(r,500),m=(0,o.useCallback)(e=>{c(e),d(e)},[]);return(0,n.jsx)(a.Z,{value:u,onChange:m,onClear:()=>{c(""),r("")},placeholder:s,...l})}},77213:function(e,t,r){"use strict";r.d(t,{Z:function(){return m}});var n=r(24246),s=r(13577),i=r(88038),o=r.n(i),a=r(86677);r(27378);var l=r(25980),u=r(90867),c=r(77830),d=()=>{let e=(0,a.useRouter)();return(0,n.jsx)(s.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,n.jsxs)(s.xuv,{children:[(0,n.jsxs)(s.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,n.jsx)(s.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,n.jsx)(s.wpx,{onClick:()=>{e.push(c.fz)},children:"Configure"})]}),(0,n.jsxs)(s.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},m=e=>{let{children:t,title:r,padded:i=!0,mainProps:c}=e,m=(0,l.hz)(),p=(0,a.useRouter)(),f="/privacy-requests"===p.pathname||"/datastore-connection"===p.pathname,v=!(m.flags.privacyRequestsConfiguration&&f),{data:g}=(0,u.JE)(void 0,{skip:v}),{data:y}=(0,u.PW)(void 0,{skip:v}),h=m.flags.privacyRequestsConfiguration&&(!g||!y)&&f;return(0,n.jsxs)(s.kCb,{"data-testid":r,direction:"column",h:"100vh",children:[(0,n.jsxs)(o(),{children:[(0,n.jsxs)("title",{children:["Fides Admin UI - ",r]}),(0,n.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsxs)(s.kCb,{as:"main",direction:"column",py:i?6:0,px:i?10:0,h:i?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...c,children:[h?(0,n.jsx)(d,{}):null,t]})]})}},58754:function(e,t,r){"use strict";var n=r(24246),s=r(13577),i=r(70788);t.Z=e=>{let{heading:t,breadcrumbItems:r,isSticky:o=!0,children:a,rightContent:l,style:u,...c}=e;return(0,n.jsxs)("div",{...c,style:o?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...u}:{paddingBottom:"24px",...u},children:[(0,n.jsxs)(s.jqI,{justify:"space-between",children:["string"==typeof t?(0,n.jsx)(s.lQT,{className:r||a?"pb-4":void 0,level:1,"data-testid":"page-heading",children:t}):t,l&&(0,n.jsx)("div",{"data-testid":"page-header-right-content",children:l})]}),!!r&&(0,n.jsx)(i.m,{className:a?"pb-4":void 0,items:r,"data-testid":"page-breadcrumb"}),a]})}},70788:function(e,t,r){"use strict";r.d(t,{m:function(){return u}});var n=r(24246),s=r(13577),i=r(79894),o=r.n(i),a=r(27378);let{Text:l}=s.AntTypography,u=e=>{let{items:t,...r}=e,i=(0,a.useMemo)(()=>null==t?void 0:t.map((e,r)=>{let i=r===t.length-1,a={...e},u=a.onClick&&!a.href;return("string"==typeof a.title&&(a.title=(0,n.jsx)(l,{style:{color:"inherit",maxWidth:i?void 0:400},ellipsis:!i,children:a.title})),u)?a.title=(0,n.jsx)(s.wpx,{type:"text",size:"small",icon:a.icon,onClick:a.onClick,className:"ant-breadcrumb-link -mt-px px-1 text-inherit",children:a.title}):(a.icon&&(a.title=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"anticon align-text-bottom",children:a.icon}),a.title]})),a.href&&a.title&&(a.title=(0,n.jsx)(o(),{href:a.href,className:"ant-breadcrumb-link",children:a.title}),delete a.href)),a}),[t]);return(0,n.jsx)(s.zrq,{items:i,...r})}},37059:function(e,t,r){"use strict";r.d(t,{Ak:function(){return v},EY:function(){return d},Tj:function(){return p},Ud:function(){return o},Vr:function(){return g},WJ:function(){return l},nP:function(){return c},nS:function(){return m},rs:function(){return u},sX:function(){return f},wi:function(){return a}});var n=r(78780),s=r(16394),i=r(68309);let{useGetAggregateMonitorResultsQuery:o,useGetDiscoveredSystemAggregateQuery:a,useGetDiscoveredAssetsQuery:l,useAddMonitorResultSystemsMutation:u,useIgnoreMonitorResultSystemsMutation:c,useAddMonitorResultAssetsMutation:d,useIgnoreMonitorResultAssetsMutation:m,useRestoreMonitorResultAssetsMutation:p,useUpdateAssetsSystemMutation:f,useUpdateAssetsDataUseMutation:v,useUpdateAssetsMutation:g}=n.u.injectEndpoints({endpoints:e=>({getAggregateMonitorResults:e.query({query:e=>{let{page:t=1,size:r=20,search:n}=e;return{url:"/plus/discovery-monitor/aggregate-results",params:{page:t,size:r,search:n,diff_status:"addition"}}},providesTags:["Discovery Monitor Results"]}),getDiscoveredSystemAggregate:e.query({query:e=>{let{key:t,page:r=1,size:n=20,search:s,diff_status:i}=e;return{url:"/plus/discovery-monitor/system-aggregate-results",params:{monitor_config_id:t,page:r,size:n,search:s,diff_status:i}}},providesTags:["Discovery Monitor Results"]}),getDiscoveredAssets:e.query({query:e=>{let{key:t,system:r,page:n=1,size:s=20,search:i,diff_status:o}=e;return{url:"/plus/discovery-monitor/".concat(t,"/results"),params:{resolved_system_id:r,page:n,size:s,search:i,diff_status:o,sort_by:"urn"}}},providesTags:()=>["Discovery Monitor Results"]}),addMonitorResultSystems:e.mutation({query:e=>{let{monitor_config_key:t,resolved_system_ids:r}=e,n=(0,s.du)(r,"resolved_system_ids");return{method:"POST",url:"/plus/discovery-monitor/".concat(t,"/promote?").concat(n)}},invalidatesTags:["Discovery Monitor Results"]}),ignoreMonitorResultSystems:e.mutation({query:e=>{let{monitor_config_key:t,resolved_system_ids:r}=e,n=(0,s.du)(r,"resolved_system_ids");return{method:"POST",url:"/plus/discovery-monitor/".concat(t,"/mute?").concat(n)}},invalidatesTags:["Discovery Monitor Results"]}),addMonitorResultAssets:e.mutation({query:e=>{var t;let r=new URLSearchParams;return null===(t=e.urnList)||void 0===t||t.forEach(e=>r.append("staged_resource_urns",e)),{method:"POST",url:"/plus/discovery-monitor/promote?".concat(r)}},invalidatesTags:["Discovery Monitor Results"]}),ignoreMonitorResultAssets:e.mutation({query:e=>{var t;let r=new URLSearchParams;return null===(t=e.urnList)||void 0===t||t.forEach(e=>r.append("staged_resource_urns",e)),{method:"POST",url:"/plus/discovery-monitor/mute?".concat(r)}},invalidatesTags:["Discovery Monitor Results"]}),restoreMonitorResultAssets:e.mutation({query:e=>{var t;let r=new URLSearchParams({status_to_set:i.LL.ADDITION});return null===(t=e.urnList)||void 0===t||t.forEach(e=>r.append("staged_resource_urns",e)),{method:"POST",url:"/plus/discovery-monitor/un-mute?".concat(r)}},invalidatesTags:["Discovery Monitor Results"]}),updateAssetsSystem:e.mutation({query:e=>({method:"PATCH",url:"/plus/discovery-monitor/".concat(e.monitorId,"/results"),body:e.urnList.map(t=>({urn:t,user_assigned_system_key:e.systemKey}))}),invalidatesTags:["Discovery Monitor Results","System Assets"]}),updateAssetsDataUse:e.mutation({query:e=>({method:"PATCH",url:"/plus/discovery-monitor/".concat(e.monitorId,"/results"),body:e.urnList.map(t=>({urn:t,user_assigned_data_uses:e.dataUses}))}),invalidatesTags:["Discovery Monitor Results"]}),updateAssets:e.mutation({query:e=>({method:"PATCH",url:"/plus/discovery-monitor/".concat(e.monitorId,"/results"),body:e.assets}),invalidatesTags:["Discovery Monitor Results"]})})})},51500:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return b}});var n=r(24246),s=r(13577),i=r(79894),o=r.n(i),a=r(27378),l=r(30952),u=r(77213),c=r(77830),d=r(58754),m=r(47935),p=r(7426),f=r(37059);let v=e=>{let{isConfigLoading:t}=e;return(0,n.jsx)(u.Z,{title:"Action center",mainProps:{className:"h-full"},children:(0,n.jsx)(s.jqI,{justify:"center",align:"center",className:"h-full",children:t?(0,n.jsx)(s.$jN,{color:"primary.900"}):(0,n.jsx)(s.DUx,{message:"Coming soon...",description:"Action center is currently disabled.",type:"info",showIcon:!0})})})},g=()=>(0,n.jsx)(s.oj8,{image:s.oj8.PRESENTED_IMAGE_SIMPLE,description:"All caught up! Set up an integration monitor to track your infrastructure in greater detail.",children:(0,n.jsx)(o(),{href:c.KH,passHref:!0,legacyBehavior:!0,children:(0,n.jsx)(s.wpx,{type:"primary",children:"Visit integrations"})})});var y=r(7195),h=r(16394);let{Text:x}=s.AntTypography,j=e=>{let{monitorSummary:t,showSkeleton:r,...i}=e,[l,u]=(0,a.useState)(void 0),{name:d,property:m,total_updates:p,updates:f,last_monitored:v,warning:g,secrets:j,key:b}=t,_=Object.entries(f).map(e=>"".concat(e[1]," ").concat(e[0],"s")).join(", "),T=v?(0,h.p6)(new Date(v)):void 0,w=v?(0,y.B)(new Date(v),new Date,{addSuffix:!0}):void 0;return(0,a.useEffect)(()=>{m&&u((0,h.tl)(m,60)),(null==j?void 0:j.url)&&u((0,h.tl)((0,h.ge)(j.url),60))},[m,null==j?void 0:j.url]),(0,n.jsx)(s.krs.Item,{"data-testid":"monitor-result-".concat(b),...i,children:(0,n.jsx)(s.N_L,{avatar:!0,title:!1,loading:r,active:!0,children:(0,n.jsxs)(s.bue,{gutter:12,className:"w-full",children:[(0,n.jsx)(s.JGx,{span:18,className:"align-middle",children:(0,n.jsx)(s.krs.Item.Meta,{avatar:(0,n.jsx)(s.t3Z,{src:l,size:30,icon:(0,n.jsx)(s.PJP.huD,{}),style:{backgroundColor:"transparent",color:"var(--ant-color-text)"}}),title:(0,n.jsxs)(o(),{href:"".concat(c.vi,"/").concat(b),className:"whitespace-nowrap",children:["".concat(p," assets detected").concat(m?" on ".concat(m):""),!!g&&(0,n.jsx)(s.esZ,{title:"string"==typeof g?g:void 0,children:(0,n.jsx)(s.PJP.OdJ,{className:"ml-1 inline-block align-middle",style:{color:"var(--fidesui-error)"}})})]}),description:"".concat(_," detected.")})}),(0,n.jsx)(s.JGx,{span:4,className:"flex items-center justify-end",children:(0,n.jsx)(x,{ellipsis:{tooltip:d},children:d})}),(0,n.jsx)(s.JGx,{span:2,className:"flex items-center justify-end",children:!!w&&(0,n.jsx)(s.esZ,{title:T,children:(0,n.jsx)(x,{"data-testid":"monitor-date",ellipsis:{tooltip:T},children:w})})})]})})})};var b=()=>{var e;let t=(0,s.pmc)(),{PAGE_SIZES:r,pageSize:i,setPageSize:y,onPreviousPageClick:h,isPreviousPageDisabled:x,onNextPageClick:b,isNextPageDisabled:_,startRange:T,endRange:w,pageIndex:k,setTotalPages:P,resetPageIndexToDefault:R}=(0,m.oi)(),[C,S]=(0,a.useState)(""),{data:A,isLoading:N}=(0,p.tB)({api_set:!1}),D=!!(null==A?void 0:null===(e=A.detection_discovery)||void 0===e?void 0:e.website_monitor_enabled);(0,a.useEffect)(()=>{R()},[C,R]);let{data:E,isError:M,isLoading:q,isFetching:I}=(0,f.Ud)({page:k,size:i,search:C},{skip:N||!D});(0,a.useEffect)(()=>{M&&t&&D&&t({title:"Error fetching data",description:"Please try again later",status:"error"})},[M,t,D]),(0,a.useEffect)(()=>{if(E){var e;P(null!==(e=E.total)&&void 0!==e?e:1)}},[E,P]);let L=(null==E?void 0:E.items)||[],O=I?Array.from({length:i},(e,t)=>({key:t.toString(),updates:[],last_monitored:null})):[],z=(0,a.useCallback)(e=>[(0,n.jsx)(o(),{href:"".concat(c.vi,"/").concat(e),passHref:!0,legacyBehavior:!0,children:(0,n.jsx)(s.wpx,{type:"link",className:"p-0","data-testid":"review-button-".concat(e),children:"Review"})},"review")],[]);return D?(0,n.jsxs)(u.Z,{title:"Action center",children:[(0,n.jsx)(d.Z,{heading:"Action center",breadcrumbItems:[{title:"All activity"}]}),(0,n.jsx)(s.jqI,{className:"justify-between py-6",children:(0,n.jsx)(l.f,{value:C,onChange:S})}),(0,n.jsx)(s.krs,{loading:q,dataSource:L||O,locale:{emptyText:(0,n.jsx)(g,{})},renderItem:e=>!!e&&(0,n.jsx)(j,{showSkeleton:I,monitorSummary:e,actions:z(e.key)},e.key)}),!!L&&!!(null==E?void 0:E.total)&&E.total>i&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.htM,{className:"mb-6 mt-0"}),(0,n.jsx)(m.s8,{totalRows:(null==E?void 0:E.total)||0,pageSizes:r,setPageSize:y,onPreviousPageClick:h,isPreviousPageDisabled:x||I,onNextPageClick:b,isNextPageDisabled:_||I,startRange:T,endRange:w})]})]}):(0,n.jsx)(v,{isConfigLoading:N})}}},function(e){e.O(0,[2888,9774,179],function(){return e(e.s=40741)}),_N_E=e.O()}]);