Custom Gift Send - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π Telegram Bot API –ö–ª–∏–µ–Ω—Ç –¥–ª—è –ü–æ–¥–∞—Ä–∫–æ–≤ –∏ Stars üéÅ‚ú®
Custom Gift Send ‚Äî —ç—Ç–æ –º–æ—â–Ω—ã–π –∏ –Ω–∞–¥—ë–∂–Ω—ã–π –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π Python-–∫–ª–∏–µ–Ω—Ç –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å Telegram Bot API, —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –ø–æ–¥–∞—Ä–∫–æ–≤ –∏ Telegram Stars. –≠—Ç–æ—Ç –º–æ–¥—É–ª—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–æ–¥–∞—Ä–∫–æ–≤, —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∞–º–∏ Telegram Premium, –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞ Stars –∏ —Ä–∞–±–æ—Ç—ã —Å –≤–µ–±—Ö—É–∫–∞–º–∏, –∞ —Ç–∞–∫–∂–µ –≤–∫–ª—é—á–∞–µ—Ç –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –≥–∏–±–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ.

–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ üåü
–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏: –ü–æ–ª–Ω–æ—Å—Ç—å—é –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π aiohttp –¥–ª—è –≤—ã—Å–æ–∫–æ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.

–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏–µ–π: –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ HTTP-—Å–µ—Å—Å–∏—è–º–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–µ–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ –∏ –∑–∞–∫—Ä—ã—Ç–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π.

–ì–∏–±–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: –ü–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –ª–æ–≥–≥–µ—Ä –º–æ–¥—É–ª—è –∏–ª–∏ –ø–µ—Ä–µ–¥–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä logging.Logger –¥–ª—è –±–æ–ª–µ–µ —Ç–æ–Ω–∫–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è –Ω–∞–¥ –≤—ã–≤–æ–¥–æ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.

–°—Ç—Ä–æ–≥–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Pydantic –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤ –∏ –∑–Ω–∞—á–µ–Ω–∏–π –≤—Ö–æ–¥–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ API-–º–µ—Ç–æ–¥–æ–≤, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—è –æ—à–∏–±–∫–∏ –Ω–∞ —Ä–∞–Ω–Ω–µ–π —Å—Ç–∞–¥–∏–∏ –∏ –¥–µ–ª–∞—è API –±–æ–ª–µ–µ —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–º.

–ù–∞–¥—ë–∂–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:

–ì—Ä–∞–Ω—É–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è: –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –∫–ª–∞—Å—Å—ã –∏—Å–∫–ª—é—á–µ–Ω–∏–π –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫ Telegram API (–Ω–∞–ø—Ä–∏–º–µ—Ä, TelegramBadRequestError, TelegramTooManyRequestsError), —É–ø—Ä–æ—â–∞—è –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫.

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏: –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π –¥–ª—è —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–æ–∫ –∏ –æ—à–∏–±–æ–∫ 429 Too Many Requests, –ø–æ–≤—ã—à–∞—è —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ –≤—Ä–µ–º–µ–Ω–Ω—ã–º —Å–±–æ—è–º.

–ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ API –¥–ª—è –ø–æ–¥–∞—Ä–∫–æ–≤ –∏ Stars: –í–∫–ª—é—á–∞–µ—Ç –º–µ—Ç–æ–¥—ã –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–æ–¥–∞—Ä–∫–æ–≤, –¥–∞—Ä–µ–Ω–∏—è Premium, –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–∞–ª–∞–Ω—Å–∞ Stars, –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–æ–¥–∞—Ä–∫–æ–≤ –∏ –ø–µ—Ä–µ–¥–∞—á–∏ –ø–æ–¥–∞—Ä–∫–æ–≤ –¥—Ä—É–≥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º.

–§—É–Ω–∫—Ü–∏–∏ –≤–µ–±—Ö—É–∫–æ–≤: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏, —É–¥–∞–ª–µ–Ω–∏—è –∏ –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≤–µ–±—Ö—É–∫–∞—Ö.

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ üöÄ



–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

pip install aiohttp pydantic
pip install custom-gift-send

–ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ setup.py, —Ç–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –±—É–¥—É—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –ø–∞–∫–µ—Ç–∞:

pip install .

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ‚öôÔ∏è
–ü–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–æ–¥—É–ª—è –≤–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤–∞—à —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ Telegram –≤ —Ñ–∞–π–ª–µ config.ini:

# config.ini
[Bot]
token = –í–ê–®_–¢–û–ö–ï–ù_–ë–û–¢–ê_–ó–î–ï–°–¨
update_timeout = 60

token: –¢–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ –±–æ—Ç–∞, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –æ—Ç BotFather. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã –º–æ–¥—É–ª—è.

update_timeout: –í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö) –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ getUpdates. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –µ—Å–ª–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω –≤ –º–µ—Ç–æ–¥ get_updates.

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ üßë‚Äçüíª
–ú–æ–¥—É–ª—å –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –∫–∞–∫ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Å—Å–∏—è–º–∏ aiohttp.

–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
–í—ã –º–æ–∂–µ—Ç–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å CustomGiftSend —Å –ª–æ–≥–≥–µ—Ä–æ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–ª–∏ –ø–µ—Ä–µ–¥–∞—Ç—å —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä logging.Logger –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–∞—à–µ–π —Å–∏—Å—Ç–µ–º–æ–π –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:

import asyncio
import logging
from custom_gift_send import CustomGiftSend, TelegramAPIError, ValidationError

# 1. –ü—Ä–∏–º–µ—Ä –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ª–æ–≥–≥–µ—Ä–∞
my_custom_logger = logging.getLogger("MyBotLogger")
my_custom_logger.setLevel(logging.DEBUG) # –£—Ä–æ–≤–µ–Ω—å DEBUG –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω—ã—Ö –ª–æ–≥–æ–≤
formatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s')
console_handler = logging.StreamHandler()
console_handler.setFormatter(formatter)
my_custom_logger.addHandler(console_handler)

async def main():
    # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–æ–¥—É–ª—è –∫–∞–∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º –ª–æ–≥–≥–µ—Ä–æ–º
    async with CustomGiftSend(logger=my_custom_logger) as gift_bot:
        my_custom_logger.info("–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!")
        # ... –≤–∞—à –∫–æ–¥ ...

    # –ò–ª–∏ –±–µ–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –ª–æ–≥–≥–µ—Ä–∞ (–±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ª–æ–≥–≥–µ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
    # async with CustomGiftSend() as gift_bot:
    #     logging.info("–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω —Å –ª–æ–≥–≥–µ—Ä–æ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é!")
    #     # ... –≤–∞—à –∫–æ–¥ ...

if __name__ == "__main__":
    asyncio.run(main())

–ü—Ä–∏–º–µ—Ä—ã –≤—ã–∑–æ–≤–æ–≤ –º–µ—Ç–æ–¥–æ–≤
–í—Å–µ –º–µ—Ç–æ–¥—ã API —Ç–µ–ø–µ—Ä—å –ø—Ä–∏–Ω–∏–º–∞—é—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ –≤–∏–¥–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ (**kwargs). Pydantic –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã. –ï—Å–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –æ–∂–∏–¥–∞–µ–º–æ–π —Å—Ö–µ–º–µ, –±—É–¥–µ—Ç –≤—ã–±—Ä–æ—à–µ–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ pydantic.ValidationError.

import asyncio
import logging
from custom_gift_send import (
    CustomGiftSend,
    TelegramAPIError,
    TelegramBadRequestError,
    TelegramForbiddenError,
    TelegramTooManyRequestsError,
    ValidationError
)

logging.basicConfig(level=logging.INFO, format='%(asctime)s - %(name)s - %(levelname)s - %(message)s')
logger = logging.getLogger(__name__)

async def run_examples():
    async with CustomGiftSend(logger=logger) as gift_bot:
        chat_id = -1001234567890 # –ü—Ä–∏–º–µ—Ä ID –≥—Ä—É–ø–ø—ã/–∫–∞–Ω–∞–ª–∞ (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π)
        user_id = 123456789      # –ü—Ä–∏–º–µ—Ä User ID (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π)
        
        try:
            # –ü–æ–ª—É—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ Telegram Stars
            balance_info = await gift_bot.get_star_balance()
            logger.info(f"–ë–∞–ª–∞–Ω—Å Telegram Stars: {balance_info}")
        except TelegramAPIError as e:
            logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –±–∞–ª–∞–Ω—Å–∞ Stars: {e.description} (–ö–æ–¥: {e.error_code})")
        except Exception as e:
            logger.error(f"–ù–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω–∞—è –æ—à–∏–±–∫–∞: {e}")

        try:
            # –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–æ–¥–∞—Ä–∫–æ–≤
            available_gifts = await gift_bot.get_available_gifts()
            logger.info(f"–î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–æ–¥–∞—Ä–∫–∏: {available_gifts}")
            first_gift_id = None
            if available_gifts.get("ok") and available_gifts["result"]:
                first_gift_id = available_gifts["result"][0].get("id")
                logger.info(f"–ü–µ—Ä–≤—ã–π –¥–æ—Å—Ç—É–ø–Ω—ã–π Gift ID: {first_gift_id}")
            else:
                logger.warning("–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–æ–¥–∞—Ä–∫–æ–≤ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ send_gift.")

            if first_gift_id:
                # –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ–¥–∞—Ä–∫–∞ (–ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Pydantic-–≤–∞–ª–∏–¥–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ kwargs)
                send_gift_result = await gift_bot.send_gift(
                    chat_id=chat_id,
                    gift_id=first_gift_id,
                    pay_for_upgrade=False,
                    disable_notification=True,
                    text="–ü–æ–∑–¥—Ä–∞–≤–ª—è—é —Å —É–ª—É—á—à–µ–Ω–∏–µ–º –º–æ–¥—É–ª—è!"
                )
                logger.info(f"–†–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–æ–¥–∞—Ä–∫–∞: {send_gift_result}")

        except TelegramBadRequestError as e:
            logger.error(f"–û—à–∏–±–∫–∞ 400 Bad Request –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –ø–æ–¥–∞—Ä–∫–∞: {e.description}")
        except ValidationError as e:
            logger.error(f"–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ send_gift: {e}")
        except TelegramAPIError as e:
            logger.error(f"–û—à–∏–±–∫–∞ Telegram API –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –ø–æ–¥–∞—Ä–∫–∞–º–∏: {e.description} (–ö–æ–¥: {e.error_code})")
        except Exception as e:
            logger.error(f"–ù–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω–∞—è –æ—à–∏–±–∫–∞: {e}")

        try:
            # –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏ Telegram Premium
            gift_premium_result = await gift_bot.gift_premium(user_id=user_id, months=1)
            logger.info(f"–†–µ–∑—É–ª—å—Ç–∞—Ç –¥–∞—Ä–µ–Ω–∏—è Premium: {gift_premium_result}")
        except TelegramForbiddenError as e:
            logger.error(f"–û—à–∏–±–∫–∞ 403 Forbidden –ø—Ä–∏ –¥–∞—Ä–µ–Ω–∏–∏ Premium: {e.description}")
        except ValidationError as e:
            logger.error(f"–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ gift_premium: {e}")
        except TelegramAPIError as e:
            logger.error(f"–û—à–∏–±–∫–∞ Telegram API –ø—Ä–∏ –¥–∞—Ä–µ–Ω–∏–∏ Premium: {e.description} (–ö–æ–¥: {e.error_code})")
        except Exception as e:
            logger.error(f"–ù–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω–∞—è –æ—à–∏–±–∫–∞: {e}")

        try:
            # –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π (—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Pydantic-–≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–ª—è limit –∏ timeout)
            updates = await gift_bot.get_updates(limit=5, timeout=10)
            logger.info(f"–ü–æ–ª—É—á–µ–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π: {len(updates)}")
            for update in updates:
                logger.debug(f"–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ: {update}")
        except TelegramTooManyRequestsError as e:
            logger.warning(f"–°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤. –ü–æ–≤—Ç–æ—Ä —á–µ—Ä–µ–∑ {e.retry_after} —Å–µ–∫—É–Ω–¥.")
        except ValidationError as e:
            logger.error(f"–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ get_updates: {e}")
        except TelegramAPIError as e:
            logger.error(f"–û—à–∏–±–∫–∞ Telegram API –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π: {e.description} (–ö–æ–¥: {e.error_code})")
        except Exception as e:
            logger.error(f"–ù–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω–∞—è –æ—à–∏–±–∫–∞: {e}")

        # –ü—Ä–∏–º–µ—Ä —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤–µ–±—Ö—É–∫–∞ (–∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ, —Ç–∞–∫ –∫–∞–∫ —Ç—Ä–µ–±—É–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–≥–æ URL)
        # try:
        #     webhook_url = "https://your.domain/webhook_path"
        #     set_webhook_result = await gift_bot.set_webhook(url=webhook_url, max_connections=40, drop_pending_updates=True)
        #     logger.info(f"–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤–µ–±—Ö—É–∫–∞: {set_webhook_result}")
        # except TelegramAPIError as e:
        #     logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –≤–µ–±—Ö—É–∫–∞: {e.description}")
        # except ValidationError as e:
        #     logger.error(f"–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ set_webhook: {e}")

        try:
            webhook_info = await gift_bot.get_webhook_info()
            logger.info(f"–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–µ–±—Ö—É–∫–µ: {webhook_info}")
        except TelegramAPIError as e:
            logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≤–µ–±—Ö—É–∫–µ: {e.description}")
        except Exception as e:
            logger.error(f"–ù–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω–∞—è –æ—à–∏–±–∫–∞: {e}")

if __name__ == "__main__":
    asyncio.run(run_examples())



API –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ üìö
–ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥—ë–Ω —Å–ø–∏—Å–æ–∫ –∫–ª—é—á–µ–≤—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –∫–ª–∞—Å—Å–∞ CustomGiftSend —Å –∫—Ä–∞—Ç–∫–∏–º –æ–ø–∏—Å–∞–Ω–∏–µ–º –∏ —É–∫–∞–∑–∞–Ω–∏–µ–º –∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.

CustomGiftSend(logger: Optional[logging.Logger] = None)
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–ª–∏–µ–Ω—Ç Telegram Bot API.

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:

logger (Optional[logging.Logger]): –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –ª–æ–≥–≥–µ—Ä–∞ Python. –ï—Å–ª–∏ –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω, –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –ª–æ–≥–≥–µ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

async send_gift(**kwargs) -> Dict
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–¥–∞—Ä–æ–∫ –æ—Ç –∏–º–µ–Ω–∏ –±–æ—Ç–∞ –≤ —É–∫–∞–∑–∞–Ω–Ω—ã–π —á–∞—Ç.

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã Pydantic (—á–µ—Ä–µ–∑ kwargs):

chat_id (int, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ): –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ü–µ–ª–µ–≤–æ–≥–æ —á–∞—Ç–∞.

gift_id (str, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ): –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–¥–∞—Ä–∫–∞ (–º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —Å –ø–æ–º–æ—â—å—é get_available_gifts).

pay_for_upgrade (Optional[bool]): –û–ø–ª–∞—Ç–∏—Ç—å –ª–∏ –ø–æ–≤—ã—à–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è –¥–ª—è Premium-–ø–æ–¥–∞—Ä–∫–æ–≤.

disable_notification (Optional[bool]): –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–µ–∑ –∑–≤—É–∫–∞.

text (Optional[str]): –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç –¥–ª—è –ø–æ–¥–∞—Ä–∫–∞.

parse_mode (Optional[str]): –†–µ–∂–∏–º —Ä–∞–∑–±–æ—Ä–∞ –¥–ª—è —Ç–µ–∫—Å—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 'MarkdownV2', 'HTML').

entities (Optional[list]): –ú–∞—Å—Å–∏–≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤-—Å—É—â–Ω–æ—Å—Ç–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ —Ç–µ–∫—Å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è.

reply_parameters (Optional[Dict]): –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ.

reply_markup (Optional[Dict]): –û–±—ä–µ–∫—Ç –∫–∞—Å—Ç–æ–º–Ω–æ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã.

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: Dict (—Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏ Telegram API).

–ò—Å–∫–ª—é—á–µ–Ω–∏—è: TelegramBadRequestError, ValidationError.

async gift_premium(**kwargs) -> Dict
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –î–∞—Ä–∏—Ç –ø–æ–¥–ø–∏—Å–∫—É Telegram Premium —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã Pydantic (—á–µ—Ä–µ–∑ kwargs):

user_id (int, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ): –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

months (int, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ): –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ—Å—è—Ü–µ–≤ –ø–æ–¥–ø–∏—Å–∫–∏ (1, 3, 6 –∏–ª–∏ 12).

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: Dict.

–ò—Å–∫–ª—é—á–µ–Ω–∏—è: TelegramForbiddenError, ValidationError.

async get_star_balance() -> Dict
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ü–æ–ª—É—á–∞–µ—Ç —Ç–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å Telegram Stars –±–æ—Ç–∞.

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã: –ù–µ—Ç.

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: Dict (–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–∞–ª–∞–Ω—Å–µ Stars).

async get_available_gifts() -> Dict
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –ø–æ–¥–∞—Ä–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –≤–∞—à –±–æ—Ç –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å.

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã: –ù–µ—Ç.

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: Dict (—Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–æ–¥–∞—Ä–∫–æ–≤).

async transfer_gift(**kwargs) -> Dict
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ü–µ—Ä–µ–¥–∞–µ—Ç –ø–æ–¥–∞—Ä–µ–Ω–Ω—ã–π –ø–æ–¥–∞—Ä–æ–∫ –¥—Ä—É–≥–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã Pydantic (—á–µ—Ä–µ–∑ kwargs):

owned_gift_id (str, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ): –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–¥–∞—Ä–∫–∞, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –±–æ—Ç—É.

user_id (int, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ): ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä–æ–º—É –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –ø–æ–¥–∞—Ä–æ–∫.

chat_id (Optional[int]): ID —á–∞—Ç–∞, –µ—Å–ª–∏ –±–æ—Ç –Ω–µ –∏–º–µ–µ—Ç –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ user_id.

pay_for_transfer (Optional[bool]): –û–ø–ª–∞—Ç–∏—Ç—å –ª–∏ –∫–æ–º–∏—Å—Å–∏—é –∑–∞ –ø–µ—Ä–µ–¥–∞—á—É.

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: Dict.

–ò—Å–∫–ª—é—á–µ–Ω–∏—è: TelegramNotFoundError, ValidationError.

async get_updates(**kwargs) -> list
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ü–æ–ª—É—á–∞–µ—Ç –≤—Ö–æ–¥—è—â–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –¥–æ–ª–≥–æ–≥–æ –æ–ø—Ä–æ—Å–∞.

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã Pydantic (—á–µ—Ä–µ–∑ kwargs):

offset (Optional[int]): ID –ø–µ—Ä–≤–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä–æ–µ –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å.

limit (Optional[int]): –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è (1-100).

timeout (Optional[int]): –í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –≤ —Å–µ–∫—É–Ω–¥–∞—Ö –¥–ª—è –¥–æ–ª–≥–æ–≥–æ –æ–ø—Ä–æ—Å–∞ (0-60). –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è update_timeout –∏–∑ config.ini.

allowed_updates (Optional[list[str]]): –°–ø–∏—Å–æ–∫ —Ç–∏–ø–æ–≤ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –±–æ—Ç —Ö–æ—á–µ—Ç –ø–æ–ª—É—á–∞—Ç—å.

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: list (—Å–ø–∏—Å–æ–∫ –æ–±—ä–µ–∫—Ç–æ–≤ Update).

async get_user_chat_boosts(**kwargs) -> Dict
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –±—É—Å—Ç–æ–≤ —á–∞—Ç–∞, –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã Pydantic (—á–µ—Ä–µ–∑ kwargs):

user_id (int, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ): ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —á—å–∏ –±—É—Å—Ç—ã –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å.

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: Dict.

async refund_star_payment(**kwargs) -> Dict
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ä–µ–¥—Å—Ç–≤–∞ –∑–∞ Star-–ø–ª–∞—Ç–µ–∂.

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã Pydantic (—á–µ—Ä–µ–∑ kwargs):

star_payment_charge_id (str, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ): ID –ø–ª–∞—Ç–µ–∂–∞ Stars, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å.

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: Dict.

async set_webhook(**kwargs) -> Dict
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –£–∫–∞–∑—ã–≤–∞–µ—Ç URL –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Ö–æ–¥—è—â–∏—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —á–µ—Ä–µ–∑ –≤–µ–±—Ö—É–∫.

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã Pydantic (—á–µ—Ä–µ–∑ kwargs):

url (str, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ): URL –¥–ª—è –≤–µ–±—Ö—É–∫–∞.

certificate (Optional[Any]): –û—Ç–∫—Ä—ã—Ç—ã–π –∫–ª—é—á SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞.

ip_address (Optional[str]): IP-–∞–¥—Ä–µ—Å –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤–º–µ—Å—Ç–æ URL.

max_connections (Optional[int]): –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π (1-100).

allowed_updates (Optional[list[str]]): –°–ø–∏—Å–æ–∫ —Ç–∏–ø–æ–≤ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –±–æ—Ç —Ö–æ—á–µ—Ç –ø–æ–ª—É—á–∞—Ç—å.

drop_pending_updates (Optional[bool]): –£–¥–∞–ª—è—Ç—å –ª–∏ –æ–∂–∏–¥–∞—é—â–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.

secret_token (Optional[str]): –°–µ–∫—Ä–µ—Ç–Ω—ã–π —Ç–æ–∫–µ–Ω –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–∞ X-Telegram-Bot-Api-Secret-Token.

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: Dict.

async delete_webhook(**kwargs) -> Dict
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –£–¥–∞–ª—è–µ—Ç –≤–µ–±—Ö—É–∫.

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã Pydantic (—á–µ—Ä–µ–∑ kwargs):

drop_pending_updates (Optional[bool]): –£–¥–∞–ª—è—Ç—å –ª–∏ –æ–∂–∏–¥–∞—é—â–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: Dict.

async get_webhook_info() -> Dict
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ü–æ–ª—É—á–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–µ–±—Ö—É–∫–µ –±–æ—Ç–∞.

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã: –ù–µ—Ç.

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: Dict (–æ–±—ä–µ–∫—Ç WebhookInfo).

–û–±—Ä–∞–±–æ—Ç–∫–∞ –û—à–∏–±–æ–∫ üö¶
–ú–æ–¥—É–ª—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫ Telegram API:

TelegramAPIError: –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –≤—Å–µ—Ö –æ—à–∏–±–æ–∫ API.

TelegramUnauthorizedError (HTTP 401): –ù–µ–≤–µ—Ä–Ω—ã–π —Ç–æ–∫–µ–Ω –±–æ—Ç–∞.

TelegramForbiddenError (HTTP 403): –ë–æ—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –∏–ª–∏ –Ω–µ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–µ—Å—É—Ä—Å—É.

TelegramBadRequestError (HTTP 400): –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞.

TelegramNotFoundError (HTTP 404): –†–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω.

TelegramTooManyRequestsError (HTTP 429): –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤. –°–æ–¥–µ—Ä–∂–∏—Ç –∞—Ç—Ä–∏–±—É—Ç retry_after, —É–∫–∞–∑—ã–≤–∞—é—â–∏–π, —á–µ—Ä–µ–∑ —Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥ –º–æ–∂–Ω–æ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å.

pydantic.ValidationError: –í—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è, –µ—Å–ª–∏ –≤—Ö–æ–¥–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –æ–∂–∏–¥–∞–µ–º–æ–π Pydantic-–º–æ–¥–µ–ª–∏.

–ü—Ä–∏–º–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫:

import asyncio
from custom_gift_send import (
    CustomGiftSend,
    TelegramAPIError,
    TelegramBadRequestError,
    TelegramTooManyRequestsError,
    ValidationError
)

async def handle_errors():
    async with CustomGiftSend() as gift_bot:
        try:
            # –ü–æ–ø—ã—Ç–∫–∞ –≤—ã–∑–≤–∞—Ç—å –º–µ—Ç–æ–¥ —Å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º
            await gift_bot.send_gift(chat_id="not_an_int", gift_id="invalid")
        except ValidationError as e:
            print(f"–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ Pydantic: {e}")
        except TelegramBadRequestError as e:
            print(f"–û—à–∏–±–∫–∞ Bad Request: {e.description} (–ö–æ–¥: {e.error_code})")
        except TelegramTooManyRequestsError as e:
            print(f"–û—à–∏–±–∫–∞ Too Many Requests: –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞ —á–µ—Ä–µ–∑ {e.retry_after} —Å–µ–∫—É–Ω–¥.")
        except TelegramAPIError as e:
            print(f"–û–±—â–∞—è –æ—à–∏–±–∫–∞ Telegram API: {e.description} (–ö–æ–¥: {e.error_code})")
        except Exception as e:
            print(f"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞: {e}")

if __name__ == "__main__":
    asyncio.run(handle_errors())