(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-01e66579"],{"261a":function(e,n,s){"use strict";s("a345")},"277a":function(e,n,s){"use strict";s.r(n);var t=function(){var e=this,n=e._self._c;return n("div",[n("el-breadcrumb",{attrs:{separator:"/"}},[n("el-breadcrumb-item",[e._v("AIGC专区")]),n("el-breadcrumb-item",[e._v("StableDiffusion文生图")])],1),n("el-card",[n("el-row",[n("el-col",{attrs:{span:12}},[n("div",[n("SdInfo",{attrs:{sd_info:e.sd_info},on:{getSdInfo:e.getSdInfo}}),"已初始化"===e.sd_info.state?n("div",[n("el-form",{ref:"form",attrs:{model:e.sd_reasonning,rules:e.rules}},[n("el-form-item",{attrs:{label:"正向提示词",prop:"prompt"}},[n("el-input",{attrs:{type:"textarea",placeholder:"用来引导SD模型生成图片的自然语言。建议使用单词+,拼接的方式。例：1girl,long hair,stand,dress"},model:{value:e.sd_reasonning.prompt,callback:function(n){e.$set(e.sd_reasonning,"prompt",n)},expression:"sd_reasonning.prompt"}})],1),n("el-form-item",{attrs:{label:"反向提示词",prop:"negative_prompt"}},[n("el-input",{attrs:{type:"textarea",placeholder:"用于引导SD模型不要在生成图片时使用的风格"},model:{value:e.sd_reasonning.negative_prompt,callback:function(n){e.$set(e.sd_reasonning,"negative_prompt",n)},expression:"sd_reasonning.negative_prompt"}})],1),n("el-form-item",{attrs:{label:"checkpoint"}},[n("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(n){return e.openFileSelect("checkpoint")}}},[e._v("选择文件")]),n("el-input",{attrs:{placeholder:"第三方checkpoint(全路径)"},model:{value:e.sd_reasonning.checkpoint,callback:function(n){e.$set(e.sd_reasonning,"checkpoint",n)},expression:"sd_reasonning.checkpoint"}})],1),n("el-form-item",{attrs:{label:"lora"}},[n("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(n){return e.openFileSelect("lora")}}},[e._v("选择文件")]),n("el-input",{attrs:{placeholder:"第三方lora(全路径)"},model:{value:e.sd_reasonning.lora,callback:function(n){e.$set(e.sd_reasonning,"lora",n)},expression:"sd_reasonning.lora"}})],1),n("el-form-item",[n("el-col",{staticClass:"line",attrs:{span:3}},[e._v("种子")]),n("el-col",{attrs:{span:9}},[n("el-input-number",{model:{value:e.sd_reasonning.seed,callback:function(n){e.$set(e.sd_reasonning,"seed",n)},expression:"sd_reasonning.seed"}})],1),n("el-col",{staticClass:"line",attrs:{span:3}},[e._v("采样方式")]),n("el-col",{attrs:{span:9}},[n("el-select",{model:{value:e.sd_reasonning.scheduler,callback:function(n){e.$set(e.sd_reasonning,"scheduler",n)},expression:"sd_reasonning.scheduler"}},[n("el-option",{attrs:{value:"Euler"}},[e._v("Euler")]),n("el-option",{attrs:{value:"DPM"}},[e._v("DPM")]),n("el-option",{attrs:{value:"LMS"}},[e._v("LMS")]),n("el-option",{attrs:{value:"PNDM"}},[e._v("PNDM")]),n("el-option",{attrs:{value:"DDIM"}},[e._v("DDIM")])],1)],1)],1),n("el-form-item",{attrs:{label:"",prop:"num_inference_steps"}},[n("el-col",{staticClass:"line",attrs:{span:3}},[e._v("采样步数")]),n("el-col",{attrs:{span:9}},[n("el-input-number",{model:{value:e.sd_reasonning.num_inference_steps,callback:function(n){e.$set(e.sd_reasonning,"num_inference_steps",n)},expression:"sd_reasonning.num_inference_steps"}})],1),n("el-col",{staticClass:"line",attrs:{span:3}},[e._v("图片张数")]),n("el-col",{attrs:{span:9}},[n("el-input-number",{model:{value:e.sd_reasonning.img_num,callback:function(n){e.$set(e.sd_reasonning,"img_num",n)},expression:"sd_reasonning.img_num"}})],1)],1),n("el-form-item",{attrs:{label:"",prop:"img_height"}},[n("el-col",{staticClass:"line",attrs:{span:3}},[e._v("图片宽度")]),n("el-col",{attrs:{span:9}},[n("el-input-number",{model:{value:e.sd_reasonning.img_width,callback:function(n){e.$set(e.sd_reasonning,"img_width",n)},expression:"sd_reasonning.img_width"}})],1),n("el-col",{staticClass:"line",attrs:{span:3}},[e._v("图片高度")]),n("el-col",{attrs:{span:9}},[n("el-input-number",{model:{value:e.sd_reasonning.img_height,callback:function(n){e.$set(e.sd_reasonning,"img_height",n)},expression:"sd_reasonning.img_height"}})],1)],1),n("el-form-item",[n("el-col",{staticClass:"line",attrs:{span:3}},[e._v("引导系数")]),n("el-col",{attrs:{span:9}},[n("el-input-number",{attrs:{placeholder:"提示词引导系数"},model:{value:e.sd_reasonning.guidance_scale,callback:function(n){e.$set(e.sd_reasonning,"guidance_scale",n)},expression:"sd_reasonning.guidance_scale"}})],1),n("el-col",{staticClass:"line",attrs:{span:3}},[e._v("lora系数")]),n("el-col",{attrs:{span:9}},[n("el-input-number",{attrs:{precision:2,step:.01,max:1,placeholder:"lora影响系数"},model:{value:e.sd_reasonning.lora_alpha,callback:function(n){e.$set(e.sd_reasonning,"lora_alpha",n)},expression:"sd_reasonning.lora_alpha"}})],1)],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(n){return e.onSubmit("form")}}},[e._v("提交")])],1)],1)],1):e._e()],1)]),n("el-col",{attrs:{span:12}},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading_img,expression:"loading_img"}],staticClass:"image-area"},[0==e.generate_imgs.length?n("div",{staticStyle:{"line-height":"28px"}},[n("el-empty",{attrs:{description:"AIGC文生图"}})],1):e._e(),-1!==e.current_seed?n("div",{staticStyle:{"text-align":"center"}},[e._v(" 图片种子: "),n("el-tag",[e._v(e._s(e.current_seed))])],1):e._e(),e._l(e.generate_imgs,(function(s,t){return e.generate_imgs.length>0?n("div",{key:t,staticClass:"image-container"},[n("img",{staticClass:"gallery-image",attrs:{src:s},on:{click:function(n){return e.viewImage(s)}}}),n("div",[n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(n){return e.saveImg(s)}}},[e._v("保存图片")])],1)]):e._e()}))],2)]),n("image-viewer",{ref:"imageViewerRef",attrs:{visible:e.viewerVisible},on:{"update:visible":function(n){e.viewerVisible=n}}})],1)],1)],1)},a=[],i=(s("b64b"),s("4989")),r=(s("ff51"),s("e700")),l=s("dd0c"),o={components:{ImageViewer:r["a"],SdInfo:l["a"]},data:function(){return{current_seed:-1,loading_img:!1,viewerVisible:!1,generate_imgs:[],sd_info:{state:"待初始化"},sd_reasonning:{prompt:"",negative_prompt:"",seed:-1,checkpoint:null,lora_alpha:.7,lora:null,scheduler:"Euler",num_inference_steps:30,guidance_scale:3,img_num:2,img_height:512,img_width:512},rules:{prompt:[{required:!0,message:"请输入正向提示词",trigger:"blur"}]}}},created:function(){this.getSdInfo()},methods:{openFileSelect:function(e){var n=this;return i["a"].openFileSelector().then((function(s){s&&s.length>0&&(n.sd_reasonning[e]=s[0])})).catch((function(e){n.$message.error(e)})),!1},getSdInfo:function(){var e=this;i["a"].getSdInfo().then((function(n){e.sd_info=JSON.parse(n),"已初始化"!==e.sd_info.state&&e.$message.error("检测到未初始化SD基础环境，请初始化后使用此功能")})).catch((function(n){e.$message.error(n)}))},onSubmit:function(e){var n=this;this.$refs[e].validate((function(e){if(e){if(n.sd_reasonning.img_width%8!==0)return n.$message.error("图片宽度必须为8的倍数"),!1;if(n.sd_reasonning.img_height%8!==0)return n.$message.error("图片高度必须为8的倍数"),!1;n.loading_img=!0,n.$message.success("开始生成图片"),i["a"].sdGeneratePic(n.sd_reasonning).then((function(e){n.loading_img=!1,n.generate_imgs=e.images,n.current_seed=e.seed})).catch((function(e){n.loading_img=!1,n.$message.error(e)}))}}))},saveImg:function(e){var n=this;i["a"].saveImages(e).then((function(e){"success"===e&&n.$message.success("保存成功")})).catch((function(e){n.$message.error(e)}))},viewImage:function(e){this.$refs.imageViewerRef.loadImage(e),this.viewerVisible=!0}}},c=o,u=(s("261a"),s("2877")),g=Object(u["a"])(c,t,a,!1,null,null,null);n["default"]=g.exports},a345:function(e,n,s){}}]);
//# sourceMappingURL=chunk-01e66579.6e494d5c.js.map