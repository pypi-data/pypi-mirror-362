{"version":3,"sources":["webpack:///./src/components/bussiness/aigc/sd-ip-adapter-faceid.vue","webpack:///src/components/bussiness/aigc/sd-ip-adapter-faceid.vue","webpack:///./src/components/bussiness/aigc/sd-ip-adapter-faceid.vue?b868","webpack:///./src/components/bussiness/aigc/sd-ip-adapter-faceid.vue?6549","webpack:///./src/components/bussiness/aigc/sd-ip-adapter-faceid.vue?c103"],"names":["render","_vm","this","_c","_self","attrs","_v","sd_info","on","getSdInfo","getIpAdapterModels","state","ref","sd_reasonning","rules","directives","name","rawName","value","expression","model","input_img","callback","$$v","$set","fileList","uploadSuccess","beforeUpload","fileRemove","exceed","uploadUrl","staticClass","slot","prompt","negative_prompt","$event","openFileSelect","checkpoint","lora","seed","num_inference_steps","img_num","img_width","img_height","guidance_scale","lora_alpha","ip_adapter_faceid_model","onSubmit","_e","loading_img","generate_imgs","length","staticStyle","current_seed","_s","_l","image","index","key","viewImage","saveImg","viewerVisible","staticRenderFns","components","ImageViewer","SdInfo","data","ipAdapterModels","scheduler","required","message","trigger","created","getUploadUrl","methods","val","_this","apis","openFileSelector","then","res","catch","e","$message","error","_this2","JSON","parse","ip_adapter_faceid_state","form","_this3","$refs","validate","valid","success","sdIpAdapterFaceid","images","_this4","saveImages","imageViewerRef","loadImage","response","file","file_path","files","warning","base_url","$store","sysInfo","console","log","component"],"mappings":"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","file":"js/chunk-585a980a.10b91ac0.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('el-breadcrumb',{attrs:{\"separator\":\"/\"}},[_c('el-breadcrumb-item',[_vm._v(\"AIGC专区\")]),_c('el-breadcrumb-item',[_vm._v(\"IP-Adapter-FaceID\")])],1),_c('el-card',[_c('el-row',[_c('el-col',{attrs:{\"span\":12}},[_c('div',[_c('SdInfo',{attrs:{\"sd_info\":_vm.sd_info},on:{\"getSdInfo\":_vm.getSdInfo,\"getIpAdapterModels\":_vm.getIpAdapterModels}}),(_vm.sd_info.state ==='已初始化')?_c('div',[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.sd_reasonning,\"rules\":_vm.rules}},[_c('el-form-item',{attrs:{\"label\":\"上传原图\",\"prop\":\"input_img\"}},[_c('el-input',{directives:[{name:\"show\",rawName:\"v-show\",value:(false),expression:\"false\"}],attrs:{\"disabled\":\"\"},model:{value:(_vm.sd_reasonning.input_img),callback:function ($$v) {_vm.$set(_vm.sd_reasonning, \"input_img\", $$v)},expression:\"sd_reasonning.input_img\"}}),_c('br'),_c('el-upload',{attrs:{\"drag\":\"\",\"list-type\":\"picture\",\"multiple\":false,\"accept\":'image/*',\"auto-upload\":true,\"file-list\":_vm.fileList,\"limit\":1,\"on-success\":_vm.uploadSuccess,\"before-upload\":_vm.beforeUpload,\"on-remove\":_vm.fileRemove,\"on-exceed\":_vm.exceed,\"action\":_vm.uploadUrl}},[_c('i',{staticClass:\"el-icon-upload\"}),_c('div',{staticClass:\"el-upload__text\"},[_vm._v(\"将图片拖到此处，或\"),_c('em',[_vm._v(\"点击上传\")])]),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"只能上传jpg/png等图片文件\")])])],1),_c('el-form-item',{attrs:{\"label\":\"正向提示词\",\"prop\":\"prompt\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"placeholder\":\"用来引导SD模型生成图片的自然语言。建议使用单词+,拼接的方式。例：1girl,long hair,stand,dress\"},model:{value:(_vm.sd_reasonning.prompt),callback:function ($$v) {_vm.$set(_vm.sd_reasonning, \"prompt\", $$v)},expression:\"sd_reasonning.prompt\"}})],1),_c('el-form-item',{attrs:{\"label\":\"反向提示词\",\"prop\":\"negative_prompt\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"placeholder\":\"用于引导SD模型不要在生成图片时使用的风格\"},model:{value:(_vm.sd_reasonning.negative_prompt),callback:function ($$v) {_vm.$set(_vm.sd_reasonning, \"negative_prompt\", $$v)},expression:\"sd_reasonning.negative_prompt\"}})],1),_c('el-form-item',{attrs:{\"label\":\"checkpoint\"}},[_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"info\"},on:{\"click\":function($event){return _vm.openFileSelect('checkpoint')}}},[_vm._v(\"选择文件\")]),_c('el-input',{attrs:{\"placeholder\":\"第三方checkpoint(全路径)\"},model:{value:(_vm.sd_reasonning.checkpoint),callback:function ($$v) {_vm.$set(_vm.sd_reasonning, \"checkpoint\", $$v)},expression:\"sd_reasonning.checkpoint\"}})],1),_c('el-form-item',{attrs:{\"label\":\"lora\"}},[_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"info\"},on:{\"click\":function($event){return _vm.openFileSelect('lora')}}},[_vm._v(\"选择文件\")]),_c('el-input',{attrs:{\"placeholder\":\"第三方lora(全路径)\"},model:{value:(_vm.sd_reasonning.lora),callback:function ($$v) {_vm.$set(_vm.sd_reasonning, \"lora\", $$v)},expression:\"sd_reasonning.lora\"}})],1),_c('el-form-item',[_c('el-col',{staticClass:\"line\",attrs:{\"span\":3}},[_vm._v(\"种子\")]),_c('el-col',{attrs:{\"span\":9}},[_c('el-input-number',{model:{value:(_vm.sd_reasonning.seed),callback:function ($$v) {_vm.$set(_vm.sd_reasonning, \"seed\", $$v)},expression:\"sd_reasonning.seed\"}})],1)],1),_c('el-form-item',{attrs:{\"label\":\"\",\"prop\":\"num_inference_steps\"}},[_c('el-col',{staticClass:\"line\",attrs:{\"span\":3}},[_vm._v(\"采样步数\")]),_c('el-col',{attrs:{\"span\":9}},[_c('el-input-number',{model:{value:(_vm.sd_reasonning.num_inference_steps),callback:function ($$v) {_vm.$set(_vm.sd_reasonning, \"num_inference_steps\", $$v)},expression:\"sd_reasonning.num_inference_steps\"}})],1),_c('el-col',{staticClass:\"line\",attrs:{\"span\":3}},[_vm._v(\"图片张数\")]),_c('el-col',{attrs:{\"span\":9}},[_c('el-input-number',{model:{value:(_vm.sd_reasonning.img_num),callback:function ($$v) {_vm.$set(_vm.sd_reasonning, \"img_num\", $$v)},expression:\"sd_reasonning.img_num\"}})],1)],1),_c('el-form-item',{attrs:{\"label\":\"\",\"prop\":\"img_height\"}},[_c('el-col',{staticClass:\"line\",attrs:{\"span\":3}},[_vm._v(\"图片宽度\")]),_c('el-col',{attrs:{\"span\":9}},[_c('el-input-number',{model:{value:(_vm.sd_reasonning.img_width),callback:function ($$v) {_vm.$set(_vm.sd_reasonning, \"img_width\", $$v)},expression:\"sd_reasonning.img_width\"}})],1),_c('el-col',{staticClass:\"line\",attrs:{\"span\":3}},[_vm._v(\"图片高度\")]),_c('el-col',{attrs:{\"span\":9}},[_c('el-input-number',{model:{value:(_vm.sd_reasonning.img_height),callback:function ($$v) {_vm.$set(_vm.sd_reasonning, \"img_height\", $$v)},expression:\"sd_reasonning.img_height\"}})],1)],1),_c('el-form-item',[_c('el-col',{staticClass:\"line\",attrs:{\"span\":3}},[_vm._v(\"引导系数\")]),_c('el-col',{attrs:{\"span\":9}},[_c('el-input-number',{attrs:{\"placeholder\":\"提示词引导系数\"},model:{value:(_vm.sd_reasonning.guidance_scale),callback:function ($$v) {_vm.$set(_vm.sd_reasonning, \"guidance_scale\", $$v)},expression:\"sd_reasonning.guidance_scale\"}})],1),_c('el-col',{staticClass:\"line\",attrs:{\"span\":3}},[_vm._v(\"lora系数\")]),_c('el-col',{attrs:{\"span\":9}},[_c('el-input-number',{attrs:{\"precision\":2,\"step\":0.01,\"max\":1,\"min\":0.01,\"placeholder\":\"lora影响系数\"},model:{value:(_vm.sd_reasonning.lora_alpha),callback:function ($$v) {_vm.$set(_vm.sd_reasonning, \"lora_alpha\", $$v)},expression:\"sd_reasonning.lora_alpha\"}})],1)],1),_c('el-form-item',{attrs:{\"label\":\"IP-Adapter-FaceID\",\"prop\":\"ip_adapter_faceid_model\"}},[_c('el-select',{model:{value:(_vm.sd_reasonning.ip_adapter_faceid_model),callback:function ($$v) {_vm.$set(_vm.sd_reasonning, \"ip_adapter_faceid_model\", $$v)},expression:\"sd_reasonning.ip_adapter_faceid_model\"}},[_c('el-option',{attrs:{\"label\":\"ip-adapter-faceid_sd15.bin\",\"value\":\"ip-adapter-faceid_sd15.bin\"}}),_c('el-option',{attrs:{\"label\":\"ip-adapter-faceid-plusv2_sd15.bin\",\"value\":\"ip-adapter-faceid-plusv2_sd15.bin\"}})],1)],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.onSubmit('form')}}},[_vm._v(\"提交\")])],1)],1)],1):_vm._e()],1)]),_c('el-col',{attrs:{\"span\":12}},[_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading_img),expression:\"loading_img\"}],staticClass:\"image-area\"},[(_vm.generate_imgs.length==0)?_c('div',{staticStyle:{\"line-height\":\"28px\"}},[_c('el-empty',{attrs:{\"description\":\"AIGC IP-Adapter-FaceID\"}})],1):_vm._e(),(_vm.current_seed !==-1)?_c('div',{staticStyle:{\"text-align\":\"center\"}},[_vm._v(\" 图片种子: \"),_c('el-tag',[_vm._v(_vm._s(_vm.current_seed))])],1):_vm._e(),_vm._l((_vm.generate_imgs),function(image,index){return (_vm.generate_imgs.length>0)?_c('div',{key:index,staticClass:\"image-container\"},[_c('img',{staticClass:\"gallery-image\",attrs:{\"src\":image},on:{\"click\":function($event){return _vm.viewImage(image)}}}),_c('div',[_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.saveImg(image)}}},[_vm._v(\"保存图片\")])],1)]):_vm._e()})],2)]),_c('image-viewer',{ref:\"imageViewerRef\",attrs:{\"visible\":_vm.viewerVisible},on:{\"update:visible\":function($event){_vm.viewerVisible=$event}}})],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <el-breadcrumb separator=\"/\">\r\n      <el-breadcrumb-item>AIGC专区</el-breadcrumb-item>\r\n      <el-breadcrumb-item>IP-Adapter-FaceID</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n\r\n    <el-card>\r\n      <el-row>\r\n        <el-col :span=\"12\">\r\n          <div>\r\n            <SdInfo :sd_info=\"sd_info\" @getSdInfo=\"getSdInfo\" @getIpAdapterModels=\"getIpAdapterModels\"></SdInfo>\r\n            <div v-if=\"sd_info.state ==='已初始化'\">\r\n              <el-form :model=\"sd_reasonning\" ref=\"form\" :rules=\"rules\">\r\n                <el-form-item label=\"上传原图\" prop=\"input_img\">\r\n                  <el-input v-show=\"false\" v-model=\"sd_reasonning.input_img\" disabled></el-input>\r\n                  <br>\r\n                  <el-upload\r\n                    drag\r\n                    list-type=\"picture\"\r\n                    :multiple=false\r\n                    :accept=\"'image/*'\"\r\n                    :auto-upload=true\r\n                    :file-list=\"fileList\"\r\n                    :limit=1\r\n                    :on-success=\"uploadSuccess\"\r\n                    :before-upload=\"beforeUpload\"\r\n                    :on-remove=\"fileRemove\"\r\n                    :on-exceed=\"exceed\"\r\n                    :action=\"uploadUrl\">\r\n                    <i class=\"el-icon-upload\"></i>\r\n                    <div class=\"el-upload__text\">将图片拖到此处，或<em>点击上传</em></div>\r\n                    <div class=\"el-upload__tip\" slot=\"tip\">只能上传jpg/png等图片文件</div>\r\n                  </el-upload>\r\n                </el-form-item>\r\n                <el-form-item label=\"正向提示词\" prop=\"prompt\">\r\n                  <el-input type=\"textarea\" v-model=\"sd_reasonning.prompt\"\r\n                            placeholder=\"用来引导SD模型生成图片的自然语言。建议使用单词+,拼接的方式。例：1girl,long hair,stand,dress\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"反向提示词\" prop=\"negative_prompt\">\r\n                  <el-input type=\"textarea\" v-model=\"sd_reasonning.negative_prompt\"\r\n                            placeholder=\"用于引导SD模型不要在生成图片时使用的风格\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"checkpoint\">\r\n                  <el-button size=\"mini\" type=\"info\" @click=\"openFileSelect('checkpoint')\">选择文件</el-button>\r\n                  <el-input v-model=\"sd_reasonning.checkpoint\" placeholder=\"第三方checkpoint(全路径)\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"lora\">\r\n                  <el-button size=\"mini\" type=\"info\" @click=\"openFileSelect('lora')\">选择文件</el-button>\r\n                  <el-input v-model=\"sd_reasonning.lora\" placeholder=\"第三方lora(全路径)\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                  <el-col class=\"line\" :span=\"3\">种子</el-col>\r\n                  <el-col :span=\"9\">\r\n                    <el-input-number v-model=\"sd_reasonning.seed\"></el-input-number>\r\n                  </el-col>\r\n                </el-form-item>\r\n\r\n                <el-form-item label=\"\" prop=\"num_inference_steps\">\r\n                  <el-col class=\"line\" :span=\"3\">采样步数</el-col>\r\n                  <el-col :span=\"9\">\r\n                    <el-input-number v-model=\"sd_reasonning.num_inference_steps\"></el-input-number>\r\n                  </el-col>\r\n                  <el-col class=\"line\" :span=\"3\">图片张数</el-col>\r\n                  <el-col :span=\"9\">\r\n                    <el-input-number v-model=\"sd_reasonning.img_num\"></el-input-number>\r\n                  </el-col>\r\n                </el-form-item>\r\n\r\n                <el-form-item label=\"\" prop=\"img_height\">\r\n                  <el-col class=\"line\" :span=\"3\">图片宽度</el-col>\r\n                  <el-col :span=\"9\">\r\n                    <el-input-number v-model=\"sd_reasonning.img_width\"></el-input-number>\r\n                  </el-col>\r\n                  <el-col class=\"line\" :span=\"3\">图片高度</el-col>\r\n                  <el-col :span=\"9\">\r\n                    <el-input-number v-model=\"sd_reasonning.img_height\"></el-input-number>\r\n                  </el-col>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                  <el-col class=\"line\" :span=\"3\">引导系数</el-col>\r\n                  <el-col :span=\"9\">\r\n                    <el-input-number v-model=\"sd_reasonning.guidance_scale\"\r\n                                     placeholder=\"提示词引导系数\"></el-input-number>\r\n                  </el-col>\r\n                  <el-col class=\"line\" :span=\"3\">lora系数</el-col>\r\n                  <el-col :span=\"9\">\r\n                    <el-input-number :precision=\"2\" :step=\"0.01\" :max=\"1\" :min=\"0.01\" v-model=\"sd_reasonning.lora_alpha\"\r\n                                     placeholder=\"lora影响系数\"></el-input-number>\r\n                  </el-col>\r\n                </el-form-item>\r\n                <el-form-item label=\"IP-Adapter-FaceID\" prop=\"ip_adapter_faceid_model\">\r\n                  <el-select v-model=\"sd_reasonning.ip_adapter_faceid_model\">\r\n                    <el-option label=\"ip-adapter-faceid_sd15.bin\" value=\"ip-adapter-faceid_sd15.bin\"></el-option>\r\n                    <el-option label=\"ip-adapter-faceid-plusv2_sd15.bin\"\r\n                               value=\"ip-adapter-faceid-plusv2_sd15.bin\"></el-option>\r\n                  </el-select>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                  <el-button type=\"primary\" @click=\"onSubmit('form')\">提交</el-button>\r\n                </el-form-item>\r\n              </el-form>\r\n            </div>\r\n          </div>\r\n        </el-col>\r\n        <el-col :span=\"12\">\r\n          <div class=\"image-area\" v-loading=\"loading_img\">\r\n            <div v-if=\"generate_imgs.length==0\" style=\"line-height: 28px\">\r\n              <el-empty description=\"AIGC IP-Adapter-FaceID\"></el-empty>\r\n            </div>\r\n            <div style=\"text-align: center\" v-if=\"current_seed !==-1\">\r\n              图片种子:\r\n              <el-tag>{{ current_seed }}</el-tag>\r\n            </div>\r\n            <div v-if=\"generate_imgs.length>0\" class=\"image-container\" v-for=\"(image, index) in generate_imgs\"\r\n                 :key=\"index\">\r\n              <img\r\n                :src=\"image\"\r\n                class=\"gallery-image\"\r\n                @click=\"viewImage(image)\"\r\n              >\r\n              <div>\r\n                <el-button type=\"text\" size=\"mini\" @click=\"saveImg(image)\">保存图片</el-button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </el-col>\r\n        <image-viewer\r\n          :visible.sync=\"viewerVisible\"\r\n          ref=\"imageViewerRef\"\r\n        ></image-viewer>\r\n      </el-row>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport apis from \"../../../common/apis\"\r\nimport {closestMultipleOf8} from \"../../../common/common\"\r\nimport ImageViewer from '@/components/ImageViewer.vue';\r\nimport SdInfo from '@/components/SdInfo.vue';\r\n\r\n\r\nexport default {\r\n  components: {\r\n    ImageViewer,\r\n    SdInfo\r\n  },\r\n  data() {\r\n    return {\r\n      ipAdapterModels: [],\r\n      uploadUrl: \"http://127.0.0.1:5000/upload\",\r\n      fileList: [],\r\n      current_seed: -1,\r\n      loading_img: false,\r\n      viewerVisible: false,\r\n      generate_imgs: [],\r\n      sd_info: {\r\n        state: '待初始化'\r\n      },\r\n      sd_reasonning: {\r\n        input_img: '',\r\n        prompt: '',\r\n        negative_prompt: '',\r\n        seed: -1,\r\n        checkpoint: null,\r\n        lora_alpha: 0.7,\r\n        lora: null,\r\n        scheduler: 'Euler',\r\n        num_inference_steps: 30,\r\n        guidance_scale: 3.0,\r\n        img_num: 1,\r\n        img_height: 512,\r\n        img_width: 512,\r\n      },\r\n      rules: {\r\n        prompt: [\r\n          {required: true, message: '请输入正向提示词', trigger: 'blur'}\r\n        ],\r\n        input_img: [\r\n          {required: true, message: '请选择图片', trigger: 'blur'}\r\n        ],\r\n        ip_adapter_faceid_model: [\r\n          {required: true, message: '请选择IP-Adapter-FaceID模型', trigger: 'blur'}\r\n        ]\r\n      },\r\n    }\r\n  },\r\n  created() {\r\n    this.getSdInfo()\r\n    this.getUploadUrl()\r\n  },\r\n  methods: {\r\n    openFileSelect(val) {\r\n      apis.openFileSelector().then(res => {\r\n        if (res && res.length > 0) {\r\n          this.sd_reasonning[val] = res[0]\r\n        }\r\n      }).catch(e => {\r\n        this.$message.error(e)\r\n      })\r\n      return false\r\n    },\r\n    getSdInfo() {\r\n      apis.getSdInfo().then(res => {\r\n        this.sd_info = JSON.parse(res)\r\n        if (this.sd_info.state !== '已初始化') {\r\n          this.$message.error('检测到未初始化SD基础环境，请初始化后使用此功能')\r\n        } else if (this.sd_info.ip_adapter_faceid_state !== '已初始化') {\r\n          this.$message.error('检测到未初始化IP-Adapter-FaceID环境，请初始化后使用此功能');\r\n        }\r\n      }).catch(e => {\r\n        this.$message.error(e)\r\n      })\r\n    },\r\n    onSubmit(form) {\r\n      this.$refs[form].validate((valid) => {\r\n        if (valid) {\r\n          this.loading_img = true\r\n          this.$message.success(\"开始生成图片\")\r\n          apis.sdIpAdapterFaceid(this.sd_reasonning).then(res => {\r\n            this.loading_img = false\r\n            this.generate_imgs = res.images\r\n            this.current_seed = res.seed\r\n          }).catch(e => {\r\n            this.loading_img = false\r\n            this.$message.error(e)\r\n          })\r\n        }\r\n      })\r\n    },\r\n    saveImg(image) {\r\n      apis.saveImages(image).then(res => {\r\n        if (res === \"success\") {\r\n          this.$message.success(\"保存成功\")\r\n        }\r\n      }).catch(e => {\r\n        this.$message.error(e)\r\n      })\r\n    },\r\n    viewImage(image) {\r\n      this.$refs.imageViewerRef.loadImage(image);\r\n      this.viewerVisible = true\r\n    },\r\n    uploadSuccess(response, file, fileList) {\r\n      this.sd_reasonning.input_img = response.file_path\r\n      this.fileList = fileList\r\n    },\r\n    beforeUpload(file) {\r\n\r\n    },\r\n    fileRemove(file, fileList) {\r\n\r\n    },\r\n    exceed(files, fileList) {\r\n      this.$message.warning(\"一次只能处理一张图\")\r\n    },\r\n    getUploadUrl() {\r\n      const base_url = this.$store.state.sysInfo.base_url\r\n      if (base_url) {\r\n        this.uploadUrl = base_url + \"/upload\"\r\n      } else {\r\n        console.log(\"未从store找到base_url,将使用默认http://127.0.0.1:5000/upload\")\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.sd-info {\r\n  line-height: 30px;\r\n}\r\n\r\n.image-area {\r\n  overflow-y: auto;\r\n  scroll-behavior: smooth;\r\n  text-align: center;\r\n}\r\n\r\n.image-container {\r\n  margin: 15px;\r\n  text-align: center;\r\n  transition: transform 0.3s;\r\n\r\n}\r\n\r\n.gallery-image {\r\n  cursor: pointer;\r\n  object-fit: cover;\r\n  border-radius: 8px;\r\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\r\n  max-height: 300px;\r\n}\r\n\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sd-ip-adapter-faceid.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sd-ip-adapter-faceid.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./sd-ip-adapter-faceid.vue?vue&type=template&id=5dcd4b8a\"\nimport script from \"./sd-ip-adapter-faceid.vue?vue&type=script&lang=js\"\nexport * from \"./sd-ip-adapter-faceid.vue?vue&type=script&lang=js\"\nimport style0 from \"./sd-ip-adapter-faceid.vue?vue&type=style&index=0&id=5dcd4b8a&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sd-ip-adapter-faceid.vue?vue&type=style&index=0&id=5dcd4b8a&prod&lang=css\""],"sourceRoot":""}