{"version":3,"sources":["webpack:///./src/components/bussiness/deploy.vue","webpack:///src/components/bussiness/deploy.vue","webpack:///./src/components/bussiness/deploy.vue?2e71","webpack:///./src/components/bussiness/deploy.vue?1ba5"],"names":["render","_vm","this","_c","_self","attrs","_v","on","handleChange","model","value","activeNames","callback","$$v","expression","loading","ref","config","code","filePath","language","isFullscreen","onSave","onChange","_s","llamaServer","server_port","server_status","staticStyle","domProps","startOrStopServer","getLLamaServerInfo","staticRenderFns","name","components","CodeHighlight","data","deployType","deployTypeList","mounted","getLlamaCppConfig","methods","_this","startLoading","apis","startLLamaServer","then","res","endLoading","catch","e","$message","error","stopLLamaServer","_this2","val","console","log","_this3","saveLlamaCppConfig","success","_this4","file_path","conf","getOriginCode","codeHighlight","$refs","editedCode","getHtmlCode","formattedCode","component"],"mappings":"uHAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACA,EAAG,gBAAgB,CAACE,MAAM,CAAC,UAAY,MAAM,CAACF,EAAG,qBAAqB,CAACF,EAAIK,GAAG,UAAUH,EAAG,qBAAqB,CAACF,EAAIK,GAAG,WAAW,GAAGH,EAAG,UAAU,CAACA,EAAG,cAAc,CAACE,MAAM,CAAC,UAAY,IAAIE,GAAG,CAAC,OAASN,EAAIO,cAAcC,MAAM,CAACC,MAAOT,EAAIU,YAAaC,SAAS,SAAUC,GAAMZ,EAAIU,YAAYE,GAAKC,WAAW,gBAAgB,CAACX,EAAG,mBAAmB,CAACE,MAAM,CAAC,MAAQ,OAAO,KAAO,MAAM,CAACF,EAAG,UAAU,CAACE,MAAM,CAAC,KAAO,UAAU,KAAO,2DAA2D,OAAS,WAAW,CAACJ,EAAIK,GAAG,UAAWL,EAAIc,QAASZ,EAAG,MAAM,CAACF,EAAIK,GAAG,YAAYH,EAAG,gBAAgB,CAACa,IAAI,gBAAgBX,MAAM,CAAC,iBAAgB,EAAK,KAAOJ,EAAIgB,OAAOC,KAAK,YAAYjB,EAAIgB,OAAOE,SAAS,SAAWlB,EAAIgB,OAAOG,SAAS,YAAa,EAAK,UAAYnB,EAAIoB,aAAe,OAAS,SAASd,GAAG,CAAC,KAAON,EAAIqB,OAAO,OAASrB,EAAIsB,aAAa,GAAGpB,EAAG,mBAAmB,CAACE,MAAM,CAAC,MAAQ,OAAO,KAAO,MAAM,CAACF,EAAG,MAAM,CAACF,EAAIK,GAAG,UAAUH,EAAG,SAAS,CAACF,EAAIK,GAAGL,EAAIuB,GAAGvB,EAAIwB,YAAYC,gBAAgBzB,EAAIK,GAAG,WAAWH,EAAG,SAAS,CAACE,MAAM,CAAC,KAAyC,YAAlCJ,EAAIwB,YAAYE,cAA4B,UAAU,WAAW,CAAC1B,EAAIK,GAAGL,EAAIuB,GAAGvB,EAAIwB,YAAYE,eAAe,QAAQ,GAAGxB,EAAG,MAAM,CAACyB,YAAY,CAAC,OAAS,WAAW,CAACzB,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,UAAU,KAAO,QAAQwB,SAAS,CAAC,YAAc5B,EAAIuB,GAAsC,YAAnCvB,EAAIwB,YAAYE,cAA6B,OAAO,SAASpB,GAAG,CAAC,MAAQN,EAAI6B,qBAAqB3B,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,OAAO,KAAO,OAAO,KAAO,mBAAmBE,GAAG,CAAC,MAAQN,EAAI8B,qBAAqB,CAAC9B,EAAIK,GAAG,UAAU,MAAM,IAAI,IAAI,IAEhkD0B,EAAkB,G,oCCgDP,GACfC,KAAA,SACAC,WAAA,CACAC,sBAEAC,KAAA,WACA,OACAzB,YAAA,MACA0B,WAAA,YACAC,eAAA,cACAjB,cAAA,EACAN,SAAA,EACAU,YAAA,GACAR,OAAA,CACAC,KAAA,GACAE,SAAA,OACAD,SAAA,MAIAoB,QAAA,WACA,KAAAC,oBACA,KAAAT,sBAEAU,QAAA,CACAX,kBAAA,eAAAY,EAAA,KACA,oBAAAjB,YAAAE,cAAA,CACA,IAAAZ,EAAA4B,eAAA,UACAC,OAAAC,mBAAAC,MAAA,SAAAC,GACAC,eAAAjC,GACA2B,EAAAX,wBACAkB,OAAA,SAAAC,GACAR,EAAAS,SAAAC,MAAAF,UAEA,CACA,IAAAnC,EAAA4B,eAAA,UACAC,OAAAS,kBAAAP,MAAA,SAAAC,GACAC,eAAAjC,GACA2B,EAAAX,wBACAkB,OAAA,SAAAC,GACAR,EAAAS,SAAAC,MAAAF,QAIAnB,mBAAA,eAAAuB,EAAA,KACAV,OAAAb,qBAAAe,MAAA,SAAAC,GACAO,EAAA7B,YAAAsB,KACAE,OAAA,SAAAC,GACAI,EAAAH,SAAAC,MAAAF,OAGA1C,aAAA,SAAA+C,GACAC,QAAAC,IAAAF,IAEAjC,OAAA,SAAAJ,GAAA,IAAAwC,EAAA,KACAd,OAAAe,mBAAAzC,GAAA4B,MAAA,SAAAC,GACA,YAAAA,GACAW,EAAAP,SAAAS,QAAA,WAEAX,OAAA,SAAAC,GACAQ,EAAAP,SAAAC,MAAAF,OAGA3B,SAAA,SAAAL,KAGAsB,kBAAA,eAAAqB,EAAA,KACAjB,OAAAJ,oBAAAM,MAAA,SAAAC,GAEAc,EAAA5C,OAAAE,SAAA4B,EAAAe,UACAD,EAAA5C,OAAAC,KAAA6B,EAAAgB,KACAF,EAAA5C,OAAAG,SAAA,OACAyC,EAAA9C,SAAA,KACAkC,OAAA,SAAAC,GACAW,EAAAV,SAAAC,MAAAF,OAGAc,cAAA,WACA,IAAAC,EAAA,KAAAC,MAAAD,cACA,OAAAA,EAAAE,YAEAC,YAAA,WACA,IAAAH,EAAA,KAAAC,MAAAD,cACA,OAAAA,EAAAI,iBCrI8V,I,YCO1VC,EAAY,eACd,EACAtE,EACAgC,GACA,EACA,KACA,WACA,MAIa,aAAAsC,E","file":"js/chunk-2d2179f1.09558f46.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('el-breadcrumb',{attrs:{\"separator\":\"/\"}},[_c('el-breadcrumb-item',[_vm._v(\"AI推理\")]),_c('el-breadcrumb-item',[_vm._v(\"本地部署\")])],1),_c('el-card',[_c('el-collapse',{attrs:{\"accordion\":\"\"},on:{\"change\":_vm.handleChange},model:{value:(_vm.activeNames),callback:function ($$v) {_vm.activeNames=$$v},expression:\"activeNames\"}},[_c('el-collapse-item',{attrs:{\"title\":\"部署配置\",\"name\":\"1\"}},[_c('el-link',{attrs:{\"type\":\"primary\",\"href\":\"https://llama-cpp-python.readthedocs.io/en/latest/server\",\"target\":\"_blank\"}},[_vm._v(\"配置参考\")]),(_vm.loading)?_c('div',[_vm._v(\"加载中...\")]):_c('CodeHighlight',{ref:\"codeHighlight\",attrs:{\"show-edit-sys\":true,\"code\":_vm.config.code,\"file-path\":_vm.config.filePath,\"language\":_vm.config.language,\"showHeader\":true,\"maxHeight\":_vm.isFullscreen ? 'none' : '500px'},on:{\"save\":_vm.onSave,\"change\":_vm.onChange}})],1),_c('el-collapse-item',{attrs:{\"title\":\"执行部署\",\"name\":\"2\"}},[_c('div',[_vm._v(\"服务端口: \"),_c('el-tag',[_vm._v(_vm._s(_vm.llamaServer.server_port))]),_vm._v(\" 服务状态: \"),_c('el-tag',{attrs:{\"type\":_vm.llamaServer.server_status === 'running'?'success':'danger'}},[_vm._v(_vm._s(_vm.llamaServer.server_status)+\" \")])],1),_c('div',{staticStyle:{\"margin\":\"10px 0\"}},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},domProps:{\"textContent\":_vm._s(_vm.llamaServer.server_status  === 'running'?'停止服务':'启动服务')},on:{\"click\":_vm.startOrStopServer}}),_c('el-button',{attrs:{\"type\":\"info\",\"size\":\"mini\",\"icon\":\"el-icon-refresh\"},on:{\"click\":_vm.getLLamaServerInfo}},[_vm._v(\"刷新 \")])],1)])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <el-breadcrumb separator=\"/\">\r\n      <el-breadcrumb-item>AI推理</el-breadcrumb-item>\r\n      <el-breadcrumb-item>本地部署</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n    <el-card>\r\n      <el-collapse v-model=\"activeNames\" @change=\"handleChange\" accordion>\r\n        <el-collapse-item title=\"部署配置\" name=\"1\">\r\n          <el-link type=\"primary\" href=\"https://llama-cpp-python.readthedocs.io/en/latest/server\" target=\"_blank\">配置参考</el-link>\r\n          <div v-if=\"loading\">加载中...</div>\r\n          <CodeHighlight v-else\r\n                         :show-edit-sys=\"true\"\r\n                         @save=\"onSave\"\r\n                         @change=\"onChange\"\r\n                         ref=\"codeHighlight\"\r\n                         :code=\"config.code\"\r\n                         :file-path=\"config.filePath\"\r\n                         :language=\"config.language\"\r\n                         :showHeader=\"true\"\r\n                         :maxHeight=\"isFullscreen ? 'none' : '500px'\"\r\n          />\r\n        </el-collapse-item>\r\n        <el-collapse-item title=\"执行部署\" name=\"2\">\r\n          <div>服务端口:\r\n            <el-tag>{{ llamaServer.server_port }}</el-tag>\r\n            服务状态:\r\n            <el-tag :type=\"llamaServer.server_status === 'running'?'success':'danger'\">{{ llamaServer.server_status }}\r\n            </el-tag>\r\n          </div>\r\n          <div style=\"margin: 10px 0\">\r\n            <el-button type=\"primary\" size=\"mini\" @click=\"startOrStopServer\"\r\n                       v-text=\"llamaServer.server_status  === 'running'?'停止服务':'启动服务'\"></el-button>\r\n\r\n            <el-button type=\"info\" size=\"mini\" @click=\"getLLamaServerInfo\"\r\n                       icon=\"el-icon-refresh\">刷新\r\n            </el-button>\r\n          </div>\r\n        </el-collapse-item>\r\n      </el-collapse>\r\n\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport CodeHighlight from '../CodeHighlight.vue';\r\nimport apis from '../../common/apis';\r\nimport {endLoading, startLoading} from \"@/common/common\";\r\n\r\nexport default {\r\n  name: 'deploy',\r\n  components: {\r\n    CodeHighlight\r\n  },\r\n  data() {\r\n    return {\r\n      activeNames: ['1'],\r\n      deployType: 'llama.cpp',\r\n      deployTypeList: ['llama.cpp'],\r\n      isFullscreen: false,\r\n      loading: true,\r\n      llamaServer: {},\r\n      config: {\r\n        code: '',\r\n        language: 'json',\r\n          filePath: '',\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getLlamaCppConfig()\r\n    this.getLLamaServerInfo()\r\n  },\r\n  methods: {\r\n    startOrStopServer() {\r\n      if (this.llamaServer.server_status !== 'running') {\r\n        const loading = startLoading(\"启动中...\")\r\n        apis.startLLamaServer().then(res => {\r\n          endLoading(loading)\r\n          this.getLLamaServerInfo()\r\n        }).catch(e => {\r\n          this.$message.error(e)\r\n        })\r\n      } else {\r\n        const loading = startLoading(\"停止中...\")\r\n        apis.stopLLamaServer().then(res => {\r\n          endLoading(loading)\r\n          this.getLLamaServerInfo()\r\n        }).catch(e => {\r\n          this.$message.error(e)\r\n        })\r\n      }\r\n    },\r\n    getLLamaServerInfo() {\r\n      apis.getLLamaServerInfo().then(res => {\r\n        this.llamaServer = res\r\n      }).catch(e => {\r\n        this.$message.error(e)\r\n      })\r\n    },\r\n    handleChange(val) {\r\n      console.log(val)\r\n    },\r\n    onSave(code) {\r\n      apis.saveLlamaCppConfig(code).then(res => {\r\n        if (res === 'success') {\r\n          this.$message.success('修改成功')\r\n        }\r\n      }).catch(e => {\r\n        this.$message.error(e)\r\n      })\r\n    },\r\n    onChange(code) {\r\n      // console.log(code)\r\n    },\r\n    getLlamaCppConfig() {\r\n      apis.getLlamaCppConfig().then(res => {\r\n        // alert(typeof res)\r\n        this.config.filePath = res.file_path\r\n        this.config.code = res.conf\r\n        this.config.language = \"json\"\r\n        this.loading = false\r\n      }).catch(e => {\r\n        this.$message.error(e)\r\n      })\r\n    },\r\n    getOriginCode() {\r\n      const codeHighlight = this.$refs.codeHighlight\r\n      return codeHighlight.editedCode\r\n    },\r\n    getHtmlCode() {\r\n      const codeHighlight = this.$refs.codeHighlight\r\n      return codeHighlight.formattedCode\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./deploy.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./deploy.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./deploy.vue?vue&type=template&id=b40a0bc8&scoped=true\"\nimport script from \"./deploy.vue?vue&type=script&lang=js\"\nexport * from \"./deploy.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b40a0bc8\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}