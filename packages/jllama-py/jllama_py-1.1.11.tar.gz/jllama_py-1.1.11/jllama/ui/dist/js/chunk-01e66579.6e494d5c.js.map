{"version":3,"sources":["webpack:///./src/components/bussiness/aigc/sd-text-pic.vue?be16","webpack:///./src/components/bussiness/aigc/sd-text-pic.vue","webpack:///src/components/bussiness/aigc/sd-text-pic.vue","webpack:///./src/components/bussiness/aigc/sd-text-pic.vue?823e","webpack:///./src/components/bussiness/aigc/sd-text-pic.vue?7699"],"names":["render","_vm","this","_c","_self","attrs","_v","sd_info","on","getSdInfo","state","ref","sd_reasonning","rules","model","value","prompt","callback","$$v","$set","expression","negative_prompt","$event","openFileSelect","checkpoint","lora","staticClass","seed","scheduler","num_inference_steps","img_num","img_width","img_height","guidance_scale","lora_alpha","onSubmit","_e","directives","name","rawName","loading_img","generate_imgs","length","staticStyle","current_seed","_s","_l","image","index","key","viewImage","saveImg","viewerVisible","staticRenderFns","components","ImageViewer","SdInfo","data","required","message","trigger","created","methods","val","_this","apis","openFileSelector","then","res","catch","e","$message","error","_this2","JSON","parse","form","_this3","$refs","validate","valid","success","sdGeneratePic","images","_this4","saveImages","imageViewerRef","loadImage","component"],"mappings":"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","file":"js/chunk-01e66579.6e494d5c.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sd-text-pic.vue?vue&type=style&index=0&id=7a15b6ae&prod&lang=css\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('el-breadcrumb',{attrs:{\"separator\":\"/\"}},[_c('el-breadcrumb-item',[_vm._v(\"AIGC专区\")]),_c('el-breadcrumb-item',[_vm._v(\"StableDiffusion文生图\")])],1),_c('el-card',[_c('el-row',[_c('el-col',{attrs:{\"span\":12}},[_c('div',[_c('SdInfo',{attrs:{\"sd_info\":_vm.sd_info},on:{\"getSdInfo\":_vm.getSdInfo}}),(_vm.sd_info.state ==='已初始化')?_c('div',[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.sd_reasonning,\"rules\":_vm.rules}},[_c('el-form-item',{attrs:{\"label\":\"正向提示词\",\"prop\":\"prompt\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"placeholder\":\"用来引导SD模型生成图片的自然语言。建议使用单词+,拼接的方式。例：1girl,long hair,stand,dress\"},model:{value:(_vm.sd_reasonning.prompt),callback:function ($$v) {_vm.$set(_vm.sd_reasonning, \"prompt\", $$v)},expression:\"sd_reasonning.prompt\"}})],1),_c('el-form-item',{attrs:{\"label\":\"反向提示词\",\"prop\":\"negative_prompt\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"placeholder\":\"用于引导SD模型不要在生成图片时使用的风格\"},model:{value:(_vm.sd_reasonning.negative_prompt),callback:function ($$v) {_vm.$set(_vm.sd_reasonning, \"negative_prompt\", $$v)},expression:\"sd_reasonning.negative_prompt\"}})],1),_c('el-form-item',{attrs:{\"label\":\"checkpoint\"}},[_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"info\"},on:{\"click\":function($event){return _vm.openFileSelect('checkpoint')}}},[_vm._v(\"选择文件\")]),_c('el-input',{attrs:{\"placeholder\":\"第三方checkpoint(全路径)\"},model:{value:(_vm.sd_reasonning.checkpoint),callback:function ($$v) {_vm.$set(_vm.sd_reasonning, \"checkpoint\", $$v)},expression:\"sd_reasonning.checkpoint\"}})],1),_c('el-form-item',{attrs:{\"label\":\"lora\"}},[_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"info\"},on:{\"click\":function($event){return _vm.openFileSelect('lora')}}},[_vm._v(\"选择文件\")]),_c('el-input',{attrs:{\"placeholder\":\"第三方lora(全路径)\"},model:{value:(_vm.sd_reasonning.lora),callback:function ($$v) {_vm.$set(_vm.sd_reasonning, \"lora\", $$v)},expression:\"sd_reasonning.lora\"}})],1),_c('el-form-item',[_c('el-col',{staticClass:\"line\",attrs:{\"span\":3}},[_vm._v(\"种子\")]),_c('el-col',{attrs:{\"span\":9}},[_c('el-input-number',{model:{value:(_vm.sd_reasonning.seed),callback:function ($$v) {_vm.$set(_vm.sd_reasonning, \"seed\", $$v)},expression:\"sd_reasonning.seed\"}})],1),_c('el-col',{staticClass:\"line\",attrs:{\"span\":3}},[_vm._v(\"采样方式\")]),_c('el-col',{attrs:{\"span\":9}},[_c('el-select',{model:{value:(_vm.sd_reasonning.scheduler),callback:function ($$v) {_vm.$set(_vm.sd_reasonning, \"scheduler\", $$v)},expression:\"sd_reasonning.scheduler\"}},[_c('el-option',{attrs:{\"value\":\"Euler\"}},[_vm._v(\"Euler\")]),_c('el-option',{attrs:{\"value\":\"DPM\"}},[_vm._v(\"DPM\")]),_c('el-option',{attrs:{\"value\":\"LMS\"}},[_vm._v(\"LMS\")]),_c('el-option',{attrs:{\"value\":\"PNDM\"}},[_vm._v(\"PNDM\")]),_c('el-option',{attrs:{\"value\":\"DDIM\"}},[_vm._v(\"DDIM\")])],1)],1)],1),_c('el-form-item',{attrs:{\"label\":\"\",\"prop\":\"num_inference_steps\"}},[_c('el-col',{staticClass:\"line\",attrs:{\"span\":3}},[_vm._v(\"采样步数\")]),_c('el-col',{attrs:{\"span\":9}},[_c('el-input-number',{model:{value:(_vm.sd_reasonning.num_inference_steps),callback:function ($$v) {_vm.$set(_vm.sd_reasonning, \"num_inference_steps\", $$v)},expression:\"sd_reasonning.num_inference_steps\"}})],1),_c('el-col',{staticClass:\"line\",attrs:{\"span\":3}},[_vm._v(\"图片张数\")]),_c('el-col',{attrs:{\"span\":9}},[_c('el-input-number',{model:{value:(_vm.sd_reasonning.img_num),callback:function ($$v) {_vm.$set(_vm.sd_reasonning, \"img_num\", $$v)},expression:\"sd_reasonning.img_num\"}})],1)],1),_c('el-form-item',{attrs:{\"label\":\"\",\"prop\":\"img_height\"}},[_c('el-col',{staticClass:\"line\",attrs:{\"span\":3}},[_vm._v(\"图片宽度\")]),_c('el-col',{attrs:{\"span\":9}},[_c('el-input-number',{model:{value:(_vm.sd_reasonning.img_width),callback:function ($$v) {_vm.$set(_vm.sd_reasonning, \"img_width\", $$v)},expression:\"sd_reasonning.img_width\"}})],1),_c('el-col',{staticClass:\"line\",attrs:{\"span\":3}},[_vm._v(\"图片高度\")]),_c('el-col',{attrs:{\"span\":9}},[_c('el-input-number',{model:{value:(_vm.sd_reasonning.img_height),callback:function ($$v) {_vm.$set(_vm.sd_reasonning, \"img_height\", $$v)},expression:\"sd_reasonning.img_height\"}})],1)],1),_c('el-form-item',[_c('el-col',{staticClass:\"line\",attrs:{\"span\":3}},[_vm._v(\"引导系数\")]),_c('el-col',{attrs:{\"span\":9}},[_c('el-input-number',{attrs:{\"placeholder\":\"提示词引导系数\"},model:{value:(_vm.sd_reasonning.guidance_scale),callback:function ($$v) {_vm.$set(_vm.sd_reasonning, \"guidance_scale\", $$v)},expression:\"sd_reasonning.guidance_scale\"}})],1),_c('el-col',{staticClass:\"line\",attrs:{\"span\":3}},[_vm._v(\"lora系数\")]),_c('el-col',{attrs:{\"span\":9}},[_c('el-input-number',{attrs:{\"precision\":2,\"step\":0.01,\"max\":1,\"placeholder\":\"lora影响系数\"},model:{value:(_vm.sd_reasonning.lora_alpha),callback:function ($$v) {_vm.$set(_vm.sd_reasonning, \"lora_alpha\", $$v)},expression:\"sd_reasonning.lora_alpha\"}})],1)],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.onSubmit('form')}}},[_vm._v(\"提交\")])],1)],1)],1):_vm._e()],1)]),_c('el-col',{attrs:{\"span\":12}},[_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading_img),expression:\"loading_img\"}],staticClass:\"image-area\"},[(_vm.generate_imgs.length==0)?_c('div',{staticStyle:{\"line-height\":\"28px\"}},[_c('el-empty',{attrs:{\"description\":\"AIGC文生图\"}})],1):_vm._e(),(_vm.current_seed !==-1)?_c('div',{staticStyle:{\"text-align\":\"center\"}},[_vm._v(\" 图片种子: \"),_c('el-tag',[_vm._v(_vm._s(_vm.current_seed))])],1):_vm._e(),_vm._l((_vm.generate_imgs),function(image,index){return (_vm.generate_imgs.length>0)?_c('div',{key:index,staticClass:\"image-container\"},[_c('img',{staticClass:\"gallery-image\",attrs:{\"src\":image},on:{\"click\":function($event){return _vm.viewImage(image)}}}),_c('div',[_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.saveImg(image)}}},[_vm._v(\"保存图片\")])],1)]):_vm._e()})],2)]),_c('image-viewer',{ref:\"imageViewerRef\",attrs:{\"visible\":_vm.viewerVisible},on:{\"update:visible\":function($event){_vm.viewerVisible=$event}}})],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <el-breadcrumb separator=\"/\">\r\n      <el-breadcrumb-item>AIGC专区</el-breadcrumb-item>\r\n      <el-breadcrumb-item>StableDiffusion文生图</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n\r\n    <el-card>\r\n      <el-row>\r\n        <el-col :span=\"12\">\r\n          <div>\r\n            <SdInfo :sd_info=\"sd_info\" @getSdInfo=\"getSdInfo\"></SdInfo>\r\n            <div v-if=\"sd_info.state ==='已初始化'\">\r\n              <el-form :model=\"sd_reasonning\" ref=\"form\" :rules=\"rules\">\r\n                <el-form-item label=\"正向提示词\" prop=\"prompt\">\r\n                  <el-input type=\"textarea\" v-model=\"sd_reasonning.prompt\"\r\n                            placeholder=\"用来引导SD模型生成图片的自然语言。建议使用单词+,拼接的方式。例：1girl,long hair,stand,dress\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"反向提示词\" prop=\"negative_prompt\">\r\n                  <el-input type=\"textarea\" v-model=\"sd_reasonning.negative_prompt\"\r\n                            placeholder=\"用于引导SD模型不要在生成图片时使用的风格\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"checkpoint\">\r\n                  <el-button size=\"mini\" type=\"info\" @click=\"openFileSelect('checkpoint')\">选择文件</el-button>\r\n                  <el-input v-model=\"sd_reasonning.checkpoint\" placeholder=\"第三方checkpoint(全路径)\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"lora\">\r\n                  <el-button size=\"mini\" type=\"info\" @click=\"openFileSelect('lora')\">选择文件</el-button>\r\n                  <el-input v-model=\"sd_reasonning.lora\" placeholder=\"第三方lora(全路径)\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                  <el-col class=\"line\" :span=\"3\">种子</el-col>\r\n                  <el-col :span=\"9\">\r\n                    <el-input-number v-model=\"sd_reasonning.seed\"></el-input-number>\r\n                  </el-col>\r\n                  <el-col class=\"line\" :span=\"3\">采样方式</el-col>\r\n                  <el-col :span=\"9\">\r\n                    <el-select v-model=\"sd_reasonning.scheduler\">\r\n                      <el-option value=\"Euler\">Euler</el-option>\r\n                      <el-option value=\"DPM\">DPM</el-option>\r\n                      <el-option value=\"LMS\">LMS</el-option>\r\n                      <el-option value=\"PNDM\">PNDM</el-option>\r\n                      <el-option value=\"DDIM\">DDIM</el-option>\r\n                    </el-select>\r\n                  </el-col>\r\n                </el-form-item>\r\n\r\n                <el-form-item label=\"\" prop=\"num_inference_steps\">\r\n                  <el-col class=\"line\" :span=\"3\">采样步数</el-col>\r\n                  <el-col :span=\"9\">\r\n                    <el-input-number v-model=\"sd_reasonning.num_inference_steps\"></el-input-number>\r\n                  </el-col>\r\n                  <el-col class=\"line\" :span=\"3\">图片张数</el-col>\r\n                  <el-col :span=\"9\">\r\n                    <el-input-number v-model=\"sd_reasonning.img_num\"></el-input-number>\r\n                  </el-col>\r\n                </el-form-item>\r\n\r\n                <el-form-item label=\"\" prop=\"img_height\">\r\n                  <el-col class=\"line\" :span=\"3\">图片宽度</el-col>\r\n                  <el-col :span=\"9\">\r\n                    <el-input-number v-model=\"sd_reasonning.img_width\"></el-input-number>\r\n                  </el-col>\r\n                  <el-col class=\"line\" :span=\"3\">图片高度</el-col>\r\n                  <el-col :span=\"9\">\r\n                    <el-input-number v-model=\"sd_reasonning.img_height\"></el-input-number>\r\n                  </el-col>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                  <el-col class=\"line\" :span=\"3\">引导系数</el-col>\r\n                  <el-col :span=\"9\">\r\n                    <el-input-number v-model=\"sd_reasonning.guidance_scale\"\r\n                                     placeholder=\"提示词引导系数\"></el-input-number>\r\n                  </el-col>\r\n                  <el-col class=\"line\" :span=\"3\">lora系数</el-col>\r\n                  <el-col :span=\"9\">\r\n                    <el-input-number :precision=\"2\" :step=\"0.01\" :max=\"1\" v-model=\"sd_reasonning.lora_alpha\"\r\n                                     placeholder=\"lora影响系数\"></el-input-number>\r\n                  </el-col>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                  <el-button type=\"primary\" @click=\"onSubmit('form')\">提交</el-button>\r\n                </el-form-item>\r\n              </el-form>\r\n            </div>\r\n          </div>\r\n        </el-col>\r\n        <el-col :span=\"12\">\r\n          <div class=\"image-area\" v-loading=\"loading_img\">\r\n            <div v-if=\"generate_imgs.length==0\" style=\"line-height: 28px\">\r\n              <el-empty description=\"AIGC文生图\"></el-empty>\r\n            </div>\r\n            <div style=\"text-align: center\" v-if=\"current_seed !==-1\">\r\n              图片种子:\r\n              <el-tag>{{ current_seed }}</el-tag>\r\n            </div>\r\n            <div v-if=\"generate_imgs.length>0\" class=\"image-container\" v-for=\"(image, index) in generate_imgs\"\r\n                 :key=\"index\">\r\n              <img\r\n                :src=\"image\"\r\n                class=\"gallery-image\"\r\n                @click=\"viewImage(image)\"\r\n              >\r\n              <div>\r\n                <el-button type=\"text\" size=\"mini\" @click=\"saveImg(image)\">保存图片</el-button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </el-col>\r\n        <image-viewer\r\n          :visible.sync=\"viewerVisible\"\r\n          ref=\"imageViewerRef\"\r\n        ></image-viewer>\r\n      </el-row>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport apis from \"../../../common/apis\"\r\nimport {endLoading, startLoading} from \"../../../common/common\"\r\nimport ImageViewer from '@/components/ImageViewer.vue';\r\nimport SdInfo from '@/components/SdInfo.vue';\r\n\r\n\r\nexport default {\r\n  components: {\r\n    ImageViewer,\r\n    SdInfo\r\n  },\r\n  data() {\r\n    return {\r\n      current_seed: -1,\r\n      loading_img: false,\r\n      viewerVisible: false,\r\n      generate_imgs: [],\r\n      sd_info: {\r\n        state: '待初始化'\r\n      },\r\n      sd_reasonning: {\r\n        prompt: '',\r\n        negative_prompt: '',\r\n        seed: -1,\r\n        checkpoint: null,\r\n        lora_alpha: 0.7,\r\n        lora: null,\r\n        scheduler: 'Euler',\r\n        num_inference_steps: 30,\r\n        guidance_scale: 3.0,\r\n        img_num: 2,\r\n        img_height: 512,\r\n        img_width: 512\r\n      },\r\n      rules: {\r\n        prompt: [\r\n          {required: true, message: '请输入正向提示词', trigger: 'blur'}\r\n        ]\r\n\r\n      },\r\n    }\r\n  },\r\n  created() {\r\n    this.getSdInfo()\r\n  },\r\n  methods: {\r\n    openFileSelect(val) {\r\n      apis.openFileSelector().then(res => {\r\n        if (res && res.length > 0) {\r\n          this.sd_reasonning[val] = res[0]\r\n        }\r\n      }).catch(e => {\r\n        this.$message.error(e)\r\n      })\r\n      return false\r\n    },\r\n    getSdInfo() {\r\n      apis.getSdInfo().then(res => {\r\n        this.sd_info = JSON.parse(res)\r\n        if (this.sd_info.state !== '已初始化') {\r\n          this.$message.error('检测到未初始化SD基础环境，请初始化后使用此功能')\r\n        }\r\n      }).catch(e => {\r\n        this.$message.error(e)\r\n      })\r\n    },\r\n    onSubmit(form) {\r\n      this.$refs[form].validate((valid) => {\r\n        if (valid) {\r\n          if (this.sd_reasonning.img_width % 8 !== 0) {\r\n            this.$message.error(\"图片宽度必须为8的倍数\")\r\n            return false\r\n          }\r\n          if (this.sd_reasonning.img_height % 8 !== 0) {\r\n            this.$message.error(\"图片高度必须为8的倍数\")\r\n            return false\r\n          }\r\n          this.loading_img = true\r\n          this.$message.success(\"开始生成图片\")\r\n          apis.sdGeneratePic(this.sd_reasonning).then(res => {\r\n            this.loading_img = false\r\n            this.generate_imgs = res.images\r\n            this.current_seed = res.seed\r\n          }).catch(e => {\r\n            this.loading_img = false\r\n            this.$message.error(e)\r\n          })\r\n        }\r\n      })\r\n    },\r\n    saveImg(image) {\r\n      apis.saveImages(image).then(res => {\r\n        if (res === \"success\") {\r\n          this.$message.success(\"保存成功\")\r\n        }\r\n      }).catch(e => {\r\n        this.$message.error(e)\r\n      })\r\n    },\r\n    viewImage(image) {\r\n      this.$refs.imageViewerRef.loadImage(image);\r\n      this.viewerVisible = true\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.sd-info {\r\n  line-height: 30px;\r\n}\r\n\r\n.image-area {\r\n  overflow-y: auto;\r\n  scroll-behavior: smooth;\r\n  text-align: center;\r\n}\r\n\r\n.image-container {\r\n  margin: 15px;\r\n  text-align: center;\r\n  transition: transform 0.3s;\r\n\r\n}\r\n\r\n.gallery-image {\r\n  cursor: pointer;\r\n  object-fit: cover;\r\n  border-radius: 8px;\r\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\r\n  max-height: 300px;\r\n}\r\n\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sd-text-pic.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sd-text-pic.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./sd-text-pic.vue?vue&type=template&id=7a15b6ae\"\nimport script from \"./sd-text-pic.vue?vue&type=script&lang=js\"\nexport * from \"./sd-text-pic.vue?vue&type=script&lang=js\"\nimport style0 from \"./sd-text-pic.vue?vue&type=style&index=0&id=7a15b6ae&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}