(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1bcc5d52"],{"164e":function(e,t,i){"use strict";i("ff7c")},4989:function(e,t,i){"use strict";var n=i("c7eb"),a=i("1da1"),r=(i("0fb7"),i("450d"),i("f529")),o=i.n(r);i("d3b7"),i("ff51");t["a"]={showTips:function(){window.pywebview.api.show_tips().then((function(e){o.a.info(e)}))},getNav:function(){return window.pywebview.api.get_nav()},getSysInfo:function(){return window.pywebview.api.get_sys_info()},initEnv:function(){return window.pywebview.api.init_env()},modelList:function(e,t,i){return window.pywebview.api.model_list({page:e,limit:t,search:i})},createModel:function(e){return window.pywebview.api.create_model(e)},searchModelFile:function(e){return window.pywebview.api.search_model_file(e)},openFileSelector:function(){return window.pywebview.api.open_file_select()},createDownload:function(e){return window.pywebview.api.create_download(e)},createBatchDownload:function(e){return window.pywebview.api.create_batch_download(e)},getDownloadFiles:function(e){return window.pywebview.api.get_download_files(e)},delFile:function(e){return window.pywebview.api.delete_file_download(e)},delModel:function(e){return window.pywebview.api.delete_model(e)},importFile:function(e){return window.pywebview.api.import_file(e)},fileList:function(e){return window.pywebview.api.file_list(e)},getModel:function(e){return window.pywebview.api.get_model(e)},runModel:function(e){return window.pywebview.api.run_model(e)},listRunningModel:function(e){return window.pywebview.api.list_running_model(e)},stopRunningModel:function(e){return window.pywebview.api.stop_running_model(e)},listRunningModeHistory:function(e){return window.pywebview.api.list_running_model_history(e)},delRunningModel:function(e){return window.pywebview.api.del_running_model(e)},showTk:function(){return window.pywebview.api.show_tk()},splitMergeGguf:function(e){return window.pywebview.api.split_merge_gguf(e)},listSplitMerge:function(e){return window.pywebview.api.list_split_merge(e)},listQuantize:function(e){return window.pywebview.api.list_quantize(e)},listQuantizeParams:function(){return window.pywebview.api.list_quantize_params()},quantize:function(e){return window.pywebview.api.quantize(e)},convertHfToGguf:function(e){return window.pywebview.api.convert_hf_to_gguf(e)},listConvertModel:function(e){return window.pywebview.api.list_covert_model(e)},getSetting:function(){return window.pywebview.api.get_setting()},saveSetting:function(e){return window.pywebview.api.save_setting(e)},getLlamaCppConfig:function(){return window.pywebview.api.get_llama_cpp_config()},saveLlamaCppConfig:function(e){return window.pywebview.api.save_llama_cpp_config(e)},getLLamaServerInfo:function(){return window.pywebview.api.get_llama_server_info()},startLLamaServer:function(){return window.pywebview.api.start_llama_server()},stopLLamaServer:function(){return window.pywebview.api.stop_llama_server()},openFileInSysEdit:function(e){return window.pywebview.api.open_file_in_sys_edit(e)},train:function(e){return Object(a["a"])(Object(n["a"])().mark((function t(){return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,i){window.pywebview.api.train(e).then((function(e){t(e)})).catch((function(e){i(e)}))})));case 1:case"end":return t.stop()}}),t)})))()},getTrainList:function(e,t){return window.pywebview.api.get_train_list(e,t)},deleteTrainRecord:function(e){return window.pywebview.api.delete_train_record(e)},generateTrainCode:function(e){return window.pywebview.api.generate_train_code(e)},checkSshConnection:function(e,t,i,n){return window.pywebview.api.check_ssh_connection(e,t,i,n)},remoteTrain:function(e){return Object(a["a"])(Object(n["a"])().mark((function t(){return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,i){window.pywebview.api.remote_train(e).then((function(e){t(e)})).catch((function(e){i(e)}))})));case 1:case"end":return t.stop()}}),t)})))()},getLlamaFactoryInfo:function(){return window.pywebview.api.get_llamafactory_info()},installLlamaFactory:function(){return window.pywebview.api.install_llamafactory()},installLlamafactoryManual:function(){return window.pywebview.api.install_llamafactory_manual()},reloadInstallState:function(){return window.pywebview.api.reload_install_state()},isTraining:function(){return window.pywebview.api.is_training()},stopTrain:function(){return window.pywebview.api.stop_train()},getAiChatUrl:function(){return window.pywebview.api.get_ai_chat_url()},startLlamafactory:function(){return window.pywebview.api.start_lf_webui()},stopLlamafactory:function(){return window.pywebview.api.stop_lf_webui()},isLlamafactoryRunning:function(){return window.pywebview.api.is_lf_running()},getRecentServerInfo:function(){return window.pywebview.api.get_recent_server_info()},getSdInfo:function(){return window.pywebview.api.get_sd_info()},initSd:function(){return window.pywebview.api.init_sd()},sdGeneratePic:function(e){return window.pywebview.api.sd_generate_pic(e)},saveImages:function(e){return window.pywebview.api.save_image(e)},sdPicToPic:function(e){return window.pywebview.api.sd_pic_to_pic(e)},initIpAdapter:function(){return window.pywebview.api.init_ip_adapter()},initIpAdapterFaceid:function(){return window.pywebview.api.init_ip_adapter_faceid()},getIpAdapterModels:function(){return window.pywebview.api.get_ip_adapter_models()},sdIpAdapterFaceid:function(e){return window.pywebview.api.sd_ip_adapter_faceid(e)}}},a860:function(e,t,i){"use strict";i.r(t);i("b0c0");var n=function(){var e=this,t=e._self._c;return t("div",[t("el-breadcrumb",{attrs:{separator:"/"}},[t("el-breadcrumb-item",[e._v("工具箱")]),t("el-breadcrumb-item",[e._v("模型量化")])],1),t("el-row",[t("el-col",{staticClass:"card-box",attrs:{span:12}},[t("el-card",{staticClass:"card"},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[t("i",{staticClass:"el-icon-edit"}),e._v(" 量化")])]),t("el-form",{directives:[{name:"show",rawName:"v-show",value:1===e.step,expression:"step === 1"}],ref:"form1",attrs:{rules:e.rules1,model:e.form1,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"模型",prop:"model"}},[t("el-select",{attrs:{placeholder:"请选择"},on:{change:e.modelChange},model:{value:e.form1.model,callback:function(t){e.$set(e.form1,"model",t)},expression:"form1.model"}},e._l(e.modelList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"文件名",prop:"file"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form1.file,callback:function(t){e.$set(e.form1,"file",t)},expression:"form1.file"}},e._l(e.fileList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.file_name,value:e.file_path}})})),1)],1)],1),t("el-form",{directives:[{name:"show",rawName:"v-show",value:2===e.step,expression:"step === 2"}],ref:"form2",attrs:{rules:e.rules2,model:e.form2,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"量化精度",prop:"quantizeParam"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form2.quantizeParam,callback:function(t){e.$set(e.form2,"quantizeParam",t)},expression:"form2.quantizeParam"}},e._l(e.supportedQuantizeList,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1),t("el-form",{directives:[{name:"show",rawName:"v-show",value:3===e.step,expression:"step === 3"}],ref:"form3",attrs:{rules:e.rules3,model:e.form3,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"输出路径",prop:"output"}},[t("el-input",{attrs:{type:"text",placeholder:"输出gguf文件的位置"},model:{value:e.form3.output,callback:function(t){e.$set(e.form3,"output",t)},expression:"form3.output"}})],1),t("el-form-item",{attrs:{label:"异步执行"}},[t("el-switch",{model:{value:e.form3.async,callback:function(t){e.$set(e.form3,"async",t)},expression:"form3.async"}}),t("i",{staticStyle:{color:"#909399"}},[e._v(" 默认同步执行，开启则会在后台执行，不会阻塞页面")])],1)],1),t("div",{staticClass:"stepButton"},[t("el-button",{attrs:{type:"info",size:"small",disabled:1===e.step},on:{click:function(t){return e.back()}}},[e._v("上一步")]),t("el-button",{directives:[{name:"show",rawName:"v-show",value:1===e.step,expression:"step === 1"}],attrs:{type:"primary",size:"small"},on:{click:function(t){return e.next("form1")}}},[e._v("下一步 ")]),t("el-button",{directives:[{name:"show",rawName:"v-show",value:2===e.step,expression:"step === 2"}],attrs:{type:"primary",size:"small"},on:{click:function(t){return e.next("form2")}}},[e._v("下一步 ")]),t("el-button",{directives:[{name:"show",rawName:"v-show",value:e.step>=3,expression:"step >= 3"}],attrs:{type:"primary",size:"small"},on:{click:function(t){return e.submit("form3")}}},[e._v("提交 ")])],1),t("el-steps",{attrs:{active:e.step}},[t("el-step",{attrs:{title:"选择模型",description:"选择需要量化的模型文件"}}),t("el-step",{attrs:{title:"设置量化参数",description:"设置量化的参数"}}),t("el-step",{attrs:{title:"指定输出目录",description:"量化模型的保存目录"}})],1)],1)],1),t("el-col",{staticClass:"card-box",attrs:{span:12}},[t("el-card",{staticClass:"card"},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[t("i",{staticClass:"el-icon-edit"}),e._v(" 操作历史")])]),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[t("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[t("el-form-item",{attrs:{label:"输入文件"}},[t("span",[e._v(e._s(i.row.input))])]),t("el-form-item",{attrs:{label:"输出文件"}},[t("span",[e._v(e._s(i.row.output))])])],1)]}}])}),t("el-table-column",{attrs:{label:"执行时间",prop:"create_time"}}),t("el-table-column",{attrs:{label:"量化精度",prop:"param"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-tag",{attrs:{type:"primary","disable-transitions":""}},[e._v(e._s(i.row.param)+" ")])]}}])})],1),t("div",{staticClass:"block"},[t("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)],1)],1)},a=[],r=(i("b64b"),i("4989")),o=i("ff51"),s={name:"quantization",data:function(){return{total:0,pageSize:5,pageSizes:[5,10,20],currentPage:1,tableData:[],step:1,form1:{model:"",file:""},modelList:[],fileList:[],rules1:{model:[{required:!0,message:"请输入模型名称",trigger:"blur"}],file:[{required:!0,message:"请输入文件名称",trigger:"blur"}]},supportedQuantizeList:[],form2:{quantizeParam:""},rules2:{quantizeParam:[{required:!0,message:"请输入量化精度",trigger:"blur"}]},form3:{output:"",async:!0},rules3:{output:[{required:!0,message:"请输入GGUF文件输出全路径",trigger:"blur"}]}}},created:function(){this.getModelList(),this.getSupportedQuantize(),this.getTableData()},methods:{getSupportedQuantize:function(){var e=this;r["a"].listQuantizeParams().then((function(t){e.supportedQuantizeList=t})).catch((function(t){e.$message.error(t)}))},back:function(){this.step--},getModelList:function(){var e=this;r["a"].modelList(1,9999).then((function(t){e.modelList=JSON.parse(t).record})).catch((function(t){e.$message.error(t)}))},modelChange:function(e){this.getFileList(e)},getFileList:function(e){var t=this;r["a"].fileList({modelId:e,ggufOnly:!0}).then((function(e){t.fileList=JSON.parse(e)})).catch((function(e){t.$message.error(e)}))},next:function(e){var t=this;this.$refs[e].validate((function(e){e&&t.step++}))},submit:function(e){var t=this;this.$refs[e].validate((function(e){e&&t.step++;var i={input:t.form1.file,qType:t.form2.quantizeParam,output:t.form3.output,async:t.form3.async};if(t.step>=3){var n=Object(o["e"])("量化中");r["a"].quantize(i).then((function(e){Object(o["b"])(n),console.log(e)})).catch((function(e){Object(o["b"])(n),t.$message.error(e)}))}}))},handleSizeChange:function(e){this.pageSize=e,this.getTableData()},handleCurrentChange:function(e){this.currentPage=e,this.getTableData()},getTableData:function(){var e=this;r["a"].listQuantize({page:this.currentPage,limit:this.pageSize}).then((function(t){var i=JSON.parse(t);e.tableData=i.record,e.total=i.total})).catch((function(t){e.$message.error(t)}))}}},l=s,u=(i("164e"),i("2877")),p=Object(u["a"])(l,n,a,!1,null,null,null);t["default"]=p.exports},b64b:function(e,t,i){"use strict";var n=i("23e7"),a=i("7b0b"),r=i("df75"),o=i("d039"),s=o((function(){r(1)}));n({target:"Object",stat:!0,forced:s},{keys:function(e){return r(a(e))}})},ff7c:function(e,t,i){}}]);
//# sourceMappingURL=chunk-1bcc5d52.a16d1afc.js.map