{"version":3,"sources":["webpack:///./src/common/apis.js","webpack:///./node_modules/core-js/modules/es.string.trim.js","webpack:///./node_modules/core-js/internals/whitespaces.js","webpack:///./node_modules/core-js/internals/string-trim.js","webpack:///./src/components/bussiness/ai-chat.vue","webpack:///src/components/bussiness/ai-chat.vue","webpack:///./src/components/bussiness/ai-chat.vue?999a","webpack:///./src/components/bussiness/ai-chat.vue?d36a","webpack:///./node_modules/core-js/modules/es.object.keys.js","webpack:///./node_modules/core-js/internals/string-trim-forced.js","webpack:///./src/components/bussiness/ai-chat.vue?44db"],"names":["showTips","window","pywebview","api","show_tips","then","res","_Message","info","getNav","get_nav","getSysInfo","get_sys_info","initEnv","init_env","modelList","page","limit","search","model_list","createModel","modelInfo","create_model","searchModelFile","search_model_file","openFileSelector","open_file_select","createDownload","params","create_download","createBatchDownload","create_batch_download","getDownloadFiles","id","get_download_files","delFile","fileId","delete_file_download","delModel","delete_model","importFile","import_file","fileList","file_list","getModel","modelId","get_model","runModel","run_model","listRunningModel","list_running_model","stopRunningModel","execLogId","stop_running_model","listRunningModeHistory","list_running_model_history","delRunningModel","del_running_model","showTk","show_tk","splitMergeGguf","split_merge_gguf","listSplitMerge","list_split_merge","listQuantize","list_quantize","listQuantizeParams","list_quantize_params","quantize","convertHfToGguf","convert_hf_to_gguf","listConvertModel","list_covert_model","getSetting","get_setting","saveSetting","save_setting","getLlamaCppConfig","get_llama_cpp_config","saveLlamaCppConfig","content","save_llama_cpp_config","getLLamaServerInfo","get_llama_server_info","startLLamaServer","start_llama_server","stopLLamaServer","stop_llama_server","openFileInSysEdit","filePath","open_file_in_sys_edit","train","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","abrupt","Promise","resolve","reject","catch","err","stop","getTrainList","get_train_list","deleteTrainRecord","delete_train_record","generateTrainCode","generate_train_code","checkSshConnection","hostname","port","username","password","check_ssh_connection","remoteTrain","_callee2","_context2","remote_train","getLlamaFactoryInfo","get_llamafactory_info","installLlamaFactory","install_llamafactory","installLlamafactoryManual","install_llamafactory_manual","reloadInstallState","reload_install_state","isTraining","is_training","stopTrain","stop_train","getAiChatUrl","get_ai_chat_url","startLlamafactory","start_lf_webui","stopLlamafactory","stop_lf_webui","isLlamafactoryRunning","is_lf_running","getRecentServerInfo","get_recent_server_info","getSdInfo","get_sd_info","initSd","init_sd","sdGeneratePic","sd_generate_pic","saveImages","base64","save_image","sdPicToPic","sd_pic_to_pic","$","$trim","trim","forcedStringTrimMethod","target","proto","forced","this","module","exports","uncurryThis","requireObjectCoercible","toString","whitespaces","replace","ltrim","RegExp","rtrim","createMethod","TYPE","$this","string","start","end","render","_vm","_c","_self","staticClass","attrs","_v","slot","_s","model","name","staticStyle","on","$event","$router","back","ref","_l","messages","message","index","key","role","class","isLoading","directives","rawName","value","expression","_e","think","callback","$$v","nativeOn","type","indexOf","_k","keyCode","sendMessage","apply","arguments","inputMessage","staticRenderFns","data","apiKey","apiUrl","modelName","modelType","reasoningArgs","memory","stream","torch_dtype","created","_this","getUrl","$route","query","JSON","parse","loading","startLoading","apis","endLoading","e","$message","error","methods","toEnd","$refs","scrollableDiv","scrollTo","top","scrollHeight","behavior","_this2","userMessage","response","length","shift","push","callOpenAIAPIStream","callOpenAIAPI","sent","t0","console","finish","_this3","fetch","method","headers","concat","body","stringify","Object","assign","ok","Error","status","json","choices","_this4","_callee3","reader","decoder","_yield$reader$read","done","chunk","dataStr","_message","_context3","getReader","TextDecoder","read","log","decode","delta","_this5","base_url","$store","state","sysInfo","component","toObject","nativeKeys","fails","FAILS_ON_PRIMITIVES","stat","keys","it","PROPER_FUNCTION_NAME","PROPER","non","METHOD_NAME"],"mappings":"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","file":"js/chunk-a1c64e18.0e7dce36.js","sourcesContent":["import {Loading, Message} from 'element-ui'\r\nimport {startLoading} from \"./common\";\r\n\r\n\r\nexport default {\r\n  showTips() {\r\n    window.pywebview.api.show_tips().then(res => {\r\n      Message.info(res)\r\n    })\r\n  },\r\n  getNav() {\r\n    return window.pywebview.api.get_nav()\r\n  },\r\n  getSysInfo() {\r\n    return window.pywebview.api.get_sys_info()\r\n  },\r\n  initEnv() {\r\n    return window.pywebview.api.init_env()\r\n  },\r\n  modelList(page, limit, search) {\r\n    return window.pywebview.api.model_list({page: page, limit: limit, search: search})\r\n  },\r\n  createModel(modelInfo) {\r\n    return window.pywebview.api.create_model(modelInfo)\r\n  },\r\n  searchModelFile(modelInfo) {\r\n    return window.pywebview.api.search_model_file(modelInfo)\r\n  },\r\n  openFileSelector() {\r\n    return window.pywebview.api.open_file_select()\r\n  },\r\n  createDownload(params) {\r\n    return window.pywebview.api.create_download(params)\r\n  },\r\n  createBatchDownload(params) {\r\n    return window.pywebview.api.create_batch_download(params)\r\n  },\r\n  getDownloadFiles(id) {\r\n    return window.pywebview.api.get_download_files(id)\r\n  },\r\n  delFile(fileId) {\r\n    return window.pywebview.api.delete_file_download(fileId)\r\n  },\r\n  delModel(params) {\r\n    return window.pywebview.api.delete_model(params)\r\n  },\r\n  importFile(params) {\r\n    return window.pywebview.api.import_file(params)\r\n  },\r\n  fileList(params) {\r\n    return window.pywebview.api.file_list(params)\r\n  },\r\n  getModel(modelId) {\r\n    return window.pywebview.api.get_model(modelId)\r\n  },\r\n  runModel(params) {\r\n    return window.pywebview.api.run_model(params)\r\n  },\r\n  listRunningModel(params) {\r\n    return window.pywebview.api.list_running_model(params)\r\n  },\r\n  stopRunningModel(execLogId) {\r\n    return window.pywebview.api.stop_running_model(execLogId)\r\n  },\r\n  listRunningModeHistory(params) {\r\n    return window.pywebview.api.list_running_model_history(params)\r\n  },\r\n  delRunningModel(id) {\r\n    return window.pywebview.api.del_running_model(id)\r\n  },\r\n  showTk() {\r\n    return window.pywebview.api.show_tk()\r\n  },\r\n  splitMergeGguf(params) {\r\n    return window.pywebview.api.split_merge_gguf(params)\r\n  },\r\n  listSplitMerge(params) {\r\n    return window.pywebview.api.list_split_merge(params)\r\n  },\r\n  listQuantize(params) {\r\n    return window.pywebview.api.list_quantize(params)\r\n  },\r\n  listQuantizeParams() {\r\n    return window.pywebview.api.list_quantize_params()\r\n  },\r\n  quantize(params) {\r\n    return window.pywebview.api.quantize(params)\r\n  },\r\n  convertHfToGguf(params) {\r\n    return window.pywebview.api.convert_hf_to_gguf(params)\r\n  },\r\n  listConvertModel(params) {\r\n    return window.pywebview.api.list_covert_model(params)\r\n  },\r\n  getSetting() {\r\n    return window.pywebview.api.get_setting()\r\n  },\r\n  saveSetting(params) {\r\n    return window.pywebview.api.save_setting(params)\r\n  },\r\n  getLlamaCppConfig() {\r\n    return window.pywebview.api.get_llama_cpp_config()\r\n  },\r\n  saveLlamaCppConfig(content) {\r\n    return window.pywebview.api.save_llama_cpp_config(content)\r\n  },\r\n  getLLamaServerInfo() {\r\n    return window.pywebview.api.get_llama_server_info()\r\n  },\r\n  startLLamaServer() {\r\n    return window.pywebview.api.start_llama_server()\r\n  },\r\n  stopLLamaServer() {\r\n    return window.pywebview.api.stop_llama_server()\r\n  },\r\n  openFileInSysEdit(filePath) {\r\n    return window.pywebview.api.open_file_in_sys_edit(filePath)\r\n  },\r\n  async train(params) {\r\n    // window.pywebview.api.train(params)\r\n    return new Promise((resolve, reject) => {\r\n      window.pywebview.api.train(params).then(res => {\r\n        resolve(res)\r\n      }).catch(err => {\r\n        reject(err)\r\n      })\r\n    })\r\n  },\r\n  getTrainList(page, limit) {\r\n    return window.pywebview.api.get_train_list(page, limit)\r\n  },\r\n  deleteTrainRecord(id) {\r\n    return window.pywebview.api.delete_train_record(id)\r\n  },\r\n  generateTrainCode(params) {\r\n    return window.pywebview.api.generate_train_code(params)\r\n  },\r\n  checkSshConnection(hostname, port, username, password) {\r\n    return window.pywebview.api.check_ssh_connection(hostname, port, username, password)\r\n  },\r\n  async remoteTrain(params) {\r\n    // return window.pywebview.api.remote_train(params)\r\n    return new Promise((resolve, reject) => {\r\n      window.pywebview.api.remote_train(params).then(res => {\r\n        resolve(res)\r\n      }).catch(err => {\r\n        reject(err)\r\n      })\r\n    })\r\n  },\r\n  getLlamaFactoryInfo() {\r\n    return window.pywebview.api.get_llamafactory_info()\r\n  },\r\n  installLlamaFactory() {\r\n    return window.pywebview.api.install_llamafactory()\r\n  },\r\n  installLlamafactoryManual() {\r\n    return window.pywebview.api.install_llamafactory_manual()\r\n  },\r\n  reloadInstallState() {\r\n    return window.pywebview.api.reload_install_state()\r\n  },\r\n  isTraining() {\r\n    return window.pywebview.api.is_training()\r\n  },\r\n  stopTrain() {\r\n    return window.pywebview.api.stop_train()\r\n  },\r\n  getAiChatUrl() {\r\n    return window.pywebview.api.get_ai_chat_url()\r\n  },\r\n  startLlamafactory() {\r\n    return window.pywebview.api.start_lf_webui()\r\n  },\r\n  stopLlamafactory() {\r\n    return window.pywebview.api.stop_lf_webui()\r\n  },\r\n  isLlamafactoryRunning() {\r\n    return window.pywebview.api.is_lf_running()\r\n  },\r\n  getRecentServerInfo() {\r\n    return window.pywebview.api.get_recent_server_info()\r\n  },\r\n  getSdInfo() {\r\n    return window.pywebview.api.get_sd_info()\r\n  },\r\n  initSd() {\r\n    return window.pywebview.api.init_sd()\r\n  },\r\n  sdGeneratePic(params) {\r\n    return window.pywebview.api.sd_generate_pic(params)\r\n  },\r\n  saveImages(base64) {\r\n    return window.pywebview.api.save_image(base64)\r\n  },\r\n  sdPicToPic(params) {\r\n    return window.pywebview.api.sd_pic_to_pic(params)\r\n  },\r\n}\r\n","'use strict';\nvar $ = require('../internals/export');\nvar $trim = require('../internals/string-trim').trim;\nvar forcedStringTrimMethod = require('../internals/string-trim-forced');\n\n// `String.prototype.trim` method\n// https://tc39.es/ecma262/#sec-string.prototype.trim\n$({ target: 'String', proto: true, forced: forcedStringTrimMethod('trim') }, {\n  trim: function trim() {\n    return $trim(this);\n  }\n});\n","'use strict';\n// a string of all valid unicode whitespaces\nmodule.exports = '\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u1680\\u2000\\u2001\\u2002' +\n  '\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar toString = require('../internals/to-string');\nvar whitespaces = require('../internals/whitespaces');\n\nvar replace = uncurryThis(''.replace);\nvar ltrim = RegExp('^[' + whitespaces + ']+');\nvar rtrim = RegExp('(^|[^' + whitespaces + '])[' + whitespaces + ']+$');\n\n// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation\nvar createMethod = function (TYPE) {\n  return function ($this) {\n    var string = toString(requireObjectCoercible($this));\n    if (TYPE & 1) string = replace(string, ltrim, '');\n    if (TYPE & 2) string = replace(string, rtrim, '$1');\n    return string;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.{ trimLeft, trimStart }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimstart\n  start: createMethod(1),\n  // `String.prototype.{ trimRight, trimEnd }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimend\n  end: createMethod(2),\n  // `String.prototype.trim` method\n  // https://tc39.es/ecma262/#sec-string.prototype.trim\n  trim: createMethod(3)\n};\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"chat-container\"},[_c('el-breadcrumb',{attrs:{\"separator\":\"/\"}},[_c('el-breadcrumb-item',[_vm._v(\"模型进程\")]),_c('el-breadcrumb-item',[_vm._v(\"AI chat\")])],1),_c('el-card',{staticClass:\"box-card\"},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"AI聊天助手:    \"),_c('strong',[_vm._v(_vm._s(_vm.model.name))])]),_c('el-button',{staticStyle:{\"float\":\"right\",\"padding\":\"3px 0\"},attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.$router.back()}}},[_vm._v(\"返回\")])],1),_c('div',{ref:\"scrollableDiv\",staticClass:\"chat-messages\"},[_vm._l((_vm.messages),function(message,index){return _c('div',{key:index,staticClass:\"message-item\"},[(message.role === 'user')?_c('div',{staticClass:\"message-avatar\"},[_c('i',{staticClass:\"el-icon-user\"})]):_c('div',{staticClass:\"message-avatar\"},[_c('span',{staticClass:\"icon iconfont\"},[_vm._v(\"\")])]),_c('div',{staticClass:\"message-content\",class:message.role},[_c('div',{staticClass:\"message-bubble\"},[_c('pre',[_vm._v(_vm._s(message.content))])])])])}),(_vm.isLoading)?_c('div',{staticClass:\"message-item\"},[_c('div',{staticClass:\"message-avatar\"},[_c('span',{staticClass:\"icon iconfont\"},[_vm._v(\"\")])]),_c('div',{staticClass:\"message-content assistant\"},[_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.isLoading),expression:\"isLoading\"}],staticClass:\"message-bubble\",attrs:{\"element-loading-text\":\"思考中...\"}})])]):_vm._e()],2),_c('div',[_c('span',{staticStyle:{\"color\":\"#606266\"}},[_vm._v(\"深度思考:\")]),_c('el-switch',{model:{value:(_vm.think),callback:function ($$v) {_vm.think=$$v},expression:\"think\"}})],1),_c('div',{staticClass:\"chat-input\"},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":5,\"placeholder\":\"请输入问题...\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.sendMessage.apply(null, arguments)}},model:{value:(_vm.inputMessage),callback:function ($$v) {_vm.inputMessage=$$v},expression:\"inputMessage\"}}),_c('el-button',{attrs:{\"type\":\"primary\",\"disabled\":_vm.isLoading},on:{\"click\":_vm.sendMessage}},[_vm._v(\"发送\")])],1)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"chat-container\">\r\n    <el-breadcrumb separator=\"/\">\r\n      <el-breadcrumb-item>模型进程</el-breadcrumb-item>\r\n      <el-breadcrumb-item>AI chat</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n\r\n    <el-card class=\"box-card\">\r\n      <div slot=\"header\" class=\"clearfix\">\r\n        <span>AI聊天助手: &nbsp;&nbsp; <strong>{{ model.name }}</strong></span>\r\n        <el-button style=\"float: right; padding: 3px 0\" type=\"text\" @click=\"$router.back()\">返回</el-button>\r\n      </div>\r\n      <div class=\"chat-messages\" ref=\"scrollableDiv\">\r\n        <div v-for=\"(message, index) in messages\" :key=\"index\" class=\"message-item\">\r\n          <div class=\"message-avatar\" v-if=\"message.role === 'user'\">\r\n            <i class=\"el-icon-user\"></i>\r\n          </div>\r\n          <div class=\"message-avatar\" v-else>\r\n            <span class=\"icon iconfont\">&#xeb62;</span>\r\n          </div>\r\n          <div class=\"message-content\" :class=\"message.role\">\r\n            <div class=\"message-bubble\">\r\n              <pre>{{ message.content }}</pre>\r\n            </div>\r\n          </div>\r\n\r\n        </div>\r\n        <div v-if=\"isLoading\" class=\"message-item\">\r\n          <div class=\"message-avatar\">\r\n            <span class=\"icon iconfont\">&#xeb62;</span>\r\n          </div>\r\n          <div class=\"message-content assistant\">\r\n            <div class=\"message-bubble\" v-loading=\"isLoading\" element-loading-text=\"思考中...\">\r\n              <!-- 加载时显示默认加载动画和文本 -->\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div>\r\n        <span style=\"color: #606266\">深度思考:</span>\r\n        <el-switch v-model=\"think\"></el-switch>\r\n      </div>\r\n      <div class=\"chat-input\">\r\n\r\n        <el-input\r\n          v-model=\"inputMessage\"\r\n          type=\"textarea\"\r\n          :rows=\"5\"\r\n          placeholder=\"请输入问题...\"\r\n          @keyup.enter.native=\"sendMessage\"\r\n        ></el-input>\r\n        <el-button @click=\"sendMessage\" type=\"primary\" :disabled=\"isLoading\">发送</el-button>\r\n      </div>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport apis from '../../common/apis'\r\nimport {endLoading, startLoading} from \"@/common/common\"\r\n\r\nexport default {\r\n  name: 'ChatWindow',\r\n  data() {\r\n    return {\r\n      messages: [],\r\n      inputMessage: '',\r\n      isLoading: false,\r\n      apiKey: '',\r\n      apiUrl: 'http://127.0.0.1:5000/v1/chat/completions',\r\n      modelId: '',\r\n      modelName: '',\r\n      modelType: '',\r\n      reasoningArgs: '',\r\n      model: {},\r\n      memory: 5,\r\n      stream: false,\r\n      torch_dtype: 'auto',\r\n      think: true\r\n    }\r\n  },\r\n  created() {\r\n    this.getUrl()\r\n    this.modelId = this.$route.query.modelId\r\n    this.modelName = this.$route.query.modelName\r\n    this.modelType = this.$route.query.modelType\r\n    this.reasoningArgs = JSON.parse(this.$route.query.reasoningArgs)\r\n    this.memory = this.reasoningArgs.memory\r\n    this.stream = this.reasoningArgs.stream\r\n    this.torch_dtype = this.reasoningArgs.torch_dtype\r\n    if (this.modelId) {\r\n      const loading = startLoading(\"加载模型...\");\r\n      apis.getModel(this.modelId).then(res => {\r\n        endLoading(loading)\r\n        this.model = JSON.parse(res)\r\n      }).catch(e => {\r\n        endLoading(loading)\r\n        this.$message.error(e)\r\n      })\r\n    }\r\n  },\r\n  methods: {\r\n    toEnd() {\r\n      if (this.$refs.scrollableDiv) {\r\n        this.$refs.scrollableDiv.scrollTo({\r\n          top: this.$refs.scrollableDiv.scrollHeight,\r\n          behavior: 'smooth'\r\n        });\r\n      }\r\n    },\r\n    async sendMessage() {\r\n      if (!this.inputMessage.trim()) return;\r\n\r\n      if (this.think === true) {\r\n        // this.inputMessage += \"/think\"\r\n      } else {\r\n        this.inputMessage += \"/no_think\"\r\n      }\r\n      // 添加用户消息到对话\r\n      const userMessage = {\r\n        role: 'user',\r\n        content: this.inputMessage\r\n      };\r\n\r\n      if (this.messages.length >= this.memory) {\r\n        this.messages.shift()\r\n        this.messages.shift()\r\n      }\r\n      this.messages.push(userMessage);\r\n\r\n      this.toEnd()\r\n\r\n      this.inputMessage = '';\r\n\r\n      try {\r\n        this.isLoading = true;\r\n\r\n        if (this.stream) {\r\n          await this.callOpenAIAPIStream(this.messages, this.reasoningArgs);\r\n        } else {\r\n          // 调用API获取回复\r\n          const response = await this.callOpenAIAPI(this.messages, this.reasoningArgs);\r\n          this.messages.push(response);\r\n\r\n        }\r\n        this.toEnd()\r\n      } catch (error) {\r\n        console.error('Error:', error);\r\n        this.messages.push({\r\n          role: 'assistant',\r\n          content: '抱歉，请求出错: ' + error.message\r\n        });\r\n      } finally {\r\n        this.isLoading = false;\r\n      }\r\n    },\r\n    async callOpenAIAPI(messages, reasoningArgs) {\r\n      const response = await fetch(this.apiUrl, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${this.apiKey}`\r\n        },\r\n        body: JSON.stringify(\r\n          Object.assign({\r\n            model: this.model.name,\r\n            messages: messages,\r\n          }, reasoningArgs)\r\n        )\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      return {\r\n        role: 'assistant',\r\n        content: data.choices[0].message.content\r\n      };\r\n    },\r\n\r\n    async callOpenAIAPIStream(messages, reasoningArgs) {\r\n      const response = await fetch(this.apiUrl, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${this.apiKey}`\r\n        },\r\n        body: JSON.stringify(\r\n          Object.assign({\r\n            model: this.model.name,\r\n            messages: messages,\r\n          }, reasoningArgs)\r\n        )\r\n      });\r\n\r\n      // 获取响应的ReadableStream\r\n      const reader = response.body.getReader();\r\n      const decoder = new TextDecoder('utf-8');\r\n\r\n      let index = 0\r\n      while (true) {\r\n        if (this.isLoading === true) {\r\n          this.isLoading = false;\r\n        }\r\n        const {done, value} = await reader.read();\r\n\r\n        if (done) {\r\n          console.log('流读取完成');\r\n          break;\r\n        }\r\n\r\n        // 处理每一块数据（Uint8Array）\r\n        const chunk = decoder.decode(value)\r\n        console.log('接收到数据块:', chunk);\r\n        const dataStr = chunk.replace('data:', '').trim()\r\n        // console.log(chunk.substring(6, chunk.length))\r\n        const data = JSON.parse(dataStr)\r\n\r\n        // 可以在这里更新UI或处理数据\r\n        let content = data.choices[0].delta.content\r\n        let role = data.choices[0].delta.role\r\n        if (index === 0) {\r\n          const message = {\r\n            role: role,\r\n            content: ''\r\n          }\r\n          this.messages.push(message)\r\n        } else {\r\n          if (content) {\r\n            const message = this.messages[this.messages.length - 1];\r\n            message.content += content\r\n          }\r\n        }\r\n        this.toEnd()\r\n        index++;\r\n      }\r\n    },\r\n    getUrl() {\r\n      const base_url = this.$store.state.sysInfo.base_url\r\n      if (base_url) {\r\n        this.apiUrl = base_url + '/v1/chat/completions'\r\n      } else {\r\n        apis.getAiChatUrl().then(res => {\r\n          this.apiUrl = res\r\n        }).catch(e => {\r\n          this.$message.error(e)\r\n        })\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.chat-container {\r\n  padding: 5px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.box-card {\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.chat-messages {\r\n  flex: 1;\r\n  height: 45vh;\r\n  overflow-y: auto;\r\n  padding: 15px;\r\n  margin-bottom: 15px;\r\n  border: 1px solid #ebeef5;\r\n  border-radius: 4px;\r\n  width: auto;\r\n  white-space: normal; /* 默认值，在空格处换行 */\r\n}\r\n\r\n\r\n.message-item {\r\n  display: flex;\r\n  align-items: flex-start;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.message-avatar {\r\n  width: 36px;\r\n  height: 36px;\r\n  border-radius: 50%;\r\n  background-color: #909399;\r\n  color: #fff;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  margin-right: 10px;\r\n}\r\n\r\n.message-content {\r\n  flex: 1;\r\n\r\n  /*.assistant {\r\n    max-width: 90%;\r\n  }*/\r\n}\r\n\r\n.message-bubble {\r\n  padding: 10px 15px;\r\n  border-radius: 4px;\r\n  background-color: #e4e7ed;\r\n  display: inline-block;\r\n  max-width: 90%;\r\n  white-space: pre-wrap;\r\n  word-break: break-all;\r\n}\r\n\r\n.message-content.user .message-bubble {\r\n  background-color: #409eff;\r\n  color: #fff;\r\n}\r\n\r\n.chat-input {\r\n  display: flex;\r\n  gap: 10px;\r\n  margin-top: auto;\r\n  padding-top: 10px;\r\n  border-top: 1px solid #ebeef5;\r\n}\r\n\r\n.chat-input .el-input {\r\n  flex: 1;\r\n}\r\n\r\n.chat-input .el-button {\r\n  height: 40px;\r\n  white-space: nowrap;\r\n}\r\n\r\n.el-loading-text {\r\n  /* 禁止文本换行 */\r\n  white-space: nowrap;\r\n  /* 自动扩展容器宽度以适应文本 */\r\n  display: inline-block;\r\n  /* 可选：添加最小宽度或 padding 避免过于紧凑 */\r\n  min-width: 120px;\r\n  padding: 0 10px;\r\n}\r\n</style>\r\n\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ai-chat.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ai-chat.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ai-chat.vue?vue&type=template&id=12b64966&scoped=true\"\nimport script from \"./ai-chat.vue?vue&type=script&lang=js\"\nexport * from \"./ai-chat.vue?vue&type=script&lang=js\"\nimport style0 from \"./ai-chat.vue?vue&type=style&index=0&id=12b64966&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"12b64966\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar nativeKeys = require('../internals/object-keys');\nvar fails = require('../internals/fails');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeKeys(1); });\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES }, {\n  keys: function keys(it) {\n    return nativeKeys(toObject(it));\n  }\n});\n","'use strict';\nvar PROPER_FUNCTION_NAME = require('../internals/function-name').PROPER;\nvar fails = require('../internals/fails');\nvar whitespaces = require('../internals/whitespaces');\n\nvar non = '\\u200B\\u0085\\u180E';\n\n// check that a method works with the correct list\n// of whitespaces and has a correct name\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    return !!whitespaces[METHOD_NAME]()\n      || non[METHOD_NAME]() !== non\n      || (PROPER_FUNCTION_NAME && whitespaces[METHOD_NAME].name !== METHOD_NAME);\n  });\n};\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ai-chat.vue?vue&type=style&index=0&id=12b64966&prod&scoped=true&lang=css\""],"sourceRoot":""}