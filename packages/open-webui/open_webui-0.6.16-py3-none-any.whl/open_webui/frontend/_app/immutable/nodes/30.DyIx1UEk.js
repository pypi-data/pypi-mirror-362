import{s as Ue,y as Qe,e as n,k as $,t as Y,c as i,a as u,F as Ye,o as x,b as Z,d as c,f as s,i as Fe,g as e,B as ge,u as me,z as Ze,h as ee,A as et,G as tt,j as Le,p as at,n as st}from"../chunks/BId-c6mR.js";import{S as Ge,i as Xe,f as lt,b as De,d as Ie,m as Ve,t as R,g as rt,a as te,c as ot,e as Ce}from"../chunks/BuwtTo7z.js";import{g as Oe}from"../chunks/CO0GEo6q.js";import{c as nt,g as it}from"../chunks/BUUQjd9A.js";import{t as Ee}from"../chunks/C9Ej3FHW.js";import{u as ct,k as dt}from"../chunks/8Hnar5y7.js";import{A as ut}from"../chunks/C2BU2GUk.js";import{S as ft}from"../chunks/BxepmQZ9.js";function Re(l){let a,t,o;return t=new ft({}),{c(){a=n("div"),De(t.$$.fragment),this.h()},l(g){a=i(g,"DIV",{class:!0});var k=u(a);Ie(t.$$.fragment,k),k.forEach(c),this.h()},h(){s(a,"class","ml-1.5 self-center")},m(g,k){Fe(g,a,k),Ve(t,a,null),o=!0},i(g){o||(R(t.$$.fragment,g),o=!0)},o(g){te(t.$$.fragment,g),o=!1},d(g){g&&c(a),Ce(t)}}}function gt(l){var Te,Be,Ae,Ke;let a,t,o,g='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M17 10a.75.75 0 01-.75.75H5.612l4.158 3.96a.75.75 0 11-1.04 1.08l-5.5-5.25a.75.75 0 010-1.08l5.5-5.25a.75.75 0 111.04 1.08L5.612 9.25H16.25A.75.75 0 0117 10z" clip-rule="evenodd"></path></svg>',k,y,_=l[4].t("Back")+"",E,T,v,D,B,K=l[4].t("Create a knowledge base")+"",j,ae,m,I,H,U=l[4].t("What are you working on?")+"",se,ve,P,b,le,pe,N,M,F=l[4].t("What are you trying to achieve?")+"",re,he,W,w,oe,_e,q,z,V,be,we,L,G,p,O,X=l[4].t("Create Knowledge")+"",ne,ke,ie,h,ye,$e;function Je(r){l[11](r)}let xe={accessRoles:["read","write"],allowPublic:((Ae=(Be=(Te=l[5])==null?void 0:Te.permissions)==null?void 0:Be.sharing)==null?void 0:Ae.public_knowledge)||((Ke=l[5])==null?void 0:Ke.role)==="admin"};l[3]!==void 0&&(xe.accessControl=l[3]),V=new ut({props:xe}),Qe.push(()=>lt(V,"accessControl",Je));let f=l[0]&&Re();return{c(){a=n("div"),t=n("button"),o=n("div"),o.innerHTML=g,k=$(),y=n("div"),E=Y(_),T=$(),v=n("form"),D=n("div"),B=n("div"),j=Y(K),ae=$(),m=n("div"),I=n("div"),H=n("div"),se=Y(U),ve=$(),P=n("div"),b=n("input"),pe=$(),N=n("div"),M=n("div"),re=Y(F),he=$(),W=n("div"),w=n("textarea"),_e=$(),q=n("div"),z=n("div"),De(V.$$.fragment),we=$(),L=n("div"),G=n("div"),p=n("button"),O=n("div"),ne=Y(X),ke=$(),f&&f.c(),this.h()},l(r){a=i(r,"DIV",{class:!0});var d=u(a);t=i(d,"BUTTON",{class:!0});var A=u(t);o=i(A,"DIV",{class:!0,"data-svelte-h":!0}),Ye(o)!=="svelte-1klo87r"&&(o.innerHTML=g),k=x(A),y=i(A,"DIV",{class:!0});var J=u(y);E=Z(J,_),J.forEach(c),A.forEach(c),T=x(d),v=i(d,"FORM",{class:!0});var C=u(v);D=i(C,"DIV",{class:!0});var S=u(D);B=i(S,"DIV",{class:!0});var Q=u(B);j=Z(Q,K),Q.forEach(c),ae=x(S),m=i(S,"DIV",{class:!0});var ce=u(m);I=i(ce,"DIV",{class:!0});var de=u(I);H=i(de,"DIV",{class:!0});var Ne=u(H);se=Z(Ne,U),Ne.forEach(c),ve=x(de),P=i(de,"DIV",{class:!0});var Se=u(P);b=i(Se,"INPUT",{class:!0,type:!0,placeholder:!0}),Se.forEach(c),de.forEach(c),pe=x(ce),N=i(ce,"DIV",{});var ue=u(N);M=i(ue,"DIV",{class:!0});var je=u(M);re=Z(je,F),je.forEach(c),he=x(ue),W=i(ue,"DIV",{class:!0});var He=u(W);w=i(He,"TEXTAREA",{class:!0,rows:!0,placeholder:!0}),u(w).forEach(c),He.forEach(c),ue.forEach(c),ce.forEach(c),S.forEach(c),_e=x(C),q=i(C,"DIV",{class:!0});var Pe=u(q);z=i(Pe,"DIV",{class:!0});var Me=u(z);Ie(V.$$.fragment,Me),Me.forEach(c),Pe.forEach(c),we=x(C),L=i(C,"DIV",{class:!0});var We=u(L);G=i(We,"DIV",{});var qe=u(G);p=i(qe,"BUTTON",{class:!0,type:!0});var fe=u(p);O=i(fe,"DIV",{class:!0});var ze=u(O);ne=Z(ze,X),ze.forEach(c),ke=x(fe),f&&f.l(fe),fe.forEach(c),qe.forEach(c),We.forEach(c),C.forEach(c),d.forEach(c),this.h()},h(){s(o,"class","self-center"),s(y,"class","self-center font-medium text-sm"),s(t,"class","flex space-x-1"),s(B,"class","text-2xl font-medium font-primary mb-2.5"),s(H,"class","text-sm mb-2"),s(b,"class","w-full rounded-lg py-2 px-4 text-sm bg-gray-50 dark:text-gray-300 dark:bg-gray-850 outline-hidden"),s(b,"type","text"),s(b,"placeholder",le=l[4].t("Name your knowledge base")),b.required=!0,s(P,"class","w-full mt-1"),s(I,"class","w-full"),s(M,"class","text-sm mb-2"),s(w,"class","w-full resize-none rounded-lg py-2 px-4 text-sm bg-gray-50 dark:text-gray-300 dark:bg-gray-850 outline-hidden"),s(w,"rows","4"),s(w,"placeholder",oe=l[4].t("Describe your knowledge base and objectives")),w.required=!0,s(W,"class","w-full mt-1"),s(m,"class","w-full flex flex-col gap-2.5"),s(D,"class","w-full flex flex-col justify-center"),s(z,"class","px-3 py-2 bg-gray-50 dark:bg-gray-950 rounded-lg"),s(q,"class","mt-2"),s(O,"class","self-center font-medium"),s(p,"class",ie="text-sm px-4 py-2 transition rounded-lg "+(l[0]?" cursor-not-allowed bg-gray-100 dark:bg-gray-800":" bg-gray-50 hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800")+" flex"),s(p,"type","submit"),p.disabled=l[0],s(L,"class","flex justify-end mt-2"),s(v,"class","flex flex-col max-w-lg mx-auto mt-10 mb-10"),s(a,"class","w-full max-h-full")},m(r,d){Fe(r,a,d),e(a,t),e(t,o),e(t,k),e(t,y),e(y,E),e(a,T),e(a,v),e(v,D),e(D,B),e(B,j),e(D,ae),e(D,m),e(m,I),e(I,H),e(H,se),e(I,ve),e(I,P),e(P,b),ge(b,l[1]),e(m,pe),e(m,N),e(N,M),e(M,re),e(N,he),e(N,W),e(W,w),ge(w,l[2]),e(v,_e),e(v,q),e(q,z),Ve(V,z,null),e(v,we),e(v,L),e(L,G),e(G,p),e(p,O),e(O,ne),e(p,ke),f&&f.m(p,null),h=!0,ye||($e=[me(t,"click",l[8]),me(b,"input",l[9]),me(w,"input",l[10]),me(v,"submit",Ze(l[12]))],ye=!0)},p(r,[d]){var J,C,S,Q;(!h||d&16)&&_!==(_=r[4].t("Back")+"")&&ee(E,_),(!h||d&16)&&K!==(K=r[4].t("Create a knowledge base")+"")&&ee(j,K),(!h||d&16)&&U!==(U=r[4].t("What are you working on?")+"")&&ee(se,U),(!h||d&16&&le!==(le=r[4].t("Name your knowledge base")))&&s(b,"placeholder",le),d&2&&b.value!==r[1]&&ge(b,r[1]),(!h||d&16)&&F!==(F=r[4].t("What are you trying to achieve?")+"")&&ee(re,F),(!h||d&16&&oe!==(oe=r[4].t("Describe your knowledge base and objectives")))&&s(w,"placeholder",oe),d&4&&ge(w,r[2]);const A={};d&32&&(A.allowPublic=((S=(C=(J=r[5])==null?void 0:J.permissions)==null?void 0:C.sharing)==null?void 0:S.public_knowledge)||((Q=r[5])==null?void 0:Q.role)==="admin"),!be&&d&8&&(be=!0,A.accessControl=r[3],et(()=>be=!1)),V.$set(A),(!h||d&16)&&X!==(X=r[4].t("Create Knowledge")+"")&&ee(ne,X),r[0]?f?d&1&&R(f,1):(f=Re(),f.c(),R(f,1),f.m(p,null)):f&&(rt(),te(f,1,1,()=>{f=null}),ot()),(!h||d&1&&ie!==(ie="text-sm px-4 py-2 transition rounded-lg "+(r[0]?" cursor-not-allowed bg-gray-100 dark:bg-gray-800":" bg-gray-50 hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800")+" flex"))&&s(p,"class",ie),(!h||d&1)&&(p.disabled=r[0])},i(r){h||(R(V.$$.fragment,r),R(f),h=!0)},o(r){te(V.$$.fragment,r),te(f),h=!1},d(r){r&&c(a),Ce(V),f&&f.d(),ye=!1,tt($e)}}}function mt(l,a,t){let o,g;Le(l,ct,m=>t(5,g=m));const k=at("i18n");Le(l,k,m=>t(4,o=m));let y=!1,_="",E="",T={};const v=async()=>{if(t(0,y=!0),_.trim()===""||E.trim()===""){Ee.error(o.t("Please fill in all fields.")),t(1,_=""),t(2,E=""),t(0,y=!1);return}const m=await nt(localStorage.token,_,E,T).catch(I=>{Ee.error(`${I}`)});m&&(Ee.success(o.t("Knowledge created successfully.")),dt.set(await it(localStorage.token)),Oe(`/workspace/knowledge/${m.id}`)),t(0,y=!1)},D=()=>{Oe("/workspace/knowledge")};function B(){_=this.value,t(1,_)}function K(){E=this.value,t(2,E)}function j(m){T=m,t(3,T)}return[y,_,E,T,o,g,k,v,D,B,K,j,()=>{v()}]}class vt extends Ge{constructor(a){super(),Xe(this,a,mt,gt,Ue,{})}}function pt(l){let a,t;return a=new vt({}),{c(){De(a.$$.fragment)},l(o){Ie(a.$$.fragment,o)},m(o,g){Ve(a,o,g),t=!0},p:st,i(o){t||(R(a.$$.fragment,o),t=!0)},o(o){te(a.$$.fragment,o),t=!1},d(o){Ce(a,o)}}}class It extends Ge{constructor(a){super(),Xe(this,a,null,pt,Ue,{})}}export{It as component};
//# sourceMappingURL=30.DyIx1UEk.js.map
