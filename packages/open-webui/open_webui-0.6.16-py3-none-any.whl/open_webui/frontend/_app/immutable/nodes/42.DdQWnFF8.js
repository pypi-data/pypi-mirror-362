import{s as be,k as H,l as ge,m as we,d,o as J,i as te,j as P,p as ye,y as K,e as p,t as Q,c as v,a as b,b as X,f as h,g as u,u as Se,h as Y,A as Z,C as x}from"../chunks/BId-c6mR.js";import{S as Ie,i as ke,t as G,a as ae,c as Ee,f as $,b as De,d as Me,m as Ve,e as Ce,g as Le}from"../chunks/BuwtTo7z.js";import{g as ee}from"../chunks/CO0GEo6q.js";import{p as Be}from"../chunks/C5odNooH.js";import{d as oe}from"../chunks/I1CDPYOB.js";import{h as he,a as se,c as Ne,W as je,m as Ue}from"../chunks/8Hnar5y7.js";import{l as Ae,a as Oe,b as Pe}from"../chunks/BegY-nht.js";import{g as Te,c as We}from"../chunks/Bb2Jjb0f.js";import{M as Fe}from"../chunks/Dslp2IY8.js";import{t as Re}from"../chunks/C9Ej3FHW.js";/* empty css                */import"../chunks/CS5v2Vts.js";import"../chunks/BXP-4RTu.js";import{g as qe}from"../chunks/BG4E4qTN.js";import{g as ze,a as He}from"../chunks/DpBjbflx.js";import"../chunks/CyTOOynw.js";import"../chunks/CACRum6H.js";import"../chunks/C_Vb7E7B.js";function _e(e){let m,t,i,c,s,a,f,U,E,D,I=oe(e[4].chat.timestamp).format("LLL")+"",B,w,A,M,V,n,_,T,W,F,C,L,o,k=e[11].t("Clone Chat")+"",N,S,O,r;function R(l){e[16](l)}function pe(l){e[17](l)}function ve(l){e[18](l)}let q={className:"h-full flex pt-4 pb-8 ",user:e[5],chatId:e[8],readOnly:!0,selectedModels:e[3],processing:Ge,bottomPadding:e[13].length>0,sendPrompt:Ke,continueResponse:Qe,regenerateResponse:Xe};return e[0]!==void 0&&(q.history=e[0]),e[7]!==void 0&&(q.messages=e[7]),e[2]!==void 0&&(q.autoScroll=e[2]),n=new Fe({props:q}),K.push(()=>$(n,"history",R)),K.push(()=>$(n,"messages",pe)),K.push(()=>$(n,"autoScroll",ve)),{c(){m=p("div"),t=p("div"),i=p("div"),c=p("div"),s=p("div"),a=p("div"),f=Q(e[6]),U=H(),E=p("div"),D=p("div"),B=Q(I),A=H(),M=p("div"),V=p("div"),De(n.$$.fragment),F=H(),C=p("div"),L=p("div"),o=p("button"),N=Q(k),this.h()},l(l){m=v(l,"DIV",{class:!0});var g=b(m);t=v(g,"DIV",{class:!0});var y=b(t);i=v(y,"DIV",{class:!0,id:!0});var j=b(i);c=v(j,"DIV",{class:!0});var le=b(c);s=v(le,"DIV",{class:!0});var z=b(s);a=v(z,"DIV",{class:!0});var re=b(a);f=X(re,e[6]),re.forEach(d),U=J(z),E=v(z,"DIV",{class:!0});var ie=b(E);D=v(ie,"DIV",{class:!0});var ne=b(D);B=X(ne,I),ne.forEach(d),ie.forEach(d),z.forEach(d),le.forEach(d),A=J(j),M=v(j,"DIV",{class:!0});var ce=b(M);V=v(ce,"DIV",{class:!0});var ue=b(V);Me(n.$$.fragment,ue),ue.forEach(d),ce.forEach(d),j.forEach(d),F=J(y),C=v(y,"DIV",{class:!0});var de=b(C);L=v(de,"DIV",{class:!0});var fe=b(L);o=v(fe,"BUTTON",{class:!0});var me=b(o);N=X(me,k),me.forEach(d),fe.forEach(d),de.forEach(d),y.forEach(d),g.forEach(d),this.h()},h(){var l;h(a,"class","text-2xl font-semibold line-clamp-1"),h(D,"class","text-gray-400"),h(E,"class","flex text-sm justify-between items-center mt-1"),h(s,"class","px-3"),h(c,"class",w="pt-5 px-2 w-full "+(((l=e[9])==null?void 0:l.widescreenMode)??null?"max-w-full":"max-w-5xl")+" mx-auto"),h(V,"class","w-full"),h(M,"class","h-full w-full flex flex-col py-2"),h(i,"class","flex flex-col w-full flex-auto overflow-auto h-0"),h(i,"id","messages-container"),h(o,"class","px-4 py-2 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full"),h(L,"class","pb-5"),h(C,"class","absolute bottom-0 right-0 left-0 flex justify-center w-full bg-linear-to-b from-transparent to-white dark:to-gray-900"),h(t,"class","flex flex-col flex-auto justify-center relative"),h(m,"class","h-screen max-h-[100dvh] w-full flex flex-col text-gray-700 dark:text-gray-100 bg-white dark:bg-gray-900")},m(l,g){te(l,m,g),u(m,t),u(t,i),u(i,c),u(c,s),u(s,a),u(a,f),u(s,U),u(s,E),u(E,D),u(D,B),u(i,A),u(i,M),u(M,V),Ve(n,V,null),u(t,F),u(t,C),u(C,L),u(L,o),u(o,N),S=!0,O||(r=Se(o,"click",e[14]),O=!0)},p(l,g){var j;(!S||g&64)&&Y(f,l[6]),(!S||g&16)&&I!==(I=oe(l[4].chat.timestamp).format("LLL")+"")&&Y(B,I),(!S||g&512&&w!==(w="pt-5 px-2 w-full "+(((j=l[9])==null?void 0:j.widescreenMode)??null?"max-w-full":"max-w-5xl")+" mx-auto"))&&h(c,"class",w);const y={};g&32&&(y.user=l[5]),g&256&&(y.chatId=l[8]),g&8&&(y.selectedModels=l[3]),!_&&g&1&&(_=!0,y.history=l[0],Z(()=>_=!1)),!T&&g&128&&(T=!0,y.messages=l[7],Z(()=>T=!1)),!W&&g&4&&(W=!0,y.autoScroll=l[2],Z(()=>W=!1)),n.$set(y),(!S||g&2048)&&k!==(k=l[11].t("Clone Chat")+"")&&Y(N,k)},i(l){S||(G(n.$$.fragment,l),S=!0)},o(l){ae(n.$$.fragment,l),S=!1},d(l){l&&d(m),Ce(n),O=!1,r()}}}function Je(e){let m,t,i,c;document.title=m=`
		`+(e[6]?`${e[6].length>30?`${e[6].slice(0,30)}...`:e[6]} • ${e[10]}`:`${e[10]}`)+`
	`;let s=e[1]&&_e(e);return{c(){t=H(),s&&s.c(),i=ge()},l(a){we("svelte-a2pwma",document.head).forEach(d),t=J(a),s&&s.l(a),i=ge()},m(a,f){te(a,t,f),s&&s.m(a,f),te(a,i,f),c=!0},p(a,[f]){(!c||f&1088)&&m!==(m=`
		`+(a[6]?`${a[6].length>30?`${a[6].slice(0,30)}...`:a[6]} • ${a[10]}`:`${a[10]}`)+`
	`)&&(document.title=m),a[1]?s?(s.p(a,f),f&2&&G(s,1)):(s=_e(a),s.c(),G(s,1),s.m(i.parentNode,i)):s&&(Le(),ae(s,1,1,()=>{s=null}),Ee())},i(a){c||(G(s),c=!0)},o(a){ae(s),c=!1},d(a){a&&(d(t),d(i)),s&&s.d(a)}}}let Ge="";const Ke=()=>{},Qe=()=>{},Xe=()=>{};function Ye(e,m,t){let i,c,s,a,f,U;P(e,he,o=>t(8,i=o)),P(e,Be,o=>t(15,c=o)),P(e,se,o=>t(9,s=o)),P(e,Ne,o=>t(19,a=o)),P(e,je,o=>t(10,f=o));const E=ye("i18n");P(e,E,o=>t(11,U=o)),oe.extend(Ae);let D=!1,I=!0,B=[""],w=null,A=null,M="",V=[],n=[],_={messages:{},currentId:null};const T=async()=>{var k,N,S,O;const o=await ze(localStorage.token).catch(r=>(console.error(r),null));if(o)se.set(o.ui);else{let r={};try{r=JSON.parse(localStorage.getItem("settings")??"{}")}catch(R){console.error("Failed to parse settings from localStorage",R)}se.set(r)}if(await Ue.set(await qe(localStorage.token,((k=a==null?void 0:a.features)==null?void 0:k.enable_direct_connections)&&((s==null?void 0:s.directConnections)??null))),await he.set(c.params.id),t(4,w=await Te(localStorage.token,i).catch(async r=>(await ee("/"),null))),w){t(5,A=await He(localStorage.token,w.user_id).catch(R=>(console.error(R),null)));const r=w.chat;return r?(t(3,B=((r==null?void 0:r.models)??void 0)!==void 0?r.models:[r.models??""]),t(0,_=((r==null?void 0:r.history)??void 0)!==void 0?r.history:Pe(r.messages)),t(6,M=r.title),t(2,I=!0),await x(),n.length>0&&((N=n.at(-1))!=null&&N.id)&&((S=n.at(-1))==null?void 0:S.id)in _.messages&&t(0,_.messages[(O=n.at(-1))==null?void 0:O.id].done=!0,_),await x(),!0):null}},W=async()=>{if(!w)return;const o=await We(localStorage.token,w.id).catch(k=>(Re.error(`${k}`),null));o&&ee(`/c/${o.id}`)};function F(o){_=o,t(0,_)}function C(o){n=o,t(7,n),t(0,_)}function L(o){I=o,t(2,I)}return e.$$.update=()=>{e.$$.dirty&1&&t(7,n=Oe(_,_.currentId)),e.$$.dirty&32768&&c.params.id&&(async()=>await T()?(await x(),t(1,D=!0)):await ee("/"))()},[_,D,I,B,w,A,M,n,i,s,f,U,E,V,W,c,F,C,L]}class hs extends Ie{constructor(m){super(),ke(this,m,Ye,Je,be,{})}}export{hs as component};
//# sourceMappingURL=42.DdQWnFF8.js.map
