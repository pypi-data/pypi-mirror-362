import{s as Ue,k as W,e as w,m as He,d as u,o as R,c as k,a as y,f as m,i as j,j as de,p as Le,J as Ae,q as Oe,n as ie,y as Fe,g as v,B as ke,u as pe,A as Pe,t as Q,b as Z,h as te,S as We,_ as ye}from"../chunks/BId-c6mR.js";import{S as je,i as Me,b as G,d as X,m as J,g as ce,a as H,c as fe,t as L,e as z,f as Re}from"../chunks/BuwtTo7z.js";import{W as qe,s as De,u as Ye}from"../chunks/8Hnar5y7.js";import{M as Ge}from"../chunks/CITGD6j7.js";import{U as Xe}from"../chunks/B-9I3NzW.js";import{g as Je}from"../chunks/D0QH3NT1.js";import{e as he,u as ze,o as Ke}from"../chunks/TjOgUCiB.js";import{t as ne}from"../chunks/C9Ej3FHW.js";import{f as Qe}from"../chunks/CyTOOynw.js";import{F as Ze}from"../chunks/CU2r43ac.js";import{h as et,E as tt}from"../chunks/CACRum6H.js";import{d as oe,r as lt}from"../chunks/I1CDPYOB.js";import"../chunks/BXP-4RTu.js";import{d as rt}from"../chunks/BQWQRICs.js";import{g as st}from"../chunks/CO0GEo6q.js";import{g as at,c as Ee,d as nt}from"../chunks/DKtvgPI5.js";import{d as ot,g as it,m as ct,f as Ie}from"../chunks/BegY-nht.js";import{E as ft}from"../chunks/BxtJXqSk.js";import{C as ut}from"../chunks/bfe51Lp4.js";import{S as dt}from"../chunks/nViY0P2_.js";import{P as mt}from"../chunks/e63iBc32.js";import{S as ht}from"../chunks/BxepmQZ9.js";import{T as Be}from"../chunks/D3-rHoKr.js";import{N as pt}from"../chunks/DJJbHxI3.js";import{F as _t}from"../chunks/o_6EeVyw.js";import{X as vt}from"../chunks/PhEylauG.js";const{document:we}=Je;function Ne(f,e,t){const r=f.slice();return r[31]=e[t],r}function Ve(f,e,t){const r=f.slice();return r[34]=e[t],r[36]=t,r}function gt(f){let e,t,r;return t=new ht({props:{className:"size-5"}}),{c(){e=w("div"),G(t.$$.fragment),this.h()},l(l){e=k(l,"DIV",{class:!0});var a=y(e);X(t.$$.fragment,a),a.forEach(u),this.h()},h(){m(e,"class","w-full h-full flex justify-center items-center")},m(l,a){j(l,e,a),J(t,e,null),r=!0},p:ie,i(l){r||(L(t.$$.fragment,l),r=!0)},o(l){H(t.$$.fragment,l),r=!1},d(l){l&&u(e),z(t)}}}function bt(f){let e,t,r,l,a,s,n,c,h,d,D,o,p,$,A,V,T,q,O,F,M,B,P,ee;function S(_){f[14](_)}let C={title:f[1].t("Delete note?"),$$slots:{default:[$t]},$$scope:{ctx:f}};f[5]!==void 0&&(C.show=f[5]),e=new ut({props:C}),Fe.push(()=>Re(e,"show",S)),e.$on("confirm",f[15]),c=new dt({props:{className:"size-3.5"}});let E=f[0]&&Te(f);const K=[kt,wt],U=[];function le(_,g){return g[0]&16&&(A=null),A==null&&(A=Object.keys(_[4]).length>0),A?0:1}return V=le(f,[-1,-1]),T=U[V]=K[V](f),M=new Be({props:{content:f[1].t("Create Note"),$$slots:{default:[Nt]},$$scope:{ctx:f}}}),{c(){G(e.$$.fragment),r=W(),l=w("div"),a=w("div"),s=w("div"),n=w("div"),G(c.$$.fragment),h=W(),d=w("input"),o=W(),E&&E.c(),p=W(),$=w("div"),T.c(),q=W(),O=w("div"),F=w("div"),G(M.$$.fragment),this.h()},l(_){X(e.$$.fragment,_),r=R(_),l=k(_,"DIV",{class:!0});var g=y(l);a=k(g,"DIV",{class:!0});var I=y(a);s=k(I,"DIV",{class:!0});var i=y(s);n=k(i,"DIV",{class:!0});var b=y(n);X(c.$$.fragment,b),b.forEach(u),h=R(i),d=k(i,"INPUT",{class:!0,placeholder:!0}),o=R(i),E&&E.l(i),i.forEach(u),I.forEach(u),g.forEach(u),p=R(_),$=k(_,"DIV",{class:!0});var N=y($);T.l(N),N.forEach(u),q=R(_),O=k(_,"DIV",{class:!0});var x=y(O);F=k(x,"DIV",{class:!0});var Y=y(F);X(M.$$.fragment,Y),Y.forEach(u),x.forEach(u),this.h()},h(){m(n,"class","self-center ml-1 mr-3"),m(d,"class","w-full text-sm py-1 rounded-r-xl outline-hidden bg-transparent"),m(d,"placeholder",D=f[1].t("Search Notes")),m(s,"class","flex flex-1 items-center"),m(a,"class","flex flex-1 items-center w-full space-x-2"),m(l,"class","flex flex-col gap-1 px-3.5"),m($,"class","px-4.5 @container h-full pt-2"),m(F,"class","flex gap-0.5 justify-end w-full"),m(O,"class","absolute bottom-0 left-0 right-0 p-5 max-w-full flex justify-end")},m(_,g){J(e,_,g),j(_,r,g),j(_,l,g),v(l,a),v(a,s),v(s,n),J(c,n,null),v(s,h),v(s,d),ke(d,f[0]),v(s,o),E&&E.m(s,null),j(_,p,g),j(_,$,g),U[V].m($,null),j(_,q,g),j(_,O,g),v(O,F),J(M,F,null),B=!0,P||(ee=pe(d,"input",f[16]),P=!0)},p(_,g){const I={};g[0]&2&&(I.title=_[1].t("Delete note?")),g[0]&10|g[1]&64&&(I.$$scope={dirty:g,ctx:_}),!t&&g[0]&32&&(t=!0,I.show=_[5],Pe(()=>t=!1)),e.$set(I),(!B||g[0]&2&&D!==(D=_[1].t("Search Notes")))&&m(d,"placeholder",D),g[0]&1&&d.value!==_[0]&&ke(d,_[0]),_[0]?E?(E.p(_,g),g[0]&1&&L(E,1)):(E=Te(_),E.c(),L(E,1),E.m(s,null)):E&&(ce(),H(E,1,1,()=>{E=null}),fe());let i=V;V=le(_,g),V===i?U[V].p(_,g):(ce(),H(U[i],1,1,()=>{U[i]=null}),fe(),T=U[V],T?T.p(_,g):(T=U[V]=K[V](_),T.c()),L(T,1),T.m($,null));const b={};g[0]&2&&(b.content=_[1].t("Create Note")),g[1]&64&&(b.$$scope={dirty:g,ctx:_}),M.$set(b)},i(_){B||(L(e.$$.fragment,_),L(c.$$.fragment,_),L(E),L(T),L(M.$$.fragment,_),B=!0)},o(_){H(e.$$.fragment,_),H(c.$$.fragment,_),H(E),H(T),H(M.$$.fragment,_),B=!1},d(_){_&&(u(r),u(l),u(p),u($),u(q),u(O)),z(e,_),z(c),E&&E.d(),U[V].d(),z(M),P=!1,ee()}}}function $t(f){let e,t=f[1].t("This will delete")+"",r,l,a,s=f[3].title+"",n,c;return{c(){e=w("div"),r=Q(t),l=W(),a=w("span"),n=Q(s),c=Q("."),this.h()},l(h){e=k(h,"DIV",{class:!0});var d=y(e);r=Z(d,t),l=R(d),a=k(d,"SPAN",{class:!0});var D=y(a);n=Z(D,s),D.forEach(u),c=Z(d,"."),d.forEach(u),this.h()},h(){m(a,"class","font-semibold"),m(e,"class","text-sm text-gray-500")},m(h,d){j(h,e,d),v(e,r),v(e,l),v(e,a),v(a,n),v(e,c)},p(h,d){d[0]&2&&t!==(t=h[1].t("This will delete")+"")&&te(r,t),d[0]&8&&s!==(s=h[3].title+"")&&te(n,s)},d(h){h&&u(e)}}}function Te(f){let e,t,r,l,a,s;return r=new vt({props:{className:"size-3",strokeWidth:"2"}}),{c(){e=w("div"),t=w("button"),G(r.$$.fragment),this.h()},l(n){e=k(n,"DIV",{class:!0});var c=y(e);t=k(c,"BUTTON",{class:!0});var h=y(t);X(r.$$.fragment,h),h.forEach(u),c.forEach(u),this.h()},h(){m(t,"class","p-0.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-900 transition"),m(e,"class","self-center pl-1.5 translate-y-[0.5px] rounded-l-xl bg-transparent")},m(n,c){j(n,e,c),v(e,t),J(r,t,null),l=!0,a||(s=pe(t,"click",f[17]),a=!0)},p:ie,i(n){l||(L(r.$$.fragment,n),l=!0)},o(n){H(r.$$.fragment,n),l=!1},d(n){n&&u(e),z(r),a=!1,s()}}}function wt(f){let e,t,r,l=f[1].t("No Notes")+"",a,s,n,c=f[1].t("Create your first note by clicking on the plus button below.")+"",h;return{c(){e=w("div"),t=w("div"),r=w("div"),a=Q(l),s=W(),n=w("div"),h=Q(c),this.h()},l(d){e=k(d,"DIV",{class:!0});var D=y(e);t=k(D,"DIV",{class:!0});var o=y(t);r=k(o,"DIV",{class:!0});var p=y(r);a=Z(p,l),p.forEach(u),s=R(o),n=k(o,"DIV",{class:!0});var $=y(n);h=Z($,c),$.forEach(u),o.forEach(u),D.forEach(u),this.h()},h(){m(r,"class","text-xl font-medium text-gray-400 dark:text-gray-600"),m(n,"class","mt-1 text-sm text-gray-300 dark:text-gray-700"),m(t,"class","pb-20 text-center"),m(e,"class","w-full h-full flex flex-col items-center justify-center")},m(d,D){j(d,e,D),v(e,t),v(t,r),v(r,a),v(t,s),v(t,n),v(n,h)},p(d,D){D[0]&2&&l!==(l=d[1].t("No Notes")+"")&&te(a,l),D[0]&2&&c!==(c=d[1].t("Create your first note by clicking on the plus button below.")+"")&&te(h,c)},i:ie,o:ie,d(d){d&&u(e)}}}function kt(f){let e,t,r=he(Object.keys(f[4])),l=[];for(let s=0;s<r.length;s+=1)l[s]=Se(Ne(f,r,s));const a=s=>H(l[s],1,1,()=>{l[s]=null});return{c(){e=w("div");for(let s=0;s<l.length;s+=1)l[s].c();this.h()},l(s){e=k(s,"DIV",{class:!0});var n=y(e);for(let c=0;c<l.length;c+=1)l[c].l(n);n.forEach(u),this.h()},h(){m(e,"class","pb-10")},m(s,n){j(s,e,n);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(e,null);t=!0},p(s,n){if(n[0]&1082){r=he(Object.keys(s[4]));let c;for(c=0;c<r.length;c+=1){const h=Ne(s,r,c);l[c]?(l[c].p(h,n),L(l[c],1)):(l[c]=Se(h),l[c].c(),L(l[c],1),l[c].m(e,null))}for(ce(),c=r.length;c<l.length;c+=1)a(c);fe()}},i(s){if(!t){for(let n=0;n<r.length;n+=1)L(l[n]);t=!0}},o(s){l=l.filter(Boolean);for(let n=0;n<l.length;n+=1)H(l[n]);t=!1},d(s){s&&u(e),We(l,s)}}}function yt(f){let e,t,r;return t=new ft({props:{className:"size-5"}}),{c(){e=w("button"),G(t.$$.fragment),this.h()},l(l){e=k(l,"BUTTON",{class:!0,type:!0});var a=y(e);X(t.$$.fragment,a),a.forEach(u),this.h()},h(){m(e,"class","self-center w-fit text-sm p-1 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-xl"),m(e,"type","button")},m(l,a){j(l,e,a),J(t,e,null),r=!0},p:ie,i(l){r||(L(t.$$.fragment,l),r=!0)},o(l){H(t.$$.fragment,l),r=!1},d(l){l&&u(e),z(t)}}}function Dt(f){let e=f[1].t("No content")+"",t;return{c(){t=Q(e)},l(r){t=Z(r,e)},m(r,l){j(r,t,l)},p(r,l){l[0]&2&&e!==(e=r[1].t("No content")+"")&&te(t,e)},d(r){r&&u(t)}}}function Et(f){var r,l;let e=((l=(r=f[34].data)==null?void 0:r.content)==null?void 0:l.md)+"",t;return{c(){t=Q(e)},l(a){t=Z(a,e)},m(a,s){j(a,t,s)},p(a,s){var n,c;s[0]&16&&e!==(e=((c=(n=a[34].data)==null?void 0:n.content)==null?void 0:c.md)+"")&&te(t,e)},d(a){a&&u(t)}}}function It(f){var l,a,s,n;let e,t=f[1].t("By {{name}}",{name:Ie(((a=(l=f[34])==null?void 0:l.user)==null?void 0:a.name)??((n=(s=f[34])==null?void 0:s.user)==null?void 0:n.email)??f[1].t("Deleted User"))})+"",r;return{c(){e=w("div"),r=Q(t),this.h()},l(c){e=k(c,"DIV",{class:!0});var h=y(e);r=Z(h,t),h.forEach(u),this.h()},h(){m(e,"class","shrink-0 text-gray-500")},m(c,h){j(c,e,h),v(e,r)},p(c,h){var d,D,o,p;h[0]&18&&t!==(t=c[1].t("By {{name}}",{name:Ie(((D=(d=c[34])==null?void 0:d.user)==null?void 0:D.name)??((p=(o=c[34])==null?void 0:o.user)==null?void 0:p.email)??c[1].t("Deleted User"))})+"")&&te(r,t)},d(c){c&&u(e)}}}function xe(f,e){var le,_;let t,r,l,a,s,n,c=e[34].title+"",h,d,D,o,p,$,A,V,T,q=oe(e[34].updated_at/1e6).fromNow()+"",O,F,M,B,P;function ee(...g){return e[18](e[34],...g)}function S(){return e[19](e[34])}function C(){return e[20](e[34])}o=new pt({props:{onDownload:ee,onCopyLink:S,onDelete:C,$$slots:{default:[yt]},$$scope:{ctx:e}}});function E(g,I){var i,b;return(b=(i=g[34].data)==null?void 0:i.content)!=null&&b.md?Et:Dt}let K=E(e),U=K(e);return M=new Be({props:{content:((_=(le=e[34])==null?void 0:le.user)==null?void 0:_.email)??e[1].t("Deleted User"),className:"flex shrink-0",placement:"top-start",$$slots:{default:[It]},$$scope:{ctx:e}}}),{key:f,first:null,c(){t=w("div"),r=w("div"),l=w("a"),a=w("div"),s=w("div"),n=w("div"),h=Q(c),d=W(),D=w("div"),G(o.$$.fragment),p=W(),$=w("div"),U.c(),A=W(),V=w("div"),T=w("div"),O=Q(q),F=W(),G(M.$$.fragment),this.h()},l(g){t=k(g,"DIV",{class:!0});var I=y(t);r=k(I,"DIV",{class:!0});var i=y(r);l=k(i,"A",{href:!0,class:!0});var b=y(l);a=k(b,"DIV",{class:!0});var N=y(a);s=k(N,"DIV",{class:!0});var x=y(s);n=k(x,"DIV",{class:!0});var Y=y(n);h=Z(Y,c),Y.forEach(u),d=R(x),D=k(x,"DIV",{});var ae=y(D);X(o.$$.fragment,ae),ae.forEach(u),x.forEach(u),p=R(N),$=k(N,"DIV",{class:!0});var re=y($);U.l(re),re.forEach(u),N.forEach(u),A=R(b),V=k(b,"DIV",{class:!0});var se=y(V);T=k(se,"DIV",{});var ue=y(T);O=Z(ue,q),ue.forEach(u),F=R(se),X(M.$$.fragment,se),se.forEach(u),b.forEach(u),i.forEach(u),I.forEach(u),this.h()},h(){m(n,"class","font-semibold line-clamp-1 capitalize"),m(s,"class","flex items-center gap-2 self-center mb-1 justify-between"),m($,"class","text-xs text-gray-500 dark:text-gray-500 mb-3 line-clamp-3 min-h-10"),m(a,"class","flex-1"),m(V,"class","text-xs px-0.5 w-full flex justify-between items-center"),m(l,"href",B=`/notes/${e[34].id}`),m(l,"class","w-full -translate-y-0.5 flex flex-col justify-between"),m(r,"class","flex flex-1 space-x-4 cursor-pointer w-full"),m(t,"class","flex space-x-4 cursor-pointer w-full px-4.5 py-4 bg-gray-50 dark:bg-gray-850 dark:hover:bg-white/5 hover:bg-black/5 rounded-xl transition"),this.first=t},m(g,I){j(g,t,I),v(t,r),v(r,l),v(l,a),v(a,s),v(s,n),v(n,h),v(s,d),v(s,D),J(o,D,null),v(a,p),v(a,$),U.m($,null),v(l,A),v(l,V),v(V,T),v(T,O),v(V,F),J(M,V,null),P=!0},p(g,I){var N,x;e=g,(!P||I[0]&16)&&c!==(c=e[34].title+"")&&te(h,c);const i={};I[0]&24&&(i.onDownload=ee),I[0]&18&&(i.onCopyLink=S),I[0]&56&&(i.onDelete=C),I[1]&64&&(i.$$scope={dirty:I,ctx:e}),o.$set(i),K===(K=E(e))&&U?U.p(e,I):(U.d(1),U=K(e),U&&(U.c(),U.m($,null))),(!P||I[0]&16)&&q!==(q=oe(e[34].updated_at/1e6).fromNow()+"")&&te(O,q);const b={};I[0]&18&&(b.content=((x=(N=e[34])==null?void 0:N.user)==null?void 0:x.email)??e[1].t("Deleted User")),I[0]&18|I[1]&64&&(b.$$scope={dirty:I,ctx:e}),M.$set(b),(!P||I[0]&16&&B!==(B=`/notes/${e[34].id}`))&&m(l,"href",B)},i(g){P||(L(o.$$.fragment,g),L(M.$$.fragment,g),P=!0)},o(g){H(o.$$.fragment,g),H(M.$$.fragment,g),P=!1},d(g){g&&u(t),z(o),U.d(),z(M)}}}function Se(f){let e,t=f[1].t(f[31])+"",r,l,a,s=[],n=new Map,c,h,d=he(f[4][f[31]]);const D=o=>o[34].id;for(let o=0;o<d.length;o+=1){let p=Ve(f,d,o),$=D(p);n.set($,s[o]=xe($,p))}return{c(){e=w("div"),r=Q(t),l=W(),a=w("div");for(let o=0;o<s.length;o+=1)s[o].c();c=W(),this.h()},l(o){e=k(o,"DIV",{class:!0});var p=y(e);r=Z(p,t),p.forEach(u),l=R(o),a=k(o,"DIV",{class:!0});var $=y(a);for(let A=0;A<s.length;A+=1)s[A].l($);c=R($),$.forEach(u),this.h()},h(){m(e,"class","w-full text-xs text-gray-500 dark:text-gray-500 font-medium pb-2.5"),m(a,"class","mb-5 gap-2.5 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5")},m(o,p){j(o,e,p),v(e,r),j(o,l,p),j(o,a,p);for(let $=0;$<s.length;$+=1)s[$]&&s[$].m(a,null);v(a,c),h=!0},p(o,p){(!h||p[0]&18)&&t!==(t=o[1].t(o[31])+"")&&te(r,t),p[0]&1082&&(d=he(o[4][o[31]]),ce(),s=ze(s,p,D,1,o,d,n,a,Ke,xe,c,Ve),fe())},i(o){if(!h){for(let p=0;p<d.length;p+=1)L(s[p]);h=!0}},o(o){for(let p=0;p<s.length;p+=1)H(s[p]);h=!1},d(o){o&&(u(e),u(l),u(a));for(let p=0;p<s.length;p+=1)s[p].d()}}}function Nt(f){let e,t,r,l,a;return t=new mt({props:{className:"size-4.5",strokeWidth:"2.5"}}),{c(){e=w("button"),G(t.$$.fragment),this.h()},l(s){e=k(s,"BUTTON",{class:!0,type:!0});var n=y(e);X(t.$$.fragment,n),n.forEach(u),this.h()},h(){m(e,"class","cursor-pointer p-2.5 flex rounded-full border border-gray-50 bg-white dark:border-none dark:bg-gray-850 hover:bg-gray-50 dark:hover:bg-gray-800 transition shadow-xl"),m(e,"type","button")},m(s,n){j(s,e,n),J(t,e,null),r=!0,l||(a=pe(e,"click",f[21]),l=!0)},p:ie,i(s){r||(L(t.$$.fragment,s),r=!0)},o(s){H(t.$$.fragment,s),r=!1},d(s){s&&u(e),z(t),l=!1,a()}}}function Vt(f){let e,t,r,l,a,s,n,c;we.title=e=`
		`+f[1].t("Notes")+" • "+f[7]+`
	`,r=new _t({props:{show:f[6]}});const h=[bt,gt],d=[];function D(o,p){return o[2]?0:1}return s=D(f),n=d[s]=h[s](f),{c(){t=W(),G(r.$$.fragment),l=W(),a=w("div"),n.c(),this.h()},l(o){He("svelte-16ir3op",we.head).forEach(u),t=R(o),X(r.$$.fragment,o),l=R(o),a=k(o,"DIV",{id:!0,class:!0});var $=y(a);n.l($),$.forEach(u),this.h()},h(){m(a,"id","notes-container"),m(a,"class","w-full min-h-full h-full")},m(o,p){j(o,t,p),J(r,o,p),j(o,l,p),j(o,a,p),d[s].m(a,null),c=!0},p(o,p){(!c||p[0]&130)&&e!==(e=`
		`+o[1].t("Notes")+" • "+o[7]+`
	`)&&(we.title=e);const $={};p[0]&64&&($.show=o[6]),r.$set($);let A=s;s=D(o),s===A?d[s].p(o,p):(ce(),H(d[A],1,1,()=>{d[A]=null}),fe(),n=d[s],n?n.p(o,p):(n=d[s]=h[s](o),n.c()),L(n,1),n.m(a,null))},i(o){c||(L(r.$$.fragment,o),L(n),c=!0)},o(o){H(r.$$.fragment,o),H(n),c=!1},d(o){o&&(u(t),u(l),u(a)),z(r,o),d[s].d()}}}function Tt(f,e,t){let r,l;de(f,qe,i=>t(7,l=i));const{saveAs:a}=Qe;oe.extend(rt),oe.extend(lt);async function s(i){for(const b of i)try{oe.locale(b);break}catch(N){console.error(`Could not load locale '${b}':`,N)}}const n=Le("i18n");de(f,n,i=>t(1,r=i));let c=!1,h="",d=[],D=null,o=null,p={},$=!1;const A=i=>{if(!Array.isArray(i))return{};const b={};for(const N of i){const x=it(N.updated_at/1e9);b[x]||(b[x]=[]),b[x].push({...N,timeRange:x})}return b},V=async()=>{t(12,d=await at(localStorage.token,!0)),t(13,D=new Ze(d,{keys:["title"]}))},T=async()=>{const i=await Ee(localStorage.token,{title:oe().format("YYYY-MM-DD"),data:{content:{json:null,html:"",md:""}},meta:null,access_control:{}}).catch(b=>(ne.error(`${b}`),null));i&&st(`/notes/${i.id}`)},q=async i=>{if(i==="md"){const b=new Blob([o.data.content.md],{type:"text/markdown"});a(b,`${o.title}.md`)}else i==="pdf"&&await O(o)},O=async i=>{var b,N;try{const ae=((N=(b=i.data)==null?void 0:b.content)==null?void 0:N.html)??"";let re;ae instanceof HTMLElement?re=ae:(re=document.createElement("div"),re.innerHTML=ae,document.body.appendChild(re));const se=await et(re,{useCORS:!0,scale:2,width:1024,windowWidth:1024,windowHeight:1400});ae instanceof HTMLElement||document.body.removeChild(re);const ue=se.toDataURL("image/png"),me=new tt("p","mm","a4"),_e=210,ve=297,ge=se.height*_e/se.width;let be=ge,$e=0;for(me.addImage(ue,"PNG",0,$e,_e,ge),be-=ve;be>0;)$e-=ve,me.addPage(),me.addImage(ue,"PNG",0,$e,_e,ge),be-=ve;me.save(`${i.title}.pdf`)}catch(x){console.error("Error generating PDF",x),ne.error(`${x}`)}},F=async i=>{await nt(localStorage.token,i).catch(N=>(ne.error(`${N}`),null))&&V()},M=async i=>{for(const b of i){if(b.type!=="text/markdown"){ne.error(r.t("Only markdown files are allowed"));return}const N=new FileReader;N.onload=async x=>{const Y=x.target.result;let ae=b.name.replace(/\.md$/,"");if(typeof Y!="string"){ne.error(r.t("Invalid file content"));return}await Ee(localStorage.token,{title:ae,data:{content:{json:null,html:ct.parse(Y??""),md:Y}},meta:null,access_control:{}}).catch(se=>(ne.error(`${se}`),null))&&V()},N.readAsText(b)}};let B=!1;const P=i=>{var b,N;i.preventDefault(),(N=(b=i.dataTransfer)==null?void 0:b.types)!=null&&N.includes("Files")?t(6,B=!0):t(6,B=!1)},ee=()=>{t(6,B=!1)},S=async i=>{var b,N;if(i.preventDefault(),(b=i.dataTransfer)!=null&&b.files){const x=Array.from((N=i.dataTransfer)==null?void 0:N.files);x&&x.length>0&&M(x)}t(6,B=!1)};Ae(()=>{const i=document.getElementById("notes-container");i&&(i==null||i.removeEventListener("dragover",P),i==null||i.removeEventListener("drop",S),i==null||i.removeEventListener("dragleave",ee))}),Oe(async()=>{await V(),t(2,c=!0);const i=document.getElementById("notes-container");i==null||i.addEventListener("dragover",P),i==null||i.addEventListener("drop",S),i==null||i.addEventListener("dragleave",ee)});function C(i){$=i,t(5,$)}const E=()=>{F(o.id),t(5,$=!1)};function K(){h=this.value,t(0,h)}const U=()=>{t(0,h="")},le=(i,b)=>{t(3,o=i),q(b)},_=async i=>{const b=window.location.origin;await ot(`${b}/notes/${i.id}`)?ne.success(r.t("Copied link to clipboard")):ne.error(r.t("Failed to copy link"))},g=i=>{t(3,o=i),t(5,$=!0)},I=async()=>{T()};return f.$$.update=()=>{f.$$.dirty[0]&2&&s(r.languages),f.$$.dirty[0]&12289&&D&&t(4,p=A(h?D.search(h).map(i=>i.item):d))},[h,r,c,o,p,$,B,l,n,T,q,F,d,D,C,E,K,U,le,_,g,I]}class xt extends je{constructor(e){super(),Me(this,e,Tt,Vt,Ue,{},null,[-1,-1])}}function Ce(f){var r;let e,t;return e=new Xe({props:{className:"max-w-[240px]",role:(r=f[2])==null?void 0:r.role,help:!0,$$slots:{default:[St]},$$scope:{ctx:f}}}),e.$on("show",f[5]),{c(){G(e.$$.fragment)},l(l){X(e.$$.fragment,l)},m(l,a){J(e,l,a),t=!0},p(l,a){var n;const s={};a&4&&(s.role=(n=l[2])==null?void 0:n.role),a&68&&(s.$$scope={dirty:a,ctx:l}),e.$set(s)},i(l){t||(L(e.$$.fragment,l),t=!0)},o(l){H(e.$$.fragment,l),t=!1},d(l){z(e,l)}}}function St(f){let e,t,r,l;return{c(){e=w("button"),t=w("div"),r=w("img"),this.h()},l(a){e=k(a,"BUTTON",{class:!0,"aria-label":!0});var s=y(e);t=k(s,"DIV",{class:!0});var n=y(t);r=k(n,"IMG",{src:!0,class:!0,alt:!0,draggable:!0}),n.forEach(u),s.forEach(u),this.h()},h(){var a;ye(r.src,l=(a=f[2])==null?void 0:a.profile_image_url)||m(r,"src",l),m(r,"class","size-6 object-cover rounded-full"),m(r,"alt","User profile"),m(r,"draggable","false"),m(t,"class","self-center"),m(e,"class","select-none flex rounded-xl p-1.5 w-full hover:bg-gray-50 dark:hover:bg-gray-850 transition"),m(e,"aria-label","User Menu")},m(a,s){j(a,e,s),v(e,t),v(t,r)},p(a,s){var n;s&4&&!ye(r.src,l=(n=a[2])==null?void 0:n.profile_image_url)&&m(r,"src",l)},d(a){a&&u(e)}}}function Ct(f){let e,t,r,l,a,s,n,c,h,d,D,o,p,$=f[1].t("Notes")+"",A,V,T,q,O,F,M,B,P,ee;n=new Ge({});let S=f[2]!==void 0&&f[2]!==null&&Ce(f);return F=new xt({}),{c(){e=w("div"),t=w("nav"),r=w("div"),l=w("div"),a=w("button"),s=w("div"),G(n.$$.fragment),h=W(),d=w("div"),D=w("div"),o=w("div"),p=w("a"),A=Q($),V=W(),T=w("div"),S&&S.c(),q=W(),O=w("div"),G(F.$$.fragment),this.h()},l(C){e=k(C,"DIV",{class:!0});var E=y(e);t=k(E,"NAV",{class:!0});var K=y(t);r=k(K,"DIV",{class:!0});var U=y(r);l=k(U,"DIV",{class:!0});var le=y(l);a=k(le,"BUTTON",{id:!0,class:!0,"aria-label":!0});var _=y(a);s=k(_,"DIV",{class:!0});var g=y(s);X(n.$$.fragment,g),g.forEach(u),_.forEach(u),le.forEach(u),h=R(U),d=k(U,"DIV",{class:!0});var I=y(d);D=k(I,"DIV",{class:!0});var i=y(D);o=k(i,"DIV",{class:!0});var b=y(o);p=k(b,"A",{class:!0,href:!0});var N=y(p);A=Z(N,$),N.forEach(u),b.forEach(u),i.forEach(u),V=R(I),T=k(I,"DIV",{class:!0});var x=y(T);S&&S.l(x),x.forEach(u),I.forEach(u),U.forEach(u),K.forEach(u),q=R(E),O=k(E,"DIV",{class:!0});var Y=y(O);X(F.$$.fragment,Y),Y.forEach(u),E.forEach(u),this.h()},h(){m(s,"class","m-auto self-center"),m(a,"id","sidebar-toggle-button"),m(a,"class","cursor-pointer p-1.5 flex rounded-xl hover:bg-gray-100 dark:hover:bg-gray-850 transition"),m(a,"aria-label","Toggle Sidebar"),m(l,"class",c=(f[0]?"md:hidden":"")+" flex flex-none items-center"),m(p,"class","min-w-fit transition"),m(p,"href","/notes"),m(o,"class","flex gap-1 scrollbar-none overflow-x-auto w-fit text-center text-sm font-medium bg-transparent py-1 touch-auto pointer-events-auto"),m(D,"class",""),m(T,"class","self-center flex items-center gap-1"),m(d,"class","ml-2 py-0.5 self-center flex items-center justify-between w-full"),m(r,"class","flex items-center"),m(t,"class","px-2 pt-1 backdrop-blur-xl w-full drag-region"),m(O,"class","pb-1 flex-1 max-h-full overflow-y-auto @container"),m(e,"class",M="flex flex-col w-full h-screen max-h-[100dvh] transition-width duration-200 ease-in-out "+(f[0]?"md:max-w-[calc(100%-260px)]":"")+" max-w-full")},m(C,E){j(C,e,E),v(e,t),v(t,r),v(r,l),v(l,a),v(a,s),J(n,s,null),v(r,h),v(r,d),v(d,D),v(D,o),v(o,p),v(p,A),v(d,V),v(d,T),S&&S.m(T,null),v(e,q),v(e,O),J(F,O,null),B=!0,P||(ee=pe(a,"click",f[4]),P=!0)},p(C,[E]){(!B||E&1&&c!==(c=(C[0]?"md:hidden":"")+" flex flex-none items-center"))&&m(l,"class",c),(!B||E&2)&&$!==($=C[1].t("Notes")+"")&&te(A,$),C[2]!==void 0&&C[2]!==null?S?(S.p(C,E),E&4&&L(S,1)):(S=Ce(C),S.c(),L(S,1),S.m(T,null)):S&&(ce(),H(S,1,1,()=>{S=null}),fe()),(!B||E&1&&M!==(M="flex flex-col w-full h-screen max-h-[100dvh] transition-width duration-200 ease-in-out "+(C[0]?"md:max-w-[calc(100%-260px)]":"")+" max-w-full"))&&m(e,"class",M)},i(C){B||(L(n.$$.fragment,C),L(S),L(F.$$.fragment,C),B=!0)},o(C){H(n.$$.fragment,C),H(S),H(F.$$.fragment,C),B=!1},d(C){C&&u(e),z(n),S&&S.d(),z(F),P=!1,ee()}}}function Ut(f,e,t){let r,l,a;de(f,De,h=>t(0,r=h)),de(f,Ye,h=>t(2,a=h));const s=Le("i18n");return de(f,s,h=>t(1,l=h)),[r,l,a,s,()=>{De.set(!r)},h=>{h.detail==="archived-chat"&&showArchivedChats.set(!0)}]}class nl extends je{constructor(e){super(),Me(this,e,Ut,Ct,Ue,{})}}export{nl as component};
//# sourceMappingURL=22.Dqke7UD3.js.map
