import{s as Be,l as at,i as y,d as u,q as jt,J as _n,y as de,k as q,o as G,A as ve,e as E,c as I,a as b,f as c,n as le,r as $t,v as Et,w as It,x as Nt,g as v,t as ue,b as ce,F as pn,B as bt,K as vn,R as yt,u as ie,h as we,S as Vt,G as Ct,j as Oe,p as wt,T as bn,D as Re,E as Pe,C as dt,z as Qn,X as Kn,m as xn}from"../chunks/BId-c6mR.js";import{S as Ae,i as We,g as He,a as N,c as Le,t as $,f as be,b as W,d as U,m as j,e as R}from"../chunks/BuwtTo7z.js";import{p as es}from"../chunks/C5odNooH.js";import{g as ts}from"../chunks/D0QH3NT1.js";import{e as mt}from"../chunks/TjOgUCiB.js";import{c as ns,b as wn,P as ss,h as ls}from"../chunks/Bz_YgWHF.js";import{f as rs}from"../chunks/CyTOOynw.js";import{h as os,E as as}from"../chunks/CACRum6H.js";import{m as At,r as kn,v as is,d as qt,p as fs}from"../chunks/BegY-nht.js";import{t as Ne}from"../chunks/C9Ej3FHW.js";import{g as Wt}from"../chunks/CO0GEo6q.js";import{d as Se,r as us}from"../chunks/I1CDPYOB.js";import"../chunks/BXP-4RTu.js";import{c as cs}from"../chunks/DOWKdgXc.js";import{d as ds}from"../chunks/BQWQRICs.js";import{m as Rt,u as $n,e as Ut,c as ms,a as hs,W as gs,s as Gt,n as _s,d as ps}from"../chunks/8Hnar5y7.js";import{u as vs}from"../chunks/CMcCwyGz.js";import{c as En,g as bs}from"../chunks/CYX7NVFZ.js";import{D as ws,R as ks,V as $s}from"../chunks/CoPTbQFu.js";import{E as Es}from"../chunks/Xa_XUAYR.js";import{M as Is}from"../chunks/CITGD6j7.js";import{C as In}from"../chunks/D1YqqjEs.js";import{X as Nn}from"../chunks/PhEylauG.js";import{S as Ns}from"../chunks/CjuqzrlL.js";import{aL as Cs,aq as Ts}from"../chunks/12rBC9kH.js";import{P as Ds}from"../chunks/SPlDtfKb.js";import{T as Ms}from"../chunks/DdxnJGvs.js";import{T as nt}from"../chunks/D3-rHoKr.js";import{M as Ss}from"../chunks/c8jZi83U.js";import{P as ys}from"../chunks/OrKrFsbH.js";import{A as Vs}from"../chunks/C2Yy2PN8.js";import{b as zs,u as Os,d as Bs}from"../chunks/DKtvgPI5.js";import{S as Cn}from"../chunks/BxepmQZ9.js";import{M as As}from"../chunks/CctDNZq5.js";import{C as Ws}from"../chunks/bfe51Lp4.js";import{F as Us}from"../chunks/BhhVygoZ.js";import{F as js}from"../chunks/o_6EeVyw.js";import"../chunks/CS5v2Vts.js";import{M as Tn,a as Dn,b as Mn}from"../chunks/CKEIsxtJ.js";import{f as Sn}from"../chunks/BjjWzlcN.js";import{C as Rs}from"../chunks/CNXrI3qR.js";import{N as Ps}from"../chunks/DJJbHxI3.js";import{E as Hs}from"../chunks/BxtJXqSk.js";import{S as yn}from"../chunks/DMqr26VW.js";import{C as Ls}from"../chunks/Mx2jeisR.js";function Fs(l){let e,t,n,s,o;e=new ns({props:{class:"relative flex w-2 items-center justify-center bg-background group bg-white dark:shadow-lg dark:bg-gray-850 border-l border-gray-50 dark:border-gray-850",$$slots:{default:[Js]},$$scope:{ctx:l}}});function r(a){l[8](a)}let i={defaultSize:Math.max(20,l[3]),minSize:l[3],onCollapse:l[7],collapsible:!0,class:" z-10 ",$$slots:{default:[qs]},$$scope:{ctx:l}};return l[1]!==void 0&&(i.pane=l[1]),n=new wn({props:i}),de.push(()=>be(n,"pane",r)),{c(){W(e.$$.fragment),t=q(),W(n.$$.fragment)},l(a){U(e.$$.fragment,a),t=G(a),U(n.$$.fragment,a)},m(a,f){j(e,a,f),y(a,t,f),j(n,a,f),o=!0},p(a,f){const d={};f&512&&(d.$$scope={dirty:f,ctx:a}),e.$set(d);const _={};f&8&&(_.defaultSize=Math.max(20,a[3])),f&8&&(_.minSize=a[3]),f&1&&(_.onCollapse=a[7]),f&513&&(_.$$scope={dirty:f,ctx:a}),!s&&f&2&&(s=!0,_.pane=a[1],ve(()=>s=!1)),n.$set(_)},i(a){o||($(e.$$.fragment,a),$(n.$$.fragment,a),o=!0)},o(a){N(e.$$.fragment,a),N(n.$$.fragment,a),o=!1},d(a){a&&u(t),R(e,a),R(n,a)}}}function Ys(l){let e,t,n=l[0]&&Xt(l);return{c(){n&&n.c(),e=at()},l(s){n&&n.l(s),e=at()},m(s,o){n&&n.m(s,o),y(s,e,o),t=!0},p(s,o){s[0]?n?(n.p(s,o),o&1&&$(n,1)):(n=Xt(s),n.c(),$(n,1),n.m(e.parentNode,e)):n&&(He(),N(n,1,1,()=>{n=null}),Le())},i(s){t||($(n),t=!0)},o(s){N(n),t=!1},d(s){s&&u(e),n&&n.d(s)}}}function Js(l){let e,t,n;return t=new Es({props:{className:"size-4 invisible group-hover:visible"}}),{c(){e=E("div"),W(t.$$.fragment),this.h()},l(s){e=I(s,"DIV",{class:!0});var o=b(e);U(t.$$.fragment,o),o.forEach(u),this.h()},h(){c(e,"class","z-10 flex h-7 w-5 items-center justify-center rounded-xs")},m(s,o){y(s,e,o),j(t,e,null),n=!0},p:le,i(s){n||($(t.$$.fragment,s),n=!0)},o(s){N(t.$$.fragment,s),n=!1},d(s){s&&u(e),R(t)}}}function Zt(l){let e,t,n;const s=l[5].default,o=$t(s,l,l[9],null);return{c(){e=E("div"),t=E("div"),o&&o.c(),this.h()},l(r){e=I(r,"DIV",{class:!0});var i=b(e);t=I(i,"DIV",{class:!0});var a=b(t);o&&o.l(a),a.forEach(u),i.forEach(u),this.h()},h(){c(t,"class","w-full pl-1.5 pr-2.5 pt-2 bg-white dark:shadow-lg dark:bg-gray-850 z-40 pointer-events-auto overflow-y-auto scrollbar-hidden flex flex-col"),c(e,"class","flex max-h-full min-h-full")},m(r,i){y(r,e,i),v(e,t),o&&o.m(t,null),n=!0},p(r,i){o&&o.p&&(!n||i&512)&&Et(o,s,r,r[9],n?Nt(s,r[9],i,null):It(r[9]),null)},i(r){n||($(o,r),n=!0)},o(r){N(o,r),n=!1},d(r){r&&u(e),o&&o.d(r)}}}function qs(l){let e,t,n=l[0]&&Zt(l);return{c(){n&&n.c(),e=at()},l(s){n&&n.l(s),e=at()},m(s,o){n&&n.m(s,o),y(s,e,o),t=!0},p(s,o){s[0]?n?(n.p(s,o),o&1&&$(n,1)):(n=Zt(s),n.c(),$(n,1),n.m(e.parentNode,e)):n&&(He(),N(n,1,1,()=>{n=null}),Le())},i(s){t||($(n),t=!0)},o(s){N(n),t=!1},d(s){s&&u(e),n&&n.d(s)}}}function Xt(l){let e,t;return e=new ws({props:{show:l[0],onClose:l[6],$$slots:{default:[Gs]},$$scope:{ctx:l}}}),{c(){W(e.$$.fragment)},l(n){U(e.$$.fragment,n)},m(n,s){j(e,n,s),t=!0},p(n,s){const o={};s&1&&(o.show=n[0]),s&1&&(o.onClose=n[6]),s&512&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){R(e,n)}}}function Gs(l){let e,t;const n=l[5].default,s=$t(n,l,l[9],null);return{c(){e=E("div"),s&&s.c(),this.h()},l(o){e=I(o,"DIV",{class:!0});var r=b(e);s&&s.l(r),r.forEach(u),this.h()},h(){c(e,"class","px-3.5 py-2.5 h-screen max-h-dvh flex flex-col")},m(o,r){y(o,e,r),s&&s.m(e,null),t=!0},p(o,r){s&&s.p&&(!t||r&512)&&Et(s,n,o,o[9],t?Nt(n,o[9],r,null):It(o[9]),null)},i(o){t||($(s,o),t=!0)},o(o){N(s,o),t=!1},d(o){o&&u(e),s&&s.d(o)}}}function Zs(l){let e,t,n,s;const o=[Ys,Fs],r=[];function i(a,f){return a[2]?a[0]?1:-1:0}return~(e=i(l))&&(t=r[e]=o[e](l)),{c(){t&&t.c(),n=at()},l(a){t&&t.l(a),n=at()},m(a,f){~e&&r[e].m(a,f),y(a,n,f),s=!0},p(a,[f]){let d=e;e=i(a),e===d?~e&&r[e].p(a,f):(t&&(He(),N(r[d],1,1,()=>{r[d]=null}),Le()),~e?(t=r[e],t?t.p(a,f):(t=r[e]=o[e](a),t.c()),$(t,1),t.m(n.parentNode,n)):t=null)},i(a){s||($(t),s=!0)},o(a){N(t),s=!1},d(a){a&&u(n),~e&&r[e].d(a)}}}function Xs(l,e,t){let{$$slots:n={},$$scope:s}=e,{show:o=!1}=e,{pane:r=null}=e,{containerId:i="note-container"}=e,a,f=!1,d=0;const _=async k=>{k.matches?t(2,f=!0):(t(2,f=!1),t(1,r=null))};jt(()=>{a=window.matchMedia("(min-width: 1000px)"),a.addEventListener("change",_),_(a);const k=document.getElementById(i);t(3,d=Math.floor(400/k.clientWidth*100)),new ResizeObserver(w=>{for(let g of w){const H=400/g.contentRect.width*100;t(3,d=Math.floor(H)),o&&r&&r.isExpanded()&&r.getSize()<d&&r.resize(d)}}).observe(k)}),_n(()=>{a.removeEventListener("change",_)});const D=()=>{t(0,o=!1)},V=()=>{t(0,o=!1)};function T(k){r=k,t(1,r)}return l.$$set=k=>{"show"in k&&t(0,o=k.show),"pane"in k&&t(1,r=k.pane),"containerId"in k&&t(4,i=k.containerId),"$$scope"in k&&t(9,s=k.$$scope)},[o,r,f,d,i,n,D,V,T,s]}class Qs extends Ae{constructor(e){super(),We(this,e,Xs,Zs,Be,{show:0,pane:1,containerId:4})}}function Qt(l,e,t){const n=l.slice();return n[7]=e[t],n}function Kt(l){let e,t=l[7].name+"",n,s;return{c(){e=E("option"),n=ue(t),this.h()},l(o){e=I(o,"OPTION",{class:!0});var r=b(e);n=ce(r,t),r.forEach(u),this.h()},h(){e.__value=s=l[7].id,bt(e,e.__value),c(e,"class","bg-gray-50 dark:bg-gray-700")},m(o,r){y(o,e,r),v(e,n)},p(o,r){r&8&&t!==(t=o[7].name+"")&&we(n,t),r&8&&s!==(s=o[7].id)&&(e.__value=s,bt(e,e.__value))},d(o){o&&u(e)}}}function Ks(l){let e,t,n,s,o,r,i,a=l[2].t("Settings")+"",f,d,_,D,V,T="Model",k,m,w,g,p=l[2].t("Select a model")+"",H,M,z,L,J;s=new Nn({props:{className:"size-5",strokeWidth:"2.5"}});let O=mt(l[3].filter(xt)),Y=[];for(let S=0;S<O.length;S+=1)Y[S]=Kt(Qt(l,O,S));return{c(){e=E("div"),t=E("div"),n=E("button"),W(s.$$.fragment),o=q(),r=E("div"),i=E("div"),f=ue(a),d=q(),_=E("div"),D=E("div"),V=E("div"),V.textContent=T,k=q(),m=E("div"),w=E("select"),g=E("option"),H=ue(p),M=q();for(let S=0;S<Y.length;S+=1)Y[S].c();this.h()},l(S){e=I(S,"DIV",{class:!0});var Z=b(e);t=I(Z,"DIV",{class:!0});var ee=b(t);n=I(ee,"BUTTON",{class:!0});var ke=b(n);U(s.$$.fragment,ke),ke.forEach(u),ee.forEach(u),o=G(Z),r=I(Z,"DIV",{class:!0});var me=b(r);i=I(me,"DIV",{});var ye=b(i);f=ce(ye,a),ye.forEach(u),me.forEach(u),Z.forEach(u),d=G(S),_=I(S,"DIV",{class:!0});var se=b(_);D=I(se,"DIV",{});var P=b(D);V=I(P,"DIV",{class:!0,"data-svelte-h":!0}),pn(V)!=="svelte-vz1bvh"&&(V.textContent=T),k=G(P),m=I(P,"DIV",{class:!0});var X=b(m);w=I(X,"SELECT",{class:!0});var re=b(w);g=I(re,"OPTION",{class:!0});var B=b(g);H=ce(B,p),M=G(B),B.forEach(u);for(let K=0;K<Y.length;K+=1)Y[K].l(re);re.forEach(u),X.forEach(u),P.forEach(u),se.forEach(u),this.h()},h(){c(n,"class","p-0.5 bg-transparent transition rounded-lg"),c(t,"class","-translate-x-1.5 flex items-center"),c(r,"class","font-medium text-base flex items-center gap-1"),c(e,"class","flex items-center mb-1.5 pt-1.5"),c(V,"class","text-xs font-medium mb-1"),g.__value="",bt(g,g.__value),c(g,"class","bg-gray-50 dark:bg-gray-700"),g.disabled=!0,c(w,"class","w-full bg-transparent text-sm outline-hidden"),l[1]===void 0&&vn(()=>l[6].call(w)),c(m,"class","w-full"),c(_,"class","mt-1")},m(S,Z){y(S,e,Z),v(e,t),v(t,n),j(s,n,null),v(e,o),v(e,r),v(r,i),v(i,f),y(S,d,Z),y(S,_,Z),v(_,D),v(D,V),v(D,k),v(D,m),v(m,w),v(w,g),v(g,H),v(g,M);for(let ee=0;ee<Y.length;ee+=1)Y[ee]&&Y[ee].m(w,null);yt(w,l[1],!0),z=!0,L||(J=[ie(n,"click",l[5]),ie(w,"change",l[6])],L=!0)},p(S,[Z]){if((!z||Z&4)&&a!==(a=S[2].t("Settings")+"")&&we(f,a),(!z||Z&4)&&p!==(p=S[2].t("Select a model")+"")&&we(H,p),Z&8){O=mt(S[3].filter(xt));let ee;for(ee=0;ee<O.length;ee+=1){const ke=Qt(S,O,ee);Y[ee]?Y[ee].p(ke,Z):(Y[ee]=Kt(ke),Y[ee].c(),Y[ee].m(w,null))}for(;ee<Y.length;ee+=1)Y[ee].d(1);Y.length=O.length}Z&10&&yt(w,S[1])},i(S){z||($(s.$$.fragment,S),z=!0)},o(S){N(s.$$.fragment,S),z=!1},d(S){S&&(u(e),u(d),u(_)),R(s),Vt(Y,S),L=!1,Ct(J)}}}const xt=l=>{var e,t;return!(((t=(e=l==null?void 0:l.info)==null?void 0:e.meta)==null?void 0:t.hidden)??!1)};function xs(l,e,t){let n,s;Oe(l,Rt,d=>t(3,s=d));const o=wt("i18n");Oe(l,o,d=>t(2,n=d));let{show:r=!1}=e,{selectedModelId:i=""}=e;const a=()=>{t(0,r=!r)};function f(){i=bn(this),t(1,i)}return l.$$set=d=>{"show"in d&&t(0,r=d.show),"selectedModelId"in d&&t(1,i=d.selectedModelId)},[r,i,n,s,o,a,f]}class el extends Ae{constructor(e){super(),We(this,e,xs,Ks,Be,{show:0,selectedModelId:1})}}function tl(l){let e,t;return{c(){e=Re("svg"),t=Re("path"),this.h()},l(n){e=Pe(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=b(e);t=Pe(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),b(t).forEach(u),s.forEach(u),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","m19.5 19.5-15-15m0 0v11.25m0-11.25h11.25"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",l[1]),c(e,"stroke","currentColor"),c(e,"class",l[0])},m(n,s){y(n,e,s),v(e,t)},p(n,[s]){s&2&&c(e,"stroke-width",n[1]),s&1&&c(e,"class",n[0])},i:le,o:le,d(n){n&&u(e)}}}function nl(l,e,t){let{className:n="size-4"}=e,{strokeWidth:s="1.5"}=e;return l.$$set=o=>{"className"in o&&t(0,n=o.className),"strokeWidth"in o&&t(1,s=o.strokeWidth)},[n,s]}class sl extends Ae{constructor(e){super(),We(this,e,nl,tl,Be,{className:0,strokeWidth:1})}}function ll(l){let e,t,n,s,o;return t=new sl({props:{className:"size-3.5",strokeWidth:"2"}}),{c(){e=E("button"),W(t.$$.fragment),this.h()},l(r){e=I(r,"BUTTON",{class:!0});var i=b(e);U(t.$$.fragment,i),i.forEach(u),this.h()},h(){c(e,"class","text-transparent group-hover:text-gray-500 dark:hover:text-gray-300 transition")},m(r,i){y(r,e,i),j(t,e,null),n=!0,s||(o=ie(e,"click",l[7]),s=!0)},p:le,i(r){n||($(t.$$.fragment,r),n=!0)},o(r){N(t.$$.fragment,r),n=!1},d(r){r&&u(e),R(t),s=!1,o()}}}function rl(l){let e,t,n,s,o;return t=new Ds({props:{className:"size-3.5",strokeWidth:"2"}}),{c(){e=E("button"),W(t.$$.fragment),this.h()},l(r){e=I(r,"BUTTON",{class:!0});var i=b(e);U(t.$$.fragment,i),i.forEach(u),this.h()},h(){c(e,"class","text-transparent group-hover:text-gray-500 dark:hover:text-gray-300 transition")},m(r,i){y(r,e,i),j(t,e,null),n=!0,s||(o=ie(e,"click",l[8]),s=!0)},p:le,i(r){n||($(t.$$.fragment,r),n=!0)},o(r){N(t.$$.fragment,r),n=!1},d(r){r&&u(e),R(t),s=!1,o()}}}function ol(l){let e,t='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="size-4"><path stroke-linecap="round" stroke-linejoin="round" d="M15 12H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"></path></svg>',n,s;return{c(){e=E("button"),e.innerHTML=t,this.h()},l(o){e=I(o,"BUTTON",{class:!0,"data-svelte-h":!0}),pn(e)!=="svelte-n6kawc"&&(e.innerHTML=t),this.h()},h(){c(e,"class","text-transparent group-hover:text-gray-500 dark:hover:text-gray-300 transition")},m(o,r){y(o,e,r),n||(s=ie(e,"click",l[9]),n=!0)},p:le,d(o){o&&u(e),n=!1,s()}}}function al(l){let e,t,n;return t=new Cs({props:{id:`note-message-${l[1]}`,content:l[0].content}}),{c(){e=E("div"),W(t.$$.fragment),this.h()},l(s){e=I(s,"DIV",{class:!0});var o=b(e);U(t.$$.fragment,o),o.forEach(u),this.h()},h(){c(e,"class","markdown-prose-sm text-sm")},m(s,o){y(s,e,o),j(t,e,null),n=!0},p(s,o){const r={};o&2&&(r.id=`note-message-${s[1]}`),o&1&&(r.content=s[0].content),t.$set(r)},i(s){n||($(t.$$.fragment,s),n=!0)},o(s){N(t.$$.fragment,s),n=!1},d(s){s&&u(e),R(t)}}}function il(l){let e,t,n;function s(r){l[11](r)}let o={className:"w-full bg-transparent outline-hidden text-sm resize-none overflow-hidden",placeholder:l[5].t("Enter {{role}} message here",{role:l[0].role==="user"?l[5].t("a user"):l[5].t("an assistant")}),onBlur:l[10]};return l[0].content!==void 0&&(o.value=l[0].content),e=new Ms({props:o}),de.push(()=>be(e,"value",s)),{c(){W(e.$$.fragment)},l(r){U(e.$$.fragment,r)},m(r,i){j(e,r,i),n=!0},p(r,i){const a={};i&33&&(a.placeholder=r[5].t("Enter {{role}} message here",{role:r[0].role==="user"?r[5].t("a user"):r[5].t("an assistant")})),i&1&&(a.onBlur=r[10]),!t&&i&1&&(t=!0,a.value=r[0].content,ve(()=>t=!1)),e.$set(a)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){N(e.$$.fragment,r),n=!1},d(r){R(e,r)}}}function fl(l){let e,t,n;return t=new Ns({props:{size:"sm"}}),{c(){e=E("div"),W(t.$$.fragment),this.h()},l(s){e=I(s,"DIV",{class:!0});var o=b(e);U(t.$$.fragment,o),o.forEach(u),this.h()},h(){c(e,"class","")},m(s,o){y(s,e,o),j(t,e,null),n=!0},p:le,i(s){n||($(t.$$.fragment,s),n=!0)},o(s){N(t.$$.fragment,s),n=!1},d(s){s&&u(e),R(t)}}}function ul(l){let e,t,n,s=l[5].t(l[0].role)+"",o,r,i,a,f,d,_,D,V,T,k,m,w;a=new nt({props:{placement:"top",content:l[5].t("Insert"),$$slots:{default:[ll]},$$scope:{ctx:l}}}),d=new nt({props:{placement:"top",content:l[5].t("Edit"),$$slots:{default:[rl]},$$scope:{ctx:l}}}),D=new nt({props:{placement:"top",content:l[5].t("Delete"),$$slots:{default:[ol]},$$scope:{ctx:l}}});const g=[fl,il,al],p=[];function H(M,z){var L,J,O;return!(((L=M[0])==null?void 0:L.done)??!0)&&((J=M[0])==null?void 0:J.content)===""?0:((O=M[0])==null?void 0:O.edit)===!0?1:2}return k=H(l),m=p[k]=g[k](l),{c(){e=E("div"),t=E("div"),n=E("div"),o=ue(s),r=q(),i=E("div"),W(a.$$.fragment),f=q(),W(d.$$.fragment),_=q(),W(D.$$.fragment),V=q(),T=E("div"),m.c(),this.h()},l(M){e=I(M,"DIV",{class:!0});var z=b(e);t=I(z,"DIV",{class:!0});var L=b(t);n=I(L,"DIV",{class:!0});var J=b(n);o=ce(J,s),J.forEach(u),r=G(L),i=I(L,"DIV",{class:!0});var O=b(i);U(a.$$.fragment,O),f=G(O),U(d.$$.fragment,O),_=G(O),U(D.$$.fragment,O),O.forEach(u),L.forEach(u),V=G(z),T=I(z,"DIV",{class:!0});var Y=b(T);m.l(Y),Y.forEach(u),z.forEach(u),this.h()},h(){c(n,"class","py-1 text-sm font-semibold uppercase min-w-[6rem] text-left rounded-lg transition"),c(i,"class","flex items-center gap-2"),c(t,"class","flex items-center justify-between pt-1"),c(T,"class","flex-1"),c(e,"class","flex flex-col gap-1 group")},m(M,z){y(M,e,z),v(e,t),v(t,n),v(n,o),v(t,r),v(t,i),j(a,i,null),v(i,f),j(d,i,null),v(i,_),j(D,i,null),v(e,V),v(e,T),p[k].m(T,null),w=!0},p(M,[z]){(!w||z&33)&&s!==(s=M[5].t(M[0].role)+"")&&we(o,s);const L={};z&32&&(L.content=M[5].t("Insert")),z&8208&&(L.$$scope={dirty:z,ctx:M}),a.$set(L);const J={};z&32&&(J.content=M[5].t("Edit")),z&8200&&(J.$$scope={dirty:z,ctx:M}),d.$set(J);const O={};z&32&&(O.content=M[5].t("Delete")),z&8196&&(O.$$scope={dirty:z,ctx:M}),D.$set(O);let Y=k;k=H(M),k===Y?p[k].p(M,z):(He(),N(p[Y],1,1,()=>{p[Y]=null}),Le(),m=p[k],m?m.p(M,z):(m=p[k]=g[k](M),m.c()),$(m,1),m.m(T,null))},i(M){w||($(a.$$.fragment,M),$(d.$$.fragment,M),$(D.$$.fragment,M),$(m),w=!0)},o(M){N(a.$$.fragment,M),N(d.$$.fragment,M),N(D.$$.fragment,M),N(m),w=!1},d(M){M&&u(e),R(a),R(d),R(D),p[k].d()}}}function cl(l,e,t){let n;const s=wt("i18n");Oe(l,s,k=>t(5,n=k));let{message:o}=e,{idx:r}=e,{onDelete:i}=e,{onEdit:a}=e,{onInsert:f}=e;const d=()=>{f()},_=()=>{a()},D=()=>{i()},V=()=>{t(0,o.edit=!1,o)};function T(k){l.$$.not_equal(o.content,k)&&(o.content=k,t(0,o))}return l.$$set=k=>{"message"in k&&t(0,o=k.message),"idx"in k&&t(1,r=k.idx),"onDelete"in k&&t(2,i=k.onDelete),"onEdit"in k&&t(3,a=k.onEdit),"onInsert"in k&&t(4,f=k.onInsert)},[o,r,i,a,f,n,s,d,_,D,V,T]}class dl extends Ae{constructor(e){super(),We(this,e,cl,ul,Be,{message:0,idx:1,onDelete:2,onEdit:3,onInsert:4})}}function en(l,e,t){const n=l.slice();return n[6]=e[t],n[8]=t,n}function tn(l){let e,t;function n(){return l[2](l[6])}function s(){return l[3](l[8])}function o(){return l[4](l[8])}return e=new dl({props:{message:l[6],idx:l[8],onInsert:n,onEdit:s,onDelete:o}}),{c(){W(e.$$.fragment)},l(r){U(e.$$.fragment,r)},m(r,i){j(e,r,i),t=!0},p(r,i){l=r;const a={};i&1&&(a.message=l[6]),i&3&&(a.onInsert=n),i&1&&(a.onEdit=s),i&1&&(a.onDelete=o),e.$set(a)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){N(e.$$.fragment,r),t=!1},d(r){R(e,r)}}}function ml(l){let e,t,n=mt(l[0]),s=[];for(let r=0;r<n.length;r+=1)s[r]=tn(en(l,n,r));const o=r=>N(s[r],1,1,()=>{s[r]=null});return{c(){e=E("div");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=I(r,"DIV",{class:!0});var i=b(e);for(let a=0;a<s.length;a+=1)s[a].l(i);i.forEach(u),this.h()},h(){c(e,"class","space-y-3 pb-12")},m(r,i){y(r,e,i);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);t=!0},p(r,[i]){if(i&3){n=mt(r[0]);let a;for(a=0;a<n.length;a+=1){const f=en(r,n,a);s[a]?(s[a].p(f,i),$(s[a],1)):(s[a]=tn(f),s[a].c(),$(s[a],1),s[a].m(e,null))}for(He(),a=n.length;a<s.length;a+=1)o(a);Le()}},i(r){if(!t){for(let i=0;i<n.length;i+=1)$(s[i]);t=!0}},o(r){s=s.filter(Boolean);for(let i=0;i<s.length;i+=1)N(s[i]);t=!1},d(r){r&&u(e),Vt(s,r)}}}function hl(l,e,t){wt("i18n");let{messages:n=[]}=e,{onInsert:s=a=>{}}=e;const o=a=>{s((a==null?void 0:a.content)??"")},r=a=>{t(0,n=n.map((f,d)=>d===a?{...f,edit:!0}:f))},i=a=>{t(0,n=n.filter((f,d)=>d!==a))};return l.$$set=a=>{"messages"in a&&t(0,n=a.messages),"onInsert"in a&&t(1,s=a.onInsert)},[n,s,o,r,i]}class gl extends Ae{constructor(e){super(),We(this,e,hl,ml,Be,{messages:0,onInsert:1})}}function nn(l,e,t){const n=l.slice();return n[35]=e[t],n}function _l(l){let e,t,n=l[9].t("Experimental")+"",s,o;return{c(){e=E("span"),t=ue("("),s=ue(n),o=ue(")"),this.h()},l(r){e=I(r,"SPAN",{class:!0});var i=b(e);t=ce(i,"("),s=ce(i,n),o=ce(i,")"),i.forEach(u),this.h()},h(){c(e,"class","text-gray-500 text-sm")},m(r,i){y(r,e,i),v(e,t),v(e,s),v(e,o)},p(r,i){i[0]&512&&n!==(n=r[9].t("Experimental")+"")&&we(s,n)},d(r){r&&u(e)}}}function pl(l){let e,t,n,s,o=l[9].t("Edit")+"",r,i,a,f,d;return t=new ys({props:{className:"size-4",strokeWidth:"1.75"}}),{c(){e=E("button"),W(t.$$.fragment),n=q(),s=E("span"),r=ue(o),this.h()},l(_){e=I(_,"BUTTON",{type:!0,class:!0});var D=b(e);U(t.$$.fragment,D),n=G(D),s=I(D,"SPAN",{class:!0});var V=b(s);r=ce(V,o),V.forEach(u),D.forEach(u),this.h()},h(){c(s,"class","block whitespace-nowrap overflow-hidden text-ellipsis leading-none pr-0.5"),c(e,"type","button"),c(e,"class",i="px-2 @xl:px-2.5 py-2 flex gap-1.5 items-center text-sm rounded-full transition-colors duration-300 focus:outline-hidden max-w-full overflow-hidden hover:bg-gray-50 dark:hover:bg-gray-800 "+(l[7]?" text-sky-500 dark:text-sky-300 bg-sky-50 dark:bg-sky-200/5":"bg-transparent text-gray-600 dark:text-gray-300 "))},m(_,D){y(_,e,D),j(t,e,null),v(e,n),v(e,s),v(s,r),a=!0,f||(d=ie(e,"click",Qn(l[25])),f=!0)},p(_,D){(!a||D[0]&512)&&o!==(o=_[9].t("Edit")+"")&&we(r,o),(!a||D[0]&128&&i!==(i="px-2 @xl:px-2.5 py-2 flex gap-1.5 items-center text-sm rounded-full transition-colors duration-300 focus:outline-hidden max-w-full overflow-hidden hover:bg-gray-50 dark:hover:bg-gray-800 "+(_[7]?" text-sky-500 dark:text-sky-300 bg-sky-50 dark:bg-sky-200/5":"bg-transparent text-gray-600 dark:text-gray-300 ")))&&c(e,"class",i)},i(_){a||($(t.$$.fragment,_),a=!0)},o(_){N(t.$$.fragment,_),a=!1},d(_){_&&u(e),R(t),f=!1,d()}}}function sn(l){let e,t=l[35].name+"",n,s;return{c(){e=E("option"),n=ue(t),this.h()},l(o){e=I(o,"OPTION",{class:!0});var r=b(e);n=ce(r,t),r.forEach(u),this.h()},h(){e.__value=s=l[35].id,bt(e,e.__value),c(e,"class","bg-gray-50 dark:bg-gray-700")},m(o,r){y(o,e,r),v(e,n)},p(o,r){r[0]&1024&&t!==(t=o[35].name+"")&&we(n,t),r[0]&1024&&s!==(s=o[35].id)&&(e.__value=s,bt(e,e.__value))},d(o){o&&u(e)}}}function vl(l){let e,t,n,s=mt(l[10]),o=[];for(let r=0;r<s.length;r+=1)o[r]=sn(nn(l,s,r));return{c(){e=E("select");for(let r=0;r<o.length;r+=1)o[r].c();this.h()},l(r){e=I(r,"SELECT",{class:!0});var i=b(e);for(let a=0;a<o.length;a+=1)o[a].l(i);i.forEach(u),this.h()},h(){c(e,"class","bg-transparent rounded-lg py-1 px-2 -mx-0.5 text-sm outline-hidden w-full text-right pr-5"),l[1]===void 0&&vn(()=>l[26].call(e))},m(r,i){y(r,e,i);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(e,null);yt(e,l[1],!0),t||(n=ie(e,"change",l[26]),t=!0)},p(r,i){if(i[0]&1024){s=mt(r[10]);let a;for(a=0;a<s.length;a+=1){const f=nn(r,s,a);o[a]?o[a].p(f,i):(o[a]=sn(f),o[a].c(),o[a].m(e,null))}for(;a<o.length;a+=1)o[a].d(1);o.length=s.length}i[0]&1026&&yt(e,r[1])},d(r){r&&u(e),Vt(o,r),t=!1,n()}}}function bl(l){let e,t,n,s,o,r;return n=new nt({props:{content:l[9].t("Edit"),placement:"top",$$slots:{default:[pl]},$$scope:{ctx:l}}}),o=new nt({props:{content:l[1],$$slots:{default:[vl]},$$scope:{ctx:l}}}),{c(){e=E("div"),t=E("div"),W(n.$$.fragment),s=q(),W(o.$$.fragment),this.h()},l(i){e=I(i,"DIV",{slot:!0,class:!0});var a=b(e);t=I(a,"DIV",{});var f=b(t);U(n.$$.fragment,f),f.forEach(u),s=G(a),U(o.$$.fragment,a),a.forEach(u),this.h()},h(){c(e,"slot","menu"),c(e,"class","flex items-center justify-between gap-2 w-full pr-1")},m(i,a){y(i,e,a),v(e,t),j(n,t,null),v(e,s),j(o,e,null),r=!0},p(i,a){const f={};a[0]&512&&(f.content=i[9].t("Edit")),a[0]&640|a[1]&128&&(f.$$scope={dirty:a,ctx:i}),n.$set(f);const d={};a[0]&2&&(d.content=i[1]),a[0]&1026|a[1]&128&&(d.$$scope={dirty:a,ctx:i}),o.$set(d)},i(i){r||($(n.$$.fragment,i),$(o.$$.fragment,i),r=!0)},o(i){N(n.$$.fragment,i),N(o.$$.fragment,i),r=!1},d(i){i&&u(e),R(n),R(o)}}}function wl(l){let e,t,n,s,o,r,i,a=l[9].t("Chat")+"",f,d,_,D,V,T,k,m,w,g,p,H,M,z,L,J,O,Y,S,Z,ee;s=new Nn({props:{className:"size-5",strokeWidth:"2.5"}}),D=new nt({props:{content:l[9].t("This feature is experimental and may be modified or discontinued without notice."),position:"top",className:"inline-block",$$slots:{default:[_l]},$$scope:{ctx:l}}});function ke(P){l[23](P)}let me={onInsert:l[3]};l[2]!==void 0&&(me.messages=l[2]),M=new gl({props:me}),de.push(()=>be(M,"messages",ke));function ye(P){l[27](P)}let se={acceptFiles:!1,inputLoading:l[5],showFormattingButtons:!1,onSubmit:l[13],onStop:l[4],$$slots:{menu:[bl]},$$scope:{ctx:l}};return l[8]!==void 0&&(se.chatInputElement=l[8]),O=new Ss({props:se}),de.push(()=>be(O,"chatInputElement",ye)),{c(){e=E("div"),t=E("div"),n=E("button"),W(s.$$.fragment),o=q(),r=E("div"),i=E("div"),f=ue(a),d=q(),_=E("div"),W(D.$$.fragment),V=q(),T=E("div"),k=E("div"),m=E("div"),w=E("div"),g=E("div"),p=E("div"),H=E("div"),W(M.$$.fragment),L=q(),J=E("div"),W(O.$$.fragment),this.h()},l(P){e=I(P,"DIV",{class:!0});var X=b(e);t=I(X,"DIV",{class:!0});var re=b(t);n=I(re,"BUTTON",{class:!0});var B=b(n);U(s.$$.fragment,B),B.forEach(u),re.forEach(u),o=G(X),r=I(X,"DIV",{class:!0});var K=b(r);i=I(K,"DIV",{});var fe=b(i);f=ce(fe,a),fe.forEach(u),d=G(K),_=I(K,"DIV",{});var Ue=b(_);U(D.$$.fragment,Ue),Ue.forEach(u),K.forEach(u),X.forEach(u),V=G(P),T=I(P,"DIV",{class:!0});var je=b(T);k=I(je,"DIV",{class:!0});var he=b(k);m=I(he,"DIV",{class:!0});var Je=b(m);w=I(Je,"DIV",{class:!0});var Ve=b(w);g=I(Ve,"DIV",{class:!0,id:!0});var Ee=b(g);p=I(Ee,"DIV",{class:!0});var Qe=b(p);H=I(Qe,"DIV",{class:!0});var Ke=b(H);U(M.$$.fragment,Ke),Ke.forEach(u),Qe.forEach(u),Ee.forEach(u),L=G(Ve),J=I(Ve,"DIV",{class:!0});var qe=b(J);U(O.$$.fragment,qe),qe.forEach(u),Ve.forEach(u),Je.forEach(u),he.forEach(u),je.forEach(u),this.h()},h(){c(n,"class","p-0.5 bg-transparent transition rounded-lg"),c(t,"class","-translate-x-1.5 flex items-center"),c(r,"class","font-medium text-base flex items-center gap-1"),c(e,"class","flex items-center mb-1.5 pt-1.5"),c(H,"class","flex-1 p-1"),c(p,"class","h-full w-full flex flex-col"),c(g,"class","pb-2.5 flex flex-col justify-between w-full flex-auto overflow-auto h-0 scrollbar-hidden"),c(g,"id","messages-container"),c(J,"class","pb-2"),c(w,"class","flex flex-col h-full"),c(m,"class","mx-auto w-full md:px-0 h-full relative"),c(k,"class","flex flex-col justify-between w-full overflow-y-auto h-full"),c(T,"class","flex flex-col items-center mb-2 flex-1 @container")},m(P,X){y(P,e,X),v(e,t),v(t,n),j(s,n,null),v(e,o),v(e,r),v(r,i),v(i,f),v(r,d),v(r,_),j(D,_,null),y(P,V,X),y(P,T,X),v(T,k),v(k,m),v(m,w),v(w,g),v(g,p),v(p,H),j(M,H,null),l[24](g),v(w,L),v(w,J),j(O,J,null),S=!0,Z||(ee=[ie(n,"click",l[22]),ie(g,"scroll",l[12])],Z=!0)},p(P,X){(!S||X[0]&512)&&a!==(a=P[9].t("Chat")+"")&&we(f,a);const re={};X[0]&512&&(re.content=P[9].t("This feature is experimental and may be modified or discontinued without notice.")),X[0]&512|X[1]&128&&(re.$$scope={dirty:X,ctx:P}),D.$set(re);const B={};X[0]&8&&(B.onInsert=P[3]),!z&&X[0]&4&&(z=!0,B.messages=P[2],ve(()=>z=!1)),M.$set(B);const K={};X[0]&32&&(K.inputLoading=P[5]),X[0]&16&&(K.onStop=P[4]),X[0]&1666|X[1]&128&&(K.$$scope={dirty:X,ctx:P}),!Y&&X[0]&256&&(Y=!0,K.chatInputElement=P[8],ve(()=>Y=!1)),O.$set(K)},i(P){S||($(s.$$.fragment,P),$(D.$$.fragment,P),$(M.$$.fragment,P),$(O.$$.fragment,P),S=!0)},o(P){N(s.$$.fragment,P),N(D.$$.fragment,P),N(M.$$.fragment,P),N(O.$$.fragment,P),S=!1},d(P){P&&(u(e),u(V),u(T)),R(s),R(D),R(M),l[24](null),R(O),Z=!1,Ct(ee)}}}function kl(l,e,t){let n,s,o;Oe(l,$n,B=>t(31,n=B)),Oe(l,Rt,B=>t(10,o=B));let{show:r=!1}=e,{selectedModelId:i=""}=e;At.use({breaks:!0,gfm:!0,renderer:{list(B,K,fe){if(B.includes("data-checked="))return`<ul data-type="taskList">${B}</ul>`;const je=K?"ol":"ul",he=K&&fe!==1?` start="${fe}"`:"";return`<${je}${he}>${B}</${je}>`},listitem(B,K,fe){return K?`<li data-type="taskItem" data-checked="${fe?"true":"false"}">${B}</li>`:`<li>${B}</li>`}}});const a=wt("i18n");Oe(l,a,B=>t(9,s=B));let{editing:f=!1}=e,{streaming:d=!1}=e,{stopResponseFlag:_=!1}=e,{note:D=null}=e,{files:V=[]}=e,{messages:T=[]}=e,{onInsert:k=B=>{}}=e,{onStop:m=()=>{}}=e,{onEdited:w=()=>{}}=e,{insertNoteHandler:g=()=>{}}=e,{scrollToBottomHandler:p=()=>{}}=e,H=!1,M,z="",L=!1,J=null;const O=`You are an expert document editor.

## Task
Based on the user's instruction, update and enhance the existing notes by incorporating relevant and accurate information from the provided context in the content's primary language. Ensure all edits strictly follow the user’s intent.

## Input Structure
- Existing notes: Enclosed within <notes></notes> XML tags.
- Additional context: Enclosed within <context></context> XML tags.
- Editing instruction: Provided in the user message.

## Output Instructions
- Deliver a single, rewritten version of the notes in markdown format.
- Integrate information from the context only if it directly supports the user's instruction.
- Use clear, organized markdown elements: headings, lists, task lists ([ ]) where tasks or checklists are strongly implied, bold and italic text as appropriate.
- Focus on improving clarity, completeness, and usefulness of the notes.
- Return only the final, fully-edited markdown notes—do not include explanations, reasoning, or XML tags.
`;let Y=!0;const S=()=>{M&&Y&&t(6,M.scrollTop=M.scrollHeight,M)},Z=()=>{M&&(Y=M.scrollHeight-M.scrollTop<=M.clientHeight+10)},ee=async()=>{var Ve,Ee,Qe,Ke,qe;if(i===""){Ne.error(s.t("Please select a model."));return}const B=o.find(_e=>_e.id===i);if(!B){t(1,i="");return}let K;((Ve=T.at(-1))==null?void 0:Ve.role)==="assistant"?K=T.at(-1):(K={role:"assistant",content:"",done:!1},T.push(K),t(2,T)),await dt(),S(),t(16,_=!1);let fe={json:null,html:"",md:""};z="",L?z=`${O}

`:z=`You are a helpful assistant. Please answer the user's questions based on the context provided.

`,z+=`<notes>${((Qe=(Ee=D==null?void 0:D.data)==null?void 0:Ee.content)==null?void 0:Qe.md)??""}</notes>`+(V&&V.length>0?`
<context>${V.map(_e=>{var st,lt;return`${_e.name}: ${((lt=(st=_e==null?void 0:_e.file)==null?void 0:st.data)==null?void 0:lt.content)??"Could not extract content"}
`}).join("")}</context>`:"");const Ue=JSON.parse(JSON.stringify([{role:"system",content:`${z}`},...T])),[je,he]=await En(localStorage.token,{model:B.id,stream:!0,messages:Ue},`${Ut}/api`);await dt(),S();let Je="";if(je&&je.ok){const _e=je.body.pipeThrough(new TextDecoderStream).pipeThrough(kn(`
`)).getReader();for(;;){const{value:st,done:lt}=await _e.read();if(lt||_){_&&he.abort("User: Stop Response"),L&&(t(14,f=!1),t(15,d=!1),w());break}try{let ae=st.split(`
`);for(const oe of ae)if(oe!=="")if(oe==="data: [DONE]")L&&(K.content=`<status title="${s.t("Edited")}" done="true" />`),K.done=!0,t(2,T);else{let ht=JSON.parse(oe.replace(/^data: /,"")),rt=((qe=(Ke=ht.choices[0])==null?void 0:Ke.delta)==null?void 0:qe.content)??"";if(K.content==""&&rt==`
`)continue;L?(t(14,f=!0),t(15,d=!0),fe.md+=rt,fe.html=At.parse(fe.md),t(17,D.data.content.md=fe.md,D),t(17,D.data.content.html=fe.html,D),t(17,D.data.content.json=null,D),K.content=`<status title="${s.t("Editing")}" done="false" />`,p(),t(2,T)):(Je+=rt,K.content=Je,t(2,T)),await dt()}}catch(ae){}S()}}},ke=async B=>{const{content:K,data:fe}=B;i&&K&&(T.push({role:"user",content:K}),t(2,T),await dt(),S(),t(5,H=!0),await ee(),t(2,T=T.map(Ue=>(Ue.done=!0,Ue))),t(5,H=!1),t(16,_=!1))};jt(async()=>{(n==null?void 0:n.role)!=="admin"&&await Wt("/"),t(7,L=localStorage.getItem("noteEditorEnabled")==="true"),await dt(),S()});const me=()=>{t(0,r=!r)};function ye(B){T=B,t(2,T)}function se(B){de[B?"unshift":"push"](()=>{M=B,t(6,M)})}const P=()=>{t(7,L=!L),localStorage.setItem("noteEditorEnabled",L?"true":"false")};function X(){i=bn(this),t(1,i)}function re(B){J=B,t(8,J)}return l.$$set=B=>{"show"in B&&t(0,r=B.show),"selectedModelId"in B&&t(1,i=B.selectedModelId),"editing"in B&&t(14,f=B.editing),"streaming"in B&&t(15,d=B.streaming),"stopResponseFlag"in B&&t(16,_=B.stopResponseFlag),"note"in B&&t(17,D=B.note),"files"in B&&t(18,V=B.files),"messages"in B&&t(2,T=B.messages),"onInsert"in B&&t(3,k=B.onInsert),"onStop"in B&&t(4,m=B.onStop),"onEdited"in B&&t(19,w=B.onEdited),"insertNoteHandler"in B&&t(20,g=B.insertNoteHandler),"scrollToBottomHandler"in B&&t(21,p=B.scrollToBottomHandler)},[r,i,T,k,m,H,M,L,J,s,o,a,Z,ke,f,d,_,D,V,w,g,p,me,ye,se,P,X,re]}class $l extends Ae{constructor(e){super(),We(this,e,kl,wl,Be,{show:0,selectedModelId:1,editing:14,streaming:15,stopResponseFlag:16,note:17,files:18,messages:2,onInsert:3,onStop:4,onEdited:19,insertNoteHandler:20,scrollToBottomHandler:21},null,[-1,-1])}}function El(l){let e,t;return{c(){e=Re("svg"),t=Re("path"),this.h()},l(n){e=Pe(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=b(e);t=Pe(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),b(t).forEach(u),s.forEach(u),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",l[1]),c(e,"stroke","currentColor"),c(e,"class",l[0])},m(n,s){y(n,e,s),v(e,t)},p(n,[s]){s&2&&c(e,"stroke-width",n[1]),s&1&&c(e,"class",n[0])},i:le,o:le,d(n){n&&u(e)}}}function Il(l,e,t){let{className:n="size-3"}=e,{strokeWidth:s="1.5"}=e;return l.$$set=o=>{"className"in o&&t(0,n=o.className),"strokeWidth"in o&&t(1,s=o.strokeWidth)},[n,s]}class Nl extends Ae{constructor(e){super(),We(this,e,Il,El,Be,{className:0,strokeWidth:1})}}function Cl(l){let e,t;return{c(){e=Re("svg"),t=Re("path"),this.h()},l(n){e=Pe(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=b(e);t=Pe(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),b(t).forEach(u),s.forEach(u),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",l[1]),c(e,"stroke","currentColor"),c(e,"class",l[0])},m(n,s){y(n,e,s),v(e,t)},p(n,[s]){s&2&&c(e,"stroke-width",n[1]),s&1&&c(e,"class",n[0])},i:le,o:le,d(n){n&&u(e)}}}function Tl(l,e,t){let{className:n="size-3"}=e,{strokeWidth:s="1.5"}=e;return l.$$set=o=>{"className"in o&&t(0,n=o.className),"strokeWidth"in o&&t(1,s=o.strokeWidth)},[n,s]}class Dl extends Ae{constructor(e){super(),We(this,e,Tl,Cl,Be,{className:0,strokeWidth:1})}}function Ml(l){let e,t;return{c(){e=Re("svg"),t=Re("path"),this.h()},l(n){e=Pe(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=b(e);t=Pe(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),b(t).forEach(u),s.forEach(u),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","M12 18.75a6 6 0 0 0 6-6v-1.5m-6 7.5a6 6 0 0 1-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 0 1-3-3V4.5a3 3 0 1 1 6 0v8.25a3 3 0 0 1-3 3Z"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",l[1]),c(e,"stroke","currentColor"),c(e,"class",l[0])},m(n,s){y(n,e,s),v(e,t)},p(n,[s]){s&2&&c(e,"stroke-width",n[1]),s&1&&c(e,"class",n[0])},i:le,o:le,d(n){n&&u(e)}}}function Sl(l,e,t){let{className:n="size-4"}=e,{strokeWidth:s="1.5"}=e;return l.$$set=o=>{"className"in o&&t(0,n=o.className),"strokeWidth"in o&&t(1,s=o.strokeWidth)},[n,s]}class yl extends Ae{constructor(e){super(),We(this,e,Sl,Ml,Be,{className:0,strokeWidth:1})}}function Vl(l){let e,t;return{c(){e=Re("svg"),t=Re("path"),this.h()},l(n){e=Pe(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=b(e);t=Pe(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),b(t).forEach(u),s.forEach(u),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","M15.042 21.672 13.684 16.6m0 0-2.51 2.225.569-9.47 5.227 7.917-3.286-.672ZM12 2.25V4.5m5.834.166-1.591 1.591M20.25 10.5H18M7.757 14.743l-1.59 1.59M6 10.5H3.75m4.007-4.243-1.59-1.59"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",l[1]),c(e,"stroke","currentColor"),c(e,"class",l[0])},m(n,s){y(n,e,s),v(e,t)},p(n,[s]){s&2&&c(e,"stroke-width",n[1]),s&1&&c(e,"class",n[0])},i:le,o:le,d(n){n&&u(e)}}}function zl(l,e,t){let{className:n="size-4"}=e,{strokeWidth:s="1.5"}=e;return l.$$set=o=>{"className"in o&&t(0,n=o.className),"strokeWidth"in o&&t(1,s=o.strokeWidth)},[n,s]}class Ol extends Ae{constructor(e){super(),We(this,e,zl,Vl,Be,{className:0,strokeWidth:1})}}const Bl=l=>({}),ln=l=>({});function Al(l){let e;const t=l[8].default,n=$t(t,l,l[15],null);return{c(){n&&n.c()},l(s){n&&n.l(s)},m(s,o){n&&n.m(s,o),e=!0},p(s,o){n&&n.p&&(!e||o&32768)&&Et(n,t,s,s[15],e?Nt(t,s[15],o,null):It(s[15]),null)},i(s){e||($(n,s),e=!0)},o(s){N(n,s),e=!1},d(s){n&&n.d(s)}}}function Wl(l){let e,t,n,s,o,r=l[5].t("Record")+"",i,a,f,d,_,D,V,T=l[5].t("Capture Audio")+"",k,m,w,g,p,H,M,z=l[5].t("Upload Audio")+"",L,J,O,Y;return n=new yl({props:{className:"size-4",strokeWidth:"2"}}),_=new Ol({props:{className:"size-4",strokeWidth:"2"}}),p=new Rs({props:{className:"size-4",strokeWidth:"2"}}),{c(){e=E("button"),t=E("div"),W(n.$$.fragment),s=q(),o=E("div"),i=ue(r),a=q(),f=E("button"),d=E("div"),W(_.$$.fragment),D=q(),V=E("div"),k=ue(T),m=q(),w=E("button"),g=E("div"),W(p.$$.fragment),H=q(),M=E("div"),L=ue(z),this.h()},l(S){e=I(S,"BUTTON",{class:!0});var Z=b(e);t=I(Z,"DIV",{class:!0});var ee=b(t);U(n.$$.fragment,ee),ee.forEach(u),s=G(Z),o=I(Z,"DIV",{class:!0});var ke=b(o);i=ce(ke,r),ke.forEach(u),Z.forEach(u),a=G(S),f=I(S,"BUTTON",{class:!0});var me=b(f);d=I(me,"DIV",{class:!0});var ye=b(d);U(_.$$.fragment,ye),ye.forEach(u),D=G(me),V=I(me,"DIV",{class:!0});var se=b(V);k=ce(se,T),se.forEach(u),me.forEach(u),m=G(S),w=I(S,"BUTTON",{class:!0});var P=b(w);g=I(P,"DIV",{class:!0});var X=b(g);U(p.$$.fragment,X),X.forEach(u),H=G(P),M=I(P,"DIV",{class:!0});var re=b(M);L=ce(re,z),re.forEach(u),P.forEach(u),this.h()},h(){c(t,"class","self-center mr-2"),c(o,"class","self-center truncate"),c(e,"class","flex rounded-md py-1.5 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition"),c(d,"class","self-center mr-2"),c(V,"class","self-center truncate"),c(f,"class","flex rounded-md py-1.5 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition"),c(g,"class","self-center mr-2"),c(M,"class","self-center truncate"),c(w,"class","flex rounded-md py-1.5 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition")},m(S,Z){y(S,e,Z),v(e,t),j(n,t,null),v(e,s),v(e,o),v(o,i),y(S,a,Z),y(S,f,Z),v(f,d),j(_,d,null),v(f,D),v(f,V),v(V,k),y(S,m,Z),y(S,w,Z),v(w,g),j(p,g,null),v(w,H),v(w,M),v(M,L),J=!0,O||(Y=[ie(e,"click",l[9]),ie(f,"click",l[10]),ie(w,"click",l[11])],O=!0)},p(S,Z){(!J||Z&32)&&r!==(r=S[5].t("Record")+"")&&we(i,r),(!J||Z&32)&&T!==(T=S[5].t("Capture Audio")+"")&&we(k,T),(!J||Z&32)&&z!==(z=S[5].t("Upload Audio")+"")&&we(L,z)},i(S){J||($(n.$$.fragment,S),$(_.$$.fragment,S),$(p.$$.fragment,S),J=!0)},o(S){N(n.$$.fragment,S),N(_.$$.fragment,S),N(p.$$.fragment,S),J=!1},d(S){S&&(u(e),u(a),u(f),u(m),u(w)),R(n),R(_),R(p),O=!1,Ct(Y)}}}function Ul(l){let e,t;return e=new Mn({props:{class:"w-full "+l[1]+" text-sm rounded-xl px-1 py-1.5 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg font-primary",sideOffset:8,side:"bottom",align:"start",transition:l[12],$$slots:{default:[Wl]},$$scope:{ctx:l}}}),{c(){W(e.$$.fragment)},l(n){U(e.$$.fragment,n)},m(n,s){j(e,n,s),t=!0},p(n,s){const o={};s&2&&(o.class="w-full "+n[1]+" text-sm rounded-xl px-1 py-1.5 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg font-primary"),s&32829&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){R(e,n)}}}function jl(l){let e,t,n;e=new Dn({props:{$$slots:{default:[Al]},$$scope:{ctx:l}}});const s=l[8].content,o=$t(s,l,l[15],ln),r=o||Ul(l);return{c(){W(e.$$.fragment),t=q(),r&&r.c()},l(i){U(e.$$.fragment,i),t=G(i),r&&r.l(i)},m(i,a){j(e,i,a),y(i,t,a),r&&r.m(i,a),n=!0},p(i,a){const f={};a&32768&&(f.$$scope={dirty:a,ctx:i}),e.$set(f),o?o.p&&(!n||a&32768)&&Et(o,s,i,i[15],n?Nt(s,i[15],a,Bl):It(i[15]),ln):r&&r.p&&(!n||a&63)&&r.p(i,n?a:-1)},i(i){n||($(e.$$.fragment,i),$(r,i),n=!0)},o(i){N(e.$$.fragment,i),N(r,i),n=!1},d(i){i&&u(t),R(e,i),r&&r.d(i)}}}function Rl(l){let e,t,n;function s(r){l[14](r)}let o={onOpenChange:l[13],$$slots:{default:[jl]},$$scope:{ctx:l}};return l[0]!==void 0&&(o.open=l[0]),e=new Tn({props:o}),de.push(()=>be(e,"open",s)),{c(){W(e.$$.fragment)},l(r){U(e.$$.fragment,r)},m(r,i){j(e,r,i),n=!0},p(r,[i]){const a={};i&32831&&(a.$$scope={dirty:i,ctx:r}),!t&&i&1&&(t=!0,a.open=r[0],ve(()=>t=!1)),e.$set(a)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){N(e.$$.fragment,r),n=!1},d(r){R(e,r)}}}function Pl(l,e,t){let n,{$$slots:s={},$$scope:o}=e;const r=wt("i18n");Oe(l,r,p=>t(5,n=p));let{show:i=!1}=e,{className:a="max-w-[170px]"}=e,{onRecord:f=()=>{}}=e,{onCaptureAudio:d=()=>{}}=e,{onUpload:_=()=>{}}=e;const D=Kn(),V=async()=>{f(),t(0,i=!1)},T=()=>{d(),t(0,i=!1)},k=()=>{_(),t(0,i=!1)},m=p=>Sn(p,{duration:100}),w=p=>{D("change",p)};function g(p){i=p,t(0,i)}return l.$$set=p=>{"show"in p&&t(0,i=p.show),"className"in p&&t(1,a=p.className),"onRecord"in p&&t(2,f=p.onRecord),"onCaptureAudio"in p&&t(3,d=p.onCaptureAudio),"onUpload"in p&&t(4,_=p.onUpload),"$$scope"in p&&t(15,o=p.$$scope)},[i,a,f,d,_,n,r,D,s,V,T,k,m,w,g,o]}class Hl extends Ae{constructor(e){super(),We(this,e,Pl,Rl,Be,{show:0,className:1,onRecord:2,onCaptureAudio:3,onUpload:4})}}function Ll(l){let e,t;return{c(){e=Re("svg"),t=Re("path"),this.h()},l(n){e=Pe(n,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var s=b(e);t=Pe(s,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),b(t).forEach(u),s.forEach(u),this.h()},h(){c(t,"fill-rule","evenodd"),c(t,"d","M9 4.5a.75.75 0 0 1 .721.544l.813 2.846a3.75 3.75 0 0 0 2.576 2.576l2.846.813a.75.75 0 0 1 0 1.442l-2.846.813a3.75 3.75 0 0 0-2.576 2.576l-.813 2.846a.75.75 0 0 1-1.442 0l-.813-2.846a3.75 3.75 0 0 0-2.576-2.576l-2.846-.813a.75.75 0 0 1 0-1.442l2.846-.813A3.75 3.75 0 0 0 7.466 7.89l.813-2.846A.75.75 0 0 1 9 4.5ZM18 1.5a.75.75 0 0 1 .728.568l.258 1.036c.236.94.97 1.674 1.91 1.91l1.036.258a.75.75 0 0 1 0 1.456l-1.036.258c-.94.236-1.674.97-1.91 1.91l-.258 1.036a.75.75 0 0 1-1.456 0l-.258-1.036a2.625 2.625 0 0 0-1.91-1.91l-1.036-.258a.75.75 0 0 1 0-1.456l1.036-.258a2.625 2.625 0 0 0 1.91-1.91l.258-1.036A.75.75 0 0 1 18 1.5ZM16.5 15a.75.75 0 0 1 .712.513l.394 1.183c.15.447.5.799.948.948l1.183.395a.75.75 0 0 1 0 1.422l-1.183.395c-.447.15-.799.5-.948.948l-.395 1.183a.75.75 0 0 1-1.422 0l-.395-1.183a1.5 1.5 0 0 0-.948-.948l-1.183-.395a.75.75 0 0 1 0-1.422l1.183-.395c.447-.15.799-.5.948-.948l.395-1.183A.75.75 0 0 1 16.5 15Z"),c(t,"clip-rule","evenodd"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"viewBox","0 0 24 24"),c(e,"fill","currentColor"),c(e,"class",l[0])},m(n,s){y(n,e,s),v(e,t)},p(n,[s]){s&1&&c(e,"class",n[0])},i:le,o:le,d(n){n&&u(e)}}}function Fl(l,e,t){let{className:n="w-4 h-4"}=e,{strokeWidth:s="1.5"}=e;return l.$$set=o=>{"className"in o&&t(0,n=o.className),"strokeWidth"in o&&t(1,s=o.strokeWidth)},[n,s]}class Yl extends Ae{constructor(e){super(),We(this,e,Fl,Ll,Be,{className:0,strokeWidth:1})}}function Jl(l){let e,t;return{c(){e=Re("svg"),t=Re("path"),this.h()},l(n){e=Pe(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=b(e);t=Pe(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),b(t).forEach(u),s.forEach(u),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",l[1]),c(e,"stroke","currentColor"),c(e,"class",l[0])},m(n,s){y(n,e,s),v(e,t)},p(n,[s]){s&2&&c(e,"stroke-width",n[1]),s&1&&c(e,"class",n[0])},i:le,o:le,d(n){n&&u(e)}}}function ql(l,e,t){let{className:n="size-4"}=e,{strokeWidth:s="1.5"}=e;return l.$$set=o=>{"className"in o&&t(0,n=o.className),"strokeWidth"in o&&t(1,s=o.strokeWidth)},[n,s]}class Gl extends Ae{constructor(e){super(),We(this,e,ql,Jl,Be,{className:0,strokeWidth:1})}}function Zl(l){let e,t;return{c(){e=Re("svg"),t=Re("path"),this.h()},l(n){e=Pe(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=b(e);t=Pe(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),b(t).forEach(u),s.forEach(u),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","m15 15 6-6m0 0-6-6m6 6H9a6 6 0 0 0 0 12h3"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",l[1]),c(e,"stroke","currentColor"),c(e,"class",l[0])},m(n,s){y(n,e,s),v(e,t)},p(n,[s]){s&2&&c(e,"stroke-width",n[1]),s&1&&c(e,"class",n[0])},i:le,o:le,d(n){n&&u(e)}}}function Xl(l,e,t){let{className:n="size-4"}=e,{strokeWidth:s="1.5"}=e;return l.$$set=o=>{"className"in o&&t(0,n=o.className),"strokeWidth"in o&&t(1,s=o.strokeWidth)},[n,s]}class Ql extends Ae{constructor(e){super(),We(this,e,Xl,Zl,Be,{className:0,strokeWidth:1})}}const Kl=l=>({}),rn=l=>({});function xl(l){let e;const t=l[7].default,n=$t(t,l,l[12],null);return{c(){n&&n.c()},l(s){n&&n.l(s)},m(s,o){n&&n.m(s,o),e=!0},p(s,o){n&&n.p&&(!e||o&4096)&&Et(n,t,s,s[12],e?Nt(t,s[12],o,null):It(s[12]),null)},i(s){e||($(n,s),e=!0)},o(s){N(n,s),e=!1},d(s){n&&n.d(s)}}}function er(l){let e,t,n,s,o,r=l[5].t("Enhance")+"",i,a,f,d,_,D,V,T=l[5].t("Chat")+"",k,m,w,g;return n=new yn({props:{className:"size-4",strokeWidth:"2"}}),_=new In({props:{className:"size-4",strokeWidth:"2"}}),{c(){e=E("button"),t=E("div"),W(n.$$.fragment),s=q(),o=E("div"),i=ue(r),a=q(),f=E("button"),d=E("div"),W(_.$$.fragment),D=q(),V=E("div"),k=ue(T),this.h()},l(p){e=I(p,"BUTTON",{class:!0});var H=b(e);t=I(H,"DIV",{class:!0});var M=b(t);U(n.$$.fragment,M),M.forEach(u),s=G(H),o=I(H,"DIV",{class:!0});var z=b(o);i=ce(z,r),z.forEach(u),H.forEach(u),a=G(p),f=I(p,"BUTTON",{class:!0});var L=b(f);d=I(L,"DIV",{class:!0});var J=b(d);U(_.$$.fragment,J),J.forEach(u),D=G(L),V=I(L,"DIV",{class:!0});var O=b(V);k=ce(O,T),O.forEach(u),L.forEach(u),this.h()},h(){c(t,"class","self-center mr-2"),c(o,"class","self-center truncate"),c(e,"class","flex rounded-md py-1.5 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition"),c(d,"class","self-center mr-2"),c(V,"class","self-center truncate"),c(f,"class","flex rounded-md py-1.5 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition")},m(p,H){y(p,e,H),v(e,t),j(n,t,null),v(e,s),v(e,o),v(o,i),y(p,a,H),y(p,f,H),v(f,d),j(_,d,null),v(f,D),v(f,V),v(V,k),m=!0,w||(g=[ie(e,"click",l[8]),ie(f,"click",l[9])],w=!0)},p(p,H){(!m||H&32)&&r!==(r=p[5].t("Enhance")+"")&&we(i,r),(!m||H&32)&&T!==(T=p[5].t("Chat")+"")&&we(k,T)},i(p){m||($(n.$$.fragment,p),$(_.$$.fragment,p),m=!0)},o(p){N(n.$$.fragment,p),N(_.$$.fragment,p),m=!1},d(p){p&&(u(e),u(a),u(f)),R(n),R(_),w=!1,Ct(g)}}}function tr(l){let e,t;return e=new Mn({props:{class:"w-full "+l[1]+" text-sm rounded-xl px-1 py-1.5 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg font-primary",sideOffset:8,side:"bottom",align:"end",transition:l[10],$$slots:{default:[er]},$$scope:{ctx:l}}}),{c(){W(e.$$.fragment)},l(n){U(e.$$.fragment,n)},m(n,s){j(e,n,s),t=!0},p(n,s){const o={};s&2&&(o.class="w-full "+n[1]+" text-sm rounded-xl px-1 py-1.5 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg font-primary"),s&4141&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){R(e,n)}}}function nr(l){let e,t,n;e=new Dn({props:{$$slots:{default:[xl]},$$scope:{ctx:l}}});const s=l[7].content,o=$t(s,l,l[12],rn),r=o||tr(l);return{c(){W(e.$$.fragment),t=q(),r&&r.c()},l(i){U(e.$$.fragment,i),t=G(i),r&&r.l(i)},m(i,a){j(e,i,a),y(i,t,a),r&&r.m(i,a),n=!0},p(i,a){const f={};a&4096&&(f.$$scope={dirty:a,ctx:i}),e.$set(f),o?o.p&&(!n||a&4096)&&Et(o,s,i,i[12],n?Nt(s,i[12],a,Kl):It(i[12]),rn):r&&r.p&&(!n||a&47)&&r.p(i,n?a:-1)},i(i){n||($(e.$$.fragment,i),$(r,i),n=!0)},o(i){N(e.$$.fragment,i),N(r,i),n=!1},d(i){i&&u(t),R(e,i),r&&r.d(i)}}}function sr(l){let e,t,n;function s(r){l[11](r)}let o={onOpenChange:l[4],$$slots:{default:[nr]},$$scope:{ctx:l}};return l[0]!==void 0&&(o.open=l[0]),e=new Tn({props:o}),de.push(()=>be(e,"open",s)),{c(){W(e.$$.fragment)},l(r){U(e.$$.fragment,r)},m(r,i){j(e,r,i),n=!0},p(r,[i]){const a={};i&16&&(a.onOpenChange=r[4]),i&4143&&(a.$$scope={dirty:i,ctx:r}),!t&&i&1&&(t=!0,a.open=r[0],ve(()=>t=!1)),e.$set(a)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){N(e.$$.fragment,r),n=!1},d(r){R(e,r)}}}function lr(l,e,t){let n,{$$slots:s={},$$scope:o}=e;const r=wt("i18n");Oe(l,r,m=>t(5,n=m));let{show:i=!1}=e,{className:a="max-w-[170px]"}=e,{onEdit:f=()=>{}}=e,{onChat:d=()=>{}}=e,{onChange:_=()=>{}}=e;const D=async()=>{f(),t(0,i=!1)},V=()=>{d(),t(0,i=!1)},T=m=>Sn(m,{duration:100});function k(m){i=m,t(0,i)}return l.$$set=m=>{"show"in m&&t(0,i=m.show),"className"in m&&t(1,a=m.className),"onEdit"in m&&t(2,f=m.onEdit),"onChat"in m&&t(3,d=m.onChat),"onChange"in m&&t(4,_=m.onChange),"$$scope"in m&&t(12,o=m.$$scope)},[i,a,f,d,_,n,r,s,D,V,T,k,o]}class rr extends Ae{constructor(e){super(),We(this,e,lr,sr,Be,{show:0,className:1,onEdit:2,onChat:3,onChange:4})}}const{document:Bt}=ts;function on(l,e,t){const n=l.slice();return n[100]=e[t],n[102]=t,n}function an(l){let e,t,n,s;function o(a){l[40](a)}function r(a){l[41](a)}let i={accessRoles:["read","write"],onChange:l[39]};return l[14]!==void 0&&(i.show=l[14]),l[2].access_control!==void 0&&(i.accessControl=l[2].access_control),e=new Vs({props:i}),de.push(()=>be(e,"show",o)),de.push(()=>be(e,"accessControl",r)),{c(){W(e.$$.fragment)},l(a){U(e.$$.fragment,a)},m(a,f){j(e,a,f),s=!0},p(a,f){const d={};!t&&f[0]&16384&&(t=!0,d.show=a[14],ve(()=>t=!1)),!n&&f[0]&4&&(n=!0,d.accessControl=a[2].access_control,ve(()=>n=!1)),e.$set(d)},i(a){s||($(e.$$.fragment,a),s=!0)},o(a){N(e.$$.fragment,a),s=!1},d(a){R(e,a)}}}function or(l){let e,t=l[0].t("This will delete")+"",n,s,o,r=l[2].title+"",i,a;return{c(){e=E("div"),n=ue(t),s=q(),o=E("span"),i=ue(r),a=ue("."),this.h()},l(f){e=I(f,"DIV",{class:!0});var d=b(e);n=ce(d,t),s=G(d),o=I(d,"SPAN",{class:!0});var _=b(o);i=ce(_,r),_.forEach(u),a=ce(d,"."),d.forEach(u),this.h()},h(){c(o,"class","font-semibold"),c(e,"class","text-sm text-gray-500")},m(f,d){y(f,e,d),v(e,n),v(e,s),v(e,o),v(o,i),v(e,a)},p(f,d){d[0]&1&&t!==(t=f[0].t("This will delete")+"")&&we(n,t),d[0]&4&&r!==(r=f[2].title+"")&&we(i,r)},d(f){f&&u(e)}}}function ar(l){var Dt,Mt,St;let e,t,n,s,o,r,i,a,f,d,_,D,V,T,k,m,w,g,p,H,M,z,L,J,O,Y,S,Z,ee,ke,me,ye,se,P,X,re,B=((Dt=l[2])!=null&&Dt.access_control?l[0].t("Private"):l[0].t("Everyone"))+"",K,fe,Ue,je,he,Je,Ve,Ee,Qe,Ke,qe,_e,st,lt;i=new Is({});let ae=l[15]&&!l[16]&&fn(l),oe=l[1]&&un(l);w=new nt({props:{placement:"top",content:l[0].t("Chat"),className:"cursor-pointer",$$slots:{default:[ur]},$$scope:{ctx:l}}}),p=new nt({props:{placement:"top",content:l[0].t("Settings"),className:"cursor-pointer",$$slots:{default:[cr]},$$scope:{ctx:l}}}),M=new Ps({props:{onDownload:l[53],onCopyLink:l[54],onCopyToClipboard:l[55],onDelete:l[56],$$slots:{default:[dr]},$$scope:{ctx:l}}}),S=new Nl({props:{className:"size-3.5",strokeWidth:"2"}});function ht(C,F){return F[0]&4&&(ee=null),F[0]&4&&(ke=null),F[0]&4&&(me=null),ee==null&&(ee=!!Se(C[2].created_at/1e6).isSame(Se(),"day")),ee?_r:(ke==null&&(ke=!!Se(C[2].created_at/1e6).isSame(Se().subtract(1,"day"),"day")),ke?gr:(me==null&&(me=!!Se(C[2].created_at/1e6).isSame(Se().subtract(1,"week"),"week")),me?hr:mr))}let rt=ht(l,[-1,-1,-1,-1]),Ge=rt(l);P=new Dl({props:{className:"size-3.5",strokeWidth:"2"}});let Ce=l[1]&&cn(l),Te=l[19]&&dn(l),pe=l[3]&&l[3].length>0&&mn(l);function zt(C){l[62](C)}function Ot(C){l[63](C)}let Tt={className:"input-prose-sm px-0.5",json:!0,html:(St=(Mt=l[2].data)==null?void 0:Mt.content)==null?void 0:St.html,documentId:`note:${l[2].id}`,collaboration:!0,socket:l[26],user:l[25],link:!0,placeholder:l[0].t("Write something..."),editable:l[7]===null&&!l[19],onChange:l[60]};return l[1]!==void 0&&(Tt.editor=l[1]),l[2].data.content.json!==void 0&&(Tt.value=l[2].data.content.json),Ee=new ks({props:Tt}),l[61](Ee),de.push(()=>be(Ee,"editor",zt)),de.push(()=>be(Ee,"value",Ot)),{c(){e=E("div"),t=E("div"),n=E("div"),s=E("div"),o=E("button"),r=E("div"),W(i.$$.fragment),f=q(),d=E("input"),V=q(),ae&&ae.c(),T=q(),k=E("div"),oe&&oe.c(),m=q(),W(w.$$.fragment),g=q(),W(p.$$.fragment),H=q(),W(M.$$.fragment),z=q(),L=E("div"),J=E("div"),O=E("div"),Y=E("button"),W(S.$$.fragment),Z=q(),Ge.c(),ye=q(),se=E("button"),W(P.$$.fragment),X=q(),re=E("span"),K=ue(B),Ue=q(),Ce&&Ce.c(),je=q(),he=E("div"),Te&&Te.c(),Je=q(),pe&&pe.c(),Ve=q(),W(Ee.$$.fragment),this.h()},l(C){e=I(C,"DIV",{class:!0});var F=b(e);t=I(F,"DIV",{class:!0});var xe=b(t);n=I(xe,"DIV",{class:!0});var ze=b(n);s=I(ze,"DIV",{class:!0});var Ze=b(s);o=I(Ze,"BUTTON",{id:!0,class:!0,"aria-label":!0});var De=b(o);r=I(De,"DIV",{class:!0});var gt=b(r);U(i.$$.fragment,gt),gt.forEach(u),De.forEach(u),Ze.forEach(u),f=G(ze),d=I(ze,"INPUT",{class:!0,type:!0,placeholder:!0}),V=G(ze),ae&&ae.l(ze),T=G(ze),k=I(ze,"DIV",{class:!0});var Xe=b(k);oe&&oe.l(Xe),m=G(Xe),U(w.$$.fragment,Xe),g=G(Xe),U(p.$$.fragment,Xe),H=G(Xe),U(M.$$.fragment,Xe),Xe.forEach(u),ze.forEach(u),xe.forEach(u),z=G(F),L=I(F,"DIV",{class:!0});var _t=b(L);J=I(_t,"DIV",{class:!0});var pt=b(J);O=I(pt,"DIV",{class:!0});var et=b(O);Y=I(et,"BUTTON",{class:!0});var it=b(Y);U(S.$$.fragment,it),Z=G(it),Ge.l(it),it.forEach(u),ye=G(et),se=I(et,"BUTTON",{class:!0});var ft=b(se);U(P.$$.fragment,ft),X=G(ft),re=I(ft,"SPAN",{});var vt=b(re);K=ce(vt,B),vt.forEach(u),ft.forEach(u),Ue=G(et),Ce&&Ce.l(et),et.forEach(u),pt.forEach(u),_t.forEach(u),je=G(F),he=I(F,"DIV",{class:!0,id:!0});var tt=b(he);Te&&Te.l(tt),Je=G(tt),pe&&pe.l(tt),Ve=G(tt),U(Ee.$$.fragment,tt),tt.forEach(u),F.forEach(u),this.h()},h(){var C,F,xe,ze,Ze,De;c(r,"class","m-auto self-center"),c(o,"id","sidebar-toggle-button"),c(o,"class","cursor-pointer p-1.5 flex rounded-xl hover:bg-gray-100 dark:hover:bg-gray-850 transition"),c(o,"aria-label","Toggle Sidebar"),c(s,"class",a=(l[24]?"md:hidden pl-0.5":"")+" flex flex-none items-center pr-1 -translate-x-1"),c(d,"class","w-full text-2xl font-medium bg-transparent outline-hidden"),c(d,"type","text"),c(d,"placeholder",_=l[16]?l[0].t("Generating..."):l[0].t("Title")),d.disabled=D=((C=l[2])==null?void 0:C.user_id)!==((F=l[25])==null?void 0:F.id)&&((xe=l[25])==null?void 0:xe.role)!=="admin"||l[16],d.required=!0,c(k,"class","flex items-center gap-0.5 translate-x-1"),c(n,"class","w-full flex items-center"),c(t,"class","shrink-0 w-full flex justify-between items-center px-3.5 mb-1.5"),c(Y,"class","flex items-center gap-1 w-fit py-1 px-1.5 rounded-lg min-w-fit"),c(se,"class","flex items-center gap-1 w-fit py-1 px-1.5 rounded-lg min-w-fit"),se.disabled=fe=((ze=l[2])==null?void 0:ze.user_id)!==((Ze=l[25])==null?void 0:Ze.id)&&((De=l[25])==null?void 0:De.role)!=="admin",c(O,"class","flex gap-1 items-center text-xs font-medium text-gray-500 dark:text-gray-500 w-fit"),c(J,"class","flex w-full bg-transparent overflow-x-auto scrollbar-none"),c(L,"class","px-2.5"),c(he,"class","flex-1 w-full h-full overflow-auto px-3.5 pb-20 relative pt-2.5"),c(he,"id","note-content-container"),c(e,"class",qe="w-full flex flex-col "+(l[18]?"opacity-20":""))},m(C,F){y(C,e,F),v(e,t),v(t,n),v(n,s),v(s,o),v(o,r),j(i,r,null),v(n,f),v(n,d),bt(d,l[2].title),v(n,V),ae&&ae.m(n,null),v(n,T),v(n,k),oe&&oe.m(k,null),v(k,m),j(w,k,null),v(k,g),j(p,k,null),v(k,H),j(M,k,null),v(e,z),v(e,L),v(L,J),v(J,O),v(O,Y),j(S,Y,null),v(Y,Z),Ge.m(Y,null),v(O,ye),v(O,se),j(P,se,null),v(se,X),v(se,re),v(re,K),v(O,Ue),Ce&&Ce.m(O,null),v(e,je),v(e,he),Te&&Te.m(he,null),v(he,Je),pe&&pe.m(he,null),v(he,Ve),j(Ee,he,null),_e=!0,st||(lt=[ie(o,"click",l[44]),ie(d,"input",l[45]),ie(d,"input",l[28]),ie(d,"focus",l[46]),ie(d,"blur",l[47]),ie(se,"click",l[57]),ie(J,"wheel",Or)],st=!0)},p(C,F){var gt,Xe,_t,pt,et,it,ft,vt,tt;(!_e||F[0]&16777216&&a!==(a=(C[24]?"md:hidden pl-0.5":"")+" flex flex-none items-center pr-1 -translate-x-1"))&&c(s,"class",a),(!_e||F[0]&65537&&_!==(_=C[16]?C[0].t("Generating..."):C[0].t("Title")))&&c(d,"placeholder",_),(!_e||F[0]&33619972&&D!==(D=((gt=C[2])==null?void 0:gt.user_id)!==((Xe=C[25])==null?void 0:Xe.id)&&((_t=C[25])==null?void 0:_t.role)!=="admin"||C[16]))&&(d.disabled=D),F[0]&4&&d.value!==C[2].title&&bt(d,C[2].title),C[15]&&!C[16]?ae?(ae.p(C,F),F[0]&98304&&$(ae,1)):(ae=fn(C),ae.c(),$(ae,1),ae.m(n,T)):ae&&(He(),N(ae,1,1,()=>{ae=null}),Le()),C[1]?oe?(oe.p(C,F),F[0]&2&&$(oe,1)):(oe=un(C),oe.c(),$(oe,1),oe.m(k,m)):oe&&(He(),N(oe,1,1,()=>{oe=null}),Le());const xe={};F[0]&1&&(xe.content=C[0].t("Chat")),F[0]&6144|F[3]&1024&&(xe.$$scope={dirty:F,ctx:C}),w.$set(xe);const ze={};F[0]&1&&(ze.content=C[0].t("Settings")),F[0]&6144|F[3]&1024&&(ze.$$scope={dirty:F,ctx:C}),p.$set(ze);const Ze={};F[0]&5&&(Ze.onCopyLink=C[54]),F[0]&5&&(Ze.onCopyToClipboard=C[55]),F[0]&8192&&(Ze.onDelete=C[56]),F[3]&1024&&(Ze.$$scope={dirty:F,ctx:C}),M.$set(Ze),rt===(rt=ht(C,F))&&Ge?Ge.p(C,F):(Ge.d(1),Ge=rt(C),Ge&&(Ge.c(),Ge.m(Y,null))),(!_e||F[0]&5)&&B!==(B=((pt=C[2])!=null&&pt.access_control?C[0].t("Private"):C[0].t("Everyone"))+"")&&we(K,B),(!_e||F[0]&33554436&&fe!==(fe=((et=C[2])==null?void 0:et.user_id)!==((it=C[25])==null?void 0:it.id)&&((ft=C[25])==null?void 0:ft.role)!=="admin"))&&(se.disabled=fe),C[1]?Ce?Ce.p(C,F):(Ce=cn(C),Ce.c(),Ce.m(O,null)):Ce&&(Ce.d(1),Ce=null),C[19]?Te?Te.p(C,F):(Te=dn(C),Te.c(),Te.m(he,Je)):Te&&(Te.d(1),Te=null),C[3]&&C[3].length>0?pe?(pe.p(C,F),F[0]&8&&$(pe,1)):(pe=mn(C),pe.c(),$(pe,1),pe.m(he,Ve)):pe&&(He(),N(pe,1,1,()=>{pe=null}),Le());const De={};F[0]&4&&(De.html=(tt=(vt=C[2].data)==null?void 0:vt.content)==null?void 0:tt.html),F[0]&4&&(De.documentId=`note:${C[2].id}`),F[0]&67108864&&(De.socket=C[26]),F[0]&33554432&&(De.user=C[25]),F[0]&1&&(De.placeholder=C[0].t("Write something...")),F[0]&524416&&(De.editable=C[7]===null&&!C[19]),F[0]&102&&(De.onChange=C[60]),!Qe&&F[0]&2&&(Qe=!0,De.editor=C[1],ve(()=>Qe=!1)),!Ke&&F[0]&4&&(Ke=!0,De.value=C[2].data.content.json,ve(()=>Ke=!1)),Ee.$set(De),(!_e||F[0]&262144&&qe!==(qe="w-full flex flex-col "+(C[18]?"opacity-20":"")))&&c(e,"class",qe)},i(C){_e||($(i.$$.fragment,C),$(ae),$(oe),$(w.$$.fragment,C),$(p.$$.fragment,C),$(M.$$.fragment,C),$(S.$$.fragment,C),$(P.$$.fragment,C),$(pe),$(Ee.$$.fragment,C),_e=!0)},o(C){N(i.$$.fragment,C),N(ae),N(oe),N(w.$$.fragment,C),N(p.$$.fragment,C),N(M.$$.fragment,C),N(S.$$.fragment,C),N(P.$$.fragment,C),N(pe),N(Ee.$$.fragment,C),_e=!1},d(C){C&&u(e),R(i),ae&&ae.d(),oe&&oe.d(),R(w),R(p),R(M),R(S),Ge.d(),R(P),Ce&&Ce.d(),Te&&Te.d(),pe&&pe.d(),l[61](null),R(Ee),st=!1,Ct(lt)}}}function ir(l){let e,t,n,s;return n=new Cn({props:{className:"size-5"}}),{c(){e=E("div"),t=E("div"),W(n.$$.fragment),this.h()},l(o){e=I(o,"DIV",{class:!0});var r=b(e);t=I(r,"DIV",{class:!0});var i=b(t);U(n.$$.fragment,i),i.forEach(u),r.forEach(u),this.h()},h(){c(t,"class","m-auto"),c(e,"class","absolute top-0 bottom-0 left-0 right-0 flex")},m(o,r){y(o,e,r),v(e,t),j(n,t,null),s=!0},p:le,i(o){s||($(n.$$.fragment,o),s=!0)},o(o){N(n.$$.fragment,o),s=!1},d(o){o&&u(e),R(n)}}}function fn(l){let e,t,n;return t=new nt({props:{content:l[0].t("Generate"),$$slots:{default:[fr]},$$scope:{ctx:l}}}),{c(){e=E("div"),W(t.$$.fragment),this.h()},l(s){e=I(s,"DIV",{class:!0});var o=b(e);U(t.$$.fragment,o),o.forEach(u),this.h()},h(){c(e,"class","flex self-center items-center space-x-1.5 z-10 translate-y-[0.5px] -translate-x-[0.5px] pl-2")},m(s,o){y(s,e,o),j(t,e,null),n=!0},p(s,o){const r={};o[0]&1&&(r.content=s[0].t("Generate")),o[0]&32768|o[3]&1024&&(r.$$scope={dirty:o,ctx:s}),t.$set(r)},i(s){n||($(t.$$.fragment,s),n=!0)},o(s){N(t.$$.fragment,s),n=!1},d(s){s&&u(e),R(t)}}}function fr(l){let e,t,n,s,o;return t=new yn({props:{strokeWidth:"2"}}),{c(){e=E("button"),W(t.$$.fragment),this.h()},l(r){e=I(r,"BUTTON",{class:!0,id:!0});var i=b(e);U(t.$$.fragment,i),i.forEach(u),this.h()},h(){c(e,"class","self-center dark:hover:text-white transition"),c(e,"id","generate-title-button")},m(r,i){y(r,e,i),j(t,e,null),n=!0,s||(o=ie(e,"click",l[48]),s=!0)},p:le,i(r){n||($(t.$$.fragment,r),n=!0)},o(r){N(t.$$.fragment,r),n=!1},d(r){r&&u(e),R(t),s=!1,o()}}}function un(l){let e,t,n,s,o,r,i,a,f,d,_,D;return s=new Gl({props:{className:"size-4"}}),a=new Ql({props:{className:"size-4"}}),{c(){e=E("div"),t=E("div"),n=E("button"),W(s.$$.fragment),r=q(),i=E("button"),W(a.$$.fragment),this.h()},l(V){e=I(V,"DIV",{});var T=b(e);t=I(T,"DIV",{class:!0,dir:!0});var k=b(t);n=I(k,"BUTTON",{class:!0});var m=b(n);U(s.$$.fragment,m),m.forEach(u),r=G(k),i=I(k,"BUTTON",{class:!0});var w=b(i);U(a.$$.fragment,w),w.forEach(u),k.forEach(u),T.forEach(u),this.h()},h(){c(n,"class","self-center p-1 hover:enabled:bg-black/5 dark:hover:enabled:bg-white/5 dark:hover:enabled:text-white hover:enabled:text-black rounded-md transition disabled:cursor-not-allowed disabled:text-gray-500 disabled:hover:text-gray-500"),n.disabled=o=!l[1].can().undo(),c(i,"class","self-center p-1 hover:enabled:bg-black/5 dark:hover:enabled:bg-white/5 dark:hover:enabled:text-white hover:enabled:text-black rounded-md transition disabled:cursor-not-allowed disabled:text-gray-500 disabled:hover:text-gray-500"),i.disabled=f=!l[1].can().redo(),c(t,"class","flex items-center gap-0.5 self-center min-w-fit"),c(t,"dir","ltr")},m(V,T){y(V,e,T),v(e,t),v(t,n),j(s,n,null),v(t,r),v(t,i),j(a,i,null),d=!0,_||(D=[ie(n,"click",l[49]),ie(i,"click",l[50])],_=!0)},p(V,T){(!d||T[0]&2&&o!==(o=!V[1].can().undo()))&&(n.disabled=o),(!d||T[0]&2&&f!==(f=!V[1].can().redo()))&&(i.disabled=f)},i(V){d||($(s.$$.fragment,V),$(a.$$.fragment,V),d=!0)},o(V){N(s.$$.fragment,V),N(a.$$.fragment,V),d=!1},d(V){V&&u(e),R(s),R(a),_=!1,Ct(D)}}}function ur(l){let e,t,n,s,o;return t=new In({}),{c(){e=E("button"),W(t.$$.fragment),this.h()},l(r){e=I(r,"BUTTON",{class:!0});var i=b(e);U(t.$$.fragment,i),i.forEach(u),this.h()},h(){c(e,"class","p-1.5 bg-transparent hover:bg-white/5 transition rounded-lg")},m(r,i){y(r,e,i),j(t,e,null),n=!0,s||(o=ie(e,"click",l[51]),s=!0)},p:le,i(r){n||($(t.$$.fragment,r),n=!0)},o(r){N(t.$$.fragment,r),n=!1},d(r){r&&u(e),R(t),s=!1,o()}}}function cr(l){let e,t,n,s,o;return t=new Ls({}),{c(){e=E("button"),W(t.$$.fragment),this.h()},l(r){e=I(r,"BUTTON",{class:!0});var i=b(e);U(t.$$.fragment,i),i.forEach(u),this.h()},h(){c(e,"class","p-1.5 bg-transparent hover:bg-white/5 transition rounded-lg")},m(r,i){y(r,e,i),j(t,e,null),n=!0,s||(o=ie(e,"click",l[52]),s=!0)},p:le,i(r){n||($(t.$$.fragment,r),n=!0)},o(r){N(t.$$.fragment,r),n=!1},d(r){r&&u(e),R(t),s=!1,o()}}}function dr(l){let e,t,n;return t=new Hs({props:{className:"size-5"}}),{c(){e=E("div"),W(t.$$.fragment),this.h()},l(s){e=I(s,"DIV",{class:!0});var o=b(e);U(t.$$.fragment,o),o.forEach(u),this.h()},h(){c(e,"class","p-1 bg-transparent hover:bg-white/5 transition rounded-lg")},m(s,o){y(s,e,o),j(t,e,null),n=!0},p:le,i(s){n||($(t.$$.fragment,s),n=!0)},o(s){N(t.$$.fragment,s),n=!1},d(s){s&&u(e),R(t)}}}function mr(l){let e,t=Se(l[2].created_at/1e6).format(l[0].t("DD/MM/YYYY"))+"",n;return{c(){e=E("span"),n=ue(t)},l(s){e=I(s,"SPAN",{});var o=b(e);n=ce(o,t),o.forEach(u)},m(s,o){y(s,e,o),v(e,n)},p(s,o){o[0]&5&&t!==(t=Se(s[2].created_at/1e6).format(s[0].t("DD/MM/YYYY"))+"")&&we(n,t)},d(s){s&&u(e)}}}function hr(l){let e,t=Se(l[2].created_at/1e6).format(l[0].t("[Last] dddd [at] h:mm A"))+"",n;return{c(){e=E("span"),n=ue(t)},l(s){e=I(s,"SPAN",{});var o=b(e);n=ce(o,t),o.forEach(u)},m(s,o){y(s,e,o),v(e,n)},p(s,o){o[0]&5&&t!==(t=Se(s[2].created_at/1e6).format(s[0].t("[Last] dddd [at] h:mm A"))+"")&&we(n,t)},d(s){s&&u(e)}}}function gr(l){let e,t=Se(l[2].created_at/1e6).format(l[0].t("[Yesterday at] h:mm A"))+"",n;return{c(){e=E("span"),n=ue(t)},l(s){e=I(s,"SPAN",{});var o=b(e);n=ce(o,t),o.forEach(u)},m(s,o){y(s,e,o),v(e,n)},p(s,o){o[0]&5&&t!==(t=Se(s[2].created_at/1e6).format(s[0].t("[Yesterday at] h:mm A"))+"")&&we(n,t)},d(s){s&&u(e)}}}function _r(l){let e,t=Se(l[2].created_at/1e6).format(l[0].t("[Today at] h:mm A"))+"",n;return{c(){e=E("span"),n=ue(t)},l(s){e=I(s,"SPAN",{});var o=b(e);n=ce(o,t),o.forEach(u)},m(s,o){y(s,e,o),v(e,n)},p(s,o){o[0]&5&&t!==(t=Se(s[2].created_at/1e6).format(s[0].t("[Today at] h:mm A"))+"")&&we(n,t)},d(s){s&&u(e)}}}function cn(l){let e,t,n=l[0].t("{{COUNT}} words",{COUNT:l[5]})+"",s,o,r,i=l[0].t("{{COUNT}} characters",{COUNT:l[6]})+"",a;return{c(){e=E("div"),t=E("div"),s=ue(n),o=q(),r=E("div"),a=ue(i),this.h()},l(f){e=I(f,"DIV",{class:!0});var d=b(e);t=I(d,"DIV",{});var _=b(t);s=ce(_,n),_.forEach(u),o=G(d),r=I(d,"DIV",{});var D=b(r);a=ce(D,i),D.forEach(u),d.forEach(u),this.h()},h(){c(e,"class","flex items-center gap-1 px-1 min-w-fit")},m(f,d){y(f,e,d),v(e,t),v(t,s),v(e,o),v(e,r),v(r,a)},p(f,d){d[0]&33&&n!==(n=f[0].t("{{COUNT}} words",{COUNT:f[5]})+"")&&we(s,n),d[0]&65&&i!==(i=f[0].t("{{COUNT}} characters",{COUNT:f[6]})+"")&&we(a,i)},d(f){f&&u(e)}}}function dn(l){let e,t;return{c(){e=E("div"),this.h()},l(n){e=I(n,"DIV",{class:!0}),b(e).forEach(u),this.h()},h(){c(e,"class",t="w-full h-full fixed top-0 left-0 "+(l[20]?"":" backdrop-blur-xs  bg-white/10 dark:bg-gray-900/10")+" flex items-center justify-center z-10 cursor-not-allowed")},m(n,s){y(n,e,s)},p(n,s){s[0]&1048576&&t!==(t="w-full h-full fixed top-0 left-0 "+(n[20]?"":" backdrop-blur-xs  bg-white/10 dark:bg-gray-900/10")+" flex items-center justify-center z-10 cursor-not-allowed")&&c(e,"class",t)},d(n){n&&u(e)}}}function mn(l){let e,t,n=mt(l[3]),s=[];for(let r=0;r<n.length;r+=1)s[r]=hn(on(l,n,r));const o=r=>N(s[r],1,1,()=>{s[r]=null});return{c(){e=E("div");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=I(r,"DIV",{class:!0});var i=b(e);for(let a=0;a<s.length;a+=1)s[a].l(i);i.forEach(u),this.h()},h(){c(e,"class","mb-2.5 w-full flex gap-1 flex-wrap z-40")},m(r,i){y(r,e,i);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);t=!0},p(r,i){if(i[0]&12){n=mt(r[3]);let a;for(a=0;a<n.length;a+=1){const f=on(r,n,a);s[a]?(s[a].p(f,i),$(s[a],1)):(s[a]=hn(f),s[a].c(),$(s[a],1),s[a].m(e,null))}for(He(),a=n.length;a<s.length;a+=1)o(a);Le()}},i(r){if(!t){for(let i=0;i<n.length;i+=1)$(s[i]);t=!0}},o(r){s=s.filter(Boolean);for(let i=0;i<s.length;i+=1)N(s[i]);t=!1},d(r){r&&u(e),Vt(s,r)}}}function pr(l){var s;let e,t;function n(){return l[59](l[100])}return e=new Us({props:{item:l[100],dismissible:!0,url:l[100].url,name:l[100].name,type:l[100].type,size:(s=l[100])==null?void 0:s.size,loading:l[100].status==="uploading"}}),e.$on("dismiss",n),{c(){W(e.$$.fragment)},l(o){U(e.$$.fragment,o)},m(o,r){j(e,o,r),t=!0},p(o,r){var a;l=o;const i={};r[0]&8&&(i.item=l[100]),r[0]&8&&(i.url=l[100].url),r[0]&8&&(i.name=l[100].name),r[0]&8&&(i.type=l[100].type),r[0]&8&&(i.size=(a=l[100])==null?void 0:a.size),r[0]&8&&(i.loading=l[100].status==="uploading"),e.$set(i)},i(o){t||($(e.$$.fragment,o),t=!0)},o(o){N(e.$$.fragment,o),t=!1},d(o){R(e,o)}}}function vr(l){let e,t;function n(){return l[58](l[102])}return e=new Ts({props:{src:l[100].url,imageClassName:" max-h-96 rounded-lg",dismissible:!0,onDismiss:n}}),{c(){W(e.$$.fragment)},l(s){U(e.$$.fragment,s)},m(s,o){j(e,s,o),t=!0},p(s,o){l=s;const r={};o[0]&8&&(r.src=l[100].url),o[0]&12&&(r.onDismiss=n),e.$set(r)},i(s){t||($(e.$$.fragment,s),t=!0)},o(s){N(e.$$.fragment,s),t=!1},d(s){R(e,s)}}}function hn(l){let e,t,n,s,o;const r=[vr,pr],i=[];function a(f,d){return f[100].type==="image"?0:1}return t=a(l),n=i[t]=r[t](l),{c(){e=E("div"),n.c(),s=q(),this.h()},l(f){e=I(f,"DIV",{class:!0});var d=b(e);n.l(d),s=G(d),d.forEach(u),this.h()},h(){c(e,"class","w-fit")},m(f,d){y(f,e,d),i[t].m(e,null),v(e,s),o=!0},p(f,d){let _=t;t=a(f),t===_?i[t].p(f,d):(He(),N(i[_],1,1,()=>{i[_]=null}),Le(),n=i[t],n?n.p(f,d):(n=i[t]=r[t](f),n.c()),$(n,1),n.m(e,s))},i(f){o||($(n),o=!0)},o(f){N(n),o=!1},d(f){f&&u(e),i[t].d()}}}function br(l){let e,t,n,s,o;return e=new Hl({props:{onRecord:l[67],onCaptureAudio:l[68],onUpload:l[69],$$slots:{default:[$r]},$$scope:{ctx:l}}}),s=new nt({props:{content:l[0].t("AI"),placement:"top",$$slots:{default:[Cr]},$$scope:{ctx:l}}}),{c(){W(e.$$.fragment),t=q(),n=E("div"),W(s.$$.fragment),this.h()},l(r){U(e.$$.fragment,r),t=G(r),n=I(r,"DIV",{class:!0});var i=b(n);U(s.$$.fragment,i),i.forEach(u),this.h()},h(){c(n,"class","cursor-pointer flex gap-0.5 rounded-full border border-gray-50 dark:border-gray-850 dark:bg-gray-850 transition shadow-xl")},m(r,i){j(e,r,i),y(r,t,i),y(r,n,i),j(s,n,null),o=!0},p(r,i){const a={};i[0]&1537&&(a.onRecord=r[67]),i[0]&1536&&(a.onCaptureAudio=r[68]),i[0]&1|i[3]&1024&&(a.$$scope={dirty:i,ctx:r}),e.$set(a);const f={};i[0]&1&&(f.content=r[0].t("AI")),i[0]&530432|i[3]&1024&&(f.$$scope={dirty:i,ctx:r}),s.$set(f)},i(r){o||($(e.$$.fragment,r),$(s.$$.fragment,r),o=!0)},o(r){N(e.$$.fragment,r),N(s.$$.fragment,r),o=!1},d(r){r&&(u(t),u(n)),R(e,r),R(s)}}}function wr(l){let e,t,n,s;function o(i){l[66](i)}let r={className:"p-1 w-full max-w-full",transcribe:!1,displayMedia:l[10],echoCancellation:!1,noiseSuppression:!1,onCancel:l[64],onConfirm:l[65]};return l[9]!==void 0&&(r.recording=l[9]),t=new $s({props:r}),de.push(()=>be(t,"recording",o)),{c(){e=E("div"),W(t.$$.fragment),this.h()},l(i){e=I(i,"DIV",{class:!0});var a=b(e);U(t.$$.fragment,a),a.forEach(u),this.h()},h(){c(e,"class","flex-1 w-full")},m(i,a){y(i,e,a),j(t,e,null),s=!0},p(i,a){const f={};a[0]&1024&&(f.displayMedia=i[10]),a[0]&1536&&(f.onCancel=i[64]),a[0]&1536&&(f.onConfirm=i[65]),!n&&a[0]&512&&(n=!0,f.recording=i[9],ve(()=>n=!1)),t.$set(f)},i(i){s||($(t.$$.fragment,i),s=!0)},o(i){N(t.$$.fragment,i),s=!1},d(i){i&&u(e),R(t)}}}function kr(l){let e,t,n;return t=new As({props:{className:"size-4.5"}}),{c(){e=E("div"),W(t.$$.fragment),this.h()},l(s){e=I(s,"DIV",{class:!0});var o=b(e);U(t.$$.fragment,o),o.forEach(u),this.h()},h(){c(e,"class","cursor-pointer p-2.5 flex rounded-full border border-gray-50 bg-white dark:border-none dark:bg-gray-850 hover:bg-gray-50 dark:hover:bg-gray-800 transition shadow-xl")},m(s,o){y(s,e,o),j(t,e,null),n=!0},p:le,i(s){n||($(t.$$.fragment,s),n=!0)},o(s){N(t.$$.fragment,s),n=!1},d(s){s&&u(e),R(t)}}}function $r(l){let e,t;return e=new nt({props:{content:l[0].t("Record"),placement:"top",$$slots:{default:[kr]},$$scope:{ctx:l}}}),{c(){W(e.$$.fragment)},l(n){U(e.$$.fragment,n)},m(n,s){j(e,n,s),t=!0},p(n,s){const o={};s[0]&1&&(o.content=n[0].t("Record")),s[3]&1024&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){R(e,n)}}}function Er(l){let e,t;return e=new rr({props:{onEdit:l[71],onChat:l[72],$$slots:{default:[Nr]},$$scope:{ctx:l}}}),{c(){W(e.$$.fragment)},l(n){U(e.$$.fragment,n)},m(n,s){j(e,n,s),t=!0},p(n,s){const o={};s[0]&6144&&(o.onChat=n[72]),s[3]&1024&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){R(e,n)}}}function Ir(l){let e,t,n,s,o;return t=new Cn({props:{className:"size-5"}}),{c(){e=E("button"),W(t.$$.fragment),this.h()},l(r){e=I(r,"BUTTON",{class:!0,type:!0});var i=b(e);U(t.$$.fragment,i),i.forEach(u),this.h()},h(){c(e,"class","p-2 flex justify-center items-center hover:bg-gray-50 dark:hover:bg-gray-800 rounded-full transition shrink-0"),c(e,"type","button")},m(r,i){y(r,e,i),j(t,e,null),n=!0,s||(o=ie(e,"click",l[70]),s=!0)},p:le,i(r){n||($(t.$$.fragment,r),n=!0)},o(r){N(t.$$.fragment,r),n=!1},d(r){r&&u(e),R(t),s=!1,o()}}}function Nr(l){let e,t,n;return t=new Yl({}),{c(){e=E("div"),W(t.$$.fragment),this.h()},l(s){e=I(s,"DIV",{class:!0});var o=b(e);U(t.$$.fragment,o),o.forEach(u),this.h()},h(){c(e,"class","cursor-pointer p-2.5 flex rounded-full border border-gray-50 bg-white dark:border-none dark:bg-gray-850 hover:bg-gray-50 dark:hover:bg-gray-800 transition shadow-xl")},m(s,o){y(s,e,o),j(t,e,null),n=!0},p:le,i(s){n||($(t.$$.fragment,s),n=!0)},o(s){N(t.$$.fragment,s),n=!1},d(s){s&&u(e),R(t)}}}function Cr(l){let e,t,n,s;const o=[Ir,Er],r=[];function i(a,f){return a[19]?0:1}return e=i(l),t=r[e]=o[e](l),{c(){t.c(),n=at()},l(a){t.l(a),n=at()},m(a,f){r[e].m(a,f),y(a,n,f),s=!0},p(a,f){let d=e;e=i(a),e===d?r[e].p(a,f):(He(),N(r[d],1,1,()=>{r[d]=null}),Le(),t=r[e],t?t.p(a,f):(t=r[e]=o[e](a),t.c()),$(t,1),t.m(n.parentNode,n))},i(a){s||($(t),s=!0)},o(a){N(t),s=!1},d(a){a&&u(n),r[e].d(a)}}}function Tr(l){let e,t,n,s,o,r,i,a,f;const d=[ir,ar],_=[];function D(m,w){return m[18]?0:1}t=D(l),n=_[t]=d[t](l);const V=[wr,br],T=[];function k(m,w){return m[9]?0:1}return i=k(l),a=T[i]=V[i](l),{c(){e=E("div"),n.c(),s=q(),o=E("div"),r=E("div"),a.c(),this.h()},l(m){e=I(m,"DIV",{class:!0,id:!0});var w=b(e);n.l(w),w.forEach(u),s=G(m),o=I(m,"DIV",{class:!0});var g=b(o);r=I(g,"DIV",{class:!0});var p=b(r);a.l(p),p.forEach(u),g.forEach(u),this.h()},h(){c(e,"class","relative flex-1 w-full h-full flex justify-center pt-[11px]"),c(e,"id","note-editor"),c(r,"class","flex gap-1 w-full min-w-full justify-between"),c(o,"class","absolute z-20 bottom-0 right-0 p-3.5 max-w-full w-full flex")},m(m,w){y(m,e,w),_[t].m(e,null),y(m,s,w),y(m,o,w),v(o,r),T[i].m(r,null),f=!0},p(m,w){let g=t;t=D(m),t===g?_[t].p(m,w):(He(),N(_[g],1,1,()=>{_[g]=null}),Le(),n=_[t],n?n.p(m,w):(n=_[t]=d[t](m),n.c()),$(n,1),n.m(e,null));let p=i;i=k(m),i===p?T[i].p(m,w):(He(),N(T[p],1,1,()=>{T[p]=null}),Le(),a=T[i],a?a.p(m,w):(a=T[i]=V[i](m),a.c()),$(a,1),a.m(r,null))},i(m){f||($(n),$(a),f=!0)},o(m){N(n),N(a),f=!1},d(m){m&&(u(e),u(s),u(o)),_[t].d(),T[i].d()}}}function Dr(l){let e,t,n,s;function o(a){l[81](a)}function r(a){l[82](a)}let i={};return l[11]!==void 0&&(i.show=l[11]),l[8]!==void 0&&(i.selectedModelId=l[8]),e=new el({props:i}),de.push(()=>be(e,"show",o)),de.push(()=>be(e,"selectedModelId",r)),{c(){W(e.$$.fragment)},l(a){U(e.$$.fragment,a)},m(a,f){j(e,a,f),s=!0},p(a,f){const d={};!t&&f[0]&2048&&(t=!0,d.show=a[11],ve(()=>t=!1)),!n&&f[0]&256&&(n=!0,d.selectedModelId=a[8],ve(()=>n=!1)),e.$set(d)},i(a){s||($(e.$$.fragment,a),s=!0)},o(a){N(e.$$.fragment,a),s=!1},d(a){R(e,a)}}}function Mr(l){let e,t,n,s,o,r,i,a,f;function d(g){l[74](g)}function _(g){l[75](g)}function D(g){l[76](g)}function V(g){l[77](g)}function T(g){l[78](g)}function k(g){l[79](g)}function m(g){l[80](g)}let w={files:l[3],onInsert:l[37],onStop:l[32],onEdited:l[29],insertNoteHandler:l[73],scrollToBottomHandler:l[36]};return l[11]!==void 0&&(w.show=l[11]),l[8]!==void 0&&(w.selectedModelId=l[8]),l[4]!==void 0&&(w.messages=l[4]),l[2]!==void 0&&(w.note=l[2]),l[19]!==void 0&&(w.editing=l[19]),l[20]!==void 0&&(w.streaming=l[20]),l[21]!==void 0&&(w.stopResponseFlag=l[21]),e=new $l({props:w}),de.push(()=>be(e,"show",d)),de.push(()=>be(e,"selectedModelId",_)),de.push(()=>be(e,"messages",D)),de.push(()=>be(e,"note",V)),de.push(()=>be(e,"editing",T)),de.push(()=>be(e,"streaming",k)),de.push(()=>be(e,"stopResponseFlag",m)),{c(){W(e.$$.fragment)},l(g){U(e.$$.fragment,g)},m(g,p){j(e,g,p),f=!0},p(g,p){const H={};p[0]&8&&(H.files=g[3]),p[0]&4&&(H.insertNoteHandler=g[73]),!t&&p[0]&2048&&(t=!0,H.show=g[11],ve(()=>t=!1)),!n&&p[0]&256&&(n=!0,H.selectedModelId=g[8],ve(()=>n=!1)),!s&&p[0]&16&&(s=!0,H.messages=g[4],ve(()=>s=!1)),!o&&p[0]&4&&(o=!0,H.note=g[2],ve(()=>o=!1)),!r&&p[0]&524288&&(r=!0,H.editing=g[19],ve(()=>r=!1)),!i&&p[0]&1048576&&(i=!0,H.streaming=g[20],ve(()=>i=!1)),!a&&p[0]&2097152&&(a=!0,H.stopResponseFlag=g[21],ve(()=>a=!1)),e.$set(H)},i(g){f||($(e.$$.fragment,g),f=!0)},o(g){N(e.$$.fragment,g),f=!1},d(g){R(e,g)}}}function Sr(l){let e,t,n,s;const o=[Mr,Dr],r=[];function i(a,f){return a[12]==="chat"?0:a[12]==="settings"?1:-1}return~(e=i(l))&&(t=r[e]=o[e](l)),{c(){t&&t.c(),n=at()},l(a){t&&t.l(a),n=at()},m(a,f){~e&&r[e].m(a,f),y(a,n,f),s=!0},p(a,f){let d=e;e=i(a),e===d?~e&&r[e].p(a,f):(t&&(He(),N(r[d],1,1,()=>{r[d]=null}),Le()),~e?(t=r[e],t?t.p(a,f):(t=r[e]=o[e](a),t.c()),$(t,1),t.m(n.parentNode,n)):t=null)},i(a){s||($(t),s=!0)},o(a){N(t),s=!1},d(a){a&&u(n),~e&&r[e].d(a)}}}function yr(l){let e,t,n,s,o;e=new wn({props:{defaultSize:70,minSize:30,class:"h-full flex flex-col w-full relative",$$slots:{default:[Tr]},$$scope:{ctx:l}}});function r(a){l[83](a)}let i={$$slots:{default:[Sr]},$$scope:{ctx:l}};return l[11]!==void 0&&(i.show=l[11]),n=new Qs({props:i}),de.push(()=>be(n,"show",r)),{c(){W(e.$$.fragment),t=q(),W(n.$$.fragment)},l(a){U(e.$$.fragment,a),t=G(a),U(n.$$.fragment,a)},m(a,f){j(e,a,f),y(a,t,f),j(n,a,f),o=!0},p(a,f){const d={};f[0]&123600623|f[3]&1024&&(d.$$scope={dirty:f,ctx:a}),e.$set(d);const _={};f[0]&3676444|f[3]&1024&&(_.$$scope={dirty:f,ctx:a}),!s&&f[0]&2048&&(s=!0,_.show=a[11],ve(()=>s=!1)),n.$set(_)},i(a){o||($(e.$$.fragment,a),$(n.$$.fragment,a),o=!0)},o(a){N(e.$$.fragment,a),N(n.$$.fragment,a),o=!1},d(a){a&&u(t),R(e,a),R(n,a)}}}function Vr(l){var T,k,m,w;let e,t,n,s,o,r,i,a,f,d;Bt.title=e=`
		`+((T=l[2])!=null&&T.title?`${((k=l[2])==null?void 0:k.title.length)>30?`${(m=l[2])==null?void 0:m.title.slice(0,30)}...`:(w=l[2])==null?void 0:w.title} • ${l[23]}`:`${l[23]}`)+`
	`;let _=l[2]&&an(l);s=new js({props:{show:l[17]}});function D(g){l[42](g)}let V={title:l[0].t("Delete note?"),$$slots:{default:[or]},$$scope:{ctx:l}};return l[13]!==void 0&&(V.show=l[13]),r=new Ws({props:V}),de.push(()=>be(r,"show",D)),r.$on("confirm",l[43]),f=new ss({props:{direction:"horizontal",class:"w-full h-full",$$slots:{default:[yr]},$$scope:{ctx:l}}}),{c(){t=q(),_&&_.c(),n=q(),W(s.$$.fragment),o=q(),W(r.$$.fragment),a=q(),W(f.$$.fragment)},l(g){xn("svelte-zkgjga",Bt.head).forEach(u),t=G(g),_&&_.l(g),n=G(g),U(s.$$.fragment,g),o=G(g),U(r.$$.fragment,g),a=G(g),U(f.$$.fragment,g)},m(g,p){y(g,t,p),_&&_.m(g,p),y(g,n,p),j(s,g,p),y(g,o,p),j(r,g,p),y(g,a,p),j(f,g,p),d=!0},p(g,p){var L,J,O,Y;(!d||p[0]&8388612)&&e!==(e=`
		`+((L=g[2])!=null&&L.title?`${((J=g[2])==null?void 0:J.title.length)>30?`${(O=g[2])==null?void 0:O.title.slice(0,30)}...`:(Y=g[2])==null?void 0:Y.title} • ${g[23]}`:`${g[23]}`)+`
	`)&&(Bt.title=e),g[2]?_?(_.p(g,p),p[0]&4&&$(_,1)):(_=an(g),_.c(),$(_,1),_.m(n.parentNode,n)):_&&(He(),N(_,1,1,()=>{_=null}),Le());const H={};p[0]&131072&&(H.show=g[17]),s.$set(H);const M={};p[0]&1&&(M.title=g[0].t("Delete note?")),p[0]&5|p[3]&1024&&(M.$$scope={dirty:p,ctx:g}),!i&&p[0]&8192&&(i=!0,M.show=g[13],ve(()=>i=!1)),r.$set(M);const z={};p[0]&125698047|p[3]&1024&&(z.$$scope={dirty:p,ctx:g}),f.$set(z)},i(g){d||($(_),$(s.$$.fragment,g),$(r.$$.fragment,g),$(f.$$.fragment,g),d=!0)},o(g){N(_),N(s.$$.fragment,g),N(r.$$.fragment,g),N(f.$$.fragment,g),d=!1},d(g){g&&(u(t),u(n),u(o),u(a)),_&&_.d(g),R(s,g),R(r,g),R(f,g)}}}function zr(l,e){return JSON.stringify(l)===JSON.stringify(e)}function gn(l){var n;const e={json:l.data.content.json,html:l.data.content.html,md:l.data.content.md},t=(n=l.data.versions)==null?void 0:n.at(-1);return!t||!zr(t,e)?(l.data.versions=(l.data.versions??[]).concat(e),!0):!1}const Or=l=>{l.deltaY!==0&&(l.preventDefault(),l.currentTarget.scrollLeft+=l.deltaY)};function Br(l,e,t){let n,s,o,r,i,a,f,d;Oe(l,Rt,h=>t(85,n=h)),Oe(l,ms,h=>t(86,s=h)),Oe(l,hs,h=>t(87,o=h)),Oe(l,gs,h=>t(23,i=h)),Oe(l,Gt,h=>t(24,a=h)),Oe(l,$n,h=>t(25,f=h)),Oe(l,_s,h=>t(26,d=h));const{saveAs:_}=rs,D=wt("i18n");Oe(l,D,h=>t(0,r=h)),Se.extend(cs),Se.extend(ds),Se.extend(us);async function V(h){for(const A of h)try{Se.locale(A);break}catch(x){console.error(`Could not load locale '${A}':`,x)}}let{id:T=null}=e,k=null,m=null,w=[],g=[],p=0,H=0,M=null,z=null,L=!1,J=!1,O=!1,Y="chat",S=!1,Z=!1,ee=!1,ke=!1,me=!1,ye=!1,se=!1,P=!1,X=!1,re=null;const B=async()=>{t(18,ye=!0);const h=await zs(localStorage.token,T).catch(A=>(Ne.error(`${A}`),null));if(t(4,g=[]),h)t(2,m=h),t(3,w=h.data.files||[]);else{Wt("/");return}t(18,ye=!1)};let K=null;const fe=()=>{K&&clearTimeout(K),K=setTimeout(async()=>{await Os(localStorage.token,T,{title:(m==null?void 0:m.title)===""?r.t("Untitled"):m.title,data:{files:w},access_control:m==null?void 0:m.access_control}).catch(h=>{Ne.error(`${h}`)})},200)},Ue=async()=>{k&&k.commands.setContent(m.data.content.html)},je=async()=>{var Fe,ge;const A=`### Task:
Generate a concise, 3-5 word title with an emoji summarizing the content in the content's primary language.
### Guidelines:
- The title should clearly represent the main theme or subject of the content.
- Use emojis that enhance understanding of the topic, but avoid quotation marks or special formatting.
- Write the title in the content's primary language.
- Prioritize accuracy over excessive creativity; keep it clear and simple.
- Your entire response must consist solely of the JSON object, without any introductory or concluding text.
- The output must be a single, raw JSON object, without any markdown code fences or other encapsulating text.
- Ensure no conversational text, affirmations, or explanations precede or follow the raw JSON output, as this will cause direct parsing failure.
### Output:
JSON format: { "title": "your concise title here" }
### Examples:
- { "title": "📉 Stock Market Trends" },
- { "title": "🍪 Perfect Chocolate Chip Recipe" },
- { "title": "Evolution of Music Streaming" },
- { "title": "Remote Work Productivity Tips" },
- { "title": "Artificial Intelligence in Healthcare" },
- { "title": "🎮 Video Game Development Insights" }
### Content:
<content>
${m.data.content.md}
</content>`,x=JSON.parse(JSON.stringify(m.title));t(2,m.title="",m),t(16,ke=!0);const te=await bs(localStorage.token,{model:z,stream:!1,messages:[{role:"user",content:A}]},`${Ut}/api`);if(te){const $e=((ge=(Fe=te==null?void 0:te.choices[0])==null?void 0:Fe.message)==null?void 0:ge.content)??"";try{const Ie=$e.indexOf("{"),Me=$e.lastIndexOf("}");if(Ie!==-1&&Me!==-1){const ne=$e.substring(Ie,Me+1),Q=JSON.parse(ne);Q&&Q.title&&t(2,m.title=Q.title.trim(),m)}}catch(Ie){console.error("Error parsing JSON response:",Ie),Ne.error(r.t("Failed to generate title"))}}m.title||t(2,m.title=x,m),t(16,ke=!1),await dt(),fe()};async function he(){if(z===""){Ne.error(r.t("Please select a model."));return}const h=n.filter(A=>{var x,te;return A.id===z&&!(((te=(x=A==null?void 0:A.info)==null?void 0:x.meta)==null?void 0:te.hidden)??!1)}).find(A=>A.id===z);if(!h){t(8,z="");return}t(19,se=!0),await st(h),t(19,se=!1),Ue(),t(7,M=null)}const Je=async()=>{t(21,X=!0)},Ve=async h=>{var te,Fe,ge,$e,Ie,Me;const A=is(),x={type:"file",file:"",id:null,url:"",name:h.name,collection_name:"",status:"uploading",size:h.size,error:"",itemId:A};if(x.size==0)return Ne.error(r.t("You cannot upload an empty file.")),null;t(3,w=[...w,x]);try{let ne=null;(h.type.startsWith("audio/")||h.type.startsWith("video/"))&&((Fe=(te=o==null?void 0:o.audio)==null?void 0:te.stt)!=null&&Fe.language)&&(ne={language:($e=(ge=o==null?void 0:o.audio)==null?void 0:ge.stt)==null?void 0:$e.language});const Q=await vs(localStorage.token,h,ne);Q?(Q.id,x.name,(Ie=Q==null?void 0:Q.meta)==null||Ie.collection_name,Q.error&&(console.warn("File upload warning:",Q.error),Ne.warning(Q.error)),x.status="uploaded",x.file=Q,x.id=Q.id,x.collection_name=((Me=Q==null?void 0:Q.meta)==null?void 0:Me.collection_name)||(Q==null?void 0:Q.collection_name),x.url=`${ps}/files/${Q.id}`,t(3,w)):t(3,w=w.filter(Ye=>(Ye==null?void 0:Ye.itemId)!==A))}catch(ne){Ne.error(`${ne}`),t(3,w=w.filter(Q=>(Q==null?void 0:Q.itemId)!==A))}w.length>0?t(2,m.data.files=w,m):t(2,m.data.files=null,m),fe()},Ee=async h=>{h.forEach(async A=>{var x,te,Fe,ge;if(A.name,A.type,A.size,A.name.split(".").at(-1),(((x=s==null?void 0:s.file)==null?void 0:x.max_size)??null)!==null&&A.size>(((te=s==null?void 0:s.file)==null?void 0:te.max_size)??0)*1024*1024){A.size,(((Fe=s==null?void 0:s.file)==null?void 0:Fe.max_size)??0)*1024*1024,Ne.error(r.t("File size should not exceed {{maxSize}} MB.",{maxSize:(ge=s==null?void 0:s.file)==null?void 0:ge.max_size}));return}if(A.type.startsWith("image/")){const $e=async(Me,ne={},Q={})=>{var Pt,Ht,Lt,Ft,Yt,Jt;const Ye=(ne==null?void 0:ne.imageCompression)??!1,ut=((Ht=(Pt=Q==null?void 0:Q.file)==null?void 0:Pt.image_compression)==null?void 0:Ht.width)??null,ct=((Ft=(Lt=Q==null?void 0:Q.file)==null?void 0:Lt.image_compression)==null?void 0:Ft.height)??null;if(!Ye&&!ut&&!ct)return Me;let ot=null,kt=null;return Ye&&(ot=((Yt=ne==null?void 0:ne.imageCompressionSize)==null?void 0:Yt.width)??null,kt=((Jt=ne==null?void 0:ne.imageCompressionSize)==null?void 0:Jt.height)??null),ut&&(ot===null||ot>ut)&&(ot=ut),ct&&(kt===null||kt>ct)&&(kt=ct),ot||kt?await fs(Me,ot,kt):Me};let Ie=new FileReader;Ie.onload=async Me=>{let ne=Me.target.result;ne=await $e(ne,o,s),t(3,w=[...w,{type:"image",url:`${ne}`}]),t(2,m.data.files=w,m)},Ie.readAsDataURL(A.type==="image/heic"?await ls({blob:A,toType:"image/jpeg"}):A)}else Ve(A)})},Qe=async h=>{if(h==="txt"){const A=new Blob([m.data.content.md],{type:"text/plain"});_(A,`${m.title}.txt`)}else if(h==="md"){const A=new Blob([m.data.content.md],{type:"text/markdown"});_(A,`${m.title}.md`)}else h==="pdf"&&await Ke(m)},Ke=async h=>{var A,x;try{const ge=((x=(A=h.data)==null?void 0:A.content)==null?void 0:x.html)??"";let $e;ge instanceof HTMLElement?$e=ge:($e=document.createElement("div"),$e.innerHTML=ge,document.body.appendChild($e));const Ie=await os($e,{useCORS:!0,scale:2,width:1024,windowWidth:1024,windowHeight:1400});ge instanceof HTMLElement||document.body.removeChild($e);const Me=Ie.toDataURL("image/png"),ne=new as("p","mm","a4"),Q=210,Ye=297,ut=Ie.height*Q/Ie.width;let ct=ut,ot=0;for(ne.addImage(Me,"PNG",0,ot,Q,ut),ct-=Ye;ct>0;)ot-=Ye,ne.addPage(),ne.addImage(Me,"PNG",0,ot,Q,ut),ct-=Ye;ne.save(`${h.title}.pdf`)}catch(te){console.error("Error generating PDF",te),Ne.error(`${te}`)}},qe=async h=>{await Bs(localStorage.token,h).catch(x=>(Ne.error(`${x}`),null))?(Ne.success(r.t("Note deleted successfully")),Wt("/notes")):Ne.error(r.t("Failed to delete note"))},_e=()=>{const h=document.getElementById("note-content-container");h&&(h.scrollTop=h==null?void 0:h.scrollHeight)},st=async h=>{t(21,X=!1);let A={json:null,html:"",md:""};const x=`Enhance existing notes using additional context provided from audio transcription or uploaded file content in the content's primary language. Your task is to make the notes more useful and comprehensive by incorporating relevant information from the provided context.

Input will be provided within <notes> and <context> XML tags, providing a structure for the existing notes and context respectively.

# Output Format

Provide the enhanced notes in markdown format. Use markdown syntax for headings, lists, task lists ([ ]) where tasks or checklists are strongly implied, and emphasis to improve clarity and presentation. Ensure that all integrated content from the context is accurately reflected. Return only the markdown formatted note.
`,[te,Fe]=await En(localStorage.token,{model:h.id,stream:!0,messages:[{role:"system",content:x},{role:"user",content:`<notes>${m.data.content.md}</notes>`+(w&&w.length>0?`
<context>${w.map(ge=>{var $e,Ie;return`${ge.name}: ${((Ie=($e=ge==null?void 0:ge.file)==null?void 0:$e.data)==null?void 0:Ie.content)??"Could not extract content"}
`}).join("")}</context>`:"")}]},`${Ut}/api`);if(await dt(),t(20,P=!0),te&&te.ok){const ge=te.body.pipeThrough(new TextDecoderStream).pipeThrough(kn(`
`)).getReader();for(;;){const{value:$e,done:Ie}=await ge.read();if(Ie||X){X&&Fe.abort("User: Stop Response"),t(19,se=!1),t(20,P=!1);break}try{let Me=$e.split(`
`);for(const ne of Me)if(ne!==""&&ne!=="data: [DONE]"){let Q=JSON.parse(ne.replace(/^data: /,""));if(Q.choices&&Q.choices.length>0){const Ye=Q.choices[0];Ye.delta&&Ye.delta.content&&(A.md+=Ye.delta.content,A.html=At.parse(A.md),t(2,m.data.content.md=A.md,m),t(2,m.data.content.html=A.html,m),t(2,m.data.content.json=null,m),_e())}}}catch(Me){}}}t(20,P=!1)},lt=h=>{var A,x;h.preventDefault(),(x=(A=h.dataTransfer)==null?void 0:A.types)!=null&&x.includes("Files")?t(17,me=!0):t(17,me=!1)},ae=()=>{t(17,me=!1)},oe=async h=>{var A,x;if(h.preventDefault(),(A=h.dataTransfer)!=null&&A.files){const te=Array.from((x=h.dataTransfer)==null?void 0:x.files);te&&te.length>0&&Ee(te)}t(17,me=!1)},ht=h=>{gn(m),re==null||re.insertContent(h)};jt(async()=>{var A;await dt(),o!=null&&o.models?t(8,z=o==null?void 0:o.models[0]):s!=null&&s.default_models?t(8,z=s==null?void 0:s.default_models.split(",")[0]):t(8,z=""),z&&(n.filter(te=>{var Fe,ge;return te.id===z&&!(((ge=(Fe=te==null?void 0:te.info)==null?void 0:Fe.meta)==null?void 0:ge.hidden)??!1)}).find(te=>te.id===z)||t(8,z="")),z||t(8,z=((A=n.at(0))==null?void 0:A.id)||"");const h=document.getElementById("note-editor");h==null||h.addEventListener("dragover",lt),h==null||h.addEventListener("drop",oe),h==null||h.addEventListener("dragleave",ae)}),_n(()=>{const h=document.getElementById("note-editor");h&&(h==null||h.removeEventListener("dragover",lt),h==null||h.removeEventListener("drop",oe),h==null||h.removeEventListener("dragleave",ae))});const rt=()=>{fe()};function Ge(h){Z=h,t(14,Z)}function Ce(h){l.$$.not_equal(m.access_control,h)&&(m.access_control=h,t(2,m))}function Te(h){S=h,t(13,S)}const pe=()=>{qe(m.id),t(13,S=!1)},zt=()=>{Gt.set(!a)};function Ot(){m.title=this.value,t(2,m)}const Tt=()=>{t(15,ee=!0)},Dt=h=>{var A;((A=h.relatedTarget)==null?void 0:A.id)!=="generate-title-button"&&(t(15,ee=!1),fe())},Mt=h=>{h.preventDefault(),h.stopImmediatePropagation(),h.stopPropagation(),je(),t(15,ee=!1)},St=()=>{k.chain().focus().undo().run()},C=()=>{k.chain().focus().redo().run()},F=()=>{O&&Y==="chat"?t(11,O=!1):(O||t(11,O=!0),t(12,Y="chat"))},xe=()=>{O&&Y==="settings"?t(11,O=!1):(O||t(11,O=!0),t(12,Y="settings"))},ze=h=>{Qe(h)},Ze=async()=>{const h=window.location.origin;await qt(`${h}/notes/${m.id}`)?Ne.success(r.t("Copied link to clipboard")):Ne.error(r.t("Failed to copy link"))},De=async()=>{await qt(m.data.content.md).catch(A=>(Ne.error(`${A}`),null))&&Ne.success(r.t("Copied to clipboard"))},gt=()=>{t(13,S=!0)},Xe=()=>{t(14,Z=!0)},_t=h=>{t(3,w=w.filter((A,x)=>x!==h)),t(2,m.data.files=w.length>0?w:null,m)},pt=h=>{t(3,w=w.filter(A=>(A==null?void 0:A.id)!==h.id)),t(2,m.data.files=w.length>0?w:null,m)},et=h=>{t(2,m.data.content.html=h.html,m),t(2,m.data.content.md=h.md,m),k&&(t(5,p=k.storage.characterCount.words()),t(6,H=k.storage.characterCount.characters()))};function it(h){de[h?"unshift":"push"](()=>{re=h,t(22,re)})}function ft(h){k=h,t(1,k)}function vt(h){l.$$.not_equal(m.data.content.json,h)&&(m.data.content.json=h,t(2,m))}const tt=()=>{t(9,L=!1),t(10,J=!1)},Vn=h=>{h!=null&&h.file&&Ve(h==null?void 0:h.file),t(9,L=!1),t(10,J=!1)};function zn(h){L=h,t(9,L)}const On=async()=>{t(10,J=!1);try{let h=await navigator.mediaDevices.getUserMedia({audio:!0}).catch(function(A){return Ne.error(r.t("Permission denied when accessing microphone: {{error}}",{error:A})),null});h&&(t(9,L=!0),h.getTracks().forEach(x=>x.stop())),h=null}catch{Ne.error(r.t("Permission denied when accessing microphone"))}},Bn=async()=>{t(10,J=!0),t(9,L=!0)},An=async()=>{const h=document.createElement("input");h.type="file",h.accept="audio/*",h.multiple=!1,h.click(),h.onchange=async A=>{const x=A.target.files;x&&x.length>0&&await Ve(x[0])}},Wn=()=>{Je()},Un=()=>{he()},jn=()=>{t(11,O=!0),t(12,Y="chat")},Rn=()=>{gn(m)};function Pn(h){O=h,t(11,O)}function Hn(h){z=h,t(8,z)}function Ln(h){g=h,t(4,g)}function Fn(h){m=h,t(2,m)}function Yn(h){se=h,t(19,se)}function Jn(h){P=h,t(20,P)}function qn(h){X=h,t(21,X)}function Gn(h){O=h,t(11,O)}function Zn(h){z=h,t(8,z)}function Xn(h){O=h,t(11,O)}return l.$$set=h=>{"id"in h&&t(38,T=h.id)},l.$$.update=()=>{l.$$.dirty[0]&1&&V(r.languages),l.$$.dirty[1]&128&&T&&B()},[r,k,m,w,g,p,H,M,z,L,J,O,Y,S,Z,ee,ke,me,ye,se,P,X,re,i,a,f,d,D,fe,Ue,je,he,Je,Ve,Qe,qe,_e,ht,T,rt,Ge,Ce,Te,pe,zt,Ot,Tt,Dt,Mt,St,C,F,xe,ze,Ze,De,gt,Xe,_t,pt,et,it,ft,vt,tt,Vn,zn,On,Bn,An,Wn,Un,jn,Rn,Pn,Hn,Ln,Fn,Yn,Jn,qn,Gn,Zn,Xn]}class Ar extends Ae{constructor(e){super(),We(this,e,Br,Vr,Be,{id:38},null,[-1,-1,-1,-1])}}function Wr(l){let e,t,n;return t=new Ar({props:{id:l[0].params.id}}),{c(){e=E("div"),W(t.$$.fragment),this.h()},l(s){e=I(s,"DIV",{id:!0,class:!0});var o=b(e);U(t.$$.fragment,o),o.forEach(u),this.h()},h(){c(e,"id","note-container"),c(e,"class","w-full h-full")},m(s,o){y(s,e,o),j(t,e,null),n=!0},p(s,[o]){const r={};o&1&&(r.id=s[0].params.id),t.$set(r)},i(s){n||($(t.$$.fragment,s),n=!0)},o(s){N(t.$$.fragment,s),n=!1},d(s){s&&u(e),R(t)}}}function Ur(l,e,t){let n;return Oe(l,es,s=>t(0,n=s)),[n]}class yo extends Ae{constructor(e){super(),We(this,e,Ur,Wr,Be,{})}}export{yo as component};
//# sourceMappingURL=23.BS9v7iI2.js.map
