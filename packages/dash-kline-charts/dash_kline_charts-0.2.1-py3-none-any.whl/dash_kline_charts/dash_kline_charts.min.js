(()=>{var e={556:(e,o,t)=>{e.exports=t(694)()},694:(e,o,t)=>{"use strict";var r=t(925);function n(){}function i(){}i.resetWarningCache=n,e.exports=function(){function e(e,o,t,n,i,l){if(l!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function o(){return e}e.isRequired=e;var t={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:o,element:e,elementType:e,instanceOf:o,node:e,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:i,resetWarningCache:n};return t.PropTypes=t,t}},925:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},o={};function t(r){var n=o[r];if(void 0!==n)return n.exports;var i=o[r]={exports:{}};return e[r](i,i.exports,t),i.exports}t.n=e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return t.d(o,{a:o}),o},t.d=(e,o)=>{for(var r in o)t.o(o,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:o[r]})},t.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{"use strict";t.r(r),t.d(r,{DashKLineChart:()=>d});const e=window.React;var o=t.n(e),n=t(556),i=t.n(n);function l(e,o){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);o&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),t.push.apply(t,r)}return t}function a(e){for(var o=1;o<arguments.length;o++){var t=null!=arguments[o]?arguments[o]:{};o%2?l(Object(t),!0).forEach(function(o){c(e,o,t[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))})}return e}function c(e,o,t){return(o=function(e){var o=function(e){if("object"!=s(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var t=o.call(e,"string");if("object"!=s(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(o)?o:o+""}(o))in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}var u=function(t){var r=t.id,n=t.data,i=void 0===n?[]:n,l=t.config,c=void 0===l?{}:l,u=t.indicators,d=void 0===u?[]:u,p=t.style,f=void 0===p?{}:p,h=t.className,v=void 0===h?"":h,y=t.responsive,m=void 0===y||y,b=t.symbol,g=(0,e.useRef)(null),w=(0,e.useRef)(null),x=(0,e.useMemo)(function(){return null==i?[]:Array.isArray(i)?i:[]},[i]),k=(0,e.useMemo)(function(){return{theme:"light",grid:{show:!0,horizontal:{show:!0},vertical:{show:!0}},candle:{type:"candle_solid"},crosshair:{show:!0,horizontal:{show:!0},vertical:{show:!0}},yAxis:{show:!0,position:"right"},xAxis:{show:!0,position:"bottom"}}},[]),C=(0,e.useMemo)(function(){return function(e,o){return a(a({},e),o)}(k,c)},[k,c]),O=(0,e.useMemo)(function(){return function(e){var o={light:{background:"#ffffff",text:"#333333",grid:"#e0e0e0",candle:{up:"#26A69A",down:"#EF5350",noChange:"#888888"}},dark:{background:"#1e1e1e",text:"#ffffff",grid:"#444444",candle:{up:"#4caf50",down:"#f44336",noChange:"#888888"}}};return o[e]||o.light}(C.theme)},[C.theme]),E=(0,e.useMemo)(function(){return function(e){var o,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"candle";if(!Array.isArray(e))return!1;if(0===e.length)return!0;var r="object"===s(t)&&null!==(o=t.candle)&&void 0!==o&&o.type?t.candle.type:t;return e.every(function(e){return null!==e&&"object"===s(e)&&"timestamp"in e&&"number"==typeof e.timestamp&&("area"===r?"close"in e&&"number"==typeof e.close:"open"in e&&"high"in e&&"low"in e&&"close"in e&&"number"==typeof e.open&&"number"==typeof e.high&&"number"==typeof e.low&&"number"==typeof e.close&&e.high>=e.low&&e.open>=e.low&&e.open<=e.high&&e.close>=e.low&&e.close<=e.high&&(!("volume"in e)||"number"==typeof e.volume))})}(x,C)},[x,C]),j=(0,e.useCallback)(function(){if(g.current&&E)try{if(!window.klinecharts)return void console.error("KLineCharts library not available");w.current&&(klinecharts.dispose(g.current),w.current=null);var e=klinecharts.init(g.current);if(!e)return void console.error("Failed to initialize chart instance");w.current=e,e.setSymbol({ticker:b||"DASH-KLINE",pricePrecision:2,volumePrecision:0}),e.setPeriod({type:"day",span:1}),e.setDataLoader({getBars:function(e){"init"===e.type||"update"===e.type?e.callback(x,!1):"forward"!==e.type&&"backward"!==e.type||e.callback([],!1)}}),S(e,C,O),A(e,d)}catch(e){console.error("Failed to initialize chart:",e)}},[x,C,d,E,O,b,S,A]),P=(0,e.useCallback)(function(){if(w.current&&E)try{w.current.setDataLoader({getBars:function(e){"init"===e.type||"update"===e.type?e.callback(x,!1):"forward"!==e.type&&"backward"!==e.type||e.callback([],!1)}})}catch(e){console.error("Failed to update chart data:",e)}},[x,E]),S=(0,e.useCallback)(function(e,o,t){if(e)try{var r,n,i,l,a,c,s,u,d,p,f,h,v,y,m,b,w,x,k,C,O,E,j,P,S,A,T=null!==(r=null===(n=o.candle)||void 0===n?void 0:n.type)&&void 0!==r?r:"candle_solid",_={grid:{show:null===(i=null===(l=o.grid)||void 0===l?void 0:l.show)||void 0===i||i,horizontal:{show:null===(a=null===(c=o.grid)||void 0===c||null===(c=c.horizontal)||void 0===c?void 0:c.show)||void 0===a||a,color:t.grid,style:"dash"},vertical:{show:null===(s=null===(u=o.grid)||void 0===u||null===(u=u.vertical)||void 0===u?void 0:u.show)||void 0===s||s,color:t.grid,style:"dash"}},candle:{type:T,bar:{upColor:t.candle.up,downColor:t.candle.down,noChangeColor:t.candle.noChange,upBorderColor:t.candle.up,downBorderColor:t.candle.down,noChangeBorderColor:t.candle.noChange,upWickColor:t.candle.up,downWickColor:t.candle.down,noChangeWickColor:t.candle.noChange},tooltip:{title:{show:null===(d=null===(p=o.candle)||void 0===p||null===(p=p.tooltip)||void 0===p||null===(p=p.title)||void 0===p?void 0:p.show)||void 0===d||d},legend:{template:null!==(f=null===(h=o.candle)||void 0===h||null===(h=h.tooltip)||void 0===h||null===(h=h.legend)||void 0===h?void 0:h.template)&&void 0!==f?f:[{title:"time",value:"{time}"},{title:"open",value:"{open}"},{title:"high",value:"{high}"},{title:"low",value:"{low}"},{title:"close",value:"{close}"},{title:"volume",value:"{volume}"}]}}},crosshair:{show:null===(v=null===(y=o.crosshair)||void 0===y?void 0:y.show)||void 0===v||v,horizontal:{show:null===(m=null===(b=o.crosshair)||void 0===b||null===(b=b.horizontal)||void 0===b?void 0:b.show)||void 0===m||m,line:{color:t.text,style:"dash"}},vertical:{show:null===(w=null===(x=o.crosshair)||void 0===x||null===(x=x.vertical)||void 0===x?void 0:x.show)||void 0===w||w,line:{color:t.text,style:"dash"}}},yAxis:{show:null===(k=null===(C=o.yAxis)||void 0===C?void 0:C.show)||void 0===k||k,position:null!==(O=null===(E=o.yAxis)||void 0===E?void 0:E.position)&&void 0!==O?O:"right",axisLine:{show:!0,color:t.grid},tickLine:{show:!0,color:t.grid},tickText:{show:!0,color:t.text}},xAxis:{show:null===(j=null===(P=o.xAxis)||void 0===P?void 0:P.show)||void 0===j||j,position:null!==(S=null===(A=o.xAxis)||void 0===A?void 0:A.position)&&void 0!==S?S:"bottom",axisLine:{show:!0,color:t.grid},tickLine:{show:!0,color:t.grid},tickText:{show:!0,color:t.text}}};e.setStyles(_),g.current&&(g.current.style.backgroundColor=t.background)}catch(e){console.error("Failed to update chart styles:",e)}},[]),A=(0,e.useCallback)(function(e,o){if(e)try{e.removeIndicator(),o&&o.length>0&&o.forEach(function(o){if(!1!==o.visible)try{e.createIndicator(o.name,!0,{params:o.params})}catch(e){console.warn("Failed to create indicator ".concat(o.name,":"),e)}})}catch(e){console.error("Failed to update indicators:",e)}},[]),T=(0,e.useCallback)(function(){w.current&&S(w.current,C,O)},[C,O,S]),_=(0,e.useCallback)(function(){w.current&&A(w.current,d)},[d,A]);(0,e.useEffect)(function(){if(E&&0!==x.length){var e=setTimeout(function(){j()},100);return function(){clearTimeout(e)}}},[j,E,x.length]),(0,e.useEffect)(function(){P()},[P]),(0,e.useEffect)(function(){T()},[T]),(0,e.useEffect)(function(){_()},[_]),(0,e.useEffect)(function(){var e=g.current;return function(){if(w.current&&e)try{klinecharts.dispose(e),w.current=null}catch(e){console.error("Failed to dispose chart:",e)}}},[]);var R,z,L=(0,e.useCallback)(function(){if(w.current&&m)try{w.current.resize()}catch(e){console.error("Failed to resize chart:",e)}},[m]),D=(R=L,z=(0,e.useRef)(null),(0,e.useEffect)(function(){if(z.current){var e=new ResizeObserver(R);return e.observe(z.current),function(){return e.disconnect()}}},[R]),z);return!E&&x.length>0?o().createElement("div",{id:r,className:"dash-kline-chart-error ".concat(v),style:a(a({},f),{},{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:O.background,color:O.text,border:"1px solid ".concat(O.grid),borderRadius:"4px",padding:"20px",minHeight:"400px"})},o().createElement("div",{style:{textAlign:"center"}},o().createElement("h3",null,"数据格式错误"),o().createElement("p",null,"请确保数据格式正确，包含 timestamp、open、high、low、close 字段"),o().createElement("p",{style:{fontSize:"14px",color:"#666"}},"数据验证失败：请检查价格关系 (high ≥ low, open/close 在 high-low 范围内)"))):x&&0!==x.length?o().createElement("div",{id:r,className:"dash-kline-chart ".concat(v),style:a(a({},f),{},{backgroundColor:O.background,minHeight:"400px"}),ref:m?D:void 0},o().createElement("div",{ref:g,style:{width:"100%",height:"100%",minHeight:"400px"}})):o().createElement("div",{id:r,className:"dash-kline-chart-empty ".concat(v),style:a(a({},f),{},{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#fafafa",color:"#999",border:"1px dashed #ccc",borderRadius:"4px",padding:"20px",minHeight:"400px"})},o().createElement("div",{style:{textAlign:"center"}},o().createElement("div",{style:{fontSize:"48px",marginBottom:"10px"}},"📈"),o().createElement("h3",{style:{margin:"0 0 10px 0",color:"#666"}},"暂无数据"),o().createElement("p",{style:{margin:0,fontSize:"14px"}},"请提供数据以显示图表")))};u.defaultProps={data:[],config:{},indicators:[],style:{},className:"",responsive:!0},u.propTypes={id:i().string,data:i().arrayOf(i().shape({timestamp:i().number.isRequired,open:i().number,high:i().number,low:i().number,close:i().number.isRequired,volume:i().number})),config:i().object,indicators:i().arrayOf(i().shape({name:i().string.isRequired,params:i().array,visible:i().bool})),symbol:i().string,style:i().object,className:i().string,responsive:i().bool,setProps:i().func};const d=u})(),window.dash_kline_charts=r})();
//# sourceMappingURL=dash_kline_charts.min.js.map