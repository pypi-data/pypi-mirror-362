(()=>{var e={556:(e,o,r)=>{e.exports=r(694)()},694:(e,o,r)=>{"use strict";var t=r(925);function n(){}function i(){}i.resetWarningCache=n,e.exports=function(){function e(e,o,r,n,i,l){if(l!==t){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function o(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:o,element:e,elementType:e,instanceOf:o,node:e,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:i,resetWarningCache:n};return r.PropTypes=r,r}},925:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},o={};function r(t){var n=o[t];if(void 0!==n)return n.exports;var i=o[t]={exports:{}};return e[t](i,i.exports,r),i.exports}r.n=e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return r.d(o,{a:o}),o},r.d=(e,o)=>{for(var t in o)r.o(o,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:o[t]})},r.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var t={};(()=>{"use strict";r.r(t),r.d(t,{DashKLineChart:()=>d});const e=window.React;var o=r.n(e),n=r(556),i=r.n(n);function l(e,o){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);o&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,t)}return r}function a(e){for(var o=1;o<arguments.length;o++){var r=null!=arguments[o]?arguments[o]:{};o%2?l(Object(r),!0).forEach(function(o){c(e,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(r,o))})}return e}function c(e,o,r){return(o=function(e){var o=function(e){if("object"!=s(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(o)?o:o+""}(o))in e?Object.defineProperty(e,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[o]=r,e}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}var u=function(r){var t=r.id,n=r.data,i=void 0===n?[]:n,l=r.config,c=void 0===l?{}:l,u=r.indicators,d=void 0===u?[]:u,p=r.style,f=void 0===p?{}:p,h=r.className,y=void 0===h?"":h,v=r.responsive,m=void 0===v||v,b=r.symbol,g=(0,e.useRef)(null),w=(0,e.useRef)(null),x=(0,e.useMemo)(function(){return{theme:"light",grid:{show:!0,horizontal:{show:!0},vertical:{show:!0}},candle:{type:"candle_solid"},crosshair:{show:!0,horizontal:{show:!0},vertical:{show:!0}},yAxis:{show:!0,position:"right"},xAxis:{show:!0,position:"bottom"}}},[]),k=(0,e.useMemo)(function(){return function(e,o){return a(a({},e),o)}(x,c)},[x,c]),C=(0,e.useMemo)(function(){return function(e){var o={light:{background:"#ffffff",text:"#333333",grid:"#e0e0e0",candle:{up:"#26A69A",down:"#EF5350",noChange:"#888888"}},dark:{background:"#1e1e1e",text:"#ffffff",grid:"#444444",candle:{up:"#4caf50",down:"#f44336",noChange:"#888888"}}};return o[e]||o.light}(k.theme)},[k.theme]),O=(0,e.useMemo)(function(){return function(e){var o,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"candle";if(!Array.isArray(e))return!1;if(0===e.length)return!0;var t="object"===s(r)&&null!==(o=r.candle)&&void 0!==o&&o.type?r.candle.type:r;return e.every(function(e){return null!==e&&"object"===s(e)&&"timestamp"in e&&"number"==typeof e.timestamp&&("area"===t?"close"in e&&"number"==typeof e.close:"open"in e&&"high"in e&&"low"in e&&"close"in e&&"number"==typeof e.open&&"number"==typeof e.high&&"number"==typeof e.low&&"number"==typeof e.close&&e.high>=e.low&&e.open>=e.low&&e.open<=e.high&&e.close>=e.low&&e.close<=e.high&&(!("volume"in e)||"number"==typeof e.volume))})}(i,k)},[i,k]),E=(0,e.useCallback)(function(){if(g.current&&O)try{if(!window.klinecharts)return void console.error("KLineCharts library not available");w.current&&(klinecharts.dispose(g.current),w.current=null);var e=klinecharts.init(g.current);if(!e)return void console.error("Failed to initialize chart instance");w.current=e,e.setSymbol({ticker:b||"DASH-KLINE",pricePrecision:2,volumePrecision:0}),e.setPeriod({type:"day",span:1}),e.setDataLoader({getBars:function(e){"init"===e.type||"update"===e.type?e.callback(i,!1):"forward"!==e.type&&"backward"!==e.type||e.callback([],!1)}}),P(e,k,C),S(e,d)}catch(e){console.error("Failed to initialize chart:",e)}},[i,k,d,O,C,b,P,S]),j=(0,e.useCallback)(function(){if(w.current&&O)try{w.current.setDataLoader({getBars:function(e){"init"===e.type||"update"===e.type?e.callback(i,!1):"forward"!==e.type&&"backward"!==e.type||e.callback([],!1)}})}catch(e){console.error("Failed to update chart data:",e)}},[i,O]),P=(0,e.useCallback)(function(e,o,r){if(e)try{var t,n,i,l,a,c,s,u,d,p,f,h,y,v,m,b,w,x,k,C,O,E,j={grid:{show:null===(t=null===(n=o.grid)||void 0===n?void 0:n.show)||void 0===t||t,horizontal:{show:null===(i=null===(l=o.grid)||void 0===l||null===(l=l.horizontal)||void 0===l?void 0:l.show)||void 0===i||i,color:r.grid,style:"dash"},vertical:{show:null===(a=null===(c=o.grid)||void 0===c||null===(c=c.vertical)||void 0===c?void 0:c.show)||void 0===a||a,color:r.grid,style:"dash"}},candle:{type:null!==(s=null===(u=o.candle)||void 0===u?void 0:u.type)&&void 0!==s?s:"candle_solid",bar:{upColor:r.candle.up,downColor:r.candle.down,noChangeColor:r.candle.noChange,upBorderColor:r.candle.up,downBorderColor:r.candle.down,noChangeBorderColor:r.candle.noChange,upWickColor:r.candle.up,downWickColor:r.candle.down,noChangeWickColor:r.candle.noChange}},crosshair:{show:null===(d=null===(p=o.crosshair)||void 0===p?void 0:p.show)||void 0===d||d,horizontal:{show:null===(f=null===(h=o.crosshair)||void 0===h||null===(h=h.horizontal)||void 0===h?void 0:h.show)||void 0===f||f,line:{color:r.text,style:"dash"}},vertical:{show:null===(y=null===(v=o.crosshair)||void 0===v||null===(v=v.vertical)||void 0===v?void 0:v.show)||void 0===y||y,line:{color:r.text,style:"dash"}}},yAxis:{show:null===(m=null===(b=o.yAxis)||void 0===b?void 0:b.show)||void 0===m||m,position:null!==(w=null===(x=o.yAxis)||void 0===x?void 0:x.position)&&void 0!==w?w:"right",axisLine:{show:!0,color:r.grid},tickLine:{show:!0,color:r.grid},tickText:{show:!0,color:r.text}},xAxis:{show:null===(k=null===(C=o.xAxis)||void 0===C?void 0:C.show)||void 0===k||k,position:null!==(O=null===(E=o.xAxis)||void 0===E?void 0:E.position)&&void 0!==O?O:"bottom",axisLine:{show:!0,color:r.grid},tickLine:{show:!0,color:r.grid},tickText:{show:!0,color:r.text}}};e.setStyles(j),g.current&&(g.current.style.backgroundColor=r.background)}catch(e){console.error("Failed to update chart styles:",e)}},[]),S=(0,e.useCallback)(function(e,o){if(e)try{e.removeIndicator(),o&&o.length>0&&o.forEach(function(o){if(!1!==o.visible)try{e.createIndicator(o.name,!0,{params:o.params})}catch(e){console.warn("Failed to create indicator ".concat(o.name,":"),e)}})}catch(e){console.error("Failed to update indicators:",e)}},[]),R=(0,e.useCallback)(function(){w.current&&P(w.current,k,C)},[k,C,P]),T=(0,e.useCallback)(function(){w.current&&S(w.current,d)},[d,S]);(0,e.useEffect)(function(){if(O&&0!==i.length){var e=setTimeout(function(){E()},100);return function(){clearTimeout(e)}}},[E,O,i.length]),(0,e.useEffect)(function(){j()},[j]),(0,e.useEffect)(function(){R()},[R]),(0,e.useEffect)(function(){T()},[T]),(0,e.useEffect)(function(){var e=g.current;return function(){if(w.current&&e)try{klinecharts.dispose(e),w.current=null}catch(e){console.error("Failed to dispose chart:",e)}}},[]);var _,A,z=(0,e.useCallback)(function(){if(w.current&&m)try{w.current.resize()}catch(e){console.error("Failed to resize chart:",e)}},[m]),L=(_=z,A=(0,e.useRef)(null),(0,e.useEffect)(function(){if(A.current){var e=new ResizeObserver(_);return e.observe(A.current),function(){return e.disconnect()}}},[_]),A);return!O&&i.length>0?o().createElement("div",{id:t,className:"dash-kline-chart-error ".concat(y),style:a(a({},f),{},{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:C.background,color:C.text,border:"1px solid ".concat(C.grid),borderRadius:"4px",padding:"20px",minHeight:"400px"})},o().createElement("div",{style:{textAlign:"center"}},o().createElement("h3",null,"数据格式错误"),o().createElement("p",null,"请确保数据格式正确，包含 timestamp、open、high、low、close 字段"),o().createElement("p",{style:{fontSize:"14px",color:"#666"}},"数据验证失败：请检查价格关系 (high ≥ low, open/close 在 high-low 范围内)"))):i&&0!==i.length?o().createElement("div",{id:t,className:"dash-kline-chart ".concat(y),style:a(a({},f),{},{backgroundColor:C.background,minHeight:"400px"}),ref:m?L:void 0},o().createElement("div",{ref:g,style:{width:"100%",height:"100%",minHeight:"400px"}})):o().createElement("div",{id:t,className:"dash-kline-chart-empty ".concat(y),style:a(a({},f),{},{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#fafafa",color:"#999",border:"1px dashed #ccc",borderRadius:"4px",padding:"20px",minHeight:"400px"})},o().createElement("div",{style:{textAlign:"center"}},o().createElement("div",{style:{fontSize:"48px",marginBottom:"10px"}},"📈"),o().createElement("h3",{style:{margin:"0 0 10px 0",color:"#666"}},"暂无数据"),o().createElement("p",{style:{margin:0,fontSize:"14px"}},"请提供K线数据以显示图表")))};u.defaultProps={data:[],config:{},indicators:[],style:{},className:"",responsive:!0},u.propTypes={id:i().string,data:i().arrayOf(i().shape({timestamp:i().number.isRequired,open:i().number.isRequired,high:i().number.isRequired,low:i().number.isRequired,close:i().number.isRequired,volume:i().number})),config:i().object,indicators:i().arrayOf(i().shape({name:i().string.isRequired,params:i().array,visible:i().bool})),symbol:i().string,style:i().object,className:i().string,responsive:i().bool};const d=u})(),window.dash_kline_charts=t})();
//# sourceMappingURL=dash_kline_charts.min.js.map