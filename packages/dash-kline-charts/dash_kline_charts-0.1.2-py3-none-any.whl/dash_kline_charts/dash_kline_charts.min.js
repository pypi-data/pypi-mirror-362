(()=>{var e={556:(e,r,o)=>{e.exports=o(694)()},694:(e,r,o)=>{"use strict";var t=o(925);function n(){}function i(){}i.resetWarningCache=n,e.exports=function(){function e(e,r,o,n,i,l){if(l!==t){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function r(){return e}e.isRequired=e;var o={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:r,element:e,elementType:e,instanceOf:r,node:e,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:i,resetWarningCache:n};return o.PropTypes=o,o}},925:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},r={};function o(t){var n=r[t];if(void 0!==n)return n.exports;var i=r[t]={exports:{}};return e[t](i,i.exports,o),i.exports}o.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return o.d(r,{a:r}),r},o.d=(e,r)=>{for(var t in r)o.o(r,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},o.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var t={};(()=>{"use strict";o.r(t),o.d(t,{DashKLineChart:()=>d});const e=window.React;var r=o.n(e),n=o(556),i=o.n(n);function l(e,r){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),o.push.apply(o,t)}return o}function a(e){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?l(Object(o),!0).forEach(function(r){c(e,r,o[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):l(Object(o)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(o,r))})}return e}function c(e,r,o){return(r=function(e){var r=function(e){if("object"!=s(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=s(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o,e}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}var u=function(o){var t=o.id,n=o.data,i=void 0===n?[]:n,l=o.config,c=void 0===l?{}:l,u=o.indicators,d=void 0===u?[]:u,p=o.style,f=void 0===p?{}:p,h=o.className,y=void 0===h?"":h,v=o.responsive,m=void 0===v||v,b=o.symbol,g=(0,e.useRef)(null),w=(0,e.useRef)(null),x=(0,e.useMemo)(function(){return null==i?[]:Array.isArray(i)?i:[]},[i]),k=(0,e.useMemo)(function(){return{theme:"light",grid:{show:!0,horizontal:{show:!0},vertical:{show:!0}},candle:{type:"candle_solid"},crosshair:{show:!0,horizontal:{show:!0},vertical:{show:!0}},yAxis:{show:!0,position:"right"},xAxis:{show:!0,position:"bottom"}}},[]),C=(0,e.useMemo)(function(){return function(e,r){return a(a({},e),r)}(k,c)},[k,c]),O=(0,e.useMemo)(function(){return function(e){var r={light:{background:"#ffffff",text:"#333333",grid:"#e0e0e0",candle:{up:"#26A69A",down:"#EF5350",noChange:"#888888"}},dark:{background:"#1e1e1e",text:"#ffffff",grid:"#444444",candle:{up:"#4caf50",down:"#f44336",noChange:"#888888"}}};return r[e]||r.light}(C.theme)},[C.theme]),E=(0,e.useMemo)(function(){return function(e){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"candle";if(!Array.isArray(e))return!1;if(0===e.length)return!0;var t="object"===s(o)&&null!==(r=o.candle)&&void 0!==r&&r.type?o.candle.type:o;return e.every(function(e){return null!==e&&"object"===s(e)&&"timestamp"in e&&"number"==typeof e.timestamp&&("area"===t?"close"in e&&"number"==typeof e.close:"open"in e&&"high"in e&&"low"in e&&"close"in e&&"number"==typeof e.open&&"number"==typeof e.high&&"number"==typeof e.low&&"number"==typeof e.close&&e.high>=e.low&&e.open>=e.low&&e.open<=e.high&&e.close>=e.low&&e.close<=e.high&&(!("volume"in e)||"number"==typeof e.volume))})}(x,C)},[x,C]),j=(0,e.useCallback)(function(){if(g.current&&E)try{if(!window.klinecharts)return void console.error("KLineCharts library not available");w.current&&(klinecharts.dispose(g.current),w.current=null);var e=klinecharts.init(g.current);if(!e)return void console.error("Failed to initialize chart instance");w.current=e,e.setSymbol({ticker:b||"DASH-KLINE",pricePrecision:2,volumePrecision:0}),e.setPeriod({type:"day",span:1}),e.setDataLoader({getBars:function(e){"init"===e.type||"update"===e.type?e.callback(x,!1):"forward"!==e.type&&"backward"!==e.type||e.callback([],!1)}}),S(e,C,O),A(e,d)}catch(e){console.error("Failed to initialize chart:",e)}},[x,C,d,E,O,b,S,A]),P=(0,e.useCallback)(function(){if(w.current&&E)try{w.current.setDataLoader({getBars:function(e){"init"===e.type||"update"===e.type?e.callback(x,!1):"forward"!==e.type&&"backward"!==e.type||e.callback([],!1)}})}catch(e){console.error("Failed to update chart data:",e)}},[x,E]),S=(0,e.useCallback)(function(e,r,o){if(e)try{var t,n,i,l,a,c,s,u,d,p,f,h,y,v,m,b,w,x,k,C,O,E,j={grid:{show:null===(t=null===(n=r.grid)||void 0===n?void 0:n.show)||void 0===t||t,horizontal:{show:null===(i=null===(l=r.grid)||void 0===l||null===(l=l.horizontal)||void 0===l?void 0:l.show)||void 0===i||i,color:o.grid,style:"dash"},vertical:{show:null===(a=null===(c=r.grid)||void 0===c||null===(c=c.vertical)||void 0===c?void 0:c.show)||void 0===a||a,color:o.grid,style:"dash"}},candle:{type:null!==(s=null===(u=r.candle)||void 0===u?void 0:u.type)&&void 0!==s?s:"candle_solid",bar:{upColor:o.candle.up,downColor:o.candle.down,noChangeColor:o.candle.noChange,upBorderColor:o.candle.up,downBorderColor:o.candle.down,noChangeBorderColor:o.candle.noChange,upWickColor:o.candle.up,downWickColor:o.candle.down,noChangeWickColor:o.candle.noChange}},crosshair:{show:null===(d=null===(p=r.crosshair)||void 0===p?void 0:p.show)||void 0===d||d,horizontal:{show:null===(f=null===(h=r.crosshair)||void 0===h||null===(h=h.horizontal)||void 0===h?void 0:h.show)||void 0===f||f,line:{color:o.text,style:"dash"}},vertical:{show:null===(y=null===(v=r.crosshair)||void 0===v||null===(v=v.vertical)||void 0===v?void 0:v.show)||void 0===y||y,line:{color:o.text,style:"dash"}}},yAxis:{show:null===(m=null===(b=r.yAxis)||void 0===b?void 0:b.show)||void 0===m||m,position:null!==(w=null===(x=r.yAxis)||void 0===x?void 0:x.position)&&void 0!==w?w:"right",axisLine:{show:!0,color:o.grid},tickLine:{show:!0,color:o.grid},tickText:{show:!0,color:o.text}},xAxis:{show:null===(k=null===(C=r.xAxis)||void 0===C?void 0:C.show)||void 0===k||k,position:null!==(O=null===(E=r.xAxis)||void 0===E?void 0:E.position)&&void 0!==O?O:"bottom",axisLine:{show:!0,color:o.grid},tickLine:{show:!0,color:o.grid},tickText:{show:!0,color:o.text}}};e.setStyles(j),g.current&&(g.current.style.backgroundColor=o.background)}catch(e){console.error("Failed to update chart styles:",e)}},[]),A=(0,e.useCallback)(function(e,r){if(e)try{e.removeIndicator(),r&&r.length>0&&r.forEach(function(r){if(!1!==r.visible)try{e.createIndicator(r.name,!0,{params:r.params})}catch(e){console.warn("Failed to create indicator ".concat(r.name,":"),e)}})}catch(e){console.error("Failed to update indicators:",e)}},[]),R=(0,e.useCallback)(function(){w.current&&S(w.current,C,O)},[C,O,S]),T=(0,e.useCallback)(function(){w.current&&A(w.current,d)},[d,A]);(0,e.useEffect)(function(){if(E&&0!==x.length){var e=setTimeout(function(){j()},100);return function(){clearTimeout(e)}}},[j,E,x.length]),(0,e.useEffect)(function(){P()},[P]),(0,e.useEffect)(function(){R()},[R]),(0,e.useEffect)(function(){T()},[T]),(0,e.useEffect)(function(){var e=g.current;return function(){if(w.current&&e)try{klinecharts.dispose(e),w.current=null}catch(e){console.error("Failed to dispose chart:",e)}}},[]);var _,z,L=(0,e.useCallback)(function(){if(w.current&&m)try{w.current.resize()}catch(e){console.error("Failed to resize chart:",e)}},[m]),D=(_=L,z=(0,e.useRef)(null),(0,e.useEffect)(function(){if(z.current){var e=new ResizeObserver(_);return e.observe(z.current),function(){return e.disconnect()}}},[_]),z);return!E&&x.length>0?r().createElement("div",{id:t,className:"dash-kline-chart-error ".concat(y),style:a(a({},f),{},{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:O.background,color:O.text,border:"1px solid ".concat(O.grid),borderRadius:"4px",padding:"20px",minHeight:"400px"})},r().createElement("div",{style:{textAlign:"center"}},r().createElement("h3",null,"数据格式错误"),r().createElement("p",null,"请确保数据格式正确，包含 timestamp、open、high、low、close 字段"),r().createElement("p",{style:{fontSize:"14px",color:"#666"}},"数据验证失败：请检查价格关系 (high ≥ low, open/close 在 high-low 范围内)"))):x&&0!==x.length?r().createElement("div",{id:t,className:"dash-kline-chart ".concat(y),style:a(a({},f),{},{backgroundColor:O.background,minHeight:"400px"}),ref:m?D:void 0},r().createElement("div",{ref:g,style:{width:"100%",height:"100%",minHeight:"400px"}})):r().createElement("div",{id:t,className:"dash-kline-chart-empty ".concat(y),style:a(a({},f),{},{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#fafafa",color:"#999",border:"1px dashed #ccc",borderRadius:"4px",padding:"20px",minHeight:"400px"})},r().createElement("div",{style:{textAlign:"center"}},r().createElement("div",{style:{fontSize:"48px",marginBottom:"10px"}},"📈"),r().createElement("h3",{style:{margin:"0 0 10px 0",color:"#666"}},"暂无数据"),r().createElement("p",{style:{margin:0,fontSize:"14px"}},"请提供K线数据以显示图表")))};u.defaultProps={data:[],config:{},indicators:[],style:{},className:"",responsive:!0},u.propTypes={id:i().string,data:i().arrayOf(i().shape({timestamp:i().number.isRequired,open:i().number.isRequired,high:i().number.isRequired,low:i().number.isRequired,close:i().number.isRequired,volume:i().number})),config:i().object,indicators:i().arrayOf(i().shape({name:i().string.isRequired,params:i().array,visible:i().bool})),symbol:i().string,style:i().object,className:i().string,responsive:i().bool};const d=u})(),window.dash_kline_charts=t})();
//# sourceMappingURL=dash_kline_charts.min.js.map