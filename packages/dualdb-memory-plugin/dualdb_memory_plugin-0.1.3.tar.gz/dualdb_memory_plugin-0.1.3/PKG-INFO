Metadata-Version: 2.4
Name: dualdb-memory-plugin
Version: 0.1.3
Summary: Lightweight AI dialogue memory rotation plugin with dual DB (JSON/SQLite) and pluggable summarizer
Home-page: https://github.com/YZXY6151/dualdb-memory-plugin
Author: YZXY6151
Author-email: yzxy6151@gmail.com
License: MIT
Classifier: Programming Language :: Python :: 3
Classifier: License :: OSI Approved :: MIT License
Requires-Python: >=3.7
Description-Content-Type: text/markdown
Dynamic: author
Dynamic: author-email
Dynamic: classifier
Dynamic: description
Dynamic: description-content-type
Dynamic: home-page
Dynamic: license
Dynamic: requires-python
Dynamic: summary

# dualdb-memory-plugin
[![PyPI](https://img.shields.io/pypi/v/dualdb-memory-plugin.svg)](https://pypi.org/project/dualdb-memory-plugin/)
[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)
[![Build Status](https://github.com/YZXY6151/dualdb-memory-plugin/actions/workflows/python-test.yml/badge.svg)](https://github.com/YZXY6151/dualdb-memory-plugin/actions)



è½»é‡çº§ AI å¯¹è¯è®°å¿†è½®å›æ’ä»¶ï¼Œæ¨¡æ‹ŸçŸ­æœŸâ†’é•¿æœŸè®°å¿†æ¼”åŒ–ï¼Œæ”¯æŒ JSON / SQLite ä¸¤ç§å­˜å‚¨åç«¯ï¼Œæ‘˜è¦å‡½æ•°å¯æ’æ‹”ï¼Œé›¶ä¾èµ–æˆ–å¯æ‰©å±•è‡³ OpenAI / æœ¬åœ°æ¨¡å‹ã€‚

---

## ç‰¹æ€§

- ğŸ§  **äººç±»è®°å¿†æ¨¡æ‹Ÿ**ï¼šçŸ­æœŸæ¶ˆæ¯ç´¯ç§¯ (`active`) â†’ è¾¾åˆ°é˜ˆå€¼/å…³é”®è¯/å®šæ—¶è§¦å‘ â†’ æ‘˜è¦æµ“ç¼©åå†™å…¥é•¿æœŸå­˜å‚¨ (`archive`) â†’ æ¸…ç©ºçŸ­æœŸï¼Œç»§ç»­æ–°ä¸€è½®  
- ğŸ”Œ **å¯æ’æ‹”æ‘˜è¦å¼•æ“**ï¼šæä¾›é»˜è®¤ Stubï¼Œå®ç° `BaseSummarizer` æ¥å£ï¼›å¯æ›¿æ¢ä¸º OpenAIã€T5ã€å°æ¨¡å‹æˆ–è‡ªç ”æ¥å£  
- ğŸ’¾ **åŒåç«¯å­˜å‚¨**ï¼š`JsonStore`ï¼ˆçº¯æ–‡ä»¶ï¼‰ å’Œ `SQLiteStore`ï¼ˆæ•°æ®åº“æ–‡ä»¶ï¼‰ ä»»æ„åˆ‡æ¢  
- âš™ï¸ **æç®€ä¾èµ–**ï¼šä»… Python æ ‡å‡†åº“ + `sqlite3`ï¼›å¦‚éœ€ OpenAI æ‘˜è¦ï¼Œé¢å¤–å®‰è£… `openai` åŒ…  
- ğŸ”„ **è‡ªåŠ¨è½®å›ç®¡ç†**ï¼šå°è£…åœ¨ `DualDBManager`ï¼Œä¸€è¡Œä»£ç æ¥ç®¡ append/get_context/æ¸…ç©º  

---

## å®‰è£…

ä»æºä»£ç æ ¹ç›®å½•å®‰è£…ï¼ˆå¼€å‘æ¨¡å¼ï¼‰ï¼š

```bash
pip install -e .
è‹¥ä¸å®‰è£…ï¼Œä¹Ÿå¯ç›´æ¥åœ¨é¡¹ç›®æ ¹æ‰§è¡Œç¤ºä¾‹è„šæœ¬ï¼ŒPython ä¼šå°†å½“å‰ç›®å½•åŠ å…¥è·¯å¾„ã€‚

å¿«é€Ÿå¼€å§‹
1. JSON å­˜å‚¨ç¤ºä¾‹

from dualdb_memory.manager import DualDBManager
from dualdb_memory.summarizer_stub import StubSummarizer

mgr = DualDBManager(
    storage_type="json",
    active_path="data/active.json",
    archive_path="data/archive.json",
    summarizer=StubSummarizer(),
    threshold=3,
    keywords=["é‡è¦", "ç´§æ€¥"],
    time_delta=60  # æ¯ 60 ç§’è‡ªåŠ¨è½®å›
)

mgr.append("user", "ä½ å¥½ï¼Œä½ æ˜¯è°ï¼Ÿ")
mgr.append("assistant", "æˆ‘æ˜¯æ¼”ç¤ºç”¨çš„è®°å¿†æ’ä»¶ã€‚")
# ...ç»§ç»­ append è‹¥å¹²æ¡ï¼Œè¾¾åˆ°é˜ˆå€¼æˆ–è§¦å‘æ¡ä»¶åä¼šè‡ªåŠ¨ç”Ÿæˆæ‘˜è¦å†™å…¥ archive.json

context = mgr.get_context()  # è¿”å› archive + active çš„æ‰€æœ‰æ¡ç›®
print(context)
2. SQLite å­˜å‚¨ç¤ºä¾‹

from dualdb_memory.manager import DualDBManager
from dualdb_memory.summarizer_stub import StubSummarizer

mgr = DualDBManager(
    storage_type="sqlite",
    active_path="data/active.db",
    archive_path="data/archive.db",
    summarizer=StubSummarizer(),
    threshold=5
)

# åŒæ ·ä½¿ç”¨ mgr.append() å’Œ mgr.get_context()
ç›®å½•ç»“æ„

dualdb-memory-plugin/
â”œâ”€â”€ dualdb_memory/
â”‚   â”œâ”€â”€ memory.py
â”‚   â”œâ”€â”€ store_json.py
â”‚   â”œâ”€â”€ store_sqlite.py
â”‚   â”œâ”€â”€ summarizer_base.py
â”‚   â”œâ”€â”€ summarizer_stub.py
â”‚   â””â”€â”€ manager.py
â”œâ”€â”€ examples/
â”‚   â”œâ”€â”€ demo_basic.py
â”‚   â””â”€â”€ demo_openai.py
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ test_memory.py
â”œâ”€â”€ README.md
â”œâ”€â”€ setup.py
â””â”€â”€ .gitignore
ä¸å¸¸è§æ–¹æ¡ˆå¯¹æ¯”
ç»´åº¦	LangChain / MemoryGPT	DualDBMemory Plugin
ä¾èµ–	å¤šï¼ˆpydanticã€chromaã€openai ç­‰ï¼‰	æç®€ï¼ˆæ ‡å‡†åº“ + sqlite3ï¼›å¯é€‰ openaiï¼‰
å­˜å‚¨æ–¹å¼	å‘é‡æ•°æ®åº“ã€æ¡†æ¶å†…ç½®çŠ¶æ€	JSON / SQLite æ–‡ä»¶ï¼Œæ˜“æŸ¥çœ‹ã€æ˜“ç»´æŠ¤
æ‘˜è¦é€»è¾‘	æ¡†æ¶å†…è”æˆ–è‡ªå®šä¹‰å¤æ‚ï¼Œéš¾ä»¥è„±ç¦» API	ç®€å•æ¥å£ BaseSummarizerï¼Œä»»æ„æ¨¡å‹å®ç°
è®°å¿†è½®å›è§¦å‘	å¤šé æ‰‹åŠ¨æˆ–æ»‘çª—	é˜ˆå€¼ / å…³é”®è¯ / æ—¶é—´ å¤šæ¡ä»¶è‡ªåŠ¨è§¦å‘
æ¨¡å—åŒ–	é«˜åº¦è€¦åˆï¼Œéš¾æ‹†åˆ†	é«˜å†…èšä½è€¦åˆï¼ŒStore/Summarizer/Manager å¯ç‹¬ç«‹ä½¿ç”¨
å­¦ä¹ æˆæœ¬	è¾ƒé«˜ï¼Œéœ€è¦å¤§é‡é…ç½®	ä½ï¼Œä¸Šæ‰‹å³ç”¨

â— æœ¬é¡¹ç›®ä¸ºå®éªŒæ€§åŸå‹ï¼Œä»…ä¾›å‚è€ƒä¸å­¦ä¹ ï¼Œç›®å‰æ— é•¿æœŸç»´æŠ¤è®¡åˆ’ã€‚

...
ğŸ‰ å¦‚æœå¯¹æœ¬é¡¹ç›®æœ‰ä»»ä½•ç–‘é—®æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨ GitHub æäº¤ Issueï¼Œæˆ–è‡ªè¡Œ Fork åæ”¹è¿›ï¼



PS: æœ¬é¡¹ç›®ç”±æ–°æ‰‹å¼€å‘ï¼Œä»…ä¸ºè¯•éªŒæ€§è´¨çš„æœ€åŸºç¡€åŸå‹ï¼ŒåŠŸèƒ½å¯èƒ½ä¸å¤Ÿå®Œå–„ã€å­˜åœ¨æœªè¦†ç›–çš„è¾¹ç¼˜æƒ…å†µï¼Œä¹Ÿä¸ä¿è¯åœ¨æ‰€æœ‰åœºæ™¯ä¸­çš„ç¨³å®šæ€§å’Œé«˜æ•ˆæ€§ã€‚å¦‚æœæœ‰ 
    ä»€ä¹ˆé—®é¢˜ï¼Œæ–¹ä¾¿çš„è¯è¿˜è¯·éšæ—¶è”ç³»æŒ‡æ•™æˆ‘ï¼Œemail:yzxy6151@gmail.com
