!function(){"use strict";require(["tinymce"],(function(e){console.log("create and add collectivebbcodesnippets");const t=document.body.dataset.portalUrl;fetch(t+"/@bbcodesnippets_enabled",{headers:{Accept:"application/json"}}).then(e=>e.json()).then(t=>{e.create("tinymce.plugins.CollectiveBBCodeSnippetsPlugin",{init:e=>{e.on("init",(function(){console.log("editor on init!")})),t.forEach((t,n)=>{const o="bbcs"+t.name;console.log(n+" "+o),e.addMenuItem(o,{text:t.name+" ("+t.snippet+")",context:"bbcs",onClick:()=>{((e,t)=>{const n=e.getContent({format:"text"});let o=t.replace("$TEXT",n);o.indexOf("$CURSOR");o=o.replace("$CURSOR",""),e.setContent(o)})(e.selection,t.template)}})})}}),e.PluginManager.add("collectivebbcodesnippets",e.plugins.CollectiveBBCodeSnippetsPlugin)}).catch(e=>{console.log(e)})}))()}();
