# Advanced configuration example for ini2py
# This demonstrates complex configuration patterns and edge cases

[app_server]
# Application server configuration
name = AdvancedApp
version = 2.1.0
environment = production
bind_host = 0.0.0.0
bind_port = 8443
worker_processes = 4
worker_connections = 1000
keepalive_timeout = 65.0
max_request_size = 104857600
enable_compression = true
compression_level = 6

[security]
# Security settings
secret_key = super-secret-key-that-should-be-masked
jwt_secret = jwt-signing-secret-12345
jwt_expiry_hours = 24
enable_csrf = true
csrf_token_timeout = 3600
session_timeout = 1800
password_min_length = 8
password_require_special = true
enable_rate_limiting = true
rate_limit_per_minute = 100

[database_primary]
# Primary database configuration
engine = postgresql
host = db-primary.example.com
port = 5432
database = production_db
username = app_user
password = very-secure-db-password-2024
connection_pool_size = 20
connection_pool_max_overflow = 30
connection_timeout = 30
query_timeout = 60
enable_ssl = true
ssl_cert_path = /etc/ssl/certs/db-client.crt
ssl_key_path = /etc/ssl/private/db-client.key
ssl_ca_path = /etc/ssl/certs/ca-cert.pem

[database_replica]
# Read-only replica database
engine = postgresql
host = db-replica.example.com
port = 5432
database = production_db
username = readonly_user
password = readonly-password-2024
connection_pool_size = 10
connection_pool_max_overflow = 15
connection_timeout = 30
query_timeout = 45
enable_ssl = true

[redis_cluster]
# Redis cluster configuration
nodes = redis1.example.com:6379,redis2.example.com:6379,redis3.example.com:6379
password = redis-cluster-password
database = 0
connection_timeout = 5
socket_timeout = 5
max_connections_per_node = 50
health_check_interval = 30
enable_cluster_mode = true
retry_on_timeout = true
max_retries = 3

[elasticsearch]
# Elasticsearch configuration
hosts = es1.example.com:9200,es2.example.com:9200,es3.example.com:9200
username = elastic_user
password = elastic-search-password-2024
index_prefix = myapp
default_index = myapp-logs
request_timeout = 30
max_retries = 3
retry_on_timeout = true
enable_sniffing = true
sniff_on_start = true
sniff_on_connection_fail = true
sniff_timeout = 10

[message_queue]
# Message queue configuration (RabbitMQ)
host = mq.example.com
port = 5672
virtual_host = /production
username = mq_user
password = rabbitmq-password-2024
connection_timeout = 30
heartbeat = 600
blocked_connection_timeout = 300
enable_ssl = true
ssl_cert_path = /etc/ssl/certs/mq-client.crt
ssl_key_path = /etc/ssl/private/mq-client.key

[monitoring]
# Monitoring and observability
enable_metrics = true
metrics_port = 9090
metrics_path = /metrics
enable_health_check = true
health_check_path = /health
enable_tracing = true
tracing_endpoint = http://jaeger.example.com:14268/api/traces
tracing_sample_rate = 0.1
log_level = INFO
log_format = json
enable_structured_logging = true

[feature_flags]
# Feature flags for A/B testing and gradual rollouts
enable_new_ui = true
enable_advanced_search = false
enable_beta_features = false
new_algorithm_rollout_percentage = 25
enable_experimental_caching = true
cache_ttl_seconds = 3600
enable_async_processing = true
max_async_workers = 8

[external_apis]
# External API integrations
payment_gateway_url = https://api.stripe.com
payment_gateway_key = sk_live_1234567890abcdefghijklmnopqrstuvwxyz
analytics_api_url = https://api.analytics.com/v2
analytics_api_key = analytics-api-key-2024
email_service_url = https://api.sendgrid.com/v3
email_service_key = SG.1234567890abcdefghijklmnopqrstuvwxyz
sms_service_url = https://api.twilio.com/2010-04-01
sms_service_token = twilio-auth-token-2024
default_timeout = 30
max_retries = 3
enable_circuit_breaker = true

[backup_storage]
# Backup and file storage configuration
storage_type = s3
s3_bucket = myapp-production-backups
s3_region = us-west-2
s3_access_key = AKIAIOSFODNN7EXAMPLE
s3_secret_key = wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
s3_endpoint_url = https://s3.us-west-2.amazonaws.com
backup_retention_days = 90
enable_encryption = true
encryption_key = backup-encryption-key-2024
compression_enabled = true
compression_level = 9

[performance]
# Performance tuning
cache_enabled = true
cache_ttl = 3600
cache_max_size = 1000000
enable_query_optimization = true
enable_connection_pooling = true
max_concurrent_requests = 1000
request_timeout = 30.0
enable_lazy_loading = true
batch_size = 100
pagination_default_size = 20
pagination_max_size = 1000