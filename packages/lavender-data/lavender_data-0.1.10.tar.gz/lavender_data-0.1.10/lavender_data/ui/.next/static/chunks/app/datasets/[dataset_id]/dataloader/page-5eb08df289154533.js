(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1263],{37412:(e,t,s)=>{Promise.resolve().then(s.bind(s,95348)),Promise.resolve().then(s.bind(s,23309))},64825:(e,t,s)=>{"use strict";s.d(t,{J:()=>n});var a=s(42227);s(49139);var r=s(3175),l=s(27058);function n(e){let{className:t,...s}=e;return(0,a.jsx)(r.b,{"data-slot":"label",className:(0,l.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...s})}},87686:(e,t,s)=>{"use strict";s.d(t,{E:()=>c});var a=s(42227);s(49139);var r=s(8550),l=s(63152),n=s(27058);let i=(0,l.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/70",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:t,variant:s,asChild:l=!1,...c}=e,d=l?r.Slot:"span";return(0,a.jsx)(d,{"data-slot":"badge",className:(0,n.cn)(i({variant:s}),t),...c})}},95348:(e,t,s)=>{"use strict";s.d(t,{Dataloader:()=>q});var a=s(42227),r=s(49139),l=s(33636),n=s(70316),i=s(32982),c=s(46326),d=s(63808),o=s(1191),u=s(27908),h=s(28380),g=s(76270),f=s(73175),x=s(61528),m=s(11201),p=s(42031),v=s(29061),j=s(3901),b=s(50293),S=s(21680),N=s(84857),k=s(40947);async function w(e,t){return String(await (0,v.l)().use(j.A).use(b.A).use(N.A,{theme:"github-light",keepBackground:!1,transformers:[(0,k.F)({visibility:"always",feedbackDuration:3e3})]}).use(S.A).process("```"+(t||"")+"\n"+e.trimStart()+"\n```"))}function y(e){let{code:t,language:s,className:l}=e,[n,i]=(0,r.useState)(null);return(0,r.useEffect)(()=>{w(t,s).then(i)},[t,s]),(0,a.jsx)("section",{className:l||"",dangerouslySetInnerHTML:{__html:n||""}})}var C=s(3949),_=s(70709),A=s(64825),z=s(75571),F=s(87686),J=s(86892),O=s(27058);function L(e){let{className:t,...s}=e;return(0,a.jsx)(J.bL,{"data-slot":"switch",className:(0,O.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 inline-flex h-5 w-9 shrink-0 items-center rounded-full border-2 border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:(0,a.jsx)(J.zi,{"data-slot":"switch-thumb",className:(0,O.cn)("bg-background pointer-events-none block size-4 rounded-full ring-0 shadow-lg transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})}var E=s(94618);let T={int:"number",float:"number",str:"text",bool:"checkbox",list:"text"},I=(e,t)=>{if("bool"===e)return"True"===t;if("int"===e)return parseInt(t);if("float"===e)return parseFloat(t);if("str"===e)return t;if("list"===e)return t.split(",");else if("dict"!==e)return t;else try{return JSON.parse(t)}catch(e){return{}}},M=(e,t)=>{if("bool"===e||"int"===e)return t;if("float"===e)return t;if("str"===e)return'"'.concat(t,'"');if("list"===e)return"[".concat(t.split(",").map(e=>'"'.concat(e,'"')).join(", "),"]");else if("dict"===e)return t;else return t},P=e=>e.map(e=>({label:e.name,value:e.name,selected:!1})),$=e=>e.args.reduce((e,t)=>{let[s,a]=t;return e[s]={type:a,value:""},e},{}),B=e=>e.reduce((e,t)=>(e[t.name]=$(t),e),{}),D=e=>Object.values(e).some(e=>{let{value:t}=e;return""!==t}),W=e=>{if("bool"===e)return"";if("int"===e)return"1";if("float"===e)return"1.0";if("str"===e)return"text";if("list"===e)return"abc, def, ...";else if("dict"===e)return'{"k": "v", ...} (JSON)';else return""};function Z(e){let{spec:t,argsState:s,onArgsStateChange:r}=e;return(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:"grid grid-cols-[1fr_3fr] items-center gap-4",children:[(0,a.jsx)(F.E,{variant:"outline",children:t.name}),(0,a.jsx)("div",{children:t.args.map(e=>{var l,n;let[i,c]=e;return(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,a.jsxs)(A.J,{htmlFor:"name",className:"text-right text-xs font-mono",children:[i,": ",c]}),(0,a.jsx)(z.p,{className:"col-span-3 ".concat("bool"===c?"h-6 my-2":""),type:T[c],value:(null===(n=s[t.name])||void 0===n?void 0:null===(l=n[i])||void 0===l?void 0:l.value)||"",placeholder:W(c),onChange:e=>r(s=>({...s,[t.name]:{...s[t.name],[i]:{type:c,value:"bool"===c?e.target.checked?"True":"False":e.target.value}}}))})]},i)})})]}),t.args.length>0&&(0,a.jsx)("div",{className:"w-full flex justify-end",children:(0,a.jsxs)(_.$,{variant:"destructive",size:"sm",onClick:()=>r(e=>({...e,[t.name]:$(t)})),children:[(0,a.jsx)(l.A,{className:"h-4 w-4"}),"Reset"]})})]},t.name)}function G(e){let{icon:t,label:s,specs:l,selected:n,setSelected:i,argsState:c,onArgsStateChange:d,singleSelect:o=!1}=e,[u,h]=(0,r.useState)(!1);return(0,a.jsxs)(C.lG,{open:u,onOpenChange:h,children:[(0,a.jsx)(C.zM,{asChild:!0,children:(0,a.jsxs)(_.$,{variant:"outline",children:[t,s]})}),(0,a.jsxs)(C.Cf,{children:[(0,a.jsx)(C.L3,{children:s}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(m.K,{className:"col-span-3",value:n,onChange:i,label:s,singleSelect:o}),n.filter(e=>{let{selected:t}=e;return t}).map(e=>{let{value:t}=e;return l.find(e=>e.name===t)}).map(e=>e&&(0,a.jsx)(Z,{spec:e,argsState:c,onArgsStateChange:d},e.name)),(0,a.jsx)(C.Es,{className:"justify-end",children:(0,a.jsx)(_.$,{onClick:()=>h(!1),children:"Save"})})]})]})]})}let H=e=>Object.entries(e).filter(e=>{let[t,{value:s}]=e;return""!==s}).reduce((e,t)=>{let[s,{value:a,type:r}]=t;return e[s]=I(r,a),e},{}),K=(e,t)=>e.filter(e=>{let{selected:t}=e;return t}).map(e=>{let{value:s}=e;return{name:s,params:H(t[s])}}),R=e=>D(e)?Object.entries(e).filter(e=>{let[t,{value:s}]=e;return""!==s}).map(e=>{let[t,{value:s,type:a}]=e;return'"'.concat(t,'": ').concat(M(a,s))}).join(", "):"",V=(e,t)=>e.filter(e=>{let{selected:t}=e;return t}).map(e=>{let{value:s}=e,a=R(t[s]);return a?'("'.concat(s,'", {').concat(a,"})"):'"'.concat(s,'"')});function q(e){let{apiUrl:t,apiKey:s,shardsetOptions:l,filters:v,categorizers:j,collaters:b,preprocessors:S}=e,{dataset_id:N}=(0,f.useParams)(),[k,w]=(0,r.useState)([]),[F,J]=(0,r.useState)({}),[O,T]=(0,r.useState)([]),[I,M]=(0,r.useState)({}),[$,D]=(0,r.useState)([]),[W,Z]=(0,r.useState)({}),[H,R]=(0,r.useState)([]),[q,Q]=(0,r.useState)({}),[U,X]=(0,r.useState)([]),[Y,ee]=(0,r.useState)(0),[et,es]=(0,r.useState)(!1),[ea,er]=(0,r.useState)(!1),[el,en]=(0,r.useState)(0),[ei,ec]=(0,r.useState)(5),[ed,eo]=(0,r.useState)(0),[eu,eh]=(0,r.useState)(!1),[eg,ef]=(0,r.useState)([]),[ex,em]=(0,r.useState)([]),[ep,ev]=(0,r.useState)(!1),[ej,eb]=(0,r.useState)(null);(0,r.useEffect)(()=>{X(l),w(P(v)),J(B(v)),T(P(j)),M(B(j)),R(P(b)),Q(B(b)),D(P(S)),Z(B(S))},[l,v,j,b,S]);let eS=(0,r.useMemo)(()=>{let e={};U.filter(e=>e.selected).length>0&&(e.shardsets=U.filter(e=>e.selected).map(e=>e.value));let t=k.filter(e=>e.selected);t.length>0&&(e.filters=K(t,F));let s=O.filter(e=>e.selected);s.length>0&&(e.categorizer=K(s,I)[0]);let a=H.filter(e=>e.selected);a.length>0&&(e.collater=K(a,q)[0]);let r=$.filter(e=>e.selected);return r.length>0&&(e.preprocessors=K(r,W)),Y>0&&(e.max_retry_count="".concat(Y)),et&&(e.skip_on_failure=et?"True":"False"),ea&&(e.shuffle=ea?"True":"False",e.shuffle_block_size="".concat(ei)),el&&(e.shuffle_seed="".concat(el)),ed&&(e.batch_size="".concat(ed)),eu&&(e.no_cache=eu?"True":"False"),e},[U,k,F,O,I,H,q,$,W,Y,et,ea,el,ei,ed,eu]),eN=(0,r.useMemo)(()=>{let e={};U.filter(e=>e.selected).length>0&&(e.shardsets="["+U.filter(e=>e.selected).map(e=>'"'.concat(e.value,'"')).join(", ")+"]");let t=k.filter(e=>e.selected);t.length>0&&(e.filters="["+V(t,F).join(", ")+"]");let s=O.filter(e=>e.selected);s.length>0&&(e.categorizer=V(s,I)[0]);let a=H.filter(e=>e.selected);a.length>0&&(e.collater=V(a,q)[0]);let r=$.filter(e=>e.selected);return r.length>0&&(e.preprocessors="["+V(r,W).join(", ")+"]"),Y>0&&(e.max_retry_count="".concat(Y)),et&&(e.skip_on_failure=et?"True":"False"),ea&&(e.shuffle=ea?"True":"False",e.shuffle_block_size="".concat(ei)),el&&(e.shuffle_seed="".concat(el)),ed&&(e.batch_size="".concat(ed)),eu&&(e.no_cache=eu?"True":"False"),Object.entries(e).map(e=>{let[t,s]=e;return"\n    ".concat(t,"=").concat(s,",")}).join("")},[U,k,F,O,I,H,q,$,W,Y,et,ea,el,ei,ed,eu]),ek=(0,r.useCallback)(async()=>{ev(!0),ef([]),em([]);let e=await (0,x.wH)(N,eS);eb(e.id),ev(!1),ew(e.id)},[eS]),ew=(0,r.useCallback)(async e=>{ev(!0);let t=(await Promise.allSettled(Array.from({length:10}).map(()=>(0,x.LZ)(e)))).filter(e=>"fulfilled"===e.status).map(e=>e.value).map(e=>(Object.keys(e).forEach(t=>{t.startsWith("_lavender_data_")&&delete e[t]}),e));ef(e=>[...e,...t]),em(Object.keys(t[0])),ev(!1)},[]);return(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)(p.Zp,{className:"w-full",children:[(0,a.jsxs)(p.Wu,{children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2 max-w-[640px] mb-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-2",children:[(0,a.jsx)(A.J,{children:"Shardsets"}),(0,a.jsx)(m.K,{value:U,onChange:X,label:"Select shardsets",className:"col-span-3 w-full"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-2",children:[(0,a.jsx)(A.J,{children:"Pipelines"}),(0,a.jsxs)("div",{className:"flex gap-2 col-span-3",children:[(0,a.jsx)(G,{icon:(0,a.jsx)(n.A,{className:"h-4 w-4"}),label:"Filters",specs:v,selected:k,setSelected:w,argsState:F,onArgsStateChange:J}),(0,a.jsx)(G,{icon:(0,a.jsx)(i.A,{className:"h-4 w-4"}),label:"Categorizer",specs:j,selected:O,setSelected:T,argsState:I,onArgsStateChange:M,singleSelect:!0}),(0,a.jsx)(G,{icon:(0,a.jsx)(c.A,{className:"h-4 w-4"}),label:"Collater",specs:b,selected:H,setSelected:R,argsState:q,onArgsStateChange:Q,singleSelect:!0}),(0,a.jsx)(G,{icon:(0,a.jsx)(d.A,{className:"h-4 w-4"}),label:"Preprocessors",specs:S,selected:$,setSelected:D,argsState:W,onArgsStateChange:Z})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-2",children:[(0,a.jsx)(A.J,{children:"Shuffle"}),(0,a.jsxs)("div",{className:"col-span-3 w-full flex items-center gap-4",children:[(0,a.jsx)(L,{checked:ea,onCheckedChange:er}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(A.J,{htmlFor:"shuffle-block-size",className:"text-right ".concat(ea?"":"text-muted-foreground"),children:"Block Size"}),(0,a.jsx)(z.p,{id:"shuffle-block-size",type:"number",value:ei,onChange:e=>ec(parseInt(e.target.value)||0),min:1,disabled:!ea})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(A.J,{htmlFor:"shuffle-seed",className:"text-right ".concat(ea?"":"text-muted-foreground"),children:"Seed"}),(0,a.jsx)(z.p,{id:"shuffle-seed",type:"number",value:el,onChange:e=>en(parseInt(e.target.value)||0),disabled:!ea})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-2",children:[(0,a.jsx)(A.J,{children:"Settings"}),(0,a.jsx)("div",{className:"col-span-3",children:(0,a.jsxs)(C.lG,{children:[(0,a.jsx)(C.zM,{asChild:!0,children:(0,a.jsxs)(_.$,{variant:"outline",children:[(0,a.jsx)(o.A,{className:"h-4 w-4"}),"Settings"]})}),(0,a.jsxs)(C.Cf,{children:[(0,a.jsx)(C.L3,{children:"Settings"}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-2",children:[(0,a.jsx)(A.J,{children:"Batch Size"}),(0,a.jsx)(z.p,{min:0,type:"number",value:ed,onChange:e=>eo(parseInt(e.target.value)||0)})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-2",children:[(0,a.jsx)(A.J,{children:"Max Retry Count"}),(0,a.jsx)(z.p,{min:0,type:"number",value:Y,onChange:e=>ee(parseInt(e.target.value)||0)})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-2",children:[(0,a.jsx)(A.J,{children:"Skip On Failure"}),(0,a.jsx)(L,{checked:et,onCheckedChange:es})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-2",children:[(0,a.jsx)(A.J,{children:"No Cache"}),(0,a.jsx)(L,{checked:eu,onCheckedChange:eh})]})]})]})})]})]}),(0,a.jsx)(y,{className:"text-sm",language:"python",code:'\nimport lavender_data.client as lavender\n\nlavender.init(\n    api_url="'.concat(t,'",').concat(s?'\n    api_key="'.concat(s,'",'):"",'\n)\n\ndataloader = lavender.LavenderDataLoader(\n    "').concat(N,'",').concat(eN,"\n)")})]}),(0,a.jsx)(p.wL,{children:(0,a.jsxs)(_.$,{onClick:ek,disabled:ep,children:[ep?(0,a.jsx)(u.A,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(h.A,{className:"h-4 w-4"}),"Start Iteration"]})})]}),(0,a.jsxs)(p.Zp,{children:[(0,a.jsx)(p.Wu,{children:(0,a.jsx)(E.default,{datasetId:N,samples:eg,fetchedColumns:ex})}),(0,a.jsx)(p.wL,{children:eg.length>0&&(0,a.jsxs)(_.$,{onClick:()=>ej&&ew(ej),disabled:ep,children:[ep?(0,a.jsx)(u.A,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(g.A,{className:"h-4 w-4"}),"Load More"]})})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2300,2968,4006,3228,543,1361,3585,9632,813,5236,7358],()=>t(37412)),_N_E=e.O()}]);