(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7137],{24033:(e,s,a)=>{"use strict";a.d(s,{y:()=>t});var l=a(4517);let t=(0,l.createServerReference)("7068837a5fe2484487a0cd1d4974b70f7984ba407e",l.callServer,void 0,l.findSourceMapURL,"updateColumn")},43737:(e,s,a)=>{Promise.resolve().then(a.bind(a,8550)),Promise.resolve().then(a.t.bind(a,14290,23)),Promise.resolve().then(a.bind(a,80792)),Promise.resolve().then(a.bind(a,85314)),Promise.resolve().then(a.bind(a,47866)),Promise.resolve().then(a.bind(a,23309))},47866:(e,s,a)=>{"use strict";a.d(s,{SelectColumnType:()=>d});var l=a(42227),t=a(94185),n=a(24033),i=a(49139),r=a(41458);let c=[{value:"string",label:"string"},{value:"int64",label:"int64"},{value:"int32",label:"int32"},{value:"float",label:"float"},{value:"double",label:"double"},{value:"bool",label:"bool"},{value:"binary",label:"binary"},{value:"list",label:"list"},{value:"map",label:"map"}];function d(e){let{column:s,datasetId:a}=e,[d,o]=(0,i.useState)(s.type),[h,u]=(0,i.useState)(!1),[m,x]=(0,i.useState)(!1),v=(0,i.useCallback)(e=>{o(e),x(!0)},[]),p=(0,i.useCallback)(()=>{u(!0),(0,n.y)(a,s.id,{type:d}).then(()=>{u(!1)}).catch(()=>{u(!1)})},[a,s.id,d]);return(0,l.jsxs)(r.Lt,{open:m,onOpenChange:x,children:[(0,l.jsxs)(t.l6,{value:s.type,onValueChange:v,disabled:h,children:[(0,l.jsx)(t.bq,{className:"font-mono text-xs",children:(0,l.jsx)(t.yv,{placeholder:"Select a type"})}),(0,l.jsx)(t.gC,{children:c.map(e=>(0,l.jsx)(t.eb,{value:e.value,className:"font-mono text-xs",children:e.label},e.value))})]}),(0,l.jsxs)(r.EO,{children:[(0,l.jsxs)(r.wd,{children:[(0,l.jsx)(r.r7,{children:"Are you sure?"}),(0,l.jsx)(r.$v,{children:"This action cannot be undone."})]}),(0,l.jsxs)(r.ck,{children:[(0,l.jsx)(r.Zr,{children:"Cancel"}),(0,l.jsx)(r.Rx,{onClick:p,children:"Continue"})]})]})]})}},80792:(e,s,a)=>{"use strict";a.d(s,{AddShardsetDialog:()=>f});var l=a(42227),t=a(49139),n=a(10394),i=a(27702),r=a(28527),c=a(86722),d=a(15568),o=a(30194),h=a(70709),u=a(3949),m=a(75571),x=a(64825),v=a(65133),p=a(4517);let j=(0,p.createServerReference)("60e49b3883dafa994d21274b682480d5af48153456",p.callServer,void 0,p.findSourceMapURL,"createShardset");function b(){let{pending:e}=(0,c.useFormStatus)();return(0,l.jsx)(h.$,{type:"submit",disabled:e,children:e?"Saving...":"Save"})}function g(e){var s;let{index:a,columns:t,setColumns:n}=e;return(0,l.jsx)("div",{className:"my-4",children:(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,l.jsx)(x.J,{htmlFor:"column-name-"+a,children:"Name"}),(0,l.jsx)(m.p,{id:"column-name-"+a,className:"col-span-3",placeholder:"caption",required:!0,value:t[a].name,onChange:e=>n(t.map((s,l)=>l===a?{...s,name:e.target.value}:s))})]}),(0,l.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,l.jsx)(x.J,{htmlFor:"column-type-"+a,children:"Type"}),(0,l.jsx)(m.p,{id:"column-type-"+a,className:"col-span-3",placeholder:"text",required:!0,value:t[a].type,onChange:e=>n(t.map((s,l)=>l===a?{...s,type:e.target.value}:s))})]}),(0,l.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,l.jsxs)(x.J,{className:"flex flex-col items-start gap-0",htmlFor:"column-description-"+a,children:[(0,l.jsx)("div",{children:"Description"}),(0,l.jsx)("div",{className:"text-xs text-muted-foreground",children:"(Optional)"})]}),(0,l.jsx)(m.p,{id:"column-description-"+a,className:"col-span-3",placeholder:"A caption for the image",value:null!==(s=t[a].description)&&void 0!==s?s:"",onChange:e=>n(t.map((s,l)=>l===a?{...s,description:e.target.value}:s))})]})]})})}function f(e){let{datasetId:s,children:a}=e,[c,p]=(0,t.useState)(""),[f,y]=(0,t.useState)([]),[N,C]=(0,t.useState)(!1),S=(0,t.useRef)(null),k=async e=>{e.set("columnsJson",JSON.stringify(f));let a=await j(s,e);if(a.success){var l;r.oR.success("Shardset added successfully"),C(!1),p(""),y([]),null===(l=S.current)||void 0===l||l.reset()}else r.oR.error("Failed to add shardset: ".concat(a.error))};return(0,l.jsxs)(u.lG,{open:N,onOpenChange:C,children:[(0,l.jsx)(u.zM,{asChild:!0,children:a}),(0,l.jsxs)(u.Cf,{className:"sm:max-w-[425px]",children:[(0,l.jsxs)(u.c7,{children:[(0,l.jsx)(u.L3,{children:"New shardset"}),(0,l.jsx)(u.rr,{children:"Add a new shardset with columns to the dataset."})]}),(0,l.jsxs)("form",{ref:S,action:k,children:[(0,l.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,l.jsx)("div",{className:"text-lg mt-2",children:"Shardset"}),(0,l.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,l.jsx)(x.J,{htmlFor:"location",className:"text-right",children:"Location"}),(0,l.jsx)(m.p,{id:"location",name:"location",className:"col-span-3",placeholder:"s3://bucket/path/to/shardset/",required:!0,value:c,onChange:e=>p(e.target.value)})]}),(0,l.jsxs)("div",{className:"text-lg mt-2 flex gap-2 items-center",children:[(0,l.jsx)("div",{children:"Columns"}),(0,l.jsx)(v.F,{icon:(0,l.jsx)(n.A,{className:"w-4 h-4"}),content:(0,l.jsxs)("p",{children:["If you have at least one shard in the location, the columns will be inferred from the shard. ",(0,l.jsx)("br",{}),"Please specify columns if you want to override them or if you don't have any shards yet."]})})]}),(0,l.jsx)(d.F,{className:"max-h-[200px]",children:f.map((e,s)=>(0,l.jsxs)("div",{children:[(0,l.jsx)(g,{index:s,columns:f,setColumns:y}),(0,l.jsx)(o.w,{className:"my-2"})]},s))}),(0,l.jsxs)(h.$,{type:"button",variant:"outline",onClick:()=>y([...f,{name:"",type:""}]),children:[(0,l.jsx)(i.A,{}),"Add Column"]})]}),(0,l.jsx)(u.Es,{children:(0,l.jsx)(b,{})})]})]})]})}},85314:(e,s,a)=>{"use strict";a.d(s,{InputColumnDescription:()=>h});var l=a(42227),t=a(24033),n=a(49139),i=a(75571),r=a(70709),c=a(67096);let d=(0,c.A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),o=(0,c.A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);function h(e){var s;let{column:a,datasetId:c}=e,[h,u]=(0,n.useState)(!1),[m,x]=(0,n.useState)(null!==(s=a.description)&&void 0!==s?s:""),[v,p]=(0,n.useState)(!1),j=(0,n.useCallback)(()=>{p(!0),(0,t.y)(c,a.id,{description:m}).then(()=>{p(!1),u(!1)}).catch(()=>{p(!1),u(!1)})},[c,a.id,m]);return(0,l.jsxs)("div",{className:"flex justify-between items-center gap-2",children:[h?(0,l.jsx)(i.p,{value:m,onChange:e=>x(e.target.value)}):(0,l.jsx)("div",{children:a.description}),h?(0,l.jsx)(r.$,{onClick:j,disabled:v,variant:"outline",size:"icon",children:(0,l.jsx)(d,{})}):(0,l.jsx)(r.$,{onClick:()=>u(!0),disabled:v,variant:"outline",size:"icon",children:(0,l.jsx)(o,{})})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[4452,1701,3228,4006,4290,8527,543,4249,7756,2056,813,5236,7358],()=>s(43737)),_N_E=e.O()}]);