(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9760],{6788:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>M});var s=t(42227),l=t(49139),n=t(14290),r=t.n(n),i=t(67096);let c=(0,i.A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var u=t(84606),o=t(27058),m=t(70709);function d(e){let{className:a,...t}=e;return(0,s.jsx)("nav",{role:"navigation","aria-label":"pagination","data-slot":"pagination",className:(0,o.cn)("mx-auto flex w-full justify-center",a),...t})}function h(e){let{className:a,...t}=e;return(0,s.jsx)("ul",{"data-slot":"pagination-content",className:(0,o.cn)("flex flex-row items-center gap-1",a),...t})}function x(e){let{...a}=e;return(0,s.jsx)("li",{"data-slot":"pagination-item",...a})}function p(e){let{className:a,isActive:t,size:l="icon",...n}=e;return(0,s.jsx)(r(),{"aria-current":t?"page":void 0,"data-slot":"pagination-link","data-active":t,className:(0,o.cn)((0,m.r)({variant:t?"outline":"ghost",size:l}),a),...n})}function f(e){let{className:a,...t}=e;return(0,s.jsxs)(p,{"aria-label":"Go to previous page",size:"default",className:(0,o.cn)("gap-1 px-2.5 sm:pl-2.5",a),...t,children:[(0,s.jsx)(c,{}),(0,s.jsx)("span",{className:"hidden sm:block",children:"Previous"})]})}function g(e){let{className:a,...t}=e;return(0,s.jsxs)(p,{"aria-label":"Go to next page",size:"default",className:(0,o.cn)("gap-1 px-2.5 sm:pr-2.5",a),...t,children:[(0,s.jsx)("span",{className:"hidden sm:block",children:"Next"}),(0,s.jsx)(u.A,{})]})}let j=(0,i.A)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);var v=t(75571);let N=e=>{let{buttonCount:a,totalPages:t,currentPage:s}=e,l=Math.max(0,s-s%a);return Array.from({length:Math.min(t,l+a)-l},(e,a)=>l+a)};function w(e){let{buttonCount:a,totalPages:t,currentPage:n,pageHref:i}=e,[c,u]=(0,l.useState)(n);(0,l.useEffect)(()=>{u(n)},[n]);let o=N({buttonCount:a,totalPages:t,currentPage:n}),w=o[0],b=o[o.length-1],k=e=>i.replace("{page}","".concat(e));return(0,s.jsx)(d,{children:(0,s.jsxs)(h,{children:[w>0&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(x,{children:(0,s.jsx)(f,{href:k(w-a)})})}),o.map(e=>(0,s.jsx)(x,{children:(0,s.jsx)(p,{href:k(e),isActive:n===e,children:e+1})},e)),t>b&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(x,{children:(0,s.jsx)(g,{href:k(b+1)})})}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,s.jsx)("div",{children:(0,s.jsx)(v.p,{className:"w-24 text-right",type:"number",min:1,max:t+1,value:c+1,onChange:e=>u(Number(e.target.value)-1)})}),(0,s.jsx)("div",{children:"/"}),(0,s.jsx)("div",{children:t}),(0,s.jsx)(r(),{href:k(c),children:(0,s.jsx)(m.$,{variant:"outline",size:"icon",children:(0,s.jsx)(j,{className:"w-4"})})})]})]})})}var b=t(23309),k=t(42031),S=t(61528),y=t(73175),A=t(27908),C=t(11201),_=t(94618);let E=e=>{{let a=localStorage.getItem("columns-".concat(e));if(a)return JSON.parse(a)}return[]},P=(e,a)=>{localStorage.setItem("columns-".concat(e),JSON.stringify(a))};function M(e){let{}=e,{dataset_id:a}=(0,y.useParams)(),t=(0,y.useSearchParams)(),n=(0,y.useRouter)(),r=Number(t.get("preview_page"))||0,i=Number(r),[c,u]=(0,l.useState)(0),[o,d]=(0,l.useState)([]),[h,x]=(0,l.useState)(null),[p,f]=(0,l.useState)(null),[g,j]=(0,l.useState)(null),[v,N]=(0,l.useState)(0);return((0,l.useEffect)(()=>{x(null),f(null),j(null),N(0),d([]),u(0),(0,S.X5)(a,20*r,20).then(e=>{j(e.preview_id)})},[a,r,20]),(0,l.useEffect)(()=>{g&&(0,S.B$)(a,g).then(e=>{let t=Math.ceil(e.total/20),s=e.columns.map(e=>e.name),l=E(a);x(e),u(t),0===l.length?d(s.map(e=>({name:e,selected:!0}))):d(l)}).catch(e=>{e.message.includes("400")?setTimeout(()=>N(e=>e+1),100):f(e.message)})},[a,g,v]),(0,l.useEffect)(()=>{o.length>0&&(n.push("/datasets/".concat(a,"/preview?preview_page=").concat(i)),P(a,o))},[o]),p)?(0,s.jsx)(b.ErrorCard,{error:"Preview is not available for this dataset. ".concat(p||"")}):h?(0,s.jsxs)(k.Zp,{className:"w-full",children:[(0,s.jsxs)(k.Wu,{className:"w-full",children:[(0,s.jsx)("div",{className:"w-full flex justify-start mb-4",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(C.K,{label:"Columns",placeholder:"Search columns...",emptyText:"No columns found",draggable:!0,value:o.map(e=>({label:e.name,value:e.name,selected:e.selected})),onChange:e=>d(e.map(e=>({name:e.value,selected:e.selected})))}),(0,s.jsx)(m.$,{variant:"outline",onClick:()=>d(h.columns.map(e=>({name:e.name,selected:!0}))),children:"Reset"})]})}),(0,s.jsx)(_.A,{samples:h.samples,columns:o.filter(e=>e.selected).map(e=>e.name)})]}),(0,s.jsx)(k.wL,{className:"w-full flex justify-center",children:(0,s.jsx)(w,{buttonCount:10,totalPages:c,currentPage:i,pageHref:"/datasets/".concat(a,"/preview?preview_page={page}")})})]}):(0,s.jsxs)("div",{className:"w-full flex gap-2 p-4 justify-center items-center text-muted-foreground",children:[(0,s.jsx)(A.A,{className:"w-4 h-4 animate-spin"}),(0,s.jsx)("div",{className:"text-sm",children:"Loading..."})]})}},42588:(e,a,t)=>{Promise.resolve().then(t.bind(t,6788))},84606:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(67096).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])}},e=>{var a=a=>e(e.s=a);e.O(0,[2300,2968,4006,4290,3228,543,1390,7502,813,5236,7358],()=>a(42588)),_N_E=e.O()}]);