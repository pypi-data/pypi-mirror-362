"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9470],{9470:function(e,s,t){t.r(s),t.d(s,{Layout:function(){return N}});var r=t(5893),n=t(7294),a=t(5675),c=t.n(a),l=t(1163),i=t(1664),o=t.n(i),h=t(3850),d=t(355),x=t(6021),u=t(3225),m=t(6989),f=t(3001);let p=(0,n.createContext)(null);function j(e){let{children:s}=e,[t,a]=(0,n.useState)(!0),[c,l]=(0,n.useState)(null),[i,o]=(0,n.useState)(null),h=window.location.origin,d="".concat(h).concat(u.f4);return(0,n.useEffect)(()=>{fetch("".concat(d,"/api/health")).then(e=>e.json()).then(e=>{e.user&&e.user.name&&(l(e.user.name),(async()=>{try{let e=await fetch("".concat(d,"/users/role"));if(e.ok){let s=await e.json();s.role&&o(s.role)}}catch(e){console.log("Could not fetch user role:",e)}})())}).catch(e=>{console.error("Error fetching user data:",e)})},[d]),(0,r.jsx)(p.Provider,{value:{isSidebarOpen:t,toggleSidebar:()=>{a(e=>!e)},userEmail:c,userRole:i},children:s})}function g(){let e,s;let t=(0,l.useRouter)(),a=(0,f.X)(),{userEmail:i,userRole:j}=function(){let e=(0,n.useContext)(p);if(!e)throw Error("useSidebar must be used within a SidebarProvider");return e}(),[g,b]=(0,n.useState)(!1),N=(0,n.useRef)(null);(0,n.useEffect)(()=>{function e(e){N.current&&!N.current.contains(e.target)&&b(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[N]);let y=e=>"/workspaces"===e?t.pathname.startsWith("/workspaces")||t.pathname.startsWith("/workspace"):t.pathname.startsWith(e),w=e=>{let s=y(e);return"inline-flex items-center border-b-2 ".concat(s?"border-transparent text-blue-600":"border-transparent hover:text-blue-600"," ").concat(a?"px-2 py-1":"px-1 pt-1 space-x-2")};return(0,r.jsx)("div",{className:"fixed top-0 left-0 right-0 bg-white z-30 h-14 px-4 border-b border-gray-200 shadow-sm",children:(0,r.jsxs)("div",{className:"flex items-center h-full",children:[(0,r.jsx)("div",{className:"flex items-center ".concat(a?"space-x-2 mr-2":"space-x-4 mr-6"),children:(0,r.jsx)(o(),{href:"/",className:"flex items-center px-1 pt-1 h-full",prefetch:!1,children:(0,r.jsx)("div",{className:"h-20 w-20 flex items-center justify-center",children:(0,r.jsx)(c(),{src:"".concat(u.GW,"/skypilot.svg"),alt:"SkyPilot Logo",width:80,height:80,priority:!0,className:"w-full h-full object-contain"})})})}),(0,r.jsxs)("div",{className:"flex items-center ".concat(a?"space-x-1":"space-x-2 md:space-x-4"," ").concat(a?"mr-2":"mr-6"),children:[(0,r.jsxs)(o(),{href:"/clusters",className:w("/clusters"),prefetch:!1,children:[(0,r.jsx)(h.QT,{className:"w-4 h-4"}),!a&&(0,r.jsx)("span",{children:"Clusters"})]}),(0,r.jsxs)(o(),{href:"/jobs",className:w("/jobs"),prefetch:!1,children:[(0,r.jsx)(h.Vp,{className:"w-4 h-4"}),!a&&(0,r.jsx)("span",{children:"Jobs"})]}),(0,r.jsxs)(o(),{href:"/volumes",className:w("/volumes"),prefetch:!1,children:[(0,r.jsx)(h.eU,{className:"w-4 h-4"}),!a&&(0,r.jsx)("span",{children:"Volumes"})]}),(0,r.jsx)("div",{className:"border-l border-gray-200 h-6 mx-1"}),(0,r.jsxs)(o(),{href:"/infra",className:w("/infra"),prefetch:!1,children:[(0,r.jsx)(h.PC,{className:"w-4 h-4"}),!a&&(0,r.jsx)("span",{children:"Infra"})]}),(0,r.jsxs)(o(),{href:"/workspaces",className:w("/workspaces"),prefetch:!1,children:[(0,r.jsx)(h.E9,{className:"w-4 h-4"}),!a&&(0,r.jsx)("span",{children:"Workspaces"})]}),(0,r.jsxs)(o(),{href:"/users",className:w("/users"),prefetch:!1,children:[(0,r.jsx)(h.oy,{className:"w-4 h-4"}),!a&&(0,r.jsx)("span",{children:"Users"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-1 ".concat(a?"ml-0":"ml-auto"),children:[(0,r.jsx)(m.WH,{content:"Documentation",className:"text-sm text-muted-foreground",children:(0,r.jsxs)("a",{href:"https://skypilot.readthedocs.io/en/latest/",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-2 py-1 text-gray-600 hover:text-blue-600 transition-colors duration-150 cursor-pointer",title:"Docs",children:[!a&&(0,r.jsx)("span",{className:"mr-1",children:"Docs"}),(0,r.jsx)(h.h0,{className:"".concat(a?"w-4 h-4":"w-3.5 h-3.5")})]})}),(0,r.jsx)(m.WH,{content:"GitHub Repository",className:"text-sm text-muted-foreground",children:(0,r.jsx)("a",{href:"https://github.com/skypilot-org/skypilot",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center p-2 rounded-full text-gray-600 hover:bg-gray-100 transition-colors duration-150 cursor-pointer",title:"GitHub",children:(0,r.jsx)(h.fy,{className:"".concat(a?"w-4 h-4":"w-5 h-5")})})}),(0,r.jsx)(m.WH,{content:"Join Slack",className:"text-sm text-muted-foreground",children:(0,r.jsx)("a",{href:"https://slack.skypilot.co/",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center p-2 rounded-full text-gray-600 hover:bg-gray-100 transition-colors duration-150 cursor-pointer",title:"Slack",children:(0,r.jsx)(h.mU,{className:"".concat(a?"w-4 h-4":"w-5 h-5")})})}),(0,r.jsx)(m.WH,{content:"Leave Feedback",className:"text-sm text-muted-foreground",children:(0,r.jsx)("a",{href:"https://github.com/skypilot-org/skypilot/issues/new",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center p-2 rounded-full text-gray-600 hover:bg-gray-100 transition-colors duration-150 cursor-pointer",title:"Leave Feedback",children:(0,r.jsx)(h.aD,{className:"".concat(a?"w-4 h-4":"w-5 h-5")})})}),(0,r.jsx)("div",{className:"border-l border-gray-200 h-6"}),(0,r.jsx)(m.WH,{content:"Configuration",className:"text-sm text-muted-foreground",children:(0,r.jsx)(o(),{href:"/config",className:"inline-flex items-center justify-center p-2 rounded-full transition-colors duration-150 cursor-pointer ".concat(y("/config")?"text-blue-600 hover:bg-gray-100":"text-gray-600 hover:bg-gray-100"),title:"Configuration",prefetch:!1,children:(0,r.jsx)(d.Z,{className:"".concat(a?"w-4 h-4":"w-5 h-5")})})}),i&&(0,r.jsxs)("div",{className:"relative",ref:N,children:[(0,r.jsx)("button",{onClick:()=>b(!g),className:"inline-flex items-center justify-center rounded-full transition-colors duration-150 cursor-pointer hover:ring-2 hover:ring-blue-200",title:"User Profile",children:(0,r.jsx)("div",{className:"".concat(a?"w-6 h-6":"w-7 h-7"," bg-blue-600 text-white rounded-full flex items-center justify-center font-medium ").concat(a?"text-xs":"text-sm"," hover:bg-blue-700 transition-colors"),children:i?i.includes("@")?i.split("@")[0].charAt(0).toUpperCase():i.charAt(0).toUpperCase():"?"})}),g&&(0,r.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-50 border border-gray-200",children:[(e=i,s=null,i&&i.includes("@")&&(e=i.split("@")[0],s=i),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"px-4 pt-2 pb-1 text-sm font-medium text-gray-900",children:e}),s&&(0,r.jsx)("div",{className:"px-4 pt-0 pb-1 text-xs text-gray-500",children:s}),j&&(0,r.jsx)("div",{className:"px-4 pt-0 pb-2 text-xs",children:"admin"===j?(0,r.jsxs)("span",{className:"inline-flex items-center text-blue-600",children:[(0,r.jsx)(h.r7,{className:"w-3 h-3 mr-1"}),"Admin"]}):(0,r.jsxs)("span",{className:"inline-flex items-center text-gray-600",children:[(0,r.jsx)(x.Z,{className:"w-3 h-3 mr-1"}),"User"]})})]})),(0,r.jsx)("div",{className:"border-t border-gray-200 mx-1 my-1"}),(0,r.jsx)(o(),{href:"/users",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-blue-600",onClick:()=>b(!1),prefetch:!1,children:"See all users"})]})]})]})]})})}function b(e){let{children:s,highlighted:t}=e;return(0,f.X)(),(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("div",{className:"fixed top-0 left-0 right-0 z-50 shadow-sm",children:(0,r.jsx)(g,{})}),(0,r.jsx)("div",{className:"transition-all duration-200 ease-in-out min-h-screen",style:{paddingTop:"56px"},children:(0,r.jsx)("main",{className:"p-6",children:s})})]})}function N(e){return(0,r.jsx)(j,{children:(0,r.jsx)(b,{...e})})}}}]);